<?xml version="1.0"?>
<xtml version="1.0" xmlns="urn:www.pactolus.com:xtml" >
  <global-handlers/>
  <global-vars >
    <var name="g_bDoNotEnableEvents" type="boolean" >0</var>
  </global-vars>
  <functions >
    <function name="PrepaidAPIAuthenticatePin" start="4" event="PrepaidAPIAuthenticatePin" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oSUB" type="object" pass="byref"/>
        <parameter name="p_oCC" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="bTrue" type="boolean" >1</var>
        <var name="f_strUsedDefaultAccessNum" type="string" >F</var>
        <var name="sTemp" type="string" ></var>
      </local-vars>
      <actions >
        <action id="4" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=122 y=292 ?>
          <!--authenticatePin()-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceAuthenticate&quot;" method="&quot;authenticatePin&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strLocalHost</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDBSessionId</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strStrippedOrigNumber</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strUserPin</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strPinPassword</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nMaxLoginAttempts</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nOrigCountryId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strUsedDefaultANIFlag</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nAccessNumberId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOrigDomIntFlag</parameter>
            <parameter type="in" var-type="string" >f_strUsedDefaultAccessNum</parameter>
            <parameter type="inout" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="inout" var-type="float" >p_oSUB.fPrepaidBalance</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strPinLanguage</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nServiceId</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nNumberLoginAttempts</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nWarningThreshold1</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nWarningThreshold2</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nWarningThreshold3</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nMinBillingDurationInSec</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nRoundingSeconds</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nExpirationType</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nPinLockFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nPrimaryOfferingId</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nCurrencyId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPhoneMeFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strSubRestrictionsFlag</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strPlayBalanceFlag</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strPlayTimeAvailableFlag</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strFirstCallFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nRoundingThreshold</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nNumExpDays</parameter>
            <parameter type="inout" var-type="float" >p_oSUB.fCallMarkupPercent</parameter>
            <parameter type="inout" var-type="string" >p_oCC.strRechargableFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nDisabledReasonCode</parameter>
            <parameter type="in" var-type="boolean" >bTrue</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nMaxPartiesAllowed</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPrimaryRouteCode</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nDialingPlanId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOriginationType</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bIVRCallbackAllowed</parameter>
            <parameter type="inout" var-type="boolean" >p_oSUB.bCallbackNumberEnable</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strCallbackNumber</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bRateByAccessNumber</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bApplyPrecallRounding</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bAnnounceCurrencyAsUnits</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bLastCallRedial</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bSvcDirectCallFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nLongCallInterval</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nMaxRedialsAllowed</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nSvcDirectCallIdLength</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strAllowZeroCostFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strOutboundCIC</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strSharedUseBillingFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nCommitInterval</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nBillingLevel</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nCurrencyPrecision</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bRateBySequence</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strValidateByANI</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strCustomRatesFlag</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bFirstBilledAsFirstUse</parameter>
            <parameter type="inout" var-type="i8" >p_oAPI.lExpDateMs</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bIvrAniReg</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strBillingId</parameter>
            <parameter type="inout" var-type="boolean" >p_oSUB.bFirstUse</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="5" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START Prepaid AuthenticateSub *********");

if(Session.p_oAPI.bUsedDefaultAccessNum) {

	Session.f_strUsedDefaultAccessNum = "T";

}]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*********JAVA RETURN*********");

Server.logInfo("Prepaid AuthenticateSub returned " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=451 y=271 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API PREPAID AUTHENTICATE PIN, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=454 y=464 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
        <action id="5" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=292 y=388 ?>
          <!--Get Branding Prompts-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;psAPIGetBrandingPrompts&quot;" return="" external-function="0" library="" >
            <parameter >p_oAPI</parameter>
            <parameter >p_oSUB</parameter>
          </function>
          <results >
            <result name="Default" link="3" stubbed="0"/>
          </results>
        </action>
      </actions>
    </function>
    <function name="psAPIAuthorizeDestination" start="4" event="psAPIAuthorizeDestination" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oRATE" type="object" pass="byref"/>
        <parameter name="p_oSUB" type="object" pass="byref"/>
        <parameter name="p_oCallLegB" type="object" pass="byref"/>
        <parameter name="p_oCallLegA" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
        <var name="bCardServices" type="boolean" >1</var>
        <var name="bOnNet" type="boolean" >0</var>
        <var name="RT_ON_NET" type="i4" >1</var>
      </local-vars>
      <actions >
        <action id="4" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=177 y=132 ?>
          <!--psAPIAuthorizeDestination()-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceAuthDest&quot;" method="&quot;authorizeDestination&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDBSessionId</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nServiceId</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strStrippedOrigNumber</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDestinationNumber</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nCallSequence</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPayPhoneFlag</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nDialingPlanId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nMinBillingDurationInSec</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nRoundingSeconds</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOrigDomIntFlag</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nOrigCountryId</parameter>
            <parameter type="in" var-type="float" >p_oSUB.fPrepaidBalance</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nAccessNumberId</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strFirstCallFlag</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nPrimaryOfferingId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPostPaidFlag</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lPinId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strRateCallsFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strCreditLimitFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strCreditLimitFlagFirm</parameter>
            <parameter type="in" var-type="float" >p_oAPI.fCreditLimit</parameter>
            <parameter type="in" var-type="float" >p_oAPI.fCreditUsed</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strCustomerCode</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strSubRestrictionsFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPhoneMeFlag</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nMaxAllowedSeconds</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nOrigRegionId</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strConfCallFlag</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fAlegMeteredRate</parameter>
            <parameter type="in" var-type="i8" >p_oCallLegA.lTimeAnswered</parameter>
            <parameter type="in" var-type="boolean" >p_oAPI.bALegCallback</parameter>
            <parameter type="inout" var-type="string" >p_oCallLegB.strOutdialDestNbr</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nSecondsAnnounce</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nSecondsAvailable</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nIntlOrigRateId</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fIntlOrigRateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nIntlDestRateId</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fIntlDestRateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nDomOrigAndDestRateId</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fDomOrigAndDestRateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nDomOrigAndDestTDWRateId</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fDomOrigAndDestTDWRateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nDomDestRateId</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fDomDestRateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nPayphone1RateId</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fPayphone1RateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nPayphone1RateType</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nPayphone2RateId</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fPayphone2RateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nPayphone2RateType</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nAccessNumberRateId</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fAccessNumberRateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nAccessNumberRateType</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nAccessNumberRate2Id</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fAccessNumberRate2Amt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nAccessNumberRate2Type</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nMeteredRateId1</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fMeteredRateAmt1</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nFixedRateId1</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fFixedRateAmt1</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nFirstUseRateId</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fFirstUseRateAmt</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fTotalMeteredRate</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fTotalFixedRate</parameter>
            <parameter type="inout" var-type="string" >p_oCallLegB.strDestDomIntlFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oCallLegB.nDestCountryId</parameter>
            <parameter type="inout" var-type="string" >p_oCallLegB.strDestCallingCode</parameter>
            <parameter type="inout" var-type="string" >p_oCallLegB.strDestAreaCode</parameter>
            <parameter type="inout" var-type="string" >p_oCallLegB.strEventId</parameter>
            <parameter type="inout" var-type="string" >p_oCallLegB.strStrippedDest</parameter>
            <parameter type="inout" var-type="string" >p_oRATE.strTieredRatesFlag</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fTier1RateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nTier2ThresholdSecs</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fTier2RateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nTier3ThresholdSecs</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fTier3RateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nBongCharge1Time</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fBongCharge1Amt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nBongCharge2Time</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fBongCharge2Amt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nBongCharge3Time</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fBongCharge3Amt</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fConnectionFee</parameter>
            <parameter type="inout" var-type="i4" >p_oCallLegB.nGracePeriod</parameter>
            <parameter type="inout" var-type="string" >p_oRATE.strExtBongsFlag</parameter>
            <parameter type="inout" var-type="string" >p_oRATE.strExtBongsNumCharges</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fBongAmount</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nExtBongInitialTimeSecs</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nExtBongIntervalSecs</parameter>
            <parameter type="inout" var-type="i4" >p_oCallLegB.nDestRegionId</parameter>
            <parameter type="in" var-type="boolean" >bCardServices</parameter>
            <parameter type="in" var-type="boolean" >bOnNet</parameter>
            <parameter type="in" var-type="boolean" >p_oAPI.bApplyPayphoneSurcharges</parameter>
            <parameter type="in" var-type="boolean" >p_oAPI.bRateByAccessNumber</parameter>
            <parameter type="in" var-type="boolean" >p_oAPI.bApplyPrecallRounding</parameter>
            <parameter type="in" var-type="boolean" >p_oAPI.bAnnounceCurrency</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bPctMaxCallDuration</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strAllowZeroCostFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nSecondsBalance</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nSecondsUsed</parameter>
            <parameter type="inout" var-type="boolean" >p_oSUB.bBucketOfRatesFlag</parameter>
            <parameter type="inout" var-type="i8" >p_oSUB.nTotalBucketSize</parameter>
            <parameter type="inout" var-type="i8" >p_oSUB.nBucketSize</parameter>
            <parameter type="inout" var-type="i8" >p_oSUB.nDailyUsageThreshold</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strBucketRefillWarningFlag</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strBucketExhaustWarningFlag</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strPlayBucketRefillWarning</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strPlayBucketExhaustWarning</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strFeatureCodeCallType</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strBucketRefillNotifyFlag</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strBucketExhaustNotifyFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strSharedUseBillingFlag</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nCommitInterval</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nBillingLevel</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lCorpAcctNumber</parameter>
            <parameter type="inout" var-type="i8" >p_oSUB.lReservationId</parameter>
            <parameter type="inout" var-type="i8" >p_oSUB.lBillingSessionId</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nReservedSeconds</parameter>
            <parameter type="in" var-type="boolean" >p_oAPI.bRateBySequence</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.nAccessNumberGroupId</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bNoAnnouncedChargeCall</parameter>
            <parameter type="inout" var-type="i8" >p_oSUB.lStoredBalanceId</parameter>
            <parameter type="inout" var-type="boolean" >p_oSUB.bLinked</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.sPlaySubBucketWarnFlag</parameter>
            <parameter type="inout" var-type="i8" >p_oRATE.lSubBucketRateId</parameter>
            <parameter type="inout" var-type="i8" >p_oSUB.lMinutesToNextBucketThreshold</parameter>
            <parameter type="inout" var-type="i8" >p_oSUB.lSecsToFirstBucketThreshold</parameter>
            <parameter type="inout" var-type="i8" >p_oSUB.lSecsBetweenBucketThresholds</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strCustomRatesFlag</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nCurrencyId</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lPlatformSessionStartTime</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nLocalGMTOffset</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strInfoDigits</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.npreCustRateFixedID</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fpreCustRateFixedAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.npreCustRateMeteredID</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fpreCustRateMeteredAmt</parameter>
            <parameter type="in" var-type="boolean" >p_oAPI.bOutdial</parameter>
            <parameter type="inout" var-type="boolean" >p_oRATE.bDualRating</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nSecondsUntilBillingCycle</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nOnPlanMeteredAlertMax</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nOffPlanAlertMax</parameter>
            <parameter type="in" var-type="boolean" >p_oSUB.bFirstBillCycleEn</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nOnPlanMeteredAlertCount</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nOffPlanAlertCount</parameter>
            <parameter type="inout" var-type="boolean" >p_oSUB.bFirstBillCycleFlag</parameter>
            <parameter type="inout" var-type="boolean" >p_oSUB.bPlayOnPlanMeteredAlert</parameter>
            <parameter type="inout" var-type="boolean" >p_oSUB.bPlayOffPlanAlert</parameter>
            <parameter type="inout" var-type="boolean" >p_oSUB.bPlayFirstBillCycle</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strBillingId</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START Prepaid AuthorizeDestination *********");

if( null != Session.p_oAPI.strBroadbandCallingFlag && "T" == Session.p_oAPI.strBroadbandCallingFlag ) {

	Session.bCardServices = false ;

	if( Session.RT_ON_NET == Clib.atoi(Session.p_oCallLegB.strDestRouteType) ) {

		Session.bOnNet = true ;

	}

}

]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*********JAVA RETURN*********");

Server.logInfo("Prepqaid AuthorizeDest returned " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=481 y=78 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API AUTHORIZE DESTINATION , EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=494 y=243 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="psAPIProcCallCompletion" start="4" event="psAPIProcCallCompletion" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oSUB" type="object" pass="byref"/>
        <parameter name="p_oCallLegA" type="object"/>
        <parameter name="p_oCallLegB" type="object" pass="byref"/>
        <parameter name="p_oRATE" type="object" pass="byref"/>
        <parameter name="p_oACD" type="object"/>
        <parameter name="p_oArrayCallLegs" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
        <var name="f_bWriteCDR" type="boolean" >0</var>
        <var name="strBroadbandFlag" type="string" >F</var>
      </local-vars>
      <actions >
        <action id="4" plug-in="Pactolus.Branch.1" ><?xtml-editor x=231 y=308 ?>
          <!--write CDR?-->
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="f_bWriteCDR == true" link="6" stubbed="0" >f_bWriteCDR == true</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[js_disable_event();





if (Session.p_oAPI.strProcDBName.length > 0)

{

	Session.f_bWriteCDR = true;

}

else

{

	Session.f_bWriteCDR = false;

	Server.logError("ERROR: FAIL TO CALL PROC CALL COMPLETION, NO DB NAME.");

	Server.logError("ERROR: p_oAPI.strProcDBName.length is: " + Session.p_oAPI.strProcDBName.length);

	if (Session.p_oAPI.lTimeAnswered > 0)

	{

		var myTime;

		

		Server.logError("ERROR: FAIL TO CALL PROC CALL COMPLETION, ANSWER TIMER GREATER THAN ZERO.");

		Server.logError("ERROR: p_oAPI.lPlatformSessionStartTime is: " + Session.p_oAPI.lPlatformSessionStartTime);

		myTime = new Date(Session.p_oAPI.lPlatformSessionStartTime * 1000);

		Server.logError("ERROR: p_oAPI.lPlatformSessionStartTime is: " + myTime.toString() );

		

		Server.logError("ERROR: p_oAPI.lTimeStart is: " + Session.p_oAPI.lTimeStart);

		myTime = new Date(Session.p_oAPI.lTimeStart * 1000);

		Server.logError("ERROR: p_oAPI.lTimeStart is: " + myTime.toString() );

		

		Server.logError("ERROR: p_oAPI.lTimeAnswered is: " + Session.p_oAPI.lTimeAnswered);

		myTime = new Date(Session.p_oAPI.lTimeAnswered * 1000);

		Server.logError("ERROR: p_oAPI.lTimeAnswered is: " + myTime.toString() );

		

		Server.logError("ERROR: p_oAPI.lTimeEnded is: " + Session.p_oAPI.lTimeEnded);

		myTime = new Date(Session.p_oAPI.lTimeEnded * 1000);

		Server.logError("ERROR: p_oAPI.lTimeEnded is: " + myTime.toString() );

	}

}]]></script>
            <script language="javascript" timing="last" ><![CDATA[

	]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=477 y=257 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("Remove call leg from array");

Server.logInfo("Before remove, array.length is: " + Session.p_oArrayCallLegs.length);



for (var i = 0; i < Session.p_oArrayCallLegs.length; i++)

{	

	Server.logInfo("INDEX: " + i);

	js_logInfoCallLeg(Session.p_oArrayCallLegs[i]);

	Server.logInfo("INDEX: " + i + " HAS MS CONTENT: " + Session.p_oArrayCallLegs[i].oMS.strContent);

}





// Get index

if (Session.p_oArrayCallLegs.length > 0)

{

	var intIndex = js_search_callid(Session.p_oArrayCallLegs, Session.p_oCallLegB.strCallId);



	if(intIndex < 0) {

		Server.logError("ERROR FINDING CALL LEG <" + Session.p_oCallLegB.strCallId.toString() +"> IN ARRAY.");

	}

	else {

		js_new_remove_call_leg(Session.p_oArrayCallLegs, Session.p_oArrayCallLegs[intIndex].strCallId);

	}

}



Server.logInfo("After remove, array.length is: " + Session.p_oArrayCallLegs.length);

for (var i = 0; i < Session.p_oArrayCallLegs.length; i++)

{

	Server.logInfo("INDEX: " + i);

	js_logInfoCallLeg(Session.p_oArrayCallLegs[i]);

	Server.logInfo("INDEX: " + i + " HAS MS CONTENT: " + Session.p_oArrayCallLegs[i].oMS.strContent);

}

// This is set in callingcard.xml

if(Session.g_bDoNotEnableEvents) {

	Server.logInfo("Did not enable events here.");

} else {

	js_enable_event();

}	

Server.logError("ERROR: FAIL TO CALL API PROC CALL COMPLETION , EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=994 y=467 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("Remove call leg from array");

Server.logInfo("Before remove, array.length is: " + Session.p_oArrayCallLegs.length);



for (var i = 0; i < Session.p_oArrayCallLegs.length; i++)

{	

	Server.logInfo("INDEX: " + i);

	js_logInfoCallLeg(Session.p_oArrayCallLegs[i]);

	Server.logInfo("INDEX: " + i + " HAS MS CONTENT: " + Session.p_oArrayCallLegs[i].oMS.strContent);

}





// Get index

if (Session.p_oArrayCallLegs.length > 0)

{

	var intIndex = js_search_callid(Session.p_oArrayCallLegs, Session.p_oCallLegB.strCallId);



	if(intIndex < 0) {

		Server.logError("ERROR FINDING CALL LEG <" + Session.p_oCallLegB.strCallId.toString() +"> IN ARRAY.");

	}

	else {

		js_new_remove_call_leg(Session.p_oArrayCallLegs, Session.p_oArrayCallLegs[intIndex].strCallId);

	}

}



Server.logInfo("After remove, array.length is: " + Session.p_oArrayCallLegs.length);

for (var i = 0; i < Session.p_oArrayCallLegs.length; i++)

{

	Server.logInfo("INDEX: " + i);

	js_logInfoCallLeg(Session.p_oArrayCallLegs[i]);

	Server.logInfo("INDEX: " + i + " HAS MS CONTENT: " + Session.p_oArrayCallLegs[i].oMS.strContent);

}



// This is set in callingcard.xml

if(Session.g_bDoNotEnableEvents) {

	Server.logInfo("Did not enable events here.");

} else {

	js_enable_event();

}	]]></script>
          </scripts>
        </action>
        <action id="5" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=749 y=466 ?>
          <!--CallCompletion()-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceCallCompletion&quot;" method="&quot;procCallCompletion&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDBSessionId</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nCurrencyId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nMinBillingDurationInSec</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nRoundingSeconds</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nAccessNumberId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strInfoDigits</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strApplicationName</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lPlatformSessionStartTime</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strCallId</parameter>
            <parameter type="in" var-type="string" >p_oCallLegA.strFrom</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strTo</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strSIPStatus</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nRTPClockRate</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nRTPEncoding</parameter>
            <parameter type="in" var-type="i8" >p_oCallLegB.lTimeStart</parameter>
            <parameter type="in" var-type="i8" >p_oCallLegB.lTimeAnswered</parameter>
            <parameter type="in" var-type="i8" >p_oCallLegB.lTimeEnded</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nMode</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nCallTerminationReason</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strGWIPIngress</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nGWPortIngress</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strGWIPEgress</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nGWPortEgress</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nServiceId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strStrippedOrigNumber</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nOrigCountryId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOrigCallingCode</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOrigAreaCode</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strOutdialDestNbr</parameter>
            <parameter type="in" var-type="i4" >p_oCallLegB.nDestCountryId</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strDestCallingCode</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strDestAreaCode</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nCallSequence</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nIntlOrigRateId</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fIntlOrigRateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nIntlDestRateId</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fIntlDestRateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nDomOrigAndDestRateId</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fDomOrigAndDestRateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nDomOrigAndDestTDWRateId</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fDomOrigAndDestTDWRateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nDomDestRateId</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fDomDestRateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nPayphone1RateId</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fPayphone1RateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nPayphone1RateType</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nPayphone2RateId</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fPayphone2RateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nPayphone2RateType</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nAccessNumberRateId</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fAccessNumberRateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nAccessNumberRateType</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nAccessNumberRate2Id</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fAccessNumberRate2Amt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nAccessNumberRate2Type</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nMeteredRateId1</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fMeteredRateAmt1</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nFixedRateId1</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fFixedRateAmt1</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strFirstCallFlag</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nFirstUseRateId</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fFirstUseRateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nPrimaryOfferingId</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nExpirationType</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOrigDomIntFlag</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strDestDomIntlFlag</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strEventId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nLocalGMTOffset</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nRoundingThreshold</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nIntlMinConnectTime</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nDomMinConnectTime</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOutdialOperatorFlag</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nNumExpDays</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strStrippedDest</parameter>
            <parameter type="in" var-type="string" >p_oRATE.strTieredRatesFlag</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fTier1RateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nTier2ThresholdSecs</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fTier2RateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nTier3ThresholdSecs</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fTier3RateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nBongCharge1Time</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fBongCharge1Amt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nBongCharge2Time</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fBongCharge2Amt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nBongCharge3Time</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fBongCharge3Amt</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fConnectionFee</parameter>
            <parameter type="in" var-type="i4" >p_oCallLegB.nGracePeriod</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nSecondsAvailable</parameter>
            <parameter type="in" var-type="float" >p_oSUB.fCallMarkupPercent</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPostPaidFlag</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lPinId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strRateCallsFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strCreditLimitFlag</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fCreditLimit</parameter>
            <parameter type="in" var-type="float" >p_oAPI.fCreditLimitWarningThreshold</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strDestTrunkGroup</parameter>
            <parameter type="in" var-type="string" >p_oRATE.strExtBongsFlag</parameter>
            <parameter type="in" var-type="string" >p_oRATE.strExtBongsNumCharges</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fBongAmount</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nExtBongInitialTimeSecs</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nExtBongIntervalSecs</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strCSROutdialFlag</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strBillableFlag</parameter>
            <parameter type="in" var-type="i4" >p_oCallLegB.nDestRegionId</parameter>
            <parameter type="in" var-type="i8" >p_oACD.lCSRAssignmentId</parameter>
            <parameter type="in" var-type="i8" >p_oACD.lCSRUserId</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strConfCallFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPrimaryRouteCode</parameter>
            <parameter type="inout" var-type="float" >p_oSUB.fPrepaidBalance</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fCreditUsed</parameter>
            <parameter type="inout" var-type="float" >p_oCallLegB.fCallCost</parameter>
            <parameter type="in" var-type="string" >strBroadbandFlag</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lPhoneNumberId</parameter>
            <parameter type="in" var-type="string" >p_oCallLegA.strCallId</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strEnteredDestNbr</parameter>
            <parameter type="in" var-type="string" >p_oCallLegA.strOrigTrunkGroup</parameter>
            <parameter type="in" var-type="string" >p_oCallLegA.strOrigFlag</parameter>
            <parameter type="in" var-type="string" >p_oCallLegA.strOrigRouteType</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strDestRouteType</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strCallType</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strWiretapFlag</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strWiretapDest</parameter>
            <parameter type="in" var-type="string" >p_oCallLegA.strSvcProviderCallerId</parameter>
            <parameter type="in" var-type="string" >p_oCallLegA.strSubscriberCallerId</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lWiretapOrderId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strEmergencyCallId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strCallInitiationType</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strEmailEvents</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bChargeForIVRTime</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strAllowZeroCostFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nSecondsBalance</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nSecondsUsed</parameter>
            <parameter type="in" var-type="boolean" >p_oSUB.bBucketOfRatesFlag</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.nTotalBucketSize</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.nBucketSize</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nDailySecondsUsed</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.nDailyUsageThreshold</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strPlayBucketRefillWarning</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strPlayBucketExhaustWarning</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strBucketRefillNotifyFlag</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strBucketExhaustNotifyFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strSharedUseBillingFlag</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lBillingSessionId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lCorpAcctNumber</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lReservationId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lStoredBalanceId</parameter>
            <parameter type="in" var-type="boolean" >p_oSUB.bLinked</parameter>
            <parameter type="in" var-type="string" >p_oSUB.sPlaySubBucketWarnFlag</parameter>
            <parameter type="in" var-type="i8" >p_oRATE.lSubBucketRateId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strCustomRatesFlag</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.npreCustRateFixedID</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fpreCustRateFixedAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.npreCustRateMeteredID</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fpreCustRateMeteredAmt</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nDialingPlanId</parameter>
            <parameter type="in" var-type="string" >p_oCallLegA.strCallid</parameter>
            <parameter type="in" var-type="boolean" >p_oAPI.bFirstBilledAsFirstUse</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lExpDateMs</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strBillingId</parameter>
            <parameter type="in" var-type="boolean" >p_oSUB.bPlayOnPlanMeteredAlert</parameter>
            <parameter type="in" var-type="boolean" >p_oSUB.bPlayOffPlanAlert</parameter>
            <parameter type="in" var-type="boolean" >p_oSUB.bPlayFirstBillCycle</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nPrecallPromptSetting</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="1"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START CallCompletion *********");



if(Session.p_oCallLegB.lTimeEnded == 0) {

	Session.p_oCallLegB.lTimeEnded = Server.getUTCTime();

}	

if( 0 != Session.p_oAPI.lPhoneNumberId || "T" == Session.p_oAPI.strBroadbandCallingFlag ) {

	Server.logInfo("Writing a broadband CDR"); 

	Session.strBroadbandFlag = "T" ;

}]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*********JAVA RETURN*********");

Server.logInfo("Prepaid procCallCompletion returned " + Session.f_nReturnCode);

if (0 == Session.f_nReturnCode)

{

	Server.logInfo("INFO: PROC CALL COMPLETION SUCCESS");

	Server.logInfo(" ****** CLEAR OUT VARIABLES *****");

	Session.p_oAPI.nCallSequence++;

	Session.p_oAPI.lTimeStart = 0;

	Session.p_oAPI.lTimeAnswered = 0;

	Session.p_oAPI.lTimeEnded = 0;

	Session.p_oAPI.bWriteAtleastOneCDR = true;

	Session.p_oAPI.nCurrentNumberCallLegs--;

	Session.p_oACD.lCSRAssignmentId = 0;	



	if(Session.p_oAPI.strCreditLimitFlag == "T") 

	{

		Session.p_oAPI.nMaxAllowedSeconds = Session.p_oSUB.nSecsRemaining;

	}

	Session.p_oCallLegB.strEventId = "";

	Session.p_oCallLegB.bAttemptedToOutdial = false;

	Session.p_oCallLegB.bConnected = false;

}

else

{

	Server.logError("ERROR: FAIL TO CALL PROC CALL COMPLETION");

	Server.logError("ERROR: procCallCompletion returned: " + Session.f_nReturnCode);

	Session.p_oAPI.nSessionTerminationReason = 5;

}]]></script>
          </scripts>
        </action>
        <action id="6" plug-in="Pactolus.Branch.1" ><?xtml-editor x=493 y=488 ?>
          <!--BeginConference-->
          <results >
            <result name="Default" link="5" stubbed="0"/>
            <result name="p_oAPI.bBeginAConference" link="7" stubbed="0" >p_oAPI.bBeginAConference == true</result>
          </results>
        </action>
        <action id="7" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=767 y=632 ?>
          <!--CallCompletion()-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceCallCompletion&quot;" method="&quot;procCallCompletion&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDBSessionId</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nCurrencyId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nMinBillingDurationInSec</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nRoundingSeconds</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nAccessNumberId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strInfoDigits</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strApplicationName</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lPlatformSessionStartTime</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strCallId</parameter>
            <parameter type="in" var-type="string" >p_oCallLegA.strFrom</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strTo</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strSIPStatus</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nRTPClockRate</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nRTPEncoding</parameter>
            <parameter type="in" var-type="i8" >p_oCallLegB.lTimeStart</parameter>
            <parameter type="in" var-type="i8" >p_oCallLegB.lTimeAnswered</parameter>
            <parameter type="in" var-type="i8" >p_oCallLegB.lTimeEnded</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nMode</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nCallTerminationReason</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strGWIPIngress</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nGWPortIngress</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strGWIPEgress</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nGWPortEgress</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nServiceId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strStrippedOrigNumber</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nOrigCountryId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOrigCallingCode</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOrigAreaCode</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strOutdialDestNbr</parameter>
            <parameter type="in" var-type="i4" >p_oCallLegB.nDestCountryId</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strDestCallingCode</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strDestAreaCode</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nCallSequence</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nIntlOrigRateId</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fIntlOrigRateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nIntlDestRateId</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fIntlDestRateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nDomOrigAndDestRateId</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fDomOrigAndDestRateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nDomOrigAndDestTDWRateId</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fDomOrigAndDestTDWRateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nDomDestRateId</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fDomDestRateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nPayphone1RateId</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fPayphone1RateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nPayphone1RateType</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nPayphone2RateId</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fPayphone2RateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nPayphone2RateType</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nAccessNumberRateId</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fAccessNumberRateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nAccessNumberRateType</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nAccessNumberRate2Id</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fAccessNumberRate2Amt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nAccessNumberRate2Type</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nMeteredRateId1</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fMeteredRateAmt1</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nFixedRateId1</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fFixedRateAmt1</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strFirstCallFlag</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nFirstUseRateId</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fFirstUseRateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nPrimaryOfferingId</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nExpirationType</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOrigDomIntFlag</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strDestDomIntlFlag</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strEventId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nLocalGMTOffset</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nRoundingThreshold</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nIntlMinConnectTime</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nDomMinConnectTime</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOutdialOperatorFlag</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nNumExpDays</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strStrippedDest</parameter>
            <parameter type="in" var-type="string" >p_oRATE.strTieredRatesFlag</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fTier1RateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nTier2ThresholdSecs</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fTier2RateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nTier3ThresholdSecs</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fTier3RateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nBongCharge1Time</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fBongCharge1Amt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nBongCharge2Time</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fBongCharge2Amt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nBongCharge3Time</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fBongCharge3Amt</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fConnectionFee</parameter>
            <parameter type="in" var-type="i4" >p_oCallLegB.nGracePeriod</parameter>
            <parameter type="in" var-type="i4" >0</parameter>
            <parameter type="in" var-type="float" >p_oSUB.fCallMarkupPercent</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPostPaidFlag</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lPinId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strRateCallsFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strCreditLimitFlag</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fCreditLimit</parameter>
            <parameter type="in" var-type="float" >p_oAPI.fCreditLimitWarningThreshold</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strDestTrunkGroup</parameter>
            <parameter type="in" var-type="string" >p_oRATE.strExtBongsFlag</parameter>
            <parameter type="in" var-type="string" >p_oRATE.strExtBongsNumCharges</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fBongAmount</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nExtBongInitialTimeSecs</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nExtBongIntervalSecs</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strCSROutdialFlag</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strBillableFlag</parameter>
            <parameter type="in" var-type="i4" >p_oCallLegB.nDestRegionId</parameter>
            <parameter type="in" var-type="i8" >p_oACD.lCSRAssignmentId</parameter>
            <parameter type="in" var-type="i8" >p_oACD.lCSRUserId</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strConfCallFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPrimaryRouteCode</parameter>
            <parameter type="inout" var-type="float" >p_oSUB.fPrepaidBalance</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fCreditUsed</parameter>
            <parameter type="inout" var-type="float" >p_oCallLegB.fCallCost</parameter>
            <parameter type="in" var-type="string" >strBroadbandFlag</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lPhoneNumberId</parameter>
            <parameter type="in" var-type="string" >p_oCallLegA.strCallId</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strEnteredDestNbr</parameter>
            <parameter type="in" var-type="string" >p_oCallLegA.strOrigTrunkGroup</parameter>
            <parameter type="in" var-type="string" >p_oCallLegA.strOrigFlag</parameter>
            <parameter type="in" var-type="string" >p_oCallLegA.strOrigRouteType</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strDestRouteType</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strCallType</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strWiretapFlag</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strWiretapDest</parameter>
            <parameter type="in" var-type="string" >p_oCallLegA.strSvcProviderCallerId</parameter>
            <parameter type="in" var-type="string" >p_oCallLegA.strSubscriberCallerId</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lWiretapOrderId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strEmergencyCallId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strCallInitiationType</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strEmailEvents</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bChargeForIVRTime</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strAllowZeroCostFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nSecondsBalance</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nSecondsUsed</parameter>
            <parameter type="in" var-type="boolean" >p_oSUB.bBucketOfRatesFlag</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.nTotalBucketSize</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.nBucketSize</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nDailySecondsUsed</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.nDailyUsageThreshold</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strPlayBucketRefillWarning</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strPlayBucketExhaustWarning</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strBucketRefillNotifyFlag</parameter>
            <parameter type="in" var-type="float" >p_oSUB.strBucketExhaustNotifyFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strSharedUseBillingFlag</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lBillingSessionId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lCorpAcctNumber</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lReservationId</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="1"/>
            <result name="Success" link="3" stubbed="1"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START CallCompletion *********");



if(Session.p_oCallLegB.lTimeEnded == 0) {

	Session.p_oCallLegB.lTimeEnded = Server.getUTCTime();

}	

if( 0 != Session.p_oAPI.lPhoneNumberId ) {

	Server.logInfo("Writing a broadband CDR"); 

	Session.strBroadbandFlag = "T" ;

}]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*********JAVA RETURN*********");

Server.logInfo("Prepaid procCallCompletion returned " + Session.f_nReturnCode);

if (0 == Session.f_nReturnCode)

{

	Server.logInfo("INFO: PROC CALL COMPLETION SUCCESS");

	Server.logInfo(" ****** CLEAR OUT VARIABLES *****");

	Session.p_oAPI.nCallSequence++;

	Session.p_oAPI.lTimeStart = 0;

	Session.p_oAPI.lTimeAnswered = 0;

	Session.p_oAPI.lTimeEnded = 0;

	Session.p_oAPI.bWriteAtleastOneCDR = true;

	Session.p_oAPI.nCurrentNumberCallLegs--;

	Session.p_oACD.lCSRAssignmentId = 0;	



	if(Session.p_oAPI.strCreditLimitFlag == "T") 

	{

		Session.p_oAPI.nMaxAllowedSeconds = Session.p_oSUB.nSecsRemaining;

	}

	Session.p_oCallLegB.strEventId = "";

	Session.p_oCallLegB.bAttemptedToOutdial = false;

	Session.p_oCallLegB.bConnected = false;

}

else

{

	Server.logError("ERROR: FAIL TO CALL PROC CALL COMPLETION");

	Server.logError("ERROR: procCallCompletion returned: " + Session.f_nReturnCode);

	Session.p_oAPI.nSessionTerminationReason = 5;

}]]></script>
          </scripts>
        </action>
      </actions>
      <text-objects >
        <text-object x-coord="767" y-coord="771" width="235" height="61" text="If conference initiated successful, pass oSUB.nSecondAvailable as zero in.

This will fix tracker #5669" font-name="Times New Roman" size="-16" red="0" green="0" blue="0" weight="0" underline="0" strikeout="0" point-size="12" italic="0"/>
      </text-objects>
    </function>
    <function name="PrepaidAPISessionCompletion" start="4" event="PrepaidAPISessionCompletion" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oSUB" type="object" pass="byref"/>
        <parameter name="p_oRATE" type="object" pass="byref"/>
        <parameter name="p_oCallLegA" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
        <var name="f_bNullFlag" type="boolean" >0</var>
      </local-vars>
      <actions >
        <action id="4" plug-in="Pactolus.Branch.1" ><?xtml-editor x=108 y=140 ?>
          <!--null string?-->
          <results >
            <result name="Default" link="5" stubbed="0"/>
            <result name="null string" link="2" stubbed="0" >f_bNullFlag == true</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[if (Session.p_oAPI.strProcDBName.length <= 0)

{

	Session.f_bNullFlag = true;

}

else

{

	Session.f_bNullFlag = false;

}]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=398 y=304 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API PREPAID SESSION COMPLETION , EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=701 y=120 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
        <action id="5" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=379 y=107 ?>
          <!--SessionCompletion()-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceSessionCompletion&quot;" method="&quot;procSessionCompletion&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDBSessionId</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lPlatformSessionEndTime</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSessionTerminationReason</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lPlatformSessionStartTime</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strStrippedOrigNumber</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOrigDomIntFlag</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nAccessNumberId</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nPrimaryOfferingId</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nServiceId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nMaxTalkers</parameter>
            <parameter type="in" var-type="boolean" >p_oAPI.bChargeForIVRTime</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nMinBillingDurationInSec</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nRoundingSeconds</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nRoundingThreshold</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nPayphone1RateId</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fPayphone1RateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nPayphone1RateType</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nPayphone2RateId</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fPayphone2RateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nPayphone2RateType</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nAccessNumberRateId</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fAccessNumberRateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nAccessNumberRateType</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nAccessNumberRate2Id</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fAccessNumberRate2Amt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nAccessNumberRate2Type</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nIntlOrigRateId</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fIntlOrigRateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nDomOrigAndDestRateId</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fDomOrigAndDestRateAmt</parameter>
            <parameter type="in" var-type="float" >p_oSUB.fCallMarkupPercent</parameter>
            <parameter type="inout" var-type="float" >p_oSUB.fPrepaidBalance</parameter>
            <parameter type="in" var-type="i4" >p_oRATE.nFirstUseRateId</parameter>
            <parameter type="in" var-type="float" >p_oRATE.fFirstUseRateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nCurrencyId</parameter>
            <parameter type="inout" var-type="float" >p_oCallLegA.fCallCost</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nExpirationType</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nOrigRegionId</parameter>
            <parameter type="in" var-type="boolean" >p_oAPI.bFirstBilledAsFirstUse</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="1"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START Prepaid SessionCompletion *********");

Session.p_oAPI.lPlatformSessionEndTime = Server.getUTCTime();]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*********JAVA RETURN*********");

Server.logInfo("Prepaid procSessionCompletion returned " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
      </actions>
    </function>
    <function name="APIGetTestData" start="1" event="APIGetTestData" returns="i4" >
      <parameters >
        <parameter name="oTestData" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_strTempString" type="string" ></var>
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >5</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=170 y=248 ?>
          <!--get test data-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.Utilities&quot;" method="&quot;getCallflowTestValues&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="inout" var-type="string" >oTestData.strCardServicesTestFlag</parameter>
            <parameter type="inout" var-type="string" >oTestData.strConferenceTestFlag</parameter>
            <parameter type="inout" var-type="string" >oTestData.strTestDestinationNumber</parameter>
            <parameter type="inout" var-type="string" >oTestData.strTestOriginationNumber</parameter>
            <parameter type="inout" var-type="string" >oTestData.strTestInfoDigits</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=436 y=222 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API GET CALLFLOW TEST DATA, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=452 y=344 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="PrepaidAPIGetRechargeSettings" start="4" event="PrepaidAPIGetRechargeSettings" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object"/>
        <parameter name="p_oCC" type="object" pass="byref"/>
        <parameter name="p_oSUB" type="object" pass="byref"/>
        <parameter name="p_oBALXFER" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
      </local-vars>
      <actions >
        <action id="4" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=46 y=98 ?>
          <!--getRechargeSettings()-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPICommonRecharge&quot;" method="&quot;getRechargeSettings&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDBSessionId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSessionType</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nPrimaryOfferingId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="inout" var-type="float" >p_oCC.fMinRechargeAmount</parameter>
            <parameter type="inout" var-type="float" >p_oCC.fMaxRechargeAmount</parameter>
            <parameter type="inout" var-type="float" >p_oCC.fSubMaxCCWeek</parameter>
            <parameter type="inout" var-type="float" >p_oCC.fSubMaxCCMonth</parameter>
            <parameter type="inout" var-type="float" >p_oCC.fCCMaxWeek</parameter>
            <parameter type="inout" var-type="float" >p_oCC.fCCMaxMonth</parameter>
            <parameter type="inout" var-type="float" >p_oCC.fMaxPrepaidBalance</parameter>
            <parameter type="inout" var-type="float" >p_oCC.fMinPrepaidBalance</parameter>
            <parameter type="inout" var-type="string" >p_oCC.strRechargableFlag</parameter>
            <parameter type="inout" var-type="string" >p_oBALXFER.strBalanceTransferFlag</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START getRechargeSettings *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*********JAVA RETURN *********");

Server.logInfo("getRechargeSettings returned " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=334 y=85 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API PREPAID GET RECHARGE SETTINGS , EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=351 y=212 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="PrepaidAPIValidateBalanceXfer" start="4" event="PrepaidAPIValidateBalanceXfer" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object"/>
        <parameter name="p_oSUB" type="object"/>
        <parameter name="p_oCC" type="object"/>
        <parameter name="p_oBALXFER" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
      </local-vars>
      <actions >
        <action id="4" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=41 y=57 ?>
          <!--validateBalanceTransfer()-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPICommonBalXfer&quot;" method="&quot;validateBalanceTransfer&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDBSessionId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSessionType</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="string" >p_oBALXFER.strBalXferPin</parameter>
            <parameter type="in" var-type="float" >p_oSUB.fPrepaidBalance</parameter>
            <parameter type="in" var-type="float" >p_oCC.fMaxPrepaidBalance</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nCurrencyId</parameter>
            <parameter type="inout" var-type="i8" >p_oBALXFER.lBalXferSubId</parameter>
            <parameter type="inout" var-type="float" >p_oBALXFER.fBalXferBalance</parameter>
            <parameter type="inout" var-type="i4" >p_oBALXFER.nFromCurrencyId</parameter>
            <parameter type="inout" var-type="string" >p_oBALXFER.strDisabledReasonCode</parameter>
            <parameter type="in" var-type="i4" >p_oBALXFER.nLockSubscriber</parameter>
            <parameter type="inout" var-type="string" >p_oBALXFER.strDisableSubFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oBALXFER.nAttempts</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nMaxLoginAttempts</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nBadAniTimeToLive</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.nOrigCountryId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strUsedDefaultANIFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strStrippedOrigNumber</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="inout" var-type="boolean" >p_oBALXFER.bMaxAttempts</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START Prepaid  validateBalanceTransfer *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*********JAVA RETURN *********");

Server.logInfo("Prepaid validate bal xfer returned " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=307 y=41 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API PREPAID VALIDATE BALANCE TRANSFER , EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=322 y=271 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="PrepaidAPIUnlockPin" start="4" event="PrepaidAPIUnlockPin" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object"/>
        <parameter name="p_oBALXFER" type="object"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
      </local-vars>
      <actions >
        <action id="4" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=56 y=73 ?>
          <!--unlockPin()-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceMisc&quot;" method="&quot;unlockPin&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDBSessionId</parameter>
            <parameter type="in" var-type="i8" >p_oBALXFER.lBalXferSubId</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START Prepaid unlockPin() *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*********JAVA RETURN *********");

Server.logInfo("Prepaid unlockPin returned " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=311 y=24 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API PREPAID UNLOCK PIN , EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=303 y=151 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="PrepaidAPIBalanceXfer" start="4" event="PrepaidAPIBalanceXfer" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oSUB" type="object" pass="byref"/>
        <parameter name="p_oBALXFER" type="object"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
      </local-vars>
      <actions >
        <action id="4" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=205 y=92 ?>
          <!--transferBalance()-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPICommonBalXfer&quot;" method="&quot;transferBalance&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDBSessionId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSessionType</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nCurrencyId</parameter>
            <parameter type="in" var-type="float" >p_oSUB.fPrepaidBalance</parameter>
            <parameter type="in" var-type="string" >p_oBALXFER.strBalXferPin</parameter>
            <parameter type="in" var-type="i8" >p_oBALXFER.lBalXferSubId</parameter>
            <parameter type="in" var-type="float" >p_oBALXFER.fBalXferBalance</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nExpirationType</parameter>
            <parameter type="in" var-type="string" >p_oBALXFER.strDisableSubFlag</parameter>
            <parameter type="inout" var-type="float" >p_oSUB.fPrepaidBalance</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START Prepaid transferBalance() *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*********JAVA RETURN *********");

Server.logInfo("Prepaid transferBalance returned " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=472 y=88 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API PREPAID BALANCE TRANSFER , EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=488 y=209 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="PrepaidAPIGetActiveCC" start="4" event="PrepaidAPIGetActiveCC" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object"/>
        <parameter name="p_oCC" type="object" pass="byref"/>
        <parameter name="p_oSUB" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
      </local-vars>
      <actions >
        <action id="4" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=115 y=192 ?>
          <!--getActiveCC()-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPICommonRecharge&quot;" method="&quot;getActiveCreditCardInfo&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSessionType</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nPrimaryOfferingId</parameter>
            <parameter type="inout" var-type="i4" >p_oCC.nCreditCardId</parameter>
            <parameter type="inout" var-type="string" >p_oCC.strCCNum</parameter>
            <parameter type="inout" var-type="string" >p_oCC.strExpDate</parameter>
            <parameter type="inout" var-type="float" >p_oCC.fRechargeFee</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START Prepaid getActiveCC *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*********JAVA RETURN *********");

Server.logInfo("Prepaid getActiveCC returned " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=469 y=192 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API PREPAID GET ACTIVE CREDIT CARD , EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=474 y=388 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="psAPIDoCCRecharge" start="4" event="psAPIDoCCRecharge" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oSUB" type="object" pass="byref"/>
        <parameter name="p_oCC" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >60</var>
        <var name="f_fBalance" type="float" >0</var>
      </local-vars>
      <actions >
        <action id="4" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=225 y=161 ?>
          <!--doCCRecharge()-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPICommonRecharge&quot;" method="&quot;doCCRecharge&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDBSessionId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSessionType</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="in" var-type="i4" >p_oCC.nCreditCardId</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nCurrencyId</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nPrimaryOfferingId</parameter>
            <parameter type="in" var-type="float" >p_oCC.fSubMaxCCWeek</parameter>
            <parameter type="in" var-type="float" >p_oCC.fSubMaxCCMonth</parameter>
            <parameter type="in" var-type="float" >p_oCC.fCCMaxWeek</parameter>
            <parameter type="in" var-type="float" >p_oCC.fCCMaxMonth</parameter>
            <parameter type="in" var-type="float" >p_oCC.fMaxPrepaidBalance</parameter>
            <parameter type="in" var-type="float" >p_oCC.fRechargeAmount</parameter>
            <parameter type="in" var-type="float" >f_fBalance</parameter>
            <parameter type="in" var-type="i4" >0</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nExpirationType</parameter>
            <parameter type="in" var-type="i4" >3</parameter>
            <parameter type="inout" var-type="float" >f_fBalance</parameter>
            <parameter type="inout" var-type="boolean" >p_oCC.bPayoffEntireCreditBalance</parameter>
            <parameter type="inout" var-type="float" >p_oCC.fRechargePlusFee</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START doCCRecharge *********");



if(1 == Session.p_oAPI.nServiceElementId) { //1 = prepaid, 3 = postpaid

	Session.f_fBalance = Session.p_oSUB.fPrepaidBalance;

} else {

	Session.f_fBalance = Session.p_oAPI.fCreditUsed;

}	









	

	]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*********JAVA RETURN *********");

Server.logInfo("Prepaid doCCRecharge returned " + Session.f_nReturnCode);





if(0 == Session.f_nReturnCode) {



	if(1 == Session.p_oAPI.nServiceElementId) { //1 = prepaid, 3 = postpaid

		Session.p_oSUB.fPrepaidBalance = Session.f_fBalance;

	} else {

		Session.p_oAPI.fCreditUsed = Session.f_fBalance;

	}	

}	

]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=452 y=110 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API PREPAID RECHARGE , EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=468 y=333 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="PrepaidAPIDeleteLockPins" start="1" event="PrepaidAPIDeleteLockPins" returns="i4" >
      <parameters >
        <parameter name="strHostIP" type="string"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=195 y=278 ?>
          <!--delete pin locks-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceMisc&quot;" method="&quot;unlockAllPins&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >strHostIP</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START Prepaid unlockAllPins *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*********JAVA RETURN*********");

Server.logInfo("Prepaid unlockAllPins returned " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=484 y=248 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API PREPAID DELETE LOCKED PINS , EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=500 y=370 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="PostpaidAPIAuthenticatePin" start="6" event="PostpaidAPIAuthenticatePin" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oSUB" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
        <var name="bTrue" type="boolean" >1</var>
        <var name="f_strUsedDefaultAccessNum" type="string" >F</var>
        <var name="itemp" type="i4" >0</var>
      </local-vars>
      <actions >
        <action id="6" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=139 y=179 ?>
          <!--authenticatePin()-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.postpaid.psAPIScePopdAuthenticate&quot;" method="&quot;authenticatePin&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strLocalHost</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDBSessionId</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strStrippedOrigNumber</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strUserPin</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nPostpaidPinLength</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nMaxLoginAttempts</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nOrigCountryId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strValidateByANI</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strUsedDefaultANIFlag</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nAccessNumberId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strIgnoreAniAuthRequired</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOrigDomIntFlag</parameter>
            <parameter type="in" var-type="string" >f_strUsedDefaultAccessNum</parameter>
            <parameter type="inout" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="inout" var-type="i8" >p_oSUB.lPinId</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strAccountNumber</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strUserPin</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strPinLanguage</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nServiceId</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nNumberLoginAttempts</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nMaxAllowedSeconds</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strPinLockFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nPrimaryOfferingId</parameter>
            <parameter type="inout" var-type="i8" >p_oSUB.lCorpAcctNumber</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fCreditLimit</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fCreditLimitWarningThreshold</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fCreditUsed</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nWarningThreshold1</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nWarningThreshold2</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nWarningThreshold3</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strCreditLimitFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strCreditLimitFlagFirm</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strRateCallsFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nCurrencyId</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strPinLockId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPhoneMeFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strSubRestrictionsFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nRoundingSeconds</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nRoundingThreshold</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nMinBillingDurationInSec</parameter>
            <parameter type="inout" var-type="float" >p_oSUB.fCallMarkupPercent</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPrimaryRouteCode</parameter>
            <parameter type="in" var-type="boolean" >bTrue</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nDialingPlanId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOriginationType</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bIVRCallbackAllowed</parameter>
            <parameter type="inout" var-type="boolean" >p_oSUB.bCallbackNumberEnable</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strCallbackNumber</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bRateByAccessNumber</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bApplyPrecallRounding</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bAnnounceCurrencyAsUnits</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bLastCallRedial</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bSvcDirectCallFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nLongCallInterval</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nMaxRedialsAllowed</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nSvcDirectCallIdLength</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strAllowZeroCostFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nSecondsBalance</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nSecondsUsed</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nDailySecondsUsed</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strWarningAsToneFlag</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strBucketRefillWarningFlag</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strBucketExhaustWarningFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nBillingCycleDay</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nDisabledReasonCode</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strOutboundCIC</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strSharedUseBillingFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nCommitInterval</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nBillingLevel</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nCurrencyPrecision</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bRateBySequence</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strBillingId</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nOnPlanMeteredAlertMax</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nOffPlanAlertMax</parameter>
            <parameter type="inout" var-type="boolean" >p_oSUB.bFirstBillCycleEn</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nOnPlanMeteredAlertCount</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nOffPlanAlertCount</parameter>
            <parameter type="inout" var-type="boolean" >p_oSUB.bFirstBillCycleFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nPrecallPromptSetting</parameter>
            <parameter type="inout" var-type="boolean" >p_oSUB.bFirstUse</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="7" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START Postpaid AuthenticateSub *********");

Server.logInfo("BEFORE: p_oAPI.fCreditLimit: " + Session.p_oAPI.fCreditLimit);

Server.logInfo("BEFORE: p_oAPI.fCreditUsed: " + Session.p_oAPI.fCreditUsed);

if(Session.p_oAPI.bUsedDefaultAccessNum) {

	Session.f_strUsedDefaultAccessNum = "T";

}]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*********JAVA RETURN*********");

Server.logInfo("Postpaid AuthenticateSub returned " + Session.f_nReturnCode);

Server.logInfo("AFTER: p_oAPI.fCreditLimit: " + Session.p_oAPI.fCreditLimit);

Server.logInfo("AFTER: p_oAPI.fCreditUsed: " + Session.p_oAPI.fCreditUsed);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=478 y=135 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API POSTPAID AUTHENTICATE PIN, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=498 y=387 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
        <action id="7" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=332 y=274 ?>
          <!--Get Branding Prompts-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;psAPIGetBrandingPrompts&quot;" return="" external-function="0" library="" >
            <parameter >p_oAPI</parameter>
            <parameter >p_oSUB</parameter>
          </function>
          <results >
            <result name="Default" link="3" stubbed="0"/>
          </results>
        </action>
      </actions>
    </function>
    <function name="psAPIEncrypt" start="1" event="psAPIEncrypt" returns="string" >
      <parameters >
        <parameter name="strToEncrypt" type="string" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
        <var name="strEncrypted" type="string" ></var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=222 y=219 ?>
          <!--encrypt string-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.Utilities&quot;" method="&quot;encrypt&quot;" timeout="f_nTIMEOUT" return="f_nReturnCode" method-return-var="strEncrypted" method-return-type="3" >
            <parameter type="in" var-type="string" >strToEncrypt</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START Encrypt String *********");

Server.logInfo("Before encrypt string: " + Session.strToEncrypt);]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*********JAVA RETURN*********");

Server.logInfo("Encrypt string returned " + Session.f_nReturnCode);

Server.logInfo("After encrypt string: " + Session.strEncrypted);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=487 y=213 ?>
          <!--strEncrypted-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="strEncrypted"/>
        </action>
      </actions>
    </function>
    <function name="PostpaidAPIUnlockAllPins" start="1" event="PostpaidAPIUnlockAllPins" returns="i4" >
      <parameters >
        <parameter name="strIPAddress" type="string"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=210 y=258 ?>
          <!--delete pin locks-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.postpaid.psAPIScePopdMisc&quot;" method="&quot;unlockAllPins&quot;" timeout="f_nTIMEOUT" return="" method-return-var="" method-return-type="0" >
            <parameter type="in" var-type="string" >strIPAddress</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=477 y=215 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API POSTPAID UNLOCK ALL PINS, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=492 y=335 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="PostpaidAPISessionCompletion" start="4" event="PostpaidAPISessionCompletion" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oSUB" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_bNullFlag" type="boolean" >0</var>
      </local-vars>
      <actions >
        <action id="4" plug-in="Pactolus.Branch.1" ><?xtml-editor x=90 y=508 ?>
          <!--null string?-->
          <results >
            <result name="Default" link="1" stubbed="0"/>
            <result name="null string" link="2" stubbed="0" >f_bNullFlag == true</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[if (Session.p_oAPI.strProcDBName.length <= 0)

{

	Session.f_bNullFlag = true;

	

	if (Session.p_oAPI.lTimeAnswered > 0)

	{

		Server.logError("ERROR: FAIL TO CALL PROC CALL COMPLETION, ANSWER GREATER THAN ZERO.");

		Server.logError("ERROR: AND p_oAPI.strProcDBName.length <= 0");



		var myTime;

		Server.logError("ERROR: g_oAPI.lPlatformSessionStartTime is: " + Session.p_oAPI.lPlatformSessionStartTime);

		myTime = new Date(Session.p_oAPI.lPlatformSessionStartTime * 1000);

		Server.logError("ERROR: g_oAPI.lPlatformSessionStartTime is: " + myTime.toString() );

		

		Server.logError("ERROR: g_oAPI.lTimeStart is: " + Session.p_oAPI.lTimeStart);

		myTime = new Date(Session.p_oAPI.lTimeStart * 1000);

		Server.logError("ERROR: g_oAPI.lTimeStart is: " + myTime.toString() );

		

		Server.logError("ERROR: g_oAPI.lTimeAnswered is: " + Session.p_oAPI.lTimeAnswered);

		myTime = new Date(Session.p_oAPI.lTimeAnswered * 1000);

		Server.logError("ERROR: g_oAPI.lTimeAnswered is: " + myTime.toString() );

		

		Server.logError("ERROR: g_oAPI.lTimeEnded is: " + Session.p_oAPI.lTimeEnded);

		myTime = new Date(Session.p_oAPI.lTimeEnded * 1000);

		Server.logError("ERROR: g_oAPI.lTimeEnded is: " + myTime.toString() );

	}

}

else

{

	Session.f_bNullFlag = false;

}]]></script>
          </scripts>
        </action>
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=327 y=429 ?>
          <!--SessionCompletion()-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.postpaid.psAPIScePopdSessionComp&quot;" method="&quot;procSessionCompletion&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDBSessionId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lPinId</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strPinLockFlag</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lPlatformSessionEndTime</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSessionTerminationReason</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strAccountNumber</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strUserPin</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lCorpAcctNumber</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nServiceId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strCreditLimitFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strCreditLimitFlagFirm</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strPinLockId</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nPrimaryOfferingId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nOrigRegionId</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="1"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START Postpaid SessionCompletion *********");

Session.p_oAPI.lPlatformSessionEndTime = Server.getUTCTime();]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*********JAVA RETURN*********");

Server.logInfo("popdprocSessionCompletion returned " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=344 y=656 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API POSTPAID SESSION COMPLETION, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=587 y=433 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="PostpaidAPIValidateANI" start="1" event="PostpaidAPIValidateANI" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="strAccountNumber" type="string" pass="byref"/>
        <parameter name="strPinNumber" type="string" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=199 y=281 ?>
          <!--"validateANI"-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.postpaid.psAPIScePopdValidateANI&quot;" method="&quot;validateANI&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOriginationNumber</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strAccessNumber</parameter>
            <parameter type="inout" var-type="string" >strAccountNumber</parameter>
            <parameter type="inout" var-type="string" >strPinNumber</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START Postpaid validateANI *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*********JAVA RETURN*********");

Server.logInfo("validateANI returned " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=492 y=242 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API POSTPAID VALIDATE ANI, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=507 y=362 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="ConfAPICleanUpCallLeg" start="1" event="ConfAPICleanUpCallLeg" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
        <var name="f_lCurrentTime" type="i8" >0</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=217 y=192 ?>
          <!--"cleanupCallLeg"-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.conferencing.psAPISceConfCleanup&quot;" method="&quot;cleanupCallLeg&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strExistingCallLegId</parameter>
            <parameter type="in" var-type="i8" >f_lCurrentTime</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("INFO: ********JAVA CALLING psAPISceConfCleanupCallLeg *********");

Session.f_lCurrentTime = Server.getUTCTime();]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("INFO: ********** iJavaReturnCode " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=491 y=166 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API CONF CLEAN UP CALL LEGS, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=508 y=288 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="ConfAPIAuthenticatePassCode" start="1" event="ConfAPIAuthenticatePassCode" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oSUB" type="object" pass="byref"/>
        <parameter name="p_oCallLeg" type="object"/>
      </parameters>
      <local-vars >
        <var name="f_strBlankString" type="string" ></var>
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.Branch.1" ><?xtml-editor x=277 y=282 ?>
          <!--dial out?-->
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="dial out == T" link="3" stubbed="0" >p_oAPI.strDialOutFlag == "T"</result>
          </results>
        </action>
        <action id="2" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=517 y=188 ?>
          <!--validatePassCode()-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.conferencing.psAPISceAuthConfPasscodeB&quot;" method="&quot;validateConfPassCode&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strApplicationName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPassCode</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOriginationNumber</parameter>
            <parameter type="in" var-type="string" >f_strBlankString</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nAccessNumberId</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strRetryFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strSoapIP</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSoapPort</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nMaxRetryAllowed</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nNumberLoginAttempts</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOrigDomIntFlag</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nOrigCountryId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strInfoDigits</parameter>
            <parameter type="in" var-type="string" >p_oCallLeg.strFrom</parameter>
            <parameter type="in" var-type="string" >p_oCallLeg.strTo</parameter>
            <parameter type="in" var-type="string" >p_oCallLeg.strCallId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strSIPStatus</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lPlatformSessionStartTime</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strGWIPIngress</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nGWPortIngress</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strGWIPEgress</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nGWPortEgress</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nRTPEncoding</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nRTPClockRate</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nCallMode</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOutDialFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOrigCallingCode</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOrigAreaCode</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDestDomIntlFlag</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nDestCountryId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDestCallingCode</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDestAreaCode</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strSPTimeZone</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strModOutdialFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOperatorFlag</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nDialingPlanId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strForceModeratorFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strForceMuteFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strUsedDefaultANIFlag</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSiteId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nRedirectStatus</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nScheduleDuration</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strScheduleStartTime</parameter>
            <parameter type="inout" var-type="i8" >p_oAPI.lTimeAvailable</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strConfScheduleId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strDBCallLegId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strConfResource</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strConfEventId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strModeratorFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strConfControllerIP</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nConfControllerPort</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strCallerFirstName</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strCallerLastName</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strCallerOrganization</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPartyPasscodeFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strMuteFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strModeratorMuteFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strConfPassCode</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nMaxCallerHoldTime</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPostPinPromptType</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nPostPinPromptIndex</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPostPinPromptUrl</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nServiceId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strModeratorRequiredFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strBillingCodeFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strRecordNamesFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nArriveDepartOption</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strPinLanguage</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nBillingType</parameter>
            <parameter type="inout" var-type="float" >p_oSUB.fPrepaidBalance</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nCurrencyId</parameter>
            <parameter type="inout" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strExistingCallLegId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strExistingSessionId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strHoldBillingFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nRoundSeconds</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strRechargeFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nSubExpirationType</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nOfferingId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strSubscriberAccount</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPlayPartyCountFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nCurrentNumberCallegs</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strIsSubscriberFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nPayphoneSrchgRateId</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fPayphoneSrchgRateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nAccessNumberRateId</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fAccessNumberRateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nAccessNumberRateType</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nMeteredRate1Id</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fMeteredRate1Amt</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nMeteredRate2Id</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fMeteredRate2Amt</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nFixedRate1Id</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fFixedRate1Amt</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nFixedRate2Id</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fFixedRate2Amt</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fTotalMeteredRate</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fTotalFixedRate</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strConfSessionId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPromptOnOutdialFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strAutoRecordFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strConfRecordAllowed</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strHomeCallingCountryCode</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.nHomeCallingCountryId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strOutdialCLI</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strAnonymousAttendeeId</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nOperatorAssistType</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strConfQuickStartFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strMSResourceName</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strAlternateSiteIP</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nAlternateSitePort</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strConfSiteMovedFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strCCIPMovedFrom</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nCCPortMovedFrom</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strCCIPMovedTo</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nCCPortMovedTo</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nMinutesTooEarly</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nOutdialOption</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strMutedPartyPassCode</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strReservationlessFlag</parameter>
          </java>
          <results >
            <result name="Default" link="4" stubbed="0"/>
            <result name="Success" link="5" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("INFO: ********** JAVA CALLING AuthConfPasscode *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("INFO: ********** iJavaReturnCode " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=535 y=442 ?>
          <!--validatePassCode()-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.conferencing.psAPISceAuthConfPasscodeB&quot;" method="&quot;validateConfPassCode&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strApplicationName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPassCode</parameter>
            <parameter type="in" var-type="string" >f_strBlankString</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOutDialDestNumber</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nAccessNumberId</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strRetryFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strSoapIP</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSoapPort</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nMaxRetryAllowed</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nNumberLoginAttempts</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOrigDomIntFlag</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nOrigCountryId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strInfoDigits</parameter>
            <parameter type="in" var-type="string" >p_oCallLeg.strFrom</parameter>
            <parameter type="in" var-type="string" >p_oCallLeg.strTo</parameter>
            <parameter type="in" var-type="string" >p_oCallLeg.strCallId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strSIPStatus</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lPlatformSessionStartTime</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strGWIPIngress</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nGWPortIngress</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strGWIPEgress</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nGWPortEgress</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nRTPEncoding</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nRTPClockRate</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nCallMode</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOutDialFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOrigCallingCode</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOrigAreaCode</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDestDomIntlFlag</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nDestCountryId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDestCallingCode</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDestAreaCode</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strSPTimeZone</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strModOutdialFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOperatorFlag</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nDialingPlanId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strForceModeratorFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strForceMuteFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strUsedDefaultANIFlag</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSiteId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nRedirectStatus</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nScheduleDuration</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strScheduleStartTime</parameter>
            <parameter type="inout" var-type="i8" >p_oAPI.lTimeAvailable</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strConfScheduleId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strDBCallLegId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strConfResource</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strConfEventId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strModeratorFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strConfControllerIP</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nConfControllerPort</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strCallerFirstName</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strCallerLastName</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strCallerOrganization</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPartyPasscodeFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strMuteFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strModeratorMuteFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strConfPassCode</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nMaxCallerHoldTime</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPostPinPromptType</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nPostPinPromptIndex</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPostPinPromptUrl</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nServiceId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strModeratorRequiredFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strBillingCodeFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strRecordNamesFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nArriveDepartOption</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strPinLanguage</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nBillingType</parameter>
            <parameter type="inout" var-type="float" >p_oSUB.fPrepaidBalance</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nCurrencyId</parameter>
            <parameter type="inout" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strExistingCallLegId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strExistingSessionId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strHoldBillingFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nRoundSeconds</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strRechargeFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nSubExpirationType</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nOfferingId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strSubscriberAccount</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPlayPartyCountFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nCurrentNumberCallegs</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strIsSubscriberFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nPayphoneSrchgRateId</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fPayphoneSrchgRateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nAccessNumberRateId</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fAccessNumberRateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nAccessNumberRateType</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nMeteredRate1Id</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fMeteredRate1Amt</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nMeteredRate2Id</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fMeteredRate2Amt</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nFixedRate1Id</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fFixedRate1Amt</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nFixedRate2Id</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fFixedRate2Amt</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fTotalMeteredRate</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fTotalFixedRate</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strConfSessionId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPromptOnOutdialFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strAutoRecordFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strConfRecordAllowed</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strHomeCallingCountryCode</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nHomeCallingCountryId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strOutdialCLI</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strAnonymousAttendeeId</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nOperatorAssistType</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strConfQuickStartFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strMSResourceName</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strAlternateSiteIP</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nAlternateSitePort</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strConfSiteMovedFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strCCIPMovedFrom</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nCCPortMovedFrom</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strCCIPMovedTo</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nCCPortMovedTo</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nMinutesTooEarly</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nOutdialOption</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strMutedPartyPassCode</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strReservationlessFlag</parameter>
          </java>
          <results >
            <result name="Default" link="4" stubbed="1"/>
            <result name="Success" link="5" stubbed="1"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("INFO: ********** JAVA CALLING AuthConfPasscode *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("INFO: ********** iJavaReturnCode " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="4" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=818 y=153 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: CONF API AUTHENITCATE PASSCODE EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="5" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=834 y=334 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[if (Session.p_oAPI.strOutdialCLI.length > 0)

{

	Session.p_oAPI.strOriginationNumber = Session.p_oAPI.strOutdialCLI;

}]]></script>
          </scripts>
        </action>
      </actions>
      <text-objects >
        <text-object x-coord="528" y-coord="58" width="113" height="72" text="Evt Conf Call

From:  Orig Number

To:      Blank" font-name="Times New Roman" size="-16" red="0" green="0" blue="0" weight="0" underline="0" strikeout="0" point-size="12" italic="0"/>
        <text-object x-coord="538" y-coord="612" width="180" height="70" text="Evt Conf Call

From:  Blank

To:      Out Dial Dest Number" font-name="Times New Roman" size="-16" red="0" green="0" blue="0" weight="0" underline="0" strikeout="0" point-size="12" italic="0"/>
      </text-objects>
    </function>
    <function name="ConfAPISetConfResource" start="1" event="ConfAPISetConfResource" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object"/>
        <parameter name="p_oMS" type="object"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=200 y=260 ?>
          <!--SetConfResource()-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.conferencing.psAPISceSetConfResource&quot;" method="&quot;setConfResource&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strConfEventId</parameter>
            <parameter type="in" var-type="string" >p_oMS.strConferenceId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strMSResourceName</parameter>
          </java>
          <results >
            <result name="Default" link="3" stubbed="0"/>
            <result name="Success" link="2" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("INFO: *********JAVA CALLING SetConfResource *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("INFO: ********* SetConfResource returns " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=514 y=361 ?>
          <!--return JAVA_SUCCESS-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=497 y=222 ?>
          <!--return FAILED_JAVA-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API CONF SET CONFERENCE RESOURCE, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
      </actions>
    </function>
    <function name="ConfAPICallCompletion" start="1" event="ConfAPICallCompletion" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object"/>
        <parameter name="p_oSUB" type="object"/>
        <parameter name="p_oCallLegA" type="object"/>
        <parameter name="p_oCallLegB" type="object"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
        <var name="f_bNullString" type="boolean" >0</var>
        <var name="f_strBlankString" type="string" ></var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.Branch.1" ><?xtml-editor x=94 y=243 ?>
          <!--null string?-->
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="DB name == null" link="5" stubbed="1" >f_bNullString == true</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[if (Session.p_oAPI.strProcDBName.length > 0)

{

	Session.f_bNullString = false;

}

else

{

	Session.f_bNullString = true;

}]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Pactolus.Branch.1" ><?xtml-editor x=342 y=241 ?>
          <!--dial out?-->
          <results >
            <result name="Default" link="3" stubbed="0"/>
            <result name="dial out == T" link="4" stubbed="0" >p_oAPI.strDialOutFlag == "T"</result>
          </results>
        </action>
        <action id="3" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=613 y=237 ?>
          <!--CallLegCompletion()-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.conferencing.psAPISceConfCallLegCompletion&quot;" method="&quot;procConfCallCompletion&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nTerminationReason</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lEndTime</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lMSConnectTime</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strConfEventId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDBCallLegId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strModeratorFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strSPTimeZone</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nAccessNumberId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nCallMode</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPartyScheduleId</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strInfoDigits</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOrigDomIntlFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDestDomIntlFlag</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nOrigCountryId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOriginationNumber</parameter>
            <parameter type="in" var-type="string" >f_strBlankString</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nRtpEncoding</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nRtpClockRate</parameter>
            <parameter type="in" var-type="string" >p_oCallLegA.strFrom</parameter>
            <parameter type="in" var-type="string" >p_oCallLegA.strTo</parameter>
            <parameter type="in" var-type="string" >p_oCallLegA.strCallId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strSIPStatus</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lPlatformSessionStartTime</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strGWIPIngress</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nGWPortIngress</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strGWIPEgress</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nGWPortEgress</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strApplicationName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strSoapIP</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSoapPort</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOutDialFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOrigCallingCode</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOrigAreaCode</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nDestCountryId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDestCallingCode</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDestAreaCode</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nBillingType</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nCurrencyId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nServiceId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOperatorFlag</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nRoundSeconds</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSubExpirationType</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nPayphoneSrchgRateId</parameter>
            <parameter type="in" var-type="float" >p_oAPI.fPayphoneSrchgRateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nAccessNumberRateId</parameter>
            <parameter type="in" var-type="float" >p_oAPI.fAccessNumberRateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nAccessNumberRateType</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nMeteredRate1Id</parameter>
            <parameter type="in" var-type="float" >p_oAPI.fMeteredRate1Amt</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nMeteredRate2Id</parameter>
            <parameter type="in" var-type="float" >p_oAPI.fMeteredRate2Amt</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nFixedRate1Id</parameter>
            <parameter type="in" var-type="float" >p_oAPI.fFixedRate1Amt</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nFixedRate2Id</parameter>
            <parameter type="in" var-type="float" >p_oAPI.fFixedRate2Amt</parameter>
            <parameter type="in" var-type="float" >p_oAPI.fTotalMeteredRate</parameter>
            <parameter type="in" var-type="float" >p_oAPI.fTotalFixedRate</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strSetStateToGetConfRes</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strConfSessionId</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lOutdialStartTime</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lOutdialConnectTime</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lHoldWFMStartTime</parameter>
            <parameter type="in" var-type="string" >f_strBlankString</parameter>
            <parameter type="in" var-type="string" >p_oCallLegA.strOrigTrunkGroup</parameter>
            <parameter type="in" var-type="string" >f_strBlankString</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strCustomerConferenceId</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lPrivateTalkStartTime</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lPrivateTalkEndTime</parameter>
          </java>
          <results >
            <result name="Default" link="5" stubbed="0"/>
            <result name="Success" link="6" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("INFO: ********JAVA CALLING ConfCallLegComplettion *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("INFO: **** Conf Call Leg Completion returns " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="4" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=618 y=406 ?>
          <!--CallLegCompletion()-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.conferencing.psAPISceConfCallLegCompletion&quot;" method="&quot;procConfCallCompletion&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nTerminationReason</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lEndTime</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lMSConnectTime</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strConfEventId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDBCallLegId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strModeratorFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strSPTimeZone</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nAccessNumberId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nCallMode</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPartyScheduleId</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strInfoDigits</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOrigDomIntlFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDestDomIntlFlag</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nOrigCountryId</parameter>
            <parameter type="in" var-type="string" >f_strBlankString</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOutdialDestNumber</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nRtpEncoding</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nRtpClockRate</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strFrom</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strTo</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strCallId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strSIPStatus</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lPlatformSessionStartTime</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strGWIPIngress</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nGWPortIngress</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strGWIPEgress</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nGWPortEgress</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strApplicationName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strSoapIP</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSoapPort</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOutDialFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOrigCallingCode</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOrigAreaCode</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nDestCountryId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDestCallingCode</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDestAreaCode</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nBillingType</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nCurrencyId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nServiceId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOperatorFlag</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nRoundSeconds</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSubExpirationType</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nPayphoneSrchgRateId</parameter>
            <parameter type="in" var-type="float" >p_oAPI.fPayphoneSrchgRateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nAccessNumberRateId</parameter>
            <parameter type="in" var-type="float" >p_oAPI.fAccessNumberRateAmt</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nAccessNumberRateType</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nMeteredRate1Id</parameter>
            <parameter type="in" var-type="float" >p_oAPI.fMeteredRate1Amt</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nMeteredRate2Id</parameter>
            <parameter type="in" var-type="float" >p_oAPI.fMeteredRate2Amt</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nFixedRate1Id</parameter>
            <parameter type="in" var-type="float" >p_oAPI.fFixedRate1Amt</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nFixedRate2Id</parameter>
            <parameter type="in" var-type="float" >p_oAPI.fFixedRate2Amt</parameter>
            <parameter type="in" var-type="float" >p_oAPI.fTotalMeteredRate</parameter>
            <parameter type="in" var-type="float" >p_oAPI.fTotalFixedRate</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strSetStateToGetConfRes</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strConfSessionId</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lOutdialStartTime</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lOutdialConnectTime</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lHoldWFMStartTime</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strTranslatedDestNumber</parameter>
            <parameter type="in" var-type="string" >f_strBlankString</parameter>
            <parameter type="in" var-type="string" >p_oCallLegB.strDestTrunkGroup</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strCustomerConferenceId</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lPrivateTalkStartTime</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lPrivateTalkEndTime</parameter>
          </java>
          <results >
            <result name="Default" link="5" stubbed="1"/>
            <result name="Success" link="6" stubbed="1"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("INFO: ********JAVA CALLING ConfCallLegComplettion *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("INFO: **** Conf Call Leg Completion returns " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="5" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=902 y=231 ?>
          <!--FAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API CONF PROC CALL COMPLETION, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="6" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=904 y=315 ?>
          <!--JAVA RETURN CODE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="ConfAPIInitializeSession" start="1" event="ConfAPIInitializeSession" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oACD" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=218 y=267 ?>
          <!--"initConfSession()"-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.conferencing.psAPISceInitConfSession&quot;" method="&quot;initConfSession&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOriginationNumber</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strAccessNumber</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nAccessNumberId</parameter>
            <parameter type="inout" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strLanguage</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nMaxRetryAllowed</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nDialPlanId</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nOrigCountryId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strOrigCallingCode</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strOrigAreaCode</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strOrigDomIntlFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strWelcomePromptType</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strWelcomePromptUrl</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nWelcomePromptIndex</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strCustomerServicePhone</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strSPTimeZone</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nLocalGMTOffset</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strStrippedOrigNumber</parameter>
            <parameter type="inout" var-type="string" >p_oACD.strACDEnable</parameter>
            <parameter type="inout" var-type="string" >p_oACD.strCSROnMaxLoginsEnabled</parameter>
            <parameter type="inout" var-type="string" >p_oACD.strACDGreetingEnabled</parameter>
            <parameter type="inout" var-type="string" >p_oACD.strACDControllerIP</parameter>
            <parameter type="inout" var-type="i4" >p_oACD.nACDControllerPort</parameter>
            <parameter type="inout" var-type="string" >p_oACD.strMusicOnHoldFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nPassCodeLength</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strThirdPartyAcdOutdialNumber</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strThirdPartyAcdOutdialAvail</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nThirdPartyAcdOutdialDur</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strBadANIRouteToCSR</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nDnisIdentifiedConfFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nEventDnisType</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strConfScheduleId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strScheduleStartTime</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("INFO: *********JAVA CALLING INITIALIZE CONF *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("INFO: ********** iJavaReturnCode " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=496 y=241 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API CONF INITIALIZE SESSION, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=513 y=363 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="ConfAPIDialOutInitSession" start="1" event="ConfAPIDialOutInitSession" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=244 y=218 ?>
          <!--"initConfSession()"-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.conferencing.psAPISceInitConfSession&quot;" method="&quot;initConfOutdialSession&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="inout" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strACDControllerIP</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nACDControllerPort</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("INFO : *********JAVA CALLING INITIALIZE OUTDIAL CONF *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("INFO: ********** iJavaReturnCode " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=521 y=196 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API CONF DIAL OUT INIT SESSION, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=538 y=318 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="ConfAPIGetPartyCount" start="1" event="ConfAPIGetPartyCount" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object"/>
        <parameter name="nCurrentNumberCallLegs" type="i4" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=177 y=188 ?>
          <!--getPartyCount()-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.conferencing.psAPISceConfCount&quot;" method="&quot;getPartyCount&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strConfEventId</parameter>
            <parameter type="inout" var-type="i4" >nCurrentNumberCallLegs</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("INFO: ********JAVA CALLING getPartyCount *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("INFO: ********** iJavaReturnCode " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=456 y=154 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API CONF GET PARTY COUNT, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=473 y=276 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="ConfAPIAuthorizeDest" start="1" event="ConfAPIAuthorizeDest" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oSUB" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=113 y=136 ?>
          <!--authorizeDestination-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.conferencing.psAPISceConfAuthDest&quot;" method="&quot;authorizeDestination&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strApplicationName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOutDialDestNumber</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nServiceId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nDialPlanId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strConfEventId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strHomeCallingCountyCode</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nHomeCallingCountryId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strOutDialDestNumber</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nDestCountryId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strDestDomIntlFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strDestAreaCode</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strDestCallingCode</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("INFO: *********JAVA CALLING AuthorizeDestination *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("INFO: ********* iJavaReturnCode " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=399 y=110 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API CONF AUTHORIZE DESTINATION, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=414 y=230 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="ConfAPIGetLastParty" start="1" event="ConfAPIGetLastParty" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object"/>
        <parameter name="strLastPartySessionId" type="string" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=140 y=136 ?>
          <!--getLastParty()-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.conferencing.psAPISceConfGetLastParty&quot;" method="&quot;getLastConfParty&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strConfEventId</parameter>
            <parameter type="inout" var-type="string" >strLastPartySessionId</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("INFO: ********JAVA CALLING getLastConfParty *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("INFO: ********** iJavaReturnCode " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=403 y=100 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API CONF GET LAST PARTY, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=418 y=220 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="ConfAPICleanUpAll" start="1" event="ConfAPICleanUpAll" returns="i4" >
      <parameters >
        <parameter name="strServerName" type="string"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
        <var name="f_lCurrentTime" type="i8" >0</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=176 y=182 ?>
          <!--confCleanUpAll-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.conferencing.psAPISceConfCleanup&quot;" method="&quot;cleanup&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="i8" >f_lCurrentTime</parameter>
            <parameter type="in" var-type="string" >strServerName</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("INFO: ********JAVA CALLING psAPISceConfCleanup *********");

Session.f_lCurrentTime = Server.getUTCTime();]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("INFO: ********** iJavaReturnCode " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=460 y=169 ?>
          <!--FAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API CONF CLEAN UP, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=462 y=253 ?>
          <!--JAVA RETURN CODE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="ConfAPIGetNewCC" start="1" event="ConfAPIGetNewCC" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
        <var name="f_strBadCCIP" type="string" ></var>
        <var name="f_nBadCCPort" type="i4" >0</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=188 y=130 ?>
          <!--"getNewConfController"-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.conferencing.psAPISceConfCleanup&quot;" method="&quot;getNewConfController&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strConfEventId</parameter>
            <parameter type="in" var-type="string" >f_strBadCCIP</parameter>
            <parameter type="in" var-type="i4" >f_nBadCCPort</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSiteId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strConfControllerIP</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nConfControllerPort</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_strBadCCIP = Session.p_oAPI.strConfControllerIP;

Session.f_nBadCCPort = Session.p_oAPI.nConfControllerPort;

Server.logInfo("INFO: ********JAVA CALLING getNewConfController *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("INFO: ********** iJavaReturnCode " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=445 y=136 ?>
          <!--FAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API CONF GET NEW CC, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=447 y=220 ?>
          <!--JAVA RETURN CODE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="ConfAPISetBillingCodeNumber" start="1" event="ConfAPISetBillingCodeNumber" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=190 y=209 ?>
          <!--set billing code-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.conferencing.psAPISceConfMisc&quot;" method="&quot;setBillingCode&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strConfSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strConfScheduleId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDBCallLegId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strBillingCodeNumber</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("INFO: *********JAVA CALLING SetConfResource *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("INFO: ********* SetConfResource returns " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=452 y=179 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API CONF SET BILLING CODE, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=469 y=301 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="ACDAPIBeginRequest" start="1" event="ACDAPIBeginRequest" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object"/>
        <parameter name="p_oACD" type="object" pass="byref"/>
        <parameter name="p_oSUB" type="object"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
        <var name="f_lTempLong" type="i8" >0</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=226 y=172 ?>
          <!--BeginRequest-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.acd.psAPISceBeginRequest&quot;" method="&quot;logBeginRequest&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strApplicationName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strAppServerContact</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSoapPort</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nAccessNumberId</parameter>
            <parameter type="in" var-type="i4" >p_oACD.nCSRRouteReasonCode</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strLanguage</parameter>
            <parameter type="in" var-type="i8" >p_oACD.lCSRRequestSkillId</parameter>
            <parameter type="in" var-type="i8" >p_oACD.lRequestStartTime</parameter>
            <parameter type="in" var-type="i4" >p_oACD.lCSRRequestGroupId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strConfEventId</parameter>
            <parameter type="inout" var-type="i8" >p_oACD.lCSRRequestId</parameter>
            <parameter type="inout" var-type="i8" >p_oACD.lCSRRequestLanguageId</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("INFO: *********JAVA CALLING psAPISceBeginRequest *********");

Session.p_oACD.lRequestStartTime = Server.getUTCTime();]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("INFO: ********* iJavaReturnCode " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=498 y=132 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API CSR BEGIN REQUEST, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=513 y=252 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="ACDAPIGetDisplayInfo" start="1" event="ACDAPIGetDisplayInfo" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object"/>
        <parameter name="p_oACD" type="object" pass="byref"/>
        <parameter name="p_oSUB" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=194 y=176 ?>
          <!--"getDisplayInfo"-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.acd.psAPISceGetRequestDisplayInfo&quot;" method="&quot;getDisplayInfo&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="i8" >p_oACD.lCSRRequestSkillId</parameter>
            <parameter type="in" var-type="i8" >p_oACD.lCSRRequestLanguageId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.nPrimaryOfferingId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lCSRRequestServiceId</parameter>
            <parameter type="in" var-type="i4" >p_oACD.nCSRRouteReasonCode</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nAccessNumberId</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="inout" var-type="string" >p_oACD.strCSRRequestSkillName</parameter>
            <parameter type="inout" var-type="string" >p_oACD.strCSRRequestLanguageName</parameter>
            <parameter type="inout" var-type="string" >p_oACD.strCSRRequestOfferingName</parameter>
            <parameter type="inout" var-type="string" >p_oACD.strCSRRequestServiceName</parameter>
            <parameter type="inout" var-type="string" >p_oACD.strCSRRequestTypeName</parameter>
            <parameter type="inout" var-type="string" >p_oACD.strCSRAccessNumberName</parameter>
            <parameter type="inout" var-type="string" >p_oACD.strCSRServiceProviderName</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strCallerFirstName</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strCallerLastName</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("INFO: *********JAVA CALLING psAPISceBeginRequest *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("INFO: ********* iJavaReturnCode " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=484 y=145 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API ACD GET DISPLAY INFO, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=499 y=265 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="ACDAPIEndRequest" start="1" event="ACDAPIEndRequest" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object"/>
        <parameter name="p_oACD" type="object"/>
        <parameter name="p_oSUB" type="object"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
        <var name="f_nRequestDuration" type="i4" >0</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=215 y=192 ?>
          <!--EndRequest-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.acd.psAPISceEndRequest&quot;" method="&quot;logEndRequest&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="i8" >p_oACD.lCSRRequestId</parameter>
            <parameter type="in" var-type="boolean" >p_oACD.bCSRAssignmentFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strAppServerContact</parameter>
            <parameter type="in" var-type="i8" >p_oACD.lCSRAssignmentId</parameter>
            <parameter type="in" var-type="i8" >p_oACD.lCSRUserId</parameter>
            <parameter type="in" var-type="i4" >p_oACD.nCSRAssignmentGroupId</parameter>
            <parameter type="in" var-type="string" >p_oACD.strCSRRequestTypeName</parameter>
            <parameter type="in" var-type="i4" >p_oACD.lCSRRequestSkillId</parameter>
            <parameter type="in" var-type="i4" >p_oACD.lCSRRequestLanguageId</parameter>
            <parameter type="in" var-type="i8" >p_oACD.lCSRAssignmentStartTime</parameter>
            <parameter type="in" var-type="i8" >p_oACD.lRequestStartTime</parameter>
            <parameter type="in" var-type="i8" >p_oACD.lRequestEndTime</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strConfEventId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nTerminationReason</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.nPrimaryOfferingId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.nServiceId</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="i4" >p_oACD.nOnHoldTime</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.p_oACD.lRequestEndTime = Server.getUTCTime();

//Session.f_nRequestDuration = Session.p_oACD.lRequestEndTime - Session.p_oACD.lRequestStartTime;

Server.logInfo("INFO: *********JAVA CALLING psAPISceEndRequest *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("INFO: ********* iJavaReturnCode " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=519 y=152 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API CSR END REQUEST, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=534 y=272 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="ACDAPIEndAssignment" start="1" event="ACDAPIEndAssignment" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object"/>
        <parameter name="p_oACD" type="object"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=233 y=194 ?>
          <!--psAPISceEndAssignment-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.acd.psAPISceEndAssignment&quot;" method="&quot;endAssignment&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="i8" >p_oACD.lCSRRequestId</parameter>
            <parameter type="in" var-type="string" >p_oACD.strCSRAppServerIP</parameter>
            <parameter type="in" var-type="i8" >p_oACD.lCSRAssignmentId</parameter>
            <parameter type="in" var-type="i8" >p_oACD.lCSRUserId</parameter>
            <parameter type="in" var-type="i8" >p_oACD.lCSRAssignmentStartTime</parameter>
            <parameter type="in" var-type="i8" >p_oACD.lCSRAssignmentEndTime</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strConfSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDBCallLegId</parameter>
            <parameter type="in" var-type="string" >p_oACD.CSRRequestPrivateTalk</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.p_oACD.lCSRAssignmentEndTime = Server.getUTCTime();

Server.logInfo("INFO: *********JAVA CALLING psAPISceEndAssignment *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("INFO: ********* iJavaReturnCode " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=522 y=157 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API CSR END ASSIGNMENT, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=537 y=277 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="psAPIGetSubscriberDirectCallInfo" start="2" event="" returns="i4" >
      <parameters >
        <parameter name="p_oSUB" type="object" pass="byref"/>
        <parameter name="p_oAPI" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
      </local-vars>
      <actions >
        <action id="2" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=77 y=106 ?>
          <!--"getSubscriberDirectCallInfo"-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceMisc&quot;" method="&quot;getSubscriberDirectCallInfo&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strDirectCallId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strDestinationNumber</parameter>
            <parameter type="inout" var-type="boolean" >p_oSUB.bSubDirectCallFlag</parameter>
          </java>
          <results >
            <result name="Default" link="1" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="1" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=376 y=119 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="psAPISetSubscriberDirectCallFlag" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="p_oSUB" type="object" pass="byref"/>
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_bEnableFlag" type="boolean" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nTIMEOUT" type="i4" >60</var>
        <var name="f_nReturnCode" type="i4" >-50</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=102 y=102 ?>
          <!--updateSubscriberDirectCallFlag-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceMisc&quot;" method="&quot;updateSubscriberDirectCallFlag&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="in" var-type="boolean" >p_bEnableFlag</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=392 y=137 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="psAPIAddDirectCall" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="p_oSUB" type="object" pass="byref"/>
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oMS" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=82 y=83 ?>
          <!--"addDirectCall"-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceMisc&quot;" method="&quot;addDirectCall&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDestinationNumber</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strDirectCallId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSvcDirectCallIdLength</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=362 y=106 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="psAPIUpdateDirectCallDestinationNumber" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="p_oSUB" type="object" pass="byref"/>
        <parameter name="p_oAPI" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >60</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=30 y=170 ?>
          <!--"updateDirectCallDestinationNumber"-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceMisc&quot;" method="&quot;updateDirectCallDestinationNumber&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strDirectCallId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDestinationNumber</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=338 y=212 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="psAPIUpdateDirectCallId" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="p_oSUB" type="object" pass="byref"/>
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oMS" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >60</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=45 y=182 ?>
          <!--"updateDirectCallId"-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceMisc&quot;" method="&quot;updateDirectCallId&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDestinationNumber</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strDirectCallId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSvcDirectCallIdLength</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=328 y=224 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="psAPIGetExpDate" start="1" event="psAPIGetExpDate" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object"/>
        <parameter name="p_oSUB" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nTIMEOUT" type="i4" >30</var>
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=170 y=227 ?>
          <!--getExpDate()-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceMisc&quot;" method="&quot;getSubExpDate&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDBSessionId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strExpDate</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START getExpDate*********");

]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*********JAVA RETURN *********");

Server.logInfo("getExpDate returned " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=455 y=163 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API GET EXPIRATION DATE , EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=471 y=368 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="ACDAPIBeginAssignment" start="1" event="ACDAPIBeginAssignment" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oACD" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nSUCCESS" type="i4" >0</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=185 y=239 ?>
          <!--BeginAssignment-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.acd.psAPISceBeginAssignment&quot;" method="&quot;beginAssignment&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="i8" >p_oACD.lCSRRequestId</parameter>
            <parameter type="in" var-type="string" >p_oACD.strCSRAppServerIP</parameter>
            <parameter type="in" var-type="i8" >p_oACD.lCSRAssignmentId</parameter>
            <parameter type="in" var-type="i8" >p_oACD.lCSRUserId</parameter>
            <parameter type="in" var-type="i8" >p_oACD.lCSRAssignmentStartTime</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("ACD API BEGIN ASSIGNMENT RECEIVES Assignment Id: " + Session.p_oACD.lCSRAssignmentId);

Server.logInfo("INFO: *********JAVA CALLING psAPISceAssignment *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("INFO: ********* iJavaReturnCode " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=457 y=199 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API CSR BEGIN ASSIGNMENT, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=472 y=319 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="psAPIUnlockPin" start="5" event="psAPIUnlockPin" returns="i4" >
      <parameters >
        <parameter name="p_oSUB" type="object" pass="byref"/>
        <parameter name="p_oAPI" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_strJAVA_CLASS" type="string" ></var>
        <var name="f_nReturnCode" type="i4" >0</var>
        <var name="f_lPinOrSubId" type="i8" >0</var>
        <var name="f_nRC" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
      </local-vars>
      <actions >
        <action id="5" plug-in="Pactolus.Branch.1" ><?xtml-editor x=120 y=300 ?>
          <!--postpaid-->
          <results >
            <result name="Default" link="1" stubbed="0"/>
            <result name="strPostPaidFlag == T" link="4" stubbed="0" >p_oAPI.strPostPaidFlag == "T"</result>
          </results>
        </action>
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=351 y=166 ?>
          <!--Unlock Pin-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="f_strJAVA_CLASS" method="&quot;unlockPin&quot;" timeout="30" return="" method-return-var="f_nRC" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDBSessionId</parameter>
            <parameter type="in" var-type="i8" >f_lPinOrSubId</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[if(Session.p_oAPI.strPostPaidFlag == "T") {

	Session.f_strJAVA_CLASS = "com.pactolus.postpaid.psAPIScePopdMisc";

	Session.f_lPinOrSubId = Session.p_oSUB.lPinId;

} else {

	Session.f_strJAVA_CLASS = "com.pactolus.psAPISceMisc";

	Session.f_lPinOrSubId = Session.p_oSUB.lSubscriberId;	

}

]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=635 y=149 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API UNLOCK PIN , EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=653 y=311 ?>
          <!--f_nRC-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nRC"/>
        </action>
        <action id="4" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=365 y=475 ?>
          <!--Unlock Pin-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="f_strJAVA_CLASS" method="&quot;unlockPin&quot;" timeout="30" return="" method-return-var="f_nRC" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDBSessionId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lPinId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strPinLockId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strCreditLimitFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strCreditLimitFlagFirm</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="1"/>
            <result name="Success" link="3" stubbed="1"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_strJAVA_CLASS = "com.pactolus.postpaid.psAPIScePopdMisc";]]></script>
          </scripts>
        </action>
      </actions>
    </function>
    <function name="VoipAuthenticateOrigination" start="1" event="VoipAuthenticateOrigination" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oAccessLine" type="object" pass="byref"/>
        <parameter name="p_oService" type="object" pass="byref"/>
        <parameter name="p_strResponse" type="string" pass="byref"/>
        <parameter name="p_oSub" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="nReturnCode" type="i4" >-50</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=95 y=44 ?>
          <!--authOriginate-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.broadband.psAPISceBroadbandAuth&quot;" method="&quot;authOrigination&quot;" timeout="5" return="" method-return-var="nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAccessLine.strRealm</parameter>
            <parameter type="in" var-type="string" >p_oAccessLine.strUserName</parameter>
            <parameter type="in" var-type="string" >"INVITE"</parameter>
            <parameter type="in" var-type="string" >p_oAccessLine.strUri</parameter>
            <parameter type="in" var-type="string" >p_oAccessLine.strNonce</parameter>
            <parameter type="in" var-type="string" >p_oAccessLine.strResponse</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDestReceived</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strAniReceived</parameter>
            <parameter type="inout" var-type="i8" >p_oSub.lSubscriberId</parameter>
            <parameter type="inout" var-type="i8" >p_oSub.lSPId</parameter>
            <parameter type="inout" var-type="i4" >p_oService.nSvcId</parameter>
            <parameter type="inout" var-type="i8" >p_oAccessLine.lAccessLineId</parameter>
            <parameter type="inout" var-type="i8" >p_oAccessLine.lPhoneNumberId</parameter>
            <parameter type="inout" var-type="string" >p_oAccessLine.strCodec</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strOrigOnNet</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strDestOnNet</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strCallType</parameter>
            <parameter type="inout" var-type="string" >p_oAccessLine.strBlockCallerIdFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAccessLine.strActivationPendingFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strAniToSend</parameter>
            <parameter type="inout" var-type="string" >p_oAccessLine.strWiretapFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAccessLine.strWiretapDest</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strDestToSend</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strRoute[0]</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strRoute[1]</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strRoute[2]</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strRoute[3]</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strRoute[4]</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strIntlDestFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAccessLine.strActivationPin</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nDestCountryId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strDestCallingCode</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strDestAreaCode</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strIntlOrigFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nOrigCountryId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strOrigCallingCode</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strOrigAreaCode</parameter>
            <parameter type="inout" var-type="string" >p_oAccessLine.strLanguage</parameter>
            <parameter type="inout" var-type="string" >p_oService.strPreActivationPromptType</parameter>
            <parameter type="inout" var-type="i4" >p_oService.nPreActivationPromptIndex</parameter>
            <parameter type="inout" var-type="string" >p_oService.strPreActivationPromptUrl</parameter>
            <parameter type="inout" var-type="string" >p_oService.strSuccessActivationPromptType</parameter>
            <parameter type="inout" var-type="i4" >p_oService.nSuccessActivationPromptIndex</parameter>
            <parameter type="inout" var-type="string" >p_oService.strSuccessActivationPromptUrl</parameter>
            <parameter type="inout" var-type="string" >p_oService.strFailActivationPromptType</parameter>
            <parameter type="inout" var-type="i4" >p_oService.nFailActivationPromptIndex</parameter>
            <parameter type="inout" var-type="string" >p_oService.strFailActivationPromptUrl</parameter>
            <parameter type="inout" var-type="i8" >p_oAccessLine.lWiretapOrderId</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nBillingType</parameter>
            <parameter type="inout" var-type="float" >p_oSub.fPrepaidBalance</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nWarningThreshold1</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nWarningThreshold2</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nWarningThreshold3</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nMinBillingDurationInSec</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nRoundingSeconds</parameter>
            <parameter type="inout" var-type="i4" >p_oSub.nExpirationType</parameter>
            <parameter type="inout" var-type="i4" >p_oSub.nCurrencyId</parameter>
            <parameter type="inout" var-type="string" >p_oSub.strFirstCallFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oSub.nRoundingThresholdSeconds</parameter>
            <parameter type="inout" var-type="i4" >p_oSub.nNumExpDays</parameter>
            <parameter type="inout" var-type="float" >p_oSub.fCallMarkupPercent</parameter>
            <parameter type="inout" var-type="i4" >p_oAccessLine.nMinTimeAnnounce</parameter>
            <parameter type="inout" var-type="i4" >p_oService.nMaxCallDuration</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strSubPasscode</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fCreditLimit</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fCreditLimitWarningThreshold</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fCreditUsed</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strCreditLimitFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strFirmCreditLimitFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strRateCallsFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strSubRestrictionsFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oSub.nPrimaryOfferingId</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nDialingPlanId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPrimaryRouteCode</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bApplyPrecallRounding</parameter>
            <parameter type="inout" var-type="i8" >p_oAPI.lDeptId</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nActionValueId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strReceptionPhone</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nRNATimeout</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strAllowZeroCostFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nEmergencyRouteType</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strEmergencyRoute1</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strEmergencyRoute2</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strEmergencyRoute3</parameter>
            <parameter type="inout" var-type="i8" >p_oAPI.lVoiceMailId</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bUseRTPRelay</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strAuthDestNumber</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strMOHFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strMOHRecording</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strMOHInterruptRecording</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nMOHInterruptInterval</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strSharedUseBillingFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nCommitInterval</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nBillingLevel</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nCurrencyPrecision</parameter>
            <parameter type="inout" var-type="i8" >p_oSub.lCorpAcctNumber</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strRecordingAcctUser</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strRecordingAcctPassword</parameter>
            <parameter type="inout" var-type="i4" >p_oSub.nSecondsBalance</parameter>
            <parameter type="inout" var-type="i4" >p_oSub.nSecondsUsed</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strSipCallId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strSipFromTag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strSipToTag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strSipAddress</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSipPort</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
            <result name="valid" link="3" stubbed="0" >nReturnCode == 0</result>
            <result name="authentication failed" >nReturnCode == -1</result>
            <result name="unknown username" >nReturnCode == -2</result>
            <result name="disabled subscriber" >nReturnCode == -3</result>
            <result name="disabled service provider" >nReturnCode == -4</result>
            <result name="disabled access line" >nReturnCode == -5</result>
            <result name="restricted destination" >nReturnCode == -6</result>
            <result name="call return lookup failed" >nReturnCode == -7</result>
            <result name="PSTN egress forbidden" >nReturnCode == -8</result>
            <result name="911 forbidden" >nReturnCode == -9</result>
            <result name="max streams reached" >nReturnCode == -10</result>
            <result name="max SP streams reached" >nReturnCode == -11</result>
            <result name="DB error" >nReturnCode == -99</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START VoipAuthenticateOrigination *********");

Server.logInfo("BEFORE: p_oAccessLine.strRealm: " + Session.p_oAccessLine.strRealm);

Server.logInfo("BEFORE: p_oAccessLine.strUserName: " + Session.p_oAccessLine.strUserName); 

]]></script>
            <script language="javascript" timing="middle" ><![CDATA[Server.logInfo("*********JAVA END VoipAuthenticateOrigination *********");





if( 2 == Result.id ) {



	Session.p_oAccessLine.bAuthenticated = true ;

	

	switch( Session.nReturnCode ) {

	case 0: Server.logInfo("Authentication succeeded") ; 

			break ;

	

	case -1: Server.logInfo("MD5 Authentication failed"); 

			Session.p_strResponse = "SIP/2.0 403 Forbidden" ;

			Session.p_oAccessLine.bAuthenticated = false ;

			break ;

	case -2: Server.logInfo("Device attempting to register with unknown authentication name"); 

			Session.p_strResponse = "SIP/2.0 404 Not Found" ;

			Session.p_oAccessLine.bAuthenticated = false ;

			break ;

	case -3: Server.logInfo("Subscriber disabled"); 

			Session.p_strResponse = "SIP/2.0 480 Temporarily Unavailable" ;

			break ;

	case -4: Server.logInfo("Service provider disabled"); 

			Session.p_strResponse = "SIP/2.0 480 Temporarily Unavailable" ;

			break ;

	case -5: Server.logInfo("Phone disabled"); 

			Session.p_strResponse = "SIP/2.0 480 Temporarily Unavailable" ;

			break ;

	case -6: Server.logInfo("Restricted destination"); 

			Session.p_strResponse = "SIP/2.0 403 Forbidden" ;

			break ;

	case -7: Server.logInfo("No caller id"); 

			break ;

	case -8: Server.logInfo("PSTN call not allowed for this class of service"); 

			Session.p_strResponse = "SIP/2.0 403 Forbidden" ;

			break ;

	case -9: Server.logInfo("E911 call not allowed for this subscriber"); 

			Session.p_strResponse = "SIP/2.0 403 Forbidden" ;

			break ;

	case -10: Server.logInfo("Maximum streams reached for this access line"); 

			Session.p_strResponse = "SIP/2.0 480 Temporarily Unavailable" ;

			break ;

	case -11: Server.logInfo("Maximum streams reached for this service provider"); 

			Session.p_strResponse = "SIP/2.0 480 Temporarily Unavailable" ;

			break ;

	case -12: Server.logInfo("Destination Unreachable") ;

			Session.p_strResponse = "SIP/2.0 485 Ambiguous" ;

			break ;

	case -13: Server.logInfo("authOrigination: Low balance") ;

			Session.p_strResponse = "SIP/2.0 500 Internal Server Error" ;

			break ;

	case -14: Server.logInfo("authOrigination: Account expired") ;

			Session.p_strResponse = "SIP/2.0 500 Internal Server Error" ;

			break ;

	case -15: Server.logInfo("authOrigination: PIN Locked") ;

			Session.p_strResponse = "SIP/2.0 500 Internal Server Error" ;

			break ;
			
	case -17:  Server.logInfo("authOrigination: Max External Streams Reached");
	
			Session.p_strResponse = "SIP/2.0 480 Temporarily Unavailable" ;
			
			break;
	

	case -99: Server.logError("DB error during device registration"); 

			Session.p_strResponse = "SIP/2.0 503 Service Unavailable" ;

			Session.p_oAccessLine.bAuthenticated = false ;

			break ;

	default: Server.logError("Unknown error during authOrigination: " + Session.nReturnCode ) ; 

			Session.p_strResponse = "SIP/2.0 503 Service Unavailable" ;

			break ;

	}

	

	if( 0 == Session.nReturnCode ) {

		Server.logInfo("Subscriber Id: " + Session.p_oSub.lSubscriberId) ;

		Server.logInfo("SP Id : " + Session.p_oSub.lSPId ) ;	

		Server.logInfo("Service Id : " + Session.p_oService.nSvcId ) ;	

		Server.logInfo("Access Line Id : " + Session.p_oAccessLine.lAccessLineId ) ;	

		Server.logInfo("Phone Number Id: " + Session.p_oAccessLine.lPhoneNumberId ) ;

		Server.logInfo("Codec : " + Session.p_oAccessLine.strCodec ) ;	

		Server.logInfo("Orig On Net : " + Session.p_oAPI.strOrigOnNet ) ;	

		Server.logInfo("Dest On Net : " + Session.p_oAPI.strDestOnNet ) ;	

		Server.logInfo("Call Type : " + Session.p_oAPI.strCallType ) ;	

		Server.logInfo("Caller Id Block : " + Session.p_oAccessLine.strBlockCallerIdFlag ) ;	

		Server.logInfo("Activation Pending : " + Session.p_oAccessLine.strActivationPendingFlag ) ;	

		Server.logInfo("ANI to use : " + Session.p_oAPI.strAniToSend ) ;

		Server.logInfo("Dest to use: " + Session.p_oAPI.strDestToSend ) ;

		Server.logInfo("Wiretap : " + Session.p_oAccessLine.strWiretapFlag ) ;	

		Server.logInfo("Wiretap Dest : " + Session.p_oAccessLine.strWiretapDest ) ;

		Server.logInfo("Wiretap Order Id: " + Session.p_oAccessLine.lWiretapOrderId ) ;	

		Server.logInfo("Route 1 : " + Session.p_oAPI.strRoute[0] ) ;	

		Server.logInfo("Route 2 : " + Session.p_oAPI.strRoute[1] ) ;	

		Server.logInfo("Route 3 : " + Session.p_oAPI.strRoute[2] ) ;	

		Server.logInfo("Route 4 : " + Session.p_oAPI.strRoute[3] ) ;	

		Server.logInfo("Route 5 : " + Session.p_oAPI.strRoute[4] ) ;	

		Server.logInfo("Intl Dest : " + Session.p_oAPI.strIntlDestFlag ) ;	

		Server.logInfo("Activation Pin : " + Session.p_oAccessLine.strActivationPin ) ;	

		Server.logInfo("Dest Country Code : " + Session.p_oAPI.nDestCountryId ) ;	

		Server.logInfo("Dest Calling Code : " + Session.p_oAPI.strDestCallingCode ) ;	

		Server.logInfo("Dest Area Code : " + Session.p_oAPI.strDestAreaCode ) ;	

		Server.logInfo("Intl Orig : " + Session.p_oAPI.strIntlOrigFlag ) ;	

		Server.logInfo("Orig Country Code : " + Session.p_oAPI.nOrigCountryId ) ;	

		Server.logInfo("Orig Calling Code : " + Session.p_oAPI.strOrigCallingCode ) ;	

		Server.logInfo("Orig Area Code : " + Session.p_oAPI.strOrigAreaCode ) ;		

		Server.logInfo("Language: " + Session.p_oAccessLine.strLanguage ); 

		Server.logInfo("First-use prompt type: " + Session.p_oService.strPreActivationPromptType ) ;

		Server.logInfo("First-use index prompt: " + Session.p_oService.nPreActivationPromptIndex ) ;

		Server.logInfo("First-use url prompt: " + Session.p_oService.strPreActivationPromptUrl ); 

		Server.logInfo("Successful activation prompt type: " + Session.p_oService.strSuccessActivationPromptType ) ;

		Server.logInfo("Successful activation index prompt: " + Session.p_oService.nSuccessActivationPromptIndex ) ;

		Server.logInfo("Successful activation url prompt: " + Session.p_oService.strSuccessActivationPromptUrl ); 

		Server.logInfo("Failed activation prompt type: " + Session.p_oService.strFailActivationPromptType ) ;

		Server.logInfo("Failed activation index prompt: " + Session.p_oService.nFailActivationPromptIndex ) ;

		Server.logInfo("Failed activation url prompt: " + Session.p_oService.strFailActivationPromptUrl ); 

		Server.logInfo("Department ID: " + Session.p_oAPI.lDeptId);

		Server.logInfo("Action Value ID: " + Session.p_oAPI.nActionValueId);

		Server.logInfo("Receptionist Phone: " + Session.p_oAPI.strReceptionPhone);

		Server.logInfo("Receptionist Ring No Answer Timeout: " + Session.p_oAPI.nRNATimeout);
		
		Server.logInfo("Voice Mail Account Id: " + Session.p_oAPI.lVoiceMailId);
		
		Server.logInfo("Use RTP Relay: " + Session.p_oAPI.bUseRTPRelay);
		
		Session.p_oAPI.strRelayMediaFlag = (Session.p_oAPI.bUseRTPRelay ? "T" : "F");
		
		Server.logInfo("Relay Media Flag: " + Session.p_oAPI.strRelayMediaFlag );
		
		Server.logInfo("Auth Dest Number: " + Session.p_oAPI.strAuthDestNumber );
		
		Server.logInfo("Music On Hold Flag: " + Session.p_oAPI.strMOHFlag ) ;
		
		if ( "T" == Session.p_oAPI.strMOHFlag ) {
			Server.logInfo("Music On Hold Recording: " + Session.p_oAPI.strMOHRecording);
			Server.logInfo("Interrupt Recording: " + Session.p_oAPI.strMOHInterruptRecording);
			Server.logInfo("Interrupt Interval: " + Session.p_oAPI.nMOHInterruptInterval);
			Server.logInfo("Recording Account User: " + Session.p_oAPI.strRecordingAcctUser);
			Server.logInfo("Recording Account Password: " + Session.p_oAPI.strRecordingAcctPassword);
		}

	}

}

else {

	Server.logError("Error in VoipAuthenticateOrigination, exit on: " + Result.name ) ;

}]]></script>
            <script language="javascript" timing="last" ><![CDATA[// Need to set various variables here so when AuthDest uses them later they 

// will be set. Unfortunately, AuthOrig and AuthDest use different variable 

// names in the drop-to-Javas.

Server.logInfo("********* VoipAuthenticateOrigination setting variables");

Session.p_oAPI.nRoundingSeconds = Session.p_oAPI.nRoundingSeconds;

Session.p_oSub.nRoundingThresholdSeconds = Session.p_oSub.nRoundingThresholdSeconds;

Session.p_oSub.nRoundingThreshold = Session.p_oSub.nRoundingThresholdSeconds;

Session.p_oAPI.nMinBillingDurationInSec = Session.p_oAPI.nMinBillingDurationInSec;

Server.logInfo ("Rounding Seconds     = " + Session.p_oAPI.nRoundingSeconds);

Server.logInfo ("Rounding Threshold   = " + Session.p_oSub.nRoundingThresholdSeconds);

Server.logInfo ("Rounding Threshold(2)= " + Session.p_oSub.nRoundingThreshold);

Server.logInfo ("Min Billing Duration = " + Session.p_oAPI.nMinBillingDurationInSec);

]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=384 y=84 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nReturnCode"/>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=391 y=165 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nReturnCode"/>
        </action>
        <action id="4" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=395 y=272 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value="-7"/>
        </action>
      </actions>
    </function>
    <function name="VoipActivateAccessLine" start="1" event="VoipActivateAccessLine" returns="i4" >
      <parameters >
        <parameter name="oAPI" type="object" pass="byref"/>
        <parameter name="lAccessLineId" type="i8" pass="byref"/>
        <parameter name="strDigits" type="string" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="nReturnCode" type="i4" >0</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=35 y=36 ?>
          <!--psAPISceBroadbandAuth 

activateAccessLine-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.broadband.psAPISceBroadbandAuth&quot;" method="&quot;activateAccessLine&quot;" timeout="" return="" method-return-var="nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >"pactolusdb"</parameter>
            <parameter type="in" var-type="i8" >lAccessLineId</parameter>
            <parameter type="in" var-type="string" >strDigits</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
            <result name="activation succeeded" link="3" stubbed="0" >nReturnCode == 0</result>
            <result name="bad pin" >nReturnCode == -1</result>
            <result name="bad access line" >nReturnCode == -2</result>
            <result name="DB error" >nReturnCode == -99</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START VoipActivateAccessLine *********");

Server.logInfo("BEFORE: lAccessLineId: " + Session.lAccessLineId);

Server.logInfo("BEFORE: strDigits: " + Session.strDigits ) ;



]]></script>
            <script language="javascript" timing="last" ><![CDATA[if( 2 == Result.id ) {

	Server.logInfo("AFTER: return code: " + Session.nReturnCode ) ;

}

else {

	Server.logError("ERROR calling activateAccessLine, exiting on: " + Result.name ) ;

}

Server.logInfo("*********JAVA END VoipActivateAccessLine *********");





]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=340 y=56 ?>
          <!--Failure-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=343 y=158 ?>
          <!--Success-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="VoipProcCallCompletion" start="1" event="VoipProcCallCompletion" returns="i4" >
      <parameters >
        <parameter name="oAPI" type="object" pass="byref"/>
        <parameter name="oAccessLine" type="object" pass="byref"/>
        <parameter name="oService" type="object" pass="byref"/>
        <parameter name="oCallLegA" type="object" pass="byref"/>
        <parameter name="oCallLegB" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-55</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=116 y=137 ?>
          <!--procCallCompletion-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.broadband.psAPISceBroadbandCallComp&quot;" method="&quot;procCallCompletion&quot;" timeout="5" return="" method-return-var="nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >oAPI.strApplicationName</parameter>
            <parameter type="in" var-type="i8" >oAccessLine.oSub.lSPId</parameter>
            <parameter type="in" var-type="i8" >oAccessLine.oSub.lSubscriberId</parameter>
            <parameter type="in" var-type="i4" >oService.iSvcId</parameter>
            <parameter type="in" var-type="i8" >oAccessLine.lPhoneNumberId</parameter>
            <parameter type="in" var-type="string" >oCallLegA.strCallId</parameter>
            <parameter type="in" var-type="string" >oCallLegB.strCallId</parameter>
            <parameter type="in" var-type="string" >oCallLegA.strFrom</parameter>
            <parameter type="in" var-type="string" >oCallLegB.strTo</parameter>
            <parameter type="in" var-type="string" >oCallLegB.strStatus</parameter>
            <parameter type="in" var-type="i4" >oCallLegB.nRtpClockRate</parameter>
            <parameter type="in" var-type="i4" >oCallLegB.nPayloadType</parameter>
            <parameter type="in" var-type="i8" >oCallLegB.lTimeStart</parameter>
            <parameter type="in" var-type="i8" >oCallLegB.lTimeAnswered</parameter>
            <parameter type="in" var-type="i8" >oCallLegB.lTimeEnded</parameter>
            <parameter type="in" var-type="i4" >oCallLegB.nTerminationReason</parameter>
            <parameter type="in" var-type="string" >oCallLegA.strRemoteSignalingAddress</parameter>
            <parameter type="in" var-type="i4" >oCallLegA.nRemoteSignalingPort</parameter>
            <parameter type="in" var-type="string" >oCallLegB.strRemoteSignalingAddress</parameter>
            <parameter type="in" var-type="i4" >oCallLegB.nRemoteSignalingPort</parameter>
            <parameter type="in" var-type="string" >oCallLegB.strOutdialDestNbr</parameter>
            <parameter type="in" var-type="string" >oCallLegB.strEnteredDestNbr</parameter>
            <parameter type="in" var-type="string" >"F"</parameter>
            <parameter type="in" var-type="string" >oCallLegB.strIntlDestFlag</parameter>
            <parameter type="in" var-type="i4" >oCallLegB.nDestCountryId</parameter>
            <parameter type="in" var-type="string" >oCallLegB.strDestCallingCode</parameter>
            <parameter type="in" var-type="string" >oCallLegB.strDestAreaCode</parameter>
            <parameter type="in" var-type="string" >oCallLegA.strCallingNumber</parameter>
            <parameter type="in" var-type="string" >oCallLegA.strIntlOrigFlag</parameter>
            <parameter type="in" var-type="i4" >oCallLegA.nOrigCountryCode</parameter>
            <parameter type="in" var-type="string" >oCallLegA.strOrigCallingCode</parameter>
            <parameter type="in" var-type="string" >oCallLegA.strOrigAreaCode</parameter>
            <parameter type="in" var-type="string" >oCallLegA.strOrigTrunkGroup</parameter>
            <parameter type="in" var-type="string" >oCallLegB.strDestTrunkGroup</parameter>
            <parameter type="in" var-type="string" >oCallLegA.strOrigFlag</parameter>
            <parameter type="in" var-type="string" >oCallLegA.strOrigRouteType</parameter>
            <parameter type="in" var-type="string" >oCallLegB.strDestRouteType</parameter>
            <parameter type="in" var-type="string" >oCallLegA.strInfoDigits</parameter>
            <parameter type="in" var-type="string" >oCallLegB.strCallType</parameter>
            <parameter type="in" var-type="string" >oCallLegB.strWiretapFlag</parameter>
            <parameter type="in" var-type="string" >oCallLegB.strWiretapDest</parameter>
            <parameter type="in" var-type="string" >oCallLegA.strSvcProviderCallerId</parameter>
            <parameter type="in" var-type="string" >oCallLegA.strSubscriberCallerId</parameter>
            <parameter type="in" var-type="i8" >oAccessLine.lWiretapOrderId</parameter>
            <parameter type="in" var-type="string" >oAPI.strEmergencyCallId</parameter>
          </java>
          <results >
            <result name="Default" link="3" stubbed="0"/>
            <result name="Success" link="2" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START VoipProcCallCompletion *********");

Server.logInfo("BEFORE: Start time: " + Session.oCallLegB.lTimeStart ) ;

Server.logInfo("BEFORE: Start time: " + Session.oCallLegB.lTimeAnswered ) ;

Server.logInfo("BEFORE: Start time: " + Session.oCallLegB.lTimeEnded ) ;

]]></script>
            <script language="javascript" timing="last" ><![CDATA[if( 2 == Result.id ) {

	Server.logInfo("AFTER: return code: " + Session.nReturnCode ) ;

}

else {

	Server.logError("ERROR calling VoipProcCallCompletion, exiting on: " + Result.name ) ;

}

Server.logInfo("*********JAVA END VoipProcCallCompletion *********");

]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=409 y=227 ?>
          <!--Success-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nReturnCode"/>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=410 y=102 ?>
          <!--Failure-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
        </action>
      </actions>
    </function>
    <function name="VoipAuthenticateTermination" start="1" event="VoipAuthenticateTermination" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oAccessLine" type="object" pass="byref"/>
        <parameter name="p_oService" type="object" pass="byref"/>
        <parameter name="p_strResponse" type="string" pass="byref"/>
        <parameter name="p_strRequestUri" type="string" pass="byref"/>
        <parameter name="p_oSub" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="nReturnCode" type="i4" >-50</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=66 y=56 ?>
          <!--authTermination-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.broadband.psAPISceBroadbandAuth&quot;" method="&quot;authTermination&quot;" timeout="5" return="" method-return-var="nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strDestReceived</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strAniReceived</parameter>
            <parameter type="in" var-type="string" >p_oAccessLine.strRealm</parameter>
            <parameter type="in" var-type="boolean" >p_oAPI.bCallerIdBlocked</parameter>
            <parameter type="in" var-type="string" >p_strRequestUri</parameter>
            <parameter type="inout" var-type="i8" >p_oAccessLine.oSub.lSubscriberId</parameter>
            <parameter type="inout" var-type="i8" >p_oAccessLine.oSub.lSPId</parameter>
            <parameter type="inout" var-type="i4" >p_oService.nSvcId</parameter>
            <parameter type="inout" var-type="i8" >p_oAccessLine.lAccessLineId</parameter>
            <parameter type="inout" var-type="i8" >p_oAccessLine.lPhoneNumberId</parameter>
            <parameter type="inout" var-type="string" >p_oAccessLine.strCodec</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strOrigOnNet</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strCallType</parameter>
            <parameter type="inout" var-type="string" >p_oAccessLine.strWiretapFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAccessLine.strWiretapDest</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[0].strPhoneNumber</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[0].strSoftswitch</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[0].strContact</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[0].strRecordRoute</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[0].strDestOnNet</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[0].strDestIntl</parameter>
            <parameter type="inout" var-type="i8" >p_oAPI.oRoute[0].lSubscriberId</parameter>
            <parameter type="inout" var-type="i8" >p_oAPI.oRoute[0].lPhoneNumberId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[1].strPhoneNumber</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[1].strSoftswitch</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[1].strContact</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[1].strRecordRoute</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[1].strDestOnNet</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[1].strDestIntl</parameter>
            <parameter type="inout" var-type="i8" >p_oAPI.oRoute[1].lSubscriberId</parameter>
            <parameter type="inout" var-type="i8" >p_oAPI.oRoute[1].lPhoneNumberId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[2].strPhoneNumber</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[2].strSoftswitch</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[2].strContact</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[2].strRecordRoute</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[2].strDestOnNet</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[2].strDestIntl</parameter>
            <parameter type="inout" var-type="i8" >p_oAPI.oRoute[2].lSubscriberId</parameter>
            <parameter type="inout" var-type="i8" >p_oAPI.oRoute[2].lPhoneNumberId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[3].strPhoneNumber</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[3].strSoftswitch</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[3].strContact</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[3].strRecordRoute</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[3].strDestOnNet</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[3].strDestIntl</parameter>
            <parameter type="inout" var-type="i8" >p_oAPI.oRoute[3].lSubscriberId</parameter>
            <parameter type="inout" var-type="i8" >p_oAPI.oRoute[3].lPhoneNumberId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[4].strPhoneNumber</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[4].strSoftswitch</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[4].strContact</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[4].strRecordRoute</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[4].strDestOnNet</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[4].strDestIntl</parameter>
            <parameter type="inout" var-type="i8" >p_oAPI.oRoute[4].lSubscriberId</parameter>
            <parameter type="inout" var-type="i8" >p_oAPI.oRoute[4].lPhoneNumberId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[5].strPhoneNumber</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[5].strSoftswitch</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[5].strContact</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[5].strRecordRoute</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[5].strDestOnNet</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.oRoute[5].strDestIntl</parameter>
            <parameter type="inout" var-type="i8" >p_oAPI.oRoute[5].lSubscriberId</parameter>
            <parameter type="inout" var-type="i8" >p_oAPI.oRoute[5].lPhoneNumberId</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nRingNoAnswerTimeout</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nHuntType</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bForwardToVoicemail</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nRejectMsgType</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strIntlOrigFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nOrigCountryId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strOrigCallingCode</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strOrigAreaCode</parameter>
            <parameter type="inout" var-type="string" >p_oAccessLine.oSub.strLanguage</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nMaxCallLength</parameter>
            <parameter type="inout" var-type="i8" >p_oAccessLine.lWiretapOrderId</parameter>
            <parameter type="inout" var-type="string" >p_oAccessLine.strAltPstnNumber</parameter>
            <parameter type="in" var-type="boolean" >p_oAPI.bFaxCall</parameter>
            <parameter type="in" var-type="boolean" >p_oAPI.bRemindMeCall</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strRingTone</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bPrepaid</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bRateCalls</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bCreditLimit</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fCreditLimit</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fCreditUsed</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fAccountBalance</parameter>
            <parameter type="inout" var-type="float" >p_oAPI.fMinPrepaidBalance</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nWarningThreshold1</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nWarningThreshold2</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nWarningThreshold3</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nMinBillingDurationInSec</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nRoundingSeconds</parameter>
            <parameter type="inout" var-type="i4" >p_oAccessLine.oSub.nExpirationType</parameter>
            <parameter type="inout" var-type="i4" >p_oAccessLine.oSub.nCurrencyId</parameter>
            <parameter type="inout" var-type="string" >p_oAccessLine.oSub.strFirstCallFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAccessLine.oSub.nRoundingThresholdSeconds</parameter>
            <parameter type="inout" var-type="i4" >p_oAccessLine.oSub.nNumExpDays</parameter>
            <parameter type="inout" var-type="float" >p_oAccessLine.oSub.fCallMarkupPercent</parameter>
            <parameter type="inout" var-type="i4" >p_oService.nMaxCallDuration</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strCallingNumberContactName</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nDialingPlanId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPrimaryRouteCode</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nDeptId</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nActionValueId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strReceptionPhone</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nReceptionRNATimeout</parameter>
            <parameter type="inout" var-type="i8" >p_oAPI.lVoiceMailId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strCustomerCode</parameter>
            <parameter type="inout" var-type="i4" >p_oAccessLine.oSub.nPrimaryOfferingId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strAllowZeroCostFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nDeptIdOut</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strScreenCallFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strMOHFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strMOHRecording</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strMOHInterruptRecording</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nMOHInterruptInterval</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strSharedUseBillingFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nCommitInterval</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nBillingLevel</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nCurrencyPrecision</parameter>
            <parameter type="inout" var-type="i8" >p_oSub.lCorpAcctNumber</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strRecordingAcctUser</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strRecordingAcctPassword</parameter>
            <parameter type="inout" var-type="i4" >p_oSub.nSecondsBalance</parameter>
            <parameter type="inout" var-type="i4" >p_oSub.nSecondsUsed</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strSipAddress</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSipPort</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strAniToSend</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
            <result name="valid" link="3" stubbed="0" >nReturnCode == 0</result>
            <result name="authentication failed" >nReturnCode == -1</result>
            <result name="unknown destination number" >nReturnCode == -2</result>
            <result name="disabled subscriber" >nReturnCode == -3</result>
            <result name="disabled service provider" >nReturnCode == -4</result>
            <result name="disabled access line" >nReturnCode == -5</result>
            <result name="DB error" >nReturnCode == -99</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[if( null == Session.p_oAPI.bCallerIdBlocked ) {

	Session.p_oAPI.bCallerIdBlocked = false ;

}



Server.logInfo("*********JAVA START VoipAuthenticateTermination *********");
Server.logInfo("BEFORE: p_oAPI.strDestReceived: " + Session.p_oAPI.strDestReceived ) ;
Server.logInfo("BEFORE: p_oAPI.strAniReceived: " + Session.p_oAPI.strAniReceived ) ;
Server.logInfo("BEFORE: p_oAccessLine.strRealm: " + Session.p_oAccessLine.strRealm);
Server.logInfo("BEFORE: p_oAPI.bCallerIdBlocked: " + Session.p_oAPI.bCallerIdBlocked ) ;
Server.logInfo("BEFORE: p_strRequestUri: " + Session.p_strRequestUri ) ;
Server.logInfo("BEFORE: p_oAPI.bFaxCall: " + Session.p_oAPI.bFaxCall ) ;
Server.logInfo("BEFORE: p_oAPI.bRemindMeCall: " + Session.p_oAPI.bRemindMeCall ) ;
Server.logInfo("Department ID: " + Session.p_oAPI.nDeptId);]]></script>
            <script language="javascript" timing="middle" ><![CDATA[Server.logInfo("*********JAVA END VoipAuthenticateTermination *********");

if( 2 == Result.id ) {



	switch( Session.nReturnCode ) {

	case 0: Server.logInfo("Authentication succeeded") ; 

			break ;

	

	case -2: Server.logInfo("Destination phone number not found: " + Session.p_oAPI.strDestReceived ); 

			Session.p_strResponse = "SIP/2.0 404 Not Found" ;

			break ;

	case -3: Server.logInfo("Subscriber disabled"); 

			Session.p_strResponse = "SIP/2.0 480 Temporarily Unavailable" ;

			break ;

	case -4: Server.logInfo("Service provider disabled"); 

			Session.p_strResponse = "SIP/2.0 480 Temporarily Unavailable" ;

			break ;

	case -5: Server.logInfo("Phone disabled"); 

			Session.p_strResponse = "SIP/2.0 480 Temporarily Unavailable" ;

			break ;
			
	case -10: Server.logInfo("Max simultaneous streams for this access line");
	
			Session.p_strResponse = "SIP/2.0 480 Temporarily Unavailable" ;

			break ;
			
	case -11: Server.logInfo("Max streams for Service Provider");

			Session.p_strResponse = "SIP/2.0 480 Temporarily Unavailable" ;

			break ;
			
	case -17: Server.logInfo("Max external streams");
	
			Session.p_strResponse = "SIP/2.0 480 Temporarily Unavailable" ;

			break ;

	case -99: Server.logError("DB error during device registration"); 

			Session.p_strResponse = "SIP/2.0 503 Service Unavailable" ;

			Session.p_oAccessLine.bAuthenticated = false ;

			break ;

	default: Server.logError("Unknown error during authTermination: " + Session.nReturnCode ) ; 

			Session.p_strResponse = "SIP/2.0 503 Service Unavailable" ;

			break ;

	}

	

	if( 0 == Session.nReturnCode ) {

		Server.logInfo("Subscriber Id: " + Session.p_oAccessLine.oSub.lSubscriberId ) ;

		Server.logInfo("SP Id : " + Session.p_oAccessLine.oSub.lSPId ) ;	

		Server.logInfo("Service Id : " + Session.p_oService.nSvcId ) ;	

		Server.logInfo("Access Line Id : " + Session.p_oAccessLine.lAccessLineId ) ;	

		Server.logInfo("Phone Number Id: " + Session.p_oAccessLine.lPhoneNumberId ) ;
		
		Server.logInfo("Call Type : " + Session.p_oAPI.strCallType ); 

		Server.logInfo("Codec : " + Session.p_oAccessLine.strCodec ) ;	

		Server.logInfo("Orig On Net : " + Session.p_oAPI.strOrigOnNet ) ;	

		Server.logInfo("Wiretap : " + Session.p_oAccessLine.strWiretapFlag ) ;	

		Server.logInfo("Wiretap Dest : " + Session.p_oAccessLine.strWiretapDest ) ;	

		Server.logInfo("Wiretap Order Id: " + Session.p_oAccessLine.lWiretapOrderId ) ;

		

		for( var i = 0; i < 6; i++ ) {

			Server.logInfo("Route " + i + ": phone number: " + Session.p_oAPI.oRoute[i].strPhoneNumber ) ;

			Server.logInfo("Route " + i + ": softswitch: " + Session.p_oAPI.oRoute[i].strSoftswitch ) ;

			Server.logInfo("Route " + i + ": contact: " + Session.p_oAPI.oRoute[i].strContact ) ;

			Server.logInfo("Route " + i + ": record route: " + Session.p_oAPI.oRoute[i].strRecordRoute ) ;

			Server.logInfo("Route " + i + ": on-net flag: " + Session.p_oAPI.oRoute[i].strDestOnNet ) ;

			Server.logInfo("Route " + i + ": intl flag: " + Session.p_oAPI.oRoute[i].strDestIntl ) ;

		}					



		Server.logInfo("Ring no answer timeout: " + Session.p_oAPI.nRingNoAnswerTimeout ) ;

		Server.logInfo("Hunt type: " + Session.p_oAPI.nHuntType ) ;

		Server.logInfo("Forward to voicemail: " + Session.p_oAPI.bForwardToVoicemail ) ;

		Server.logInfo("Reject msg type: " + Session.p_oAPI.nRejectMsgType ) ;

		

		Server.logInfo("Intl Orig : " + Session.p_oAPI.strIntlOrigFlag ) ;	

		Server.logInfo("Orig Country Code : " + Session.p_oAPI.nOrigCountryId ) ;	

		Server.logInfo("Orig Calling Code : " + Session.p_oAPI.strOrigCallingCode ) ;	

		Server.logInfo("Orig Area Code : " + Session.p_oAPI.strOrigAreaCode ) ;		

		Server.logInfo("Language: " + Session.p_oAccessLine.oSub.strLanguage ); 

		Server.logInfo("Max call timer: " + (0 == Session.p_oAPI.nMaxCallLength ? "unlimited" : Session.p_oAPI.nMaxCallLength ) ) ;

		Server.logInfo("Alternate PSTN number: " + Session.p_oAccessLine.strAltPstnNumber ) ;

		Server.logInfo("Ring Tone: " + Session.p_oAPI.strRingTone ) ;

		Server.logInfo("Prepaid?: " + Session.p_oAPI.bPrepaid ) ;

		Server.logInfo("Call rating on?: " + Session.p_oAPI.bRateCalls ) ;

		Server.logInfo("Credit limiting on?: " + Session.p_oAPI.bCreditLimit ) ;

		Server.logInfo("Balance: " + Session.p_oAPI.fAccountBalance ) ;

		Server.logInfo("Credit limit: " + Session.p_oAPI.fCreditLimit ) ;

		Server.logInfo("Credit used: " + Session.p_oAPI.fCreditUsed ) ;

		Server.logInfo("Min balance: " + Session.p_oAPI.fMinPrepaidBalance ) ;

		Server.logInfo("Caller id contact name: " + Session.p_oAPI.strCallingNumberContactName ) ;

		Server.logInfo("Dialing Plan ID: " + Session.p_oAPI.nDialingPlanId ) ;

		Server.logInfo("Seconds balance: " + Session.p_oSub.nSecondsBalance ) ;
		Server.logInfo("Seconds used: " + Session.p_oSub.nSecondsUsed ) ;

		Server.logInfo("Department ID: " + Session.p_oAPI.nDeptId ) ;

		Server.logInfo("IVR ID: " + Session.p_oAPI.nActionValueId ) ;

		Server.logInfo("Receptionist Phone: " + Session.p_oAPI.strReceptionPhone ) ;

		Server.logInfo("Receptionist Ring No Answer Timeout: " + Session.p_oAPI.nReceptionRNATimeout ) ;

		Server.logInfo("Voice Mail ID: " + Session.p_oAPI.lVoiceMailId);

		Server.logInfo("Primary Offering ID : " + Session.p_oAccessLine.oSub.nPrimaryOfferingId);

		Server.logInfo("Allow Zero Cost Calls : " +  Session.p_oAPI.strAllowZeroCostFlag);
		
		Server.logInfo("Terminating sub's dept id: " + Session.p_oAPI.nDeptIdOut);
		
		Server.logInfo("Screen Call Flag: " + Session.p_oAPI.strScreenCallFlag);
		
		Server.logInfo("Music On Hold Flag: " + Session.p_oAPI.strMOHFlag ) ;

		Server.logInfo("ANI to use: " + Session.p_oAPI.strAniToSend);		
		
		if ( "T" == Session.p_oAPI.strMOHFlag ) {
			Server.logInfo("Music On Hold Recording: " + Session.p_oAPI.strMOHRecording);
			Server.logInfo("Interrupt Recording: " + Session.p_oAPI.strMOHInterruptRecording);
			Server.logInfo("Interrupt Interval: " + Session.p_oAPI.nMOHInterruptInterval);
			Server.logInfo("Recording Account User: " + Session.p_oAPI.strRecordingAcctUser);
			Server.logInfo("Recording Account Password: " + Session.p_oAPI.strRecordingAcctPassword);
		}
		
		Server.logInfo("Corp account number: " + Session.p_oSub.lCorpAcctNumber ) ;
		var sharedUseOn = ("T"==Session.p_oAPI.strSharedUseBillingFlag) ;
		if( sharedUseOn ) {
			Server.logInfo("Shared use billing: ON" ) ;
			Server.logInfo("Billing level: " + Session.p_oAPI.nBillingLevel ) ;
			Server.logInfo("Commit interval: " + Session.p_oAPI.nCommitInterval ) ;
		}
		else {
			Server.logInfo("Shared use billing: OFF" ) ;
		}
	}	
}

else {

	Server.logError("Error in VoipAuthenticateTermination, exit on: " + Result.name ) ;

}]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=344 y=79 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nReturnCode"/>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=343 y=158 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="VoipRemoveAllOriginations" start="1" event="VoipRemoveAllOriginations" returns="void" >
      <parameters >
        <parameter name="strIpAddress" type="string" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="strSessionId" type="string" ></var>
        <var name="nReturnCode" type="i4" >0</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=76 y=114 ?>
          <!--removeOriginationsByIpAddress-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.broadband.psAPISceBroadbandAuth&quot;" method="&quot;removeOriginationsByIpAddress&quot;" timeout="5" return="" method-return-var="nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >strSessionId</parameter>
            <parameter type="in" var-type="string" >"pactolusdb"</parameter>
            <parameter type="in" var-type="string" >strIpAddress</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START VoipRemoveAllOriginations *********");

Server.logInfo("BEFORE: nReturnCode: " + Session.nReturnCode);

Session.strSessionId = Session._sessionId ;

]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*********JAVA END VoipRemoveAllOriginations *********");

Server.logInfo("AFTER: nReturnCode: " + Session.nReturnCode);

]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=331 y=119 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="psAPIGetINFOMessageTestValues" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="p_oTestData" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nFAILURE" type="i4" >-1</var>
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=20 y=46 ?>
          <!--get INFO msg test data-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.Utilities&quot;" method="&quot;getINFOMessageTestValues&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="inout" var-type="string" >p_oTestData.strTo</parameter>
            <parameter type="inout" var-type="string" >p_oTestData.strFrom</parameter>
            <parameter type="inout" var-type="string" >p_oTestData.strCallId</parameter>
            <parameter type="inout" var-type="string" >p_oTestData.strVia</parameter>
            <parameter type="inout" var-type="string" >p_oTestData.strUri</parameter>
            <parameter type="inout" var-type="string" >p_oTestData.strDigit</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=286 y=20 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL com.pactolus.Utilities.getINFOMessageTestValues, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=302 y=142 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="psAPIIsValidDirectCallId" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="g_oSUB" type="object" pass="byref"/>
        <parameter name="g_oAPI" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nTIMEOUT" type="i4" >30</var>
        <var name="f_nReturnCode" type="i4" >-50</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=68 y=91 ?>
          <!--psAPIIsValidDirectCallId-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceMisc&quot;" method="&quot;isValidDirectCallId&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >g_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >g_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >g_oAPI.strPostPaidFlag</parameter>
            <parameter type="in" var-type="string" >g_oSUB.strDirectCallId</parameter>
            <parameter type="in" var-type="i8" >g_oAPI.lServiceProviderId</parameter>
            <parameter type="inout" var-type="i8" >g_oSUB.lSubscriberId</parameter>
            <parameter type="inout" var-type="string" >g_oAPI.strDestinationNumber</parameter>
            <parameter type="inout" var-type="string" >g_oSUB.strUserPin</parameter>
            <parameter type="inout" var-type="string" >g_oSUB.strAccountNumber</parameter>
            <parameter type="inout" var-type="i4" >g_oSUB.nServiceId</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("Calling psAPIIsValidDirectCallId...");]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=343 y=116 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="psAPIIsValidDate" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="oAPI" type="object" pass="byref"/>
        <parameter name="iYear" type="i4" pass="byref"/>
        <parameter name="iMonth" type="i4" pass="byref"/>
        <parameter name="iDate" type="i4" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="iReturnCode" type="i4" >0</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=231 y=172 ?>
          <!--isValidDate-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceMisc&quot;" method="&quot;isValidDate&quot;" timeout="5" return="" method-return-var="iReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >oAPI.strDBName</parameter>
            <parameter type="in" var-type="i4" >iYear</parameter>
            <parameter type="in" var-type="i4" >iMonth</parameter>
            <parameter type="in" var-type="i4" >iDate</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.iReturnCode = -50;



Server.logInfo("************Calling com.pactolus.psAPISceMisc:isValidDate*************");

Server.logInfo("Date to verify: " + Session.iMonth + "/" + Session.iDate + "/" + Session.iYear);

]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("************com.pactolus.psAPISceMisc:isValidDate returns: " + Session.iReturnCode + "*************");

]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=540 y=193 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value="iReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="psAPIConvertGMTTimestamp" start="2" event="" returns="i4" >
      <parameters >
        <parameter name="oAPI" type="object" pass="byref"/>
        <parameter name="strGMTTimestamp" type="string" pass="byref"/>
        <parameter name="iTimezoneId" type="i4" pass="byref"/>
        <parameter name="strConvertedTimestamp" type="string" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="iReturnCode" type="i4" >0</var>
      </local-vars>
      <actions >
        <action id="2" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=129 y=120 ?>
          <!--convertGMTTimestamp-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceMisc&quot;" method="&quot;convertGMTTimestamp&quot;" timeout="5" return="" method-return-var="iReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >oAPI.strDBName</parameter>
            <parameter type="in" var-type="string" >strGMTTimestamp</parameter>
            <parameter type="in" var-type="i4" >iTimezoneId</parameter>
            <parameter type="inout" var-type="string" >strConvertedTimestamp</parameter>
          </java>
          <results >
            <result name="Default" link="3" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.iReturnCode = -50;



Server.logInfo("*********psAPIConvertGMTTimestamp*********");

Server.logInfo("Converting GMT timestamp: " + Session.strGMTTimestamp);

]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("**********Returned from psAPIConvertGMTTimestamp*********");

Server.logInfo("Local timestamp: " + Session.strConvertedTimestamp);]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=433 y=152 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value="iReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="VoipProcE911Call" start="2" event="" returns="i4" >
      <parameters >
        <parameter name="oAPI" type="object" pass="byref"/>
        <parameter name="oAccessLine" type="object" pass="byref"/>
        <parameter name="oCallLegA" type="object" pass="byref"/>
        <parameter name="oCallLegB" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="nReturnCode" type="i4" >0</var>
      </local-vars>
      <actions >
        <action id="2" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=160 y=186 ?>
          <!--procE911Call-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.broadband.psAPISceBroadbandCallComp&quot;" method="&quot;procE911Call&quot;" timeout="5" return="" method-return-var="nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >oAccessLine.lAccessLineId</parameter>
            <parameter type="in" var-type="string" >oCallLegA.strCallingNumber</parameter>
            <parameter type="in" var-type="string" >oCallLegB.strOutdialDestNbr</parameter>
            <parameter type="in" var-type="string" >oCallLegB.strStatus</parameter>
            <parameter type="in" var-type="i8" >oCallLegB.lTimeStart</parameter>
            <parameter type="inout" var-type="string" >oAPI.strEmergencyCallId</parameter>
          </java>
          <results >
            <result name="Default" link="1" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START VoipEProcE911Call *********");

Server.logInfo("BEFORE: Calling number: " + Session.oCallLegA.strCallingNumber ) ;

Server.logInfo("BEFORE: Start time: " + Session.oCallLegB.lTimeStart ) ;



]]></script>
            <script language="javascript" timing="last" ><![CDATA[if( 2 == Result.id ) {

	Server.logInfo("AFTER: return code: " + Session.nReturnCode ) ;

}

else {

	Server.logError("ERROR calling VoipProcE911Call, exiting on: " + Result.name ) ;

}

Server.logInfo("*********JAVA END VoipProcE911Call *********");

Server.logInfo("AFTER: Emergency Call Id: " + Session.oAPI.strEmergencyCallId ) ;

]]></script>
          </scripts>
        </action>
        <action id="1" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=453 y=228 ?>
          <!--Success-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="psAPIInitializeSession" start="3" event="PrepaidAPIInitializeSession" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oCallLegA" type="object" pass="byref"/>
        <parameter name="p_oSUB" type="object" pass="byref"/>
        <parameter name="p_oACD" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
      </local-vars>
      <actions >
        <action id="3" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=80 y=106 ?>
          <!--initializeSession()-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceInitializeSession&quot;" method="&quot;initializeSession&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strOriginationType</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOriginationNumber</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strAccessNumber</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lPlatformSessionStartTime</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strApplicationName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strInfoDigits</parameter>
            <parameter type="in" var-type="string" >p_oCallLegA.strCallId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strCustomerCode</parameter>
            <parameter type="in" var-type="string" >p_oCallLegA.strOrigTrunkGroup</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nServiceElementId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strStrippedOrigNumber</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nAccessNumberId</parameter>
            <parameter type="inout" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strLanguage</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nMaxLoginAttempts</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nDialingPlanId</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nOrigCountryId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strOrigCallingCode</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strOrigAreaCode</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strOrigDomIntFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strDBSessionId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strWelcomePromptType</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strWelcomePromptUrl</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nWelcomePromptIndex</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strCustomerServicePhone</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nPostpaidPinLength</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nLocalGMTOffset</parameter>
            <parameter type="inout" var-type="string" >p_oACD.strEnableFlag</parameter>
            <parameter type="inout" var-type="string" >p_oACD.strCSROnMaxLoginsEnabled</parameter>
            <parameter type="inout" var-type="string" >p_oACD.strGreetEnabled</parameter>
            <parameter type="inout" var-type="string" >p_oACD.strACDControllerIP</parameter>
            <parameter type="inout" var-type="i4" >p_oACD.nACDControllerPort</parameter>
            <parameter type="inout" var-type="string" >p_oACD.strMusicOnHoldFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strMainMenuFlag</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPayPhoneFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nAccountNumLength</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strUserPin</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nPrepaidPinLength</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPrimarySoftswitchIP</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strBackupSoftswitchIP</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strServiceProviderCode</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bANCallbackFlag</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strAccountNumber</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strBadANIRouteToCSR</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bApplyPayphoneSurcharges</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bPayphoneSwipeFlag</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bUsedDefaultAccessNum</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bANCallbackNoAniCollectPin</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bChargeForIVRTime</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strOlisToStrip</parameter>
            <parameter type="inout" var-type="string" >p_oCallLegA.strPrimaryRouteCode</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nPromptLanguageMenuIndex</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPromptLanguageMenuUrl</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strLanguageOption1</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strLanguageOption2</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strLanguageOption3</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strLanguageOption4</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strLanguageOption5</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strLanguageOption6</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strLanguageOption7</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strLanguageOption8</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strLanguageOption9</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bANDirectCallFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nBadAniTimeToLive</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strThirdPartyOutdialNumber</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nThirdPartyOutdialTimeout</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nAccessNumberGroupId</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nPopdAcctNumberLength</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nPrpdPinNumberLength</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bSharedAccessNumber</parameter>
          </java>
          <results >
            <result name="Default" link="1" stubbed="0"/>
            <result name="Success" link="2" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START Prepaid InitializeSession *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*********JAVA RETURN*********");

Server.logInfo("InitializeSession returned " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="1" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=346 y=86 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API INITIALIZE SESSION , EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=364 y=199 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="psAPIUpdateSubCallbackSettings" start="3" event="" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oSUB" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="nFAILURE" type="i4" >-1</var>
        <var name="nReturnCode" type="i4" >-50</var>
        <var name="nTimeout" type="i4" >30</var>
      </local-vars>
      <actions >
        <action id="3" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=190 y=182 ?>
          <!--UpdateSubCallbackSettings-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceMisc&quot;" method="&quot;updateSubCallbackSettings&quot;" timeout="nTimeout" return="nReturnCode" method-return-var="nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strCallbackNumber</parameter>
            <parameter type="in" var-type="boolean" >p_oSUB.bCallbackNumberEnable</parameter>
          </java>
          <results >
            <result name="Default" link="1" stubbed="0"/>
            <result name="Success" link="2" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START UpdateSubCallback Settings *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*********JAVA RETURN*********");

Server.logInfo("Prepaid UpdateSubCallbackSettings returned " + Session.nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="1" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=474 y=165 ?>
          <!--nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API UPDATE SUB CALLBACK SETTINGS , EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=492 y=327 ?>
          <!--nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="psAPIMapLanguageCurrencyToCode" start="4" event="" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oSUB" type="object"/>
        <parameter name="p_oMS" type="object"/>
      </parameters>
      <local-vars >
        <var name="f_strLanguageCode" type="string" ></var>
        <var name="f_nSUCCESS" type="i4" >0</var>
        <var name="f_nFAILURE" type="i4" >-1</var>
      </local-vars>
      <actions >
        <action id="4" plug-in="Pactolus.Branch.1" ><?xtml-editor x=61 y=118 ?>
          <results >
            <result name="Default" link="5" stubbed="0"/>
            <result name="oMS.strType == PCS" link="1" stubbed="0" >p_oMS.strType == "PCS"</result>
          </results>
        </action>
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=64 y=298 ?>
          <!--mapLanguageAndCurrencyToLanguageCode-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceMisc&quot;" method="&quot;mapLanguageAndCurrencyToLanguageCode&quot;" timeout="5" return="" method-return-var="f_strLanguageCode" method-return-type="3" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.nCurrencyId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strLanguage</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("************Calling com.pactolus.psAPISceMisc:mapLanguageAndCurrencyToLanguageCode*************");



]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=262 y=218 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("Error Calling psAPIMapLanguageCurrencyToCode.");



]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=572 y=247 ?>
          <!--f_nSUCCESS-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nSUCCESS"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[if(Session.f_strLanguageCode.length > 0) {

	Session.p_oAPI.strLanguage = Session.f_strLanguageCode;

} else {

	Server.logInfo("WARNING: No Language Code returned from psAPIMapLanguageCurrencyToCode.");

}

]]></script>
          </scripts>
        </action>
        <action id="5" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=334 y=55 ?>
          <!--f_nSUCCESS-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nSUCCESS"/>
        </action>
      </actions>
    </function>
    <function name="VoipGetDestCallingInfo" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="oAPI" type="object" pass="byref"/>
        <parameter name="oAccessLine" type="object" pass="byref"/>
        <parameter name="oCallLeg" type="object" pass="byref"/>
        <parameter name="lVoipServiceId" type="i8" pass="byref"/>
        <parameter name="nDialingPlanId" type="i4" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="nReturnCode" type="i4" >0</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=82 y=65 ?>
          <!--getDestCallingInfo-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.broadband.psAPISceBroadbandAuth&quot;" method="&quot;getDestCallingInfo&quot;" timeout="4" return="" method-return-var="nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >oAPI.strDestReceived</parameter>
            <parameter type="in" var-type="string" >oAPI.strAniReceived</parameter>
            <parameter type="in" var-type="i8" >oAccessLine.lAccessLineId</parameter>
            <parameter type="in" var-type="i8" >lVoipServiceId</parameter>
            <parameter type="in" var-type="i4" >nDialingPlanId</parameter>
            <parameter type="inout" var-type="string" >oCallLeg.strOutdialDestNbr</parameter>
            <parameter type="inout" var-type="string" >oCallLeg.strDestCallingCode</parameter>
            <parameter type="inout" var-type="string" >oCallLeg.strDestAreaCode</parameter>
            <parameter type="inout" var-type="i4" >oCallLeg.nDestCountryId</parameter>
            <parameter type="inout" var-type="string" >oAPI.strStrippedDest</parameter>
            <parameter type="inout" var-type="string" >oAPI.strIntlDestFlag</parameter>
            <parameter type="inout" var-type="string" >oAPI.strCallType</parameter>
            <parameter type="inout" var-type="i8" >oAPI.lVoiceMailId</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
            <result name="Successful" >nReturnCode == 0</result>
            <result name="Restricted Destination" >nReturnCode == -6</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("***START: GET DEST CALLING INFO***");

Server.logInfo("DestReceived: " + Session.oAPI.strDestReceived);

Server.logInfo("AniReceived: " + Session.oAPI.strAniReceived);

Server.logInfo("AccessLineID: " + Session.oAccessLine.lAccessLineId);

Server.logInfo("Voip Service ID: " + Session.lVoipServiceId);

Server.logInfo("Dialing Plan ID: "+ Session.nDialingPlanId);



Session.nReturnCode = -50;

]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("***END: GET DEST CALLING INFO. Return code: " + Session.nReturnCode + "***");



if ( 0 == Session.nReturnCode ) {

	Server.logInfo("OutdialDestNbr: " + Session.oCallLeg.strOutdialDestNbr);

	Server.logInfo("Dest Calling Code: " + Session.oCallLeg.strDestCallingCode) ;

	Server.logInfo("Dest Area Code: " + Session.oCallLeg.strDestAreaCode) ;

	Server.logInfo("Dest Country ID: " + Session.oCallLeg.nDestCountryId) ;
	
	Server.logInfo("Stripped Dest: " + Session.oAPI.strStrippedDest);
	
	Server.logInfo("Dest Intl Flag: " + Session.oAPI.strIntlDestFlag);
	
	Server.logInfo("Call Type: " + Session.oAPI.strCallType);
	
	Server.logInfo("Voice Mail ID: " + Session.oAPI.lVoiceMailId);

}

else if ( -6 == Session.nReturnCode ) {

	Server.logInfo("Number restricted: International dialing not enabled for this subscriber.");

}

]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=442 y=86 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="ConfAPIDisableMS" start="1" event="ConfAPIGetNewCC" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >0</var>
        <var name="f_nFAILURE" type="i4" >0</var>
        <var name="f_nTIMEOUT" type="i4" >0</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=188 y=130 ?>
          <!--"disableMS"-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.conferencing.psAPISceUpdateMSStatus&quot;" method="&quot;disableMS&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSiteId</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("INFO: ********JAVA CALLING disableMS *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("INFO: ********** iJavaReturnCode " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=430 y=127 ?>
          <!--FAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API CONF DISABLE MS, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=447 y=220 ?>
          <!--JAVA RETURN CODE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="ConfAPIEnableMS" start="1" event="ConfAPIGetNewCC" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >0</var>
        <var name="f_nFAILURE" type="i4" >0</var>
        <var name="f_nTIMEOUT" type="i4" >0</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=188 y=130 ?>
          <!--"enableMS"-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.conferencing.psAPISceUpdateMSStatus&quot;" method="&quot;enableMS&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSiteId</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("INFO: ********JAVA CALLING enableMS *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("INFO: ********** iJavaReturnCode " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=430 y=127 ?>
          <!--FAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API CONF ENABLE MS, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=447 y=220 ?>
          <!--JAVA RETURN CODE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="ConfAPIGetAccessNumberType" start="1" event="ConfAPIGetNewCC" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >0</var>
        <var name="f_nFAILURE" type="i4" >0</var>
        <var name="f_nTIMEOUT" type="i4" >0</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=179 y=139 ?>
          <!--"getAccessNumberType"-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.conferencing.psAPISceGetAccessNumberType&quot;" method="&quot;getAccessNumberType&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strAccessNumber</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strTollFreeAccessNumberFlag</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("INFO: ********JAVA CALLING GetAccessNumberType *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("INFO: ********** iJavaReturnCode " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=430 y=127 ?>
          <!--FAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API CONF GET ACCESS NUMBER TYPE, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=447 y=220 ?>
          <!--JAVA RETURN CODE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="ConfAPIGetBackupSite" start="3" event="ConfAPIGetNewCC" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >0</var>
        <var name="f_nFAILURE" type="i4" >0</var>
        <var name="f_nTIMEOUT" type="i4" >0</var>
      </local-vars>
      <actions >
        <action id="3" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=191 y=145 ?>
          <!--"getBackupSite"-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.conferencing.psAPISceGetBackupSite&quot;" method="&quot;getBackupSite&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSiteId</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nAlternateSiteId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strAlternateSitePrefix</parameter>
          </java>
          <results >
            <result name="Default" link="1" stubbed="0"/>
            <result name="Success" link="2" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("INFO: ********JAVA CALLING getBackupSite *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("INFO: ********** iJavaReturnCode " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="1" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=445 y=136 ?>
          <!--FAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API CONF GET BACKUP SITE, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=447 y=220 ?>
          <!--JAVA RETURN CODE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="ConfAPIMoveConfToBackupSite" start="3" event="ConfAPIGetNewCC" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >0</var>
        <var name="f_nFAILURE" type="i4" >0</var>
        <var name="f_nTIMEOUT" type="i4" >0</var>
      </local-vars>
      <actions >
        <action id="3" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=179 y=145 ?>
          <!--"moveConference"-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.conferencing.psAPISceMoveConfToBackupSite&quot;" method="&quot;moveConference&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strConfScheduleId</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nSiteId</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nAlternateSiteId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strCCIPMovedFrom</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nCCPortMovedFrom</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strCCIPMovedTo</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nCCPortMovedTo</parameter>
          </java>
          <results >
            <result name="Default" link="1" stubbed="0"/>
            <result name="Success" link="2" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("INFO: ********JAVA CALLING moveConfToBackupSite *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("INFO: ********** iJavaReturnCode " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="1" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=445 y=136 ?>
          <!--FAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API CONF MOVE CONF TO BACKUP SITE, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=459 y=232 ?>
          <!--JAVA RETURN CODE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="VoipAuthIVRAdmin" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="strDBName" type="string" pass="byref"/>
        <parameter name="strSessionId" type="string" pass="byref"/>
        <parameter name="strIVRPin" type="string" pass="byref"/>
        <parameter name="strSipRealm" type="string" pass="byref"/>
        <parameter name="strUserName" type="string" pass="byref"/>
        <parameter name="oAPI" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="nAPIReturnCode" type="i4" >-50</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=190 y=176 ?>
          <!--authIVRAdmin-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.broadband.psAPISceIVRAuthAdmin&quot;" method="&quot;authIVRAdmin&quot;" timeout="10" return="" method-return-var="nAPIReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >strDBName</parameter>
            <parameter type="in" var-type="string" >strSessionId</parameter>
            <parameter type="in" var-type="string" >strIVRPin</parameter>
            <parameter type="in" var-type="string" >strUserName</parameter>
            <parameter type="in" var-type="string" >strSipRealm</parameter>
            <parameter type="inout" var-type="i4" >oAPI.nIVRAccountId</parameter>
            <parameter type="inout" var-type="i4" >oAPI.nCorpDeptId</parameter>
            <parameter type="inout" var-type="string" >oAPI.strAccountName</parameter>
            <parameter type="inout" var-type="string" >oAPI.strAccountPswd</parameter>
            <parameter type="inout" var-type="string" >oAPI.strFirstCallFlag</parameter>
            <parameter type="inout" var-type="i4" >oAPI.nMaxRecordingLength</parameter>
            <parameter type="inout" var-type="i4" >oAPI.nMaxRecordings</parameter>
            <parameter type="inout" var-type="i4" >oAPI.nPinLength</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("****BEGIN authIVRAdmin****");

Server.logInfo("IVR Pin: " + Session.strIVRPin);

Server.logInfo("SIP Realm: " + Session.strSipRealm);

Server.logInfo("UserName: " + Session.strUserName);]]></script>
            <script language="javascript" timing="middle" ><![CDATA[Server.logInfo("****END authIVRAdmin****");



if ( 2 == Result.id ) {

	

	switch(Session.nAPIReturnCode){



		case 0:

			Server.logInfo("****SUCCESS from authIVRAdmin****");

			Server.logInfo("IVR Recordings Account ID <" + Session.oAPI.nIVRAccountId + ">");

			Server.logInfo("Corp Dept ID <" + Session.oAPI.nCorpDeptId + ">");

			Server.logInfo("IVR Recordings Account Name <" + Session.oAPI.strAccountName + ">");

			Server.logInfo("IVR Recordings Account Password <" + Session.oAPI.strAccountPswd + ">");

			Server.logInfo("First Call Flag <" + Session.oAPI.strFirstCallFlag +">");

			Server.logInfo("Max recording length <" + Session.oAPI.nMaxRecordingLength + ">");

			Server.logInfo("Max number of recordings <" + Session.oAPI.nMaxRecordings + ">");

			Server.logInfo("Pin length <" + Session.oAPI.nPinLength + ">");

			break;

		

		case -1:

			Server.logError("authIVRAdmin: PHONE_NOT_FOUND");

			break;

			

		case -2:

			Server.logError("authIVRAdmin: IVR_ACCOUNT_NOT_FOUND");

			break;

			

		case -3:

			Server.logError("authIVRAdmin: IVR_ACCOUNT_INACTIVE");

			break;

			

		case -4:

			Server.logError("authIVRAdmin: INAVLID_PIN");

			break;

			

		default:

			Server.logError("Error in authIVRAdmin");

	}

}





]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=497 y=213 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nAPIReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="VoipGetLanguageCode" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="strDBName" type="string" pass="byref"/>
        <parameter name="strPlatformSessionId" type="string" pass="byref"/>
        <parameter name="strSubPhone" type="string" pass="byref"/>
        <parameter name="strUserName" type="string" pass="byref"/>
        <parameter name="strSipRealm" type="string" pass="byref"/>
        <parameter name="lAccountId" type="i8" pass="byref"/>
        <parameter name="strAccessNumber" type="string" pass="byref"/>
        <parameter name="strLanguageCode" type="string" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="nReturnValue" type="i4" >-50</var>
        <var name="nAPIReturnCode" type="i4" >-50</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=143 y=142 ?>
          <!--lookupLanguageCodeForVM-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.broadband.psAPISceVoicemailAuth&quot;" method="&quot;lookupLanguageCodeForVM&quot;" timeout="10" return="nReturnValue" method-return-var="nAPIReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >strDBName</parameter>
            <parameter type="in" var-type="string" >strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >strSubPhone</parameter>
            <parameter type="in" var-type="string" >strUserName</parameter>
            <parameter type="in" var-type="string" >strSipRealm</parameter>
            <parameter type="in" var-type="i8" >lAccountId</parameter>
            <parameter type="in" var-type="string" >strAccessNumber</parameter>
            <parameter type="inout" var-type="string" >strLanguageCode</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("DBName: " + Session.strDBName);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=417 y=186 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nAPIReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="VoipIVRSearchCompanyDirectory" start="2" event="" returns="i4" >
      <parameters >
        <parameter name="strDBName" type="string" pass="byref"/>
        <parameter name="strDigits" type="string" pass="byref"/>
        <parameter name="strPlatformSessionId" type="string" pass="byref"/>
        <parameter name="lCorpDeptId" type="i8" pass="byref"/>
        <parameter name="lServiceProviderId" type="i8" pass="byref"/>
        <parameter name="oMatches" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="nAPIReturnCode" type="i4" >0</var>
      </local-vars>
      <actions >
        <action id="2" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=178 y=161 ?>
          <!--searchCompanyDirectory-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.broadband.psAPISceIVR&quot;" method="&quot;searchCompanyDirectory&quot;" timeout="5" return="" method-return-var="nAPIReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >strDBName</parameter>
            <parameter type="in" var-type="string" >strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >strDigits</parameter>
            <parameter type="in" var-type="i8" >lCorpDeptId</parameter>
            <parameter type="in" var-type="i8" >lServiceProviderId</parameter>
            <parameter type="inout" var-type="string" >oMatches[0].strNameText</parameter>
            <parameter type="inout" var-type="string" >oMatches[0].strDestPhone</parameter>
            <parameter type="inout" var-type="string" >oMatches[0].strAccountName</parameter>
            <parameter type="inout" var-type="string" >oMatches[0].strAccountPswd</parameter>
            <parameter type="inout" var-type="string" >oMatches[1].strNameText</parameter>
            <parameter type="inout" var-type="string" >oMatches[1].strDestPhone</parameter>
            <parameter type="inout" var-type="string" >oMatches[1].strAccountName</parameter>
            <parameter type="inout" var-type="string" >oMatches[1].strAccountPswd</parameter>
            <parameter type="inout" var-type="string" >oMatches[2].strNameText</parameter>
            <parameter type="inout" var-type="string" >oMatches[2].strDestPhone</parameter>
            <parameter type="inout" var-type="string" >oMatches[2].strAccountName</parameter>
            <parameter type="inout" var-type="string" >oMatches[2].strAccountPswd</parameter>
            <parameter type="inout" var-type="string" >oMatches[3].strNameText</parameter>
            <parameter type="inout" var-type="string" >oMatches[3].strDestPhone</parameter>
            <parameter type="inout" var-type="string" >oMatches[3].strAccountName</parameter>
            <parameter type="inout" var-type="string" >oMatches[3].strAccountPswd</parameter>
            <parameter type="inout" var-type="string" >oMatches[4].strNameText</parameter>
            <parameter type="inout" var-type="string" >oMatches[4].strDestPhone</parameter>
            <parameter type="inout" var-type="string" >oMatches[4].strAccountName</parameter>
            <parameter type="inout" var-type="string" >oMatches[4].strAccountPswd</parameter>
          </java>
          <results >
            <result name="Default" link="3" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
            <result name="TransferCall"/>
            <result name="ConfirmMatch"/>
            <result name="No Matches"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("Searching for match on: " + Session.strDigits);



]]></script>
            <script language="javascript" timing="middle" ><![CDATA[if ( 0 == Session.nAPIReturnCode ) {

	Server.logInfo("******SUCCESS from searchCompanyDirectory********");

	Server.logInfo("Match 1 Name: " + Session.oMatches[0].strNameText);

	Server.logInfo("Match 1 Phone: " + Session.oMatches[0].strDestPhone);

	Server.logInfo("Match 1 VM AccountName: " + Session.oMatches[0].strAccountName);

	Server.logInfo("Match 1 VM Password: " + Session.oMatches[0].strAccountPswd);

	

	Server.logInfo("Match 2 Name: " + Session.oMatches[1].strNameText);

	Server.logInfo("Match 2 Phone: " + Session.oMatches[1].strDestPhone);

	Server.logInfo("Match 2 VM AccountName: " + Session.oMatches[1].strAccountName);

	Server.logInfo("Match 2 VM Password: " + Session.oMatches[1].strAccountPswd);

	

	Server.logInfo("Match 3 Name: " + Session.oMatches[2].strNameText);

	Server.logInfo("Match 3 Phone: " + Session.oMatches[2].strDestPhone);

	Server.logInfo("Match 3 VM AccountName: " + Session.oMatches[2].strAccountName);

	Server.logInfo("Match 3 VM Password: " + Session.oMatches[2].strAccountPswd);

	

	Server.logInfo("Match 4 Name: " + Session.oMatches[3].strNameText);

	Server.logInfo("Match 4 Phone: " + Session.oMatches[3].strDestPhone);

	Server.logInfo("Match 4 VM AccountName: " + Session.oMatches[3].strAccountName);

	Server.logInfo("Match 4 VM Password: " + Session.oMatches[3].strAccountPswd);

	

	Server.logInfo("Match 5 Name: " + Session.oMatches[4].strNameText);

	Server.logInfo("Match 5 Phone: " + Session.oMatches[4].strDestPhone);

	Server.logInfo("Match 5 VM AccountName: " + Session.oMatches[4].strAccountName);

	Server.logInfo("Match 5 VM Password: " + Session.oMatches[4].strAccountPswd);

	

}

else if ( -4 == Session.nAPIReturnCode ){

	Server.logError("****No match found in company directory for digits: " + Session.strDigits);

}

else {

	Server.logError("Error in searchCompanyDirectory. Return Code: " + Session.nAPIReturnCode);

}

	

	

	]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=482 y=230 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nAPIReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="VoipLoadIVR" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="strDBName" type="string" pass="byref"/>
        <parameter name="strPlatformSessionId" type="string" pass="byref"/>
        <parameter name="lIVRId" type="i8" pass="byref"/>
        <parameter name="oAPI" type="object" pass="byref"/>
        <parameter name="oIVR" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="nAPIReturnCode" type="i4" >-50</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=173 y=151 ?>
          <!--loadIVR-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.broadband.psAPISceIVR&quot;" method="&quot;loadIVR&quot;" timeout="5" return="" method-return-var="nAPIReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >strDBName</parameter>
            <parameter type="in" var-type="string" >strPlatformSessionId</parameter>
            <parameter type="in" var-type="i8" >lIVRId</parameter>
            <parameter type="inout" var-type="i8" >oAPI.lServiceProviderId</parameter>
            <parameter type="inout" var-type="i8" >oAPI.lCorpDeptId</parameter>
            <parameter type="inout" var-type="string" >oIVR.strIVRName</parameter>
            <parameter type="inout" var-type="string" >oIVR.strGreeting</parameter>
            <parameter type="inout" var-type="string" >oIVR.strAcctName</parameter>
            <parameter type="inout" var-type="string" >oIVR.strAcctPswd</parameter>
            <parameter type="inout" var-type="i4" >oIVR.nMaxRecordingLength</parameter>
            <parameter type="inout" var-type="string" >oIVR.strLanguage</parameter>
            <parameter type="inout" var-type="string" >oIVR.strExtensionDialingFlag</parameter>
            <parameter type="inout" var-type="i4" >oIVR.nExtensionLength</parameter>
            <parameter type="inout" var-type="string" >oIVR.str0ActionType</parameter>
            <parameter type="inout" var-type="string" >oIVR.str0ActionValue</parameter>
            <parameter type="inout" var-type="string" >oIVR.str1ActionType</parameter>
            <parameter type="inout" var-type="string" >oIVR.str1ActionValue</parameter>
            <parameter type="inout" var-type="string" >oIVR.str2ActionType</parameter>
            <parameter type="inout" var-type="string" >oIVR.str2ActionValue</parameter>
            <parameter type="inout" var-type="string" >oIVR.str3ActionType</parameter>
            <parameter type="inout" var-type="string" >oIVR.str3ActionValue</parameter>
            <parameter type="inout" var-type="string" >oIVR.str4ActionType</parameter>
            <parameter type="inout" var-type="string" >oIVR.str4ActionValue</parameter>
            <parameter type="inout" var-type="string" >oIVR.str5ActionType</parameter>
            <parameter type="inout" var-type="string" >oIVR.str5ActionValue</parameter>
            <parameter type="inout" var-type="string" >oIVR.str6ActionType</parameter>
            <parameter type="inout" var-type="string" >oIVR.str6ActionValue</parameter>
            <parameter type="inout" var-type="string" >oIVR.str7ActionType</parameter>
            <parameter type="inout" var-type="string" >oIVR.str7ActionValue</parameter>
            <parameter type="inout" var-type="string" >oIVR.str8ActionType</parameter>
            <parameter type="inout" var-type="string" >oIVR.str8ActionValue</parameter>
            <parameter type="inout" var-type="string" >oIVR.str9ActionType</parameter>
            <parameter type="inout" var-type="string" >oIVR.str9ActionValue</parameter>
            <parameter type="inout" var-type="string" >oIVR.strStarActionType</parameter>
            <parameter type="inout" var-type="string" >oIVR.strStarActionValue</parameter>
            <parameter type="inout" var-type="string" >oIVR.strHashActionType</parameter>
            <parameter type="inout" var-type="string" >oIVR.strHashActionValue</parameter>
            <parameter type="inout" var-type="string" >oIVR.strNoActionType</parameter>
            <parameter type="inout" var-type="string" >oIVR.strNoActionValue</parameter>
            <parameter type="inout" var-type="i8" >oAPI.lVoipServiceId</parameter>
            <parameter type="inout" var-type="i4" >oAPI.nDialingPlanId</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*****START loadIVR*****");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*****END loadIVR. Return Code: " + Session.nAPIReturnCode + "*****");





switch (Session.nAPIReturnCode) {

	

	case 0:

		Server.logInfo("Service Provider ID: " + Session.oAPI.lServiceProviderId);

		Server.logInfo("Corp Dept ID: " + Session.oAPI.lCorpDeptId);

		Server.logInfo("IVR Name: " + Session.oIVR.strIVRName);

		Server.logInfo("Greeting Name: " + Session.oIVR.strGreeting);

		Server.logInfo("IVR Recordings Acct Name: " + Session.oIVR.strAcctName);

		Server.logInfo("IVR Recordings Acct Password: " + Session.oIVR.strAcctPswd);

		Server.logInfo("Max Recording length: " + Session.oIVR.nMaxRecordingLength);

		Server.logInfo("Language: " + Session.oIVR.strLanguage);

		Server.logInfo("Enable Extension Dialing: " + Session.oIVR.strExtensionDialingFlag);

		Server.logInfo("Extension length: " + Session.oIVR.nExtensionLength);

		Server.logInfo("Menu 0 <" + Session.oIVR.str0ActionType + ">, <" +  Session.oIVR.str0ActionValue + ">");

		Server.logInfo("Menu 1 <" + Session.oIVR.str1ActionType + ">, <" +  Session.oIVR.str1ActionValue + ">");

		Server.logInfo("Menu 2 <" + Session.oIVR.str2ActionType + ">, <" +  Session.oIVR.str2ActionValue + ">");

		Server.logInfo("Menu 3 <" + Session.oIVR.str3ActionType + ">, <" +  Session.oIVR.str3ActionValue + ">");

		Server.logInfo("Menu 4 <" + Session.oIVR.str4ActionType + ">, <" +  Session.oIVR.str4ActionValue + ">");

		Server.logInfo("Menu 5 <" + Session.oIVR.str5ActionType + ">, <" +  Session.oIVR.str5ActionValue + ">");

		Server.logInfo("Menu 6 <" + Session.oIVR.str6ActionType + ">, <" +  Session.oIVR.str6ActionValue + ">");

		Server.logInfo("Menu 7 <" + Session.oIVR.str7ActionType + ">, <" +  Session.oIVR.str7ActionValue + ">");

		Server.logInfo("Menu 8 <" + Session.oIVR.str8ActionType + ">, <" +  Session.oIVR.str8ActionValue + ">");

		Server.logInfo("Menu 9 <" + Session.oIVR.str9ActionType + ">, <" +  Session.oIVR.str9ActionValue + ">");

		Server.logInfo("Menu * <" + Session.oIVR.strStarActionType + ">, <" +  Session.oIVR.strStarActionValue + ">");

		Server.logInfo("Menu # <" + Session.oIVR.strHashActionType + ">, <" +  Session.oIVR.strHashActionValue + ">");

		Server.logInfo("No Action <" + Session.oIVR.strNoActionType + ">, <" +  Session.oIVR.strNoActionValue + ">");

		Server.logInfo("Voip Service ID <" + Session.oAPI.lVoipServiceId + ">");

		Server.logInfo("Dialing Plan ID <" + Session.oAPI.nDialingPlanId + ">");

		break;



	case -2:

		Server.logError("IVR NOT FOUND");

		break;

	

	case -5:

		Server.logError("IVR RECORDINGS ACCOUNT NOT FOUND");

		break;

		

	case -99:

		Server.logError("DB ERROR");

		break;

	

	Server.logError("Uknown error attempting to load IVR");

}

		]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=417 y=193 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nAPIReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="psAPIAddAuthAni" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="p_oSUB" type="object"/>
        <parameter name="p_oAPI" type="object"/>
      </parameters>
      <local-vars >
        <var name="nReturnCode" type="i4" >0</var>
        <var name="nFAILURE" type="i4" >0</var>
        <var name="nTimeout" type="i4" >0</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=20 y=37 ?>
          <!--AddAuthAni-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceMisc&quot;" method="&quot;addAuthANI&quot;" timeout="nTimeout" return="nReturnCode" method-return-var="nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.lPinId</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strOneStepDialingNumber</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START addAuthANI *********");

Server.logInfo("p_oAPI.strPlatformSessionId: " + Session.p_oAPI.strPlatformSessionId);  

Server.logInfo("p_oAPI.strProcDBName: " + Session.p_oAPI.strProcDBName);  

Server.logInfo("p_oAPI.strPlatformSessionId: " + Session.p_oAPI.strPlatformSessionId);  

Server.logInfo("p_oSUB.lSubscriberId: " + Session.p_oSUB.lSubscriberId); 

Server.logInfo("p_oAPI.lServiceProviderId: " + Session.p_oAPI.lServiceProviderId); 

Server.logInfo("p_oSUB.lPinId: " + Session.p_oSUB.lPinId); 

Server.logInfo("p_oSUB.strOneStepDialingNumber: " + Session.p_oSUB.strOneStepDialingNumber); 



]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*********JAVA RETURN*********");

Server.logInfo("Prepaid addAuthANI returned " + Session.nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=304 y=20 ?>
          <!--nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API addAuthANI , EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=322 y=182 ?>
          <!--nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="psAPIRemoveAuthAni" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="p_oSUB" type="object"/>
        <parameter name="p_oAPI" type="object"/>
      </parameters>
      <local-vars >
        <var name="nReturnCode" type="i4" >0</var>
        <var name="nFAILURE" type="i4" >0</var>
        <var name="nTimeout" type="i4" >0</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=20 y=37 ?>
          <!--AddAuthAni-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceMisc&quot;" method="&quot;removeAuthANI&quot;" timeout="nTimeout" return="nReturnCode" method-return-var="nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.lPinId</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strOneStepDialingNumber</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START removeAuthANI *********");

Server.logInfo("p_oAPI.strPlatformSessionId: " + Session.p_oAPI.strPlatformSessionId);  

Server.logInfo("p_oAPI.strProcDBName: " + Session.p_oAPI.strProcDBName);  

Server.logInfo("p_oAPI.strPlatformSessionId: " + Session.p_oAPI.strPlatformSessionId);  

Server.logInfo("p_oSUB.lSubscriberId: " + Session.p_oSUB.lSubscriberId); 

Server.logInfo("p_oAPI.lServiceProviderId: " + Session.p_oAPI.lServiceProviderId); 

Server.logInfo("p_oSUB.lPinId: " + Session.p_oSUB.lPinId); 

Server.logInfo("p_oSUB.strOneStepDialingNumber: " + Session.p_oSUB.strOneStepDialingNumber); 



]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*********JAVA RETURN*********");

Server.logInfo("Prepaid removeAuthANI returned " + Session.nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=304 y=20 ?>
          <!--nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API removeAuthANI , EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=322 y=182 ?>
          <!--nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="psAPIPrepareAndSendEmails" start="2" event="" returns="i4" >
      <parameters >
        <parameter name="p_oSUB" type="object" pass="byref"/>
        <parameter name="p_oAPI" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="nReturnCode" type="i4" >-50</var>
        <var name="nFAILURE" type="i4" >-1</var>
      </local-vars>
      <actions >
        <action id="2" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=93 y=268 ?>
          <!--prepareAndSendEmails-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceMisc&quot;" method="&quot;prepareAndSendEmails&quot;" timeout="5" return="" method-return-var="nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nPrimaryOfferingId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strEmailEvents</parameter>
          </java>
          <results >
            <result name="Default" link="4" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("************Calling com.pactolus.psAPISceMisc.prepareAndSendEmails*************");



]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=420 y=381 ?>
          <!--0-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="0"/>
        </action>
        <action id="4" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=419 y=206 ?>
          <!--nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nFAILURE"/>
        </action>
      </actions>
    </function>
    <function name="VoipUpdateIVRRecording" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="strDBName" type="string" pass="byref"/>
        <parameter name="strSessionId" type="string" pass="byref"/>
        <parameter name="strSubject" type="string" pass="byref"/>
        <parameter name="strRecordingName" type="string" pass="byref"/>
        <parameter name="nRecordingsAcctId" type="i4" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="nReturnCode" type="i4" >-50</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=190 y=205 ?>
          <!--updateIVRRecording-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.broadband.psAPISceIVRAuthAdmin&quot;" method="&quot;updateIVRRecording&quot;" timeout="4" return="" method-return-var="nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >strDBName</parameter>
            <parameter type="in" var-type="string" >strSessionId</parameter>
            <parameter type="in" var-type="string" >strSubject</parameter>
            <parameter type="in" var-type="string" >strRecordingName</parameter>
            <parameter type="in" var-type="i4" >nRecordingsAcctId</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=509 y=244 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="VoipRemoveIVRRecording" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="strDBName" type="string" pass="byref"/>
        <parameter name="strSessionId" type="string" pass="byref"/>
        <parameter name="nRecordingAcctId" type="i4" pass="byref"/>
        <parameter name="strSubject" type="string" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="nReturnCode" type="i4" >-50</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=222 y=189 ?>
          <!--removeIVRRecording-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.broadband.psAPISceIVRAuthAdmin&quot;" method="&quot;removeIVRRecording&quot;" timeout="" return="" method-return-var="nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >strDBName</parameter>
            <parameter type="in" var-type="string" >strSessionId</parameter>
            <parameter type="in" var-type="string" >strSubject</parameter>
            <parameter type="in" var-type="i4" >nRecordingAcctId</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=499 y=225 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value=""/>
        </action>
      </actions>
    </function>
    <function name="APIGetTestInviteData" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="oTestData" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nTIMEOUT" type="i4" >30</var>
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_strTempString" type="string" ></var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=115 y=219 ?>
          <!--get invite test data-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.Utilities&quot;" method="&quot;getInviteTestValues&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="inout" var-type="string" >oTestData.strCardServicesTestFlag</parameter>
            <parameter type="inout" var-type="string" >oTestData.strTestToField</parameter>
            <parameter type="inout" var-type="string" >oTestData.strTestFromField</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=365 y=197 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API GET INVITE TEST DATA, EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=363 y=309 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="VoipSendEmergencyCallFailureEmail" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="oAPI" type="object" pass="byref"/>
        <parameter name="oSub" type="object" pass="byref"/>
        <parameter name="strCallStartTime" type="string" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="nReturnCode" type="i4" >-99</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=219 y=137 ?>
          <!--sendEmergencyCallFailureEmail-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceMisc&quot;" method="&quot;sendEmergencyFailureEmail&quot;" timeout="10" return="nReturnCode" method-return-var="" method-return-type="0" >
            <parameter type="in" var-type="string" >oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="i8" >oSub.lSPId</parameter>
            <parameter type="in" var-type="i8" >oSub.lSubscriberId</parameter>
            <parameter type="in" var-type="string" >strCallStartTime</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("***Sending email notification of emergency call failure***");
Server.logInfo("Service Provider ID <" + Session.oSub.lSPId + ">");
Server.logInfo("Subscriber ID <" + Session.oSub.lSubscriberId + ">");
Server.logInfo("Call Start Time <" + Session.strCallStartTime + ">");]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=510 y=170 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="CallingCardCleanupSessions" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="strPlatformIpAddress" type="string"/>
      </parameters>
      <local-vars >
        <var name="nReturn" type="i4" >-50</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=403 y=174 ?>
          <!---1-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="-1"/>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=413 y=336 ?>
          <!--0-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="0"/>
        </action>
        <action id="3" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=136 y=174 ?>
          <!--cleanupOpenCallingCardSessions-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceMisc&quot;" method="&quot;cleanupOpenCallingCardSessions&quot;" timeout="30" return="" method-return-var="nReturn" method-return-type="0" >
            <parameter type="in" var-type="string" >strPlatformIpAddress</parameter>
          </java>
          <results >
            <result name="Default" link="1" stubbed="0"/>
            <result name="Success" link="2" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="last" ><![CDATA[if(2 != Result.id) {
	Server.logError("Error executing drop to java. Result.id: " + Result.id + "; Result.name: " + Result.name);
}	]]></script>
          </scripts>
        </action>
      </actions>
    </function>
    <function name="psGetStoredBalance" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="p_oSUB" type="object" pass="byref"/>
        <parameter name="p_oSTB" type="object" pass="byref"/>
        <parameter name="p_oAPI" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=69 y=108 ?>
          <!--Get SubBucket StoredBalance -->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceMisc&quot;" method="&quot;getSubStoredBalance&quot;" timeout="30" return="f_nReturnCode" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lSecondsBalance00</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lSecondsUsed01</parameter>
            <parameter type="inout" var-type="string" >p_oSTB.strDescription02</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lBucketSize03</parameter>
            <parameter type="inout" var-type="string" >p_oSTB.strLinkedFlag04</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lSecondsBalance10</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lSecondsUsed11</parameter>
            <parameter type="inout" var-type="string" >p_oSTB.strDescription12</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lBucketSize13</parameter>
            <parameter type="inout" var-type="string" >p_oSTB.strLinkedFlag14</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lSecondsBalance20</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lSecondsUsed21</parameter>
            <parameter type="inout" var-type="string" >p_oSTB.strDescription22</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lBucketSize23</parameter>
            <parameter type="inout" var-type="string" >p_oSTB.strLinkedFlag24</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lSecondsBalance30</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lSecondsUsed31</parameter>
            <parameter type="inout" var-type="string" >p_oSTB.strDescription32</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lBucketSize33</parameter>
            <parameter type="inout" var-type="string" >p_oSTB.strLinkedFlag34</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lSecondsBalance40</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lSecondsUsed41</parameter>
            <parameter type="inout" var-type="string" >p_oSTB.strDescription42</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lBucketSize43</parameter>
            <parameter type="inout" var-type="string" >p_oSTB.strLinkedFlag44</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lSecondsBalance50</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lSecondsUsed51</parameter>
            <parameter type="inout" var-type="string" >p_oSTB.strDescription52</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lBucketSize53</parameter>
            <parameter type="inout" var-type="string" >p_oSTB.strLinkedFlag54</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lSecondsBalance60</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lSecondsUsed61</parameter>
            <parameter type="inout" var-type="string" >p_oSTB.strDescription62</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lBucketSize63</parameter>
            <parameter type="inout" var-type="string" >p_oSTB.strLinkedFlag64</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lSecondsBalance70</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lSecondsUsed71</parameter>
            <parameter type="inout" var-type="string" >p_oSTB.strDescription72</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lBucketSize73</parameter>
            <parameter type="inout" var-type="string" >p_oSTB.strLinkedFlag74</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lSecondsBalance80</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lSecondsUsed81</parameter>
            <parameter type="inout" var-type="string" >p_oSTB.strDescription82</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lBucketSize83</parameter>
            <parameter type="inout" var-type="string" >p_oSTB.strLinkedFlag84</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lSecondsBalance90</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lSecondsUsed91</parameter>
            <parameter type="inout" var-type="string" >p_oSTB.strDescription92</parameter>
            <parameter type="inout" var-type="i8" >p_oSTB.lBucketSize93</parameter>
            <parameter type="inout" var-type="string" >p_oSTB.strLinkedFlag94</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=392 y=69 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=419 y=222 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="psAPICommitAndReserve" start="6" event="" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oRATE" type="object" pass="byref"/>
        <parameter name="p_oSUB" type="object" pass="byref"/>
        <parameter name="p_oCallLegB" type="object" pass="byref"/>
        <parameter name="p_oCallLegA" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="bCardServices" type="boolean" >1</var>
        <var name="bOnNet" type="boolean" >0</var>
        <var name="f_nFAILURE" type="i4" >-50</var>
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
        <var name="RT_ON_NET" type="i4" >1</var>
      </local-vars>
      <actions >
        <action id="6" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=20 y=74 ?>
          <!--commitAndReserve()-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceBalanceReservation&quot;" method="&quot;commitAndReserve&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nServiceId</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lServiceProviderId</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lSubscriberId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strStrippedOrigNumber</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPayPhoneFlag</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nDialingPlanId</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nRoundingSeconds</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strOrigDomIntFlag</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nOrigCountryId</parameter>
            <parameter type="in" var-type="float" >p_oSUB.fPrepaidBalance</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nAccessNumberId</parameter>
            <parameter type="in" var-type="string" >p_oSUB.strFirstCallFlag</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nPrimaryOfferingId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strPostPaidFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nOrigRegionId</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fAlegMeteredRate</parameter>
            <parameter type="in" var-type="i8" >p_oCallLegA.lTimeAnswered</parameter>
            <parameter type="in" var-type="boolean" >p_oAPI.bALegCallback</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nSecondsAnnounce</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nSecondsAvailable</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nIntlOrigRateId</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fIntlOrigRateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nIntlDestRateId</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fIntlDestRateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nDomOrigAndDestRateId</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fDomOrigAndDestRateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nDomOrigAndDestTDWRateId</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fDomOrigAndDestTDWRateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nDomDestRateId</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fDomDestRateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nPayphone1RateId</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fPayphone1RateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nPayphone1RateType</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nPayphone2RateId</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fPayphone2RateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nPayphone2RateType</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nAccessNumberRateId</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fAccessNumberRateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nAccessNumberRateType</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nAccessNumberRate2Id</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fAccessNumberRate2Amt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nAccessNumberRate2Type</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nMeteredRateId1</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fMeteredRateAmt1</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nFixedRateId1</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fFixedRateAmt1</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nFirstUseRateId</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fFirstUseRateAmt</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fTotalMeteredRate</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fTotalFixedRate</parameter>
            <parameter type="inout" var-type="string" >p_oCallLegB.strDestDomIntlFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oCallLegB.nDestCountryId</parameter>
            <parameter type="inout" var-type="string" >p_oCallLegB.strStrippedDest</parameter>
            <parameter type="inout" var-type="string" >p_oRATE.strTieredRatesFlag</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fTier1RateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nTier2ThresholdSecs</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fTier2RateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nTier3ThresholdSecs</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fTier3RateAmt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nBongCharge1Time</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fBongCharge1Amt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nBongCharge2Time</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fBongCharge2Amt</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nBongCharge3Time</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fBongCharge3Amt</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fConnectionFee</parameter>
            <parameter type="inout" var-type="i4" >p_oCallLegB.nGracePeriod</parameter>
            <parameter type="inout" var-type="string" >p_oRATE.strExtBongsFlag</parameter>
            <parameter type="inout" var-type="string" >p_oRATE.strExtBongsNumCharges</parameter>
            <parameter type="inout" var-type="float" >p_oRATE.fBongAmount</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nExtBongInitialTimeSecs</parameter>
            <parameter type="inout" var-type="i4" >p_oRATE.nExtBongIntervalSecs</parameter>
            <parameter type="inout" var-type="i4" >p_oCallLegB.nDestRegionId</parameter>
            <parameter type="in" var-type="boolean" >bCardServices</parameter>
            <parameter type="in" var-type="boolean" >bOnNet</parameter>
            <parameter type="in" var-type="boolean" >p_oAPI.bApplyPayphoneSurcharges</parameter>
            <parameter type="in" var-type="boolean" >p_oAPI.bRateByAccessNumber</parameter>
            <parameter type="in" var-type="boolean" >p_oAPI.bApplyPrecallRounding</parameter>
            <parameter type="inout" var-type="boolean" >p_oAPI.bPctMaxCallDuration</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strAllowZeroCostFlag</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nSecondsBalance</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nSecondsUsed</parameter>
            <parameter type="inout" var-type="boolean" >p_oSUB.bBucketOfRatesFlag</parameter>
            <parameter type="inout" var-type="i8" >p_oSUB.nTotalBucketSize</parameter>
            <parameter type="inout" var-type="i8" >p_oSUB.nBucketSize</parameter>
            <parameter type="inout" var-type="i8" >p_oSUB.nDailyUsageThreshold</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strBucketRefillWarningFlag</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strBucketExhaustWarningFlag</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strPlayBucketRefillWarning</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strPlayBucketExhaustWarning</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strBucketRefillNotifyFlag</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.strBucketExhaustNotifyFlag</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strSharedUseBillingFlag</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nCommitInterval</parameter>
            <parameter type="in" var-type="i4" >p_oAPI.nBillingLevel</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lCorpAcctNumber</parameter>
            <parameter type="in" var-type="i8" >p_oSUB.lReservationId</parameter>
            <parameter type="inout" var-type="i8" >p_oSUB.lBillingSessionId</parameter>
            <parameter type="inout" var-type="i8" >p_oSUB.lReservationId</parameter>
            <parameter type="inout" var-type="i4" >p_oSUB.nReservedSeconds</parameter>
            <parameter type="in" var-type="boolean" >p_oAPI.bRateBySequence</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.nAccessNumberGroupId</parameter>
            <parameter type="inout" var-type="i8" >p_oSUB.lStoredBalanceId</parameter>
            <parameter type="inout" var-type="boolean" >p_oSUB.bLinked</parameter>
            <parameter type="inout" var-type="string" >p_oSUB.sPlaySubBucketWarnFlag</parameter>
            <parameter type="inout" var-type="i8" >p_oRATE.lSubBucketRateId</parameter>
            <parameter type="inout" var-type="i8" >p_oSUB.lMinutesToNextBucketThreshold</parameter>
            <parameter type="inout" var-type="i8" >p_oSUB.lSecsToFirstBucketThreshold</parameter>
            <parameter type="inout" var-type="i8" >p_oSUB.lSecsBetweenBucketThresholds</parameter>
            <parameter type="in" var-type="i8" >p_oAPI.lPlatformSessionStartTime</parameter>
          </java>
          <results >
            <result name="Default" link="4" stubbed="0"/>
            <result name="Success" link="5" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START commitAndReserve *********");

if( null != Session.p_oAPI.strBroadbandCallingFlag && "T" == Session.p_oAPI.strBroadbandCallingFlag ) {

	Session.bCardServices = false ;

	if( Session.RT_ON_NET == Clib.atoi(Session.p_oCallLegB.strDestRouteType) ) {

		Session.bOnNet = true ;

	}

}

]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*********JAVA RETURN*********");

Server.logInfo("commitAndReserve returned " + Session.f_nReturnCode);]]></script>
          </scripts>
        </action>
        <action id="4" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=324 y=20 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO CALL API COMMIT AND RESERVE , EXIT ON NON SUCCESS");]]></script>
          </scripts>
        </action>
        <action id="5" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=340 y=169 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="VoipFindSessionIdByCallId" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="strDBName" type="string" pass="byref"/>
        <parameter name="strPlatformSessionId" type="string" pass="byref"/>
        <parameter name="strCallId" type="string" pass="byref"/>
        <parameter name="strFromTag" type="string" pass="byref"/>
        <parameter name="strToTag" type="string" pass="byref"/>
        <parameter name="strSessionId" type="string" pass="byref"/>
        <parameter name="strIpAddress" type="string" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="nAPIReturnCode" type="i4" >-99</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=52 y=85 ?>
          <!--findSessionIdByCallId-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.broadband.psAPISceBroadbandAuth&quot;" method="&quot;findSessionIdByCallId&quot;" timeout="5" return="" method-return-var="nAPIReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >strDBName</parameter>
            <parameter type="in" var-type="string" >strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >strCallId</parameter>
            <parameter type="in" var-type="string" >strFromTag</parameter>
            <parameter type="in" var-type="string" >strToTag</parameter>
            <parameter type="inout" var-type="string" >strSessionId</parameter>
            <parameter type="inout" var-type="string" >strIpAddress</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
            <result name="TransferCall"/>
            <result name="ConfirmMatch"/>
            <result name="No Matches"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("Searching for session that owns callid: " + Session.strCallId ) ;



]]></script>
            <script language="javascript" timing="middle" ><![CDATA[if ( 0 == Session.nAPIReturnCode ) {
	Server.logInfo("******SUCCESS from findSessionIdByCallId********");
	Server.logInfo("Session id is: " + Session.strSessionId ) ;
	Server.logInfo("IP Address is: " + Session.strIpAddress ) ;
}
else {
	Server.logError("Error in findSessionIdByCallId. Return Code: " + Session.nAPIReturnCode);
}

	

	

	]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=356 y=154 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nAPIReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="VoipValidateExtension" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="strDBName" type="string" pass="byref"/>
        <parameter name="strSessionId" type="string" pass="byref"/>
        <parameter name="strExtension" type="string" pass="byref"/>
        <parameter name="lCorpDeptId" type="i8" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="nAPIReturnCode" type="i4" >-99</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=89 y=75 ?>
          <!--isValidExtension-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.broadband.psAPISceIVR&quot;" method="&quot;isValidExtension&quot;" timeout="10" return="" method-return-var="nAPIReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >strDBName</parameter>
            <parameter type="in" var-type="string" >strSessionId</parameter>
            <parameter type="in" var-type="i8" >lCorpDeptId</parameter>
            <parameter type="in" var-type="string" >strExtension</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("****BEGIN isValidExtension****");
Server.logInfo("Extension: " + Session.strExtension + ", dept id: " + Session.lCorpDeptId );
]]></script>
            <script language="javascript" timing="middle" ><![CDATA[Server.logInfo("****END isValidExtension****");

if ( 2 == Result.id ) {
	switch(Session.nAPIReturnCode){
		case 0:
			Server.logInfo("Extension is a valid extension") ;
			break;

		case -1:
			Server.logError("Extension is NOT a valid extension");
			break;

		default:
			Server.logError("Error in isValidExtension");
	}
}





]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=374 y=81 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nAPIReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="VoipGetPhoneNumbers" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="strDBName" type="string" pass="byref"/>
        <parameter name="strPlatformSessionId" type="string" pass="byref"/>
        <parameter name="lAccessLineId" type="i8" pass="byref"/>
        <parameter name="nPhoneNumbers" type="i4" pass="byref"/>
        <parameter name="strSubPhone" type="string" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="nReturnValue" type="i4" >-50</var>
        <var name="nAPIReturnCode" type="i4" >-50</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=69 y=127 ?>
          <!--lookupPhoneNumbers-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.broadband.psAPISceVoicemailAuth&quot;" method="&quot;lookupPhoneNumbers&quot;" timeout="10" return="nReturnValue" method-return-var="nAPIReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >strDBName</parameter>
            <parameter type="in" var-type="string" >strPlatformSessionId</parameter>
            <parameter type="in" var-type="i8" >lAccessLineId</parameter>
            <parameter type="inout" var-type="i4" >nPhoneNumbers</parameter>
            <parameter type="inout" var-type="string" >strSubPhone</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("Access Line ID: " + Session.lAccessLineId);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=345 y=171 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value=""/>
        </action>
      </actions>
    </function>
    <function name="psAPIGetBrandingPrompts" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oSUB" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >0</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=96 y=109 ?>
          <!--psAPISceMisc.getBrandingPrompts-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceMisc&quot;" method="&quot;getBrandingPrompts&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="i4" >p_oSUB.nServiceId</parameter>
            <parameter type="in" var-type="boolean" >p_oSUB.bFirstUse</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strDisconnectPromptType</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nDisconnectPrompt</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strDisconnectPromptUrl</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPromptFirstUseType</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nPromptFirstUseIndex</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPromptFirstUseUrl</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPostPinPromptType</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nPostPinPromptIndex</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPostPinPromptUrl</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPostDestPromptType</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nPostDestPromptIndex</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPostDestPromptUrl</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPromptFreeCall</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nPromptFreeCallIndex</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPromptFreeCallUrl</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPromptAuthAniReq</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nPromptAuthAniReqIndex</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPromptAuthAniReqUrl</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPromptCallFromInvalidAni</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nPromptCallFromInvalidAniIndex</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPromptCallFromInvalidAniUrl</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPromptPostTimeDisclaimer</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nPromptPostTimeDisclaimerIndex</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPromptPostTimeDisclaimerUrl</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPromptFirstBillCycle</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nPromptFirstBillCycleIndex</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPromptFirstBillCycleUrl</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPromptOffPlanAlert</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nPromptOffPlanAlertIndex</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPromptOffPlanAlertUrl</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPromptOnPlanMeteredAlert</parameter>
            <parameter type="inout" var-type="i4" >p_oAPI.nPromptOnPlanMeteredAlertIndex</parameter>
            <parameter type="inout" var-type="string" >p_oAPI.strPromptOnPlanMeteredAlertUrl</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("*********JAVA START Get Branding Prompts *********");]]></script>
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("*********JAVA Get Branding Prompts Returns<"+Session.f_nReturnCode+">*********");]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=344 y=117 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
    <function name="MarkPrecallPromptAsPlayed" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="lSubscriberID" type="i8" pass="byref"/>
        <parameter name="nPromptPlayed" type="i4" pass="byref"/>
        <parameter name="p_oAPI" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nFAILURE" type="i4" >-99</var>
        <var name="f_nReturnCode" type="i4" >-99</var>
        <var name="f_nTIMEOUT" type="i4" >30</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=121 y=115 ?>
          <!--logPrecallPromptPlayedEvent-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.psAPISceMisc&quot;" method="&quot;logPrecallPromptPlayedEvent&quot;" timeout="f_nTIMEOUT" return="" method-return-var="f_nReturnCode" method-return-type="0" >
            <parameter type="in" var-type="string" >p_oAPI.strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_oAPI.strProcDBName</parameter>
            <parameter type="in" var-type="i8" >lSubscriberID</parameter>
            <parameter type="in" var-type="i4" >nPromptPlayed</parameter>
          </java>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=419 y=61 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=413 y=195 ?>
          <!--f_nReturnCode-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nReturnCode"/>
        </action>
      </actions>
    </function>
  </functions>
  <script language="javascript" ><![CDATA[#include <javascript_utils.jsh>]]></script>
  <properties >
    <property key="disable-logging" value=""/>
    <property key="js-include-path" value="../Libs"/>
    <property key="library-modules" value="javascript_utils.jsh"/>
    <property key="library-path" value="../Libs"/>
  </properties>
  <application-version >
    <revision >$Id: lib_APISce.xml,v 1.306.2.1 2010/02/20 15:00:51 jgibson Exp $</revision>
    <label >$Name: PCS-A-4-1-1-1-4-c6 $</label>
  </application-version>
</xtml>