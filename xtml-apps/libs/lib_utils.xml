<?xml version="1.0"?>
<xtml version="1.0" xmlns="urn:www.pactolus.com:xtml" >
  <events >
    <event name="HeartbeatResponse" display="HeartbeatResponse" >
      <parameter name="strACDControllerIP" type="string"/>
      <parameter name="nACDControllerPort" type="i4"/>
      <parameter name="strTransactionId" type="string"/>
    </event>
  </events>
  <global-handlers/>
  <functions >
    <function name="playLanguageMenu" start="18" event="playLanguageMenu" returns="i4" >
      <parameters >
        <parameter name="p_oMS" type="object"/>
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oLanguage" type="object"/>
        <parameter name="p_nLanguageMenu" type="i4"/>
        <parameter name="p_oACD" type="i4" pass="byref"/>
        <parameter name="p_strLanguageMenu" type="string"/>
      </parameters>
      <local-vars >
        <var name="f_nMS_ERROR" type="i4" >-1</var>
        <var name="f_nSUCCESS" type="i4" >0</var>
        <var name="f_strDigitCollected" type="string" ></var>
        <var name="f_bIsValid" type="boolean" >1</var>
        <var name="f_nRC" type="i4" >0</var>
        <var name="f_bPlayNextLanguage" type="boolean" >1</var>
        <var name="f_nCounter" type="i4" >0</var>
        <var name="f_strCode" type="string" ></var>
        <var name="f_nPressNumber" type="i4" >0</var>
        <var name="f_nForLanguage" type="i4" >0</var>
        <var name="f_nNumTries" type="i4" >0</var>
        <var name="f_nSilence" type="i4" >220</var>
        <var name="f_strSignal" type="string" ></var>
        <var name="f_strRequest" type="string" ></var>
        <var name="f_nTIMEOUT" type="i4" >1</var>
        <var name="f_nINVALID" type="i4" >2</var>
        <var name="f_nOffset" type="i4" >0</var>
        <var name="f_nWAIT_TIMEOUT" type="i4" >30</var>
        <var name="f_nRQNT_TIMEOUT" type="i4" >3</var>
        <var name="f_oOptions" type="object" ></var>
        <var name="f_nSUCCESS_ACD" type="i4" >3</var>
        <var name="f_nPrompt" type="i4" >337</var>
      </local-vars>
      <actions >
        <action id="18" plug-in="Pactolus.Branch.1" ><?xtml-editor x=13 y=36 ?>
          <results >
            <result name="Default" link="17" stubbed="0"/>
            <result name="p_nLanguageMenu &gt; 0" link="3" stubbed="0" >p_nLanguageMenu &gt; 0</result>
            <result name="p_strLanguageMenu.length &gt; 0" link="19" stubbed="0" >p_strLanguageMenu.length &gt; 0</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_strDigitCollected = "";]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=251 y=215 ?>
          <!--Play Language Option-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="60" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="&quot;(x)&quot;" language="p_oAPI.strLanguage" digits="f_strDigitCollected" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >p_nLanguageMenu</audio>
            <audio type="index" >f_oOptions[0].nPressCS1</audio>
            <audio type="index" >f_oOptions[0].nPressCS2</audio>
            <audio type="index" >f_oOptions[0].nOptionCS</audio>
          </play>
          <results >
            <result name="Default" link="6" stubbed="1"/>
            <result name="Success" link="5" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout" link="5" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[

if((Session.p_oACD.strEnableFlag == "T" || Session.p_oAPI.strCustomerServicePhone != "") && 

   Session.p_oACD.strLanguageMenuZeroOut == "T") {

   

   	Session.f_oOptions[0].nOptionCS = 931;// Customer Service

	Session.f_oOptions[0].nPressCS1 = 310; // Press

	Session.f_oOptions[0].nPressCS2 = 1; // 0



} else {



   	Session.f_oOptions[0].nOptionCS = 99; // silence

	Session.f_oOptions[0].nPressCS1 = 99; // 

	Session.f_oOptions[0].nPressCS2 = 99; // 



}]]></script>
          </scripts>
        </action>
        <action id="5" plug-in="Pactolus.Branch.1" ><?xtml-editor x=579 y=229 ?>
          <results >
            <result name="Default" link="18" stubbed="1"/>
            <result name="numTries &gt;= API.MaxLginAttempts" link="8" stubbed="0" >f_nNumTries &gt;= p_oAPI.nMaxLoginAttempts</result>
            <result name="!isValid" link="11" stubbed="0" >f_bIsValid == false</result>
            <result name="!playNextLanguage" link="8" stubbed="0" >f_bPlayNextLanguage == false</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_bIsValid = true;
Session.f_bPlayNextLanguage = true;
Session.f_nPrompt = 337;

if(Session.f_strDigitCollected == "" || Session.f_strDigitCollected == "T") {
// Prompt timed out:

	if(Session.p_nLanguageMenu > 0 || Session.p_strLanguageMenu.length > 0) {
	// Not using dynamic language menu, prompt has timed out:	
		Session.f_nNumTries++;
		Session.f_nCounter = 0;	
		Session.f_bIsValid = false;
		Session.f_nPrompt = 552;
		Session.f_nRC = Session.f_nTIMEOUT;		
	
	} else {  	
	// Using dynamic language menu, check if last language was played:	
		if(Session.f_nCounter < (Session.p_oLanguage.length-1)) {
		// More language options need to be played:
			Session.f_nCounter++;
		} else {
		// Last language option was played:
			Session.f_nNumTries++;
			Session.f_nCounter = 0;	
			Session.f_nRC = Session.f_nTIMEOUT;		
		}	
	}
	
} else if(Session.f_strDigitCollected == "*" || Session.f_strDigitCollected == "#") {
// * or # was entered. Reset counter, increment attempts.
	Session.f_nCounter = 0;	
	Session.f_bIsValid = false;	
	Session.f_nNumTries++;
	Session.f_nRC = Session.f_nINVALID;		

} else {
// User entered 0-9

	// check ACD Settings and if 0.
	if(Session.p_oACD.strLanguageMenuZeroOut == "T" && Session.f_strDigitCollected == "0" &&
	  (Session.p_oACD.strEnableFlag == "T" || Session.p_oACD.strCustomerServicePhone != "")) {

		Session.f_bPlayNextLanguage = false;
		Session.f_nRC = Session.f_nSUCCESS_ACD;
		return;		

	}


	for (var i = 0; i < Session.p_oLanguage.length; i++) {
	// Check if valid entery
		if(Session.f_strDigitCollected == (i+1)) {
		// valid entry, set language and return.
			Session.p_oAPI.strLanguage = Session.p_oLanguage[i].strCode;
			Session.f_bPlayNextLanguage = false;
			Session.f_nRC = Session.f_nSUCCESS;
			return;
		} // end if
	} // end for

	// Invalid entry, Reset counter, increment attempts.
	Session.f_nCounter = 0;	
	Session.f_bIsValid = false;	
	Session.f_nNumTries++;	
	Session.f_nRC = Session.f_nINVALID;		
	

	
} 

]]></script>
          </scripts>
        </action>
        <action id="6" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=14 y=454 ?>
          <!--f_nMS_ERROR-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nMS_ERROR"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR playing language menu.");]]></script>
          </scripts>
        </action>
        <action id="8" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=849 y=201 ?>
          <!--f_nRC-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nRC"/>
        </action>
        <action id="11" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=853 y=360 ?>
          <!--f_nPrompt: Invalid Choice or Didnt hear...-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >f_nPrompt</audio>
          </play>
          <results >
            <result name="Default" link="18" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="14" plug-in="Standard.WaitEvent.1" ><?xtml-editor x=461 y=24 ?>
          <!--Wait For Play Done or DTMF-->
          <wait xmlns="urn:www.pactolus.com:xtml:communication" timeout="f_nWAIT_TIMEOUT" recv-name="" >
            <msg name="Pactolus.MGCPPlayDone.1" >
              <parameter ></parameter>
              <parameter ></parameter>
              <parameter ></parameter>
              <parameter >f_strDigitCollected</parameter>
            </msg>
            <msg name="Pactolus.MGCPDtmf.1" >
              <parameter ></parameter>
              <parameter ></parameter>
              <parameter >f_strDigitCollected</parameter>
            </msg>
            <msg name="Pactolus.MGCPPlayFail.1" >
              <parameter ></parameter>
              <parameter ></parameter>
              <parameter ></parameter>
            </msg>
          </wait>
          <results >
            <result name="Default" link="6" stubbed="1"/>
            <result name="Success" link="5" stubbed="0"/>
            <result name="Error" link="5" stubbed="0"/>
            <result name="Timeout" link="5" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="last" ><![CDATA[Server.enableEvents(true);]]></script>
          </scripts>
        </action>
        <action id="17" plug-in="Pactolus.MGCPNotifyRequest.1" ><?xtml-editor x=229 y=29 ?>
          <rqnt xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" timeout="f_nRQNT_TIMEOUT" returns="" ms-type="p_oMS.strType" >
            <parameters >
              <quarantine step="0" loop="0" process="0" discard="0"/>
              <events ><![CDATA[f_strRequest]]></events>
              <signals ><![CDATA[f_strSignal]]></signals>
              <digit-map ><![CDATA["(x)"]]></digit-map>
            </parameters>
          </rqnt>
          <results >
            <result name="Default" link="6" stubbed="1"/>
            <result name="Success" link="14" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout" link="14" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.enableEvents(false);



Session.f_strDigitCollected = "";





Session.f_nForLanguage = Session.p_oLanguage[Session.f_nCounter].nForLanguage;

Session.f_nPressNumber = Session.p_oLanguage[Session.f_nCounter].nPressNumber;

Session.f_strCode = Session.p_oLanguage[Session.f_nCounter].strCode;

Session.f_nOffset = Session.p_oLanguage[Session.f_nCounter].nOffset;





if("PCS" == Session.p_oMS.strType) {



	if(Session.f_nCounter == (Session.p_oLanguage.length-1)) {

		//This is the last language option. Set silence to 5 seconds

		Session.f_nSilence = 98; // 5 seconds of silence

	} else {

		Session.f_nSilence = 220; // 0.5 seconds of silence

	}

	





	Session.f_strSignal = "AAU/pa(fto=0 la="+Session.f_strCode+" an="+Session.f_nForLanguage+","+Session.f_nPressNumber+","+Session.f_nSilence+")";

	Session.f_strRequest = "AAU/oc,AAU/of,D/[0-9#*T](D)";



} else if("CONV" == Session.p_oMS.strType) {





	if(Session.f_nCounter == (Session.p_oLanguage.length-1)) {

		//This is the last language option. Set silence to 5 seconds

		Session.f_nSilence = 50; // 5 seconds of silence

	

	} else {

		Session.f_nSilence = 10; // 1 seconds of silence

		

	}



	Server.logInfo("Session.f_nOffset: " + 	Session.f_nOffset);



	Server.logInfo("Session.f_nForLanguage: " + 	Session.f_nForLanguage);

	Server.logInfo("Session.f_nPressNumber: " + 	Session.f_nPressNumber);		

	

	Session.f_nForLanguage = Session.f_nOffset + Session.f_nForLanguage;

	Session.f_nPressNumber = Session.f_nOffset + Session.f_nPressNumber;	





	Server.logInfo("Session.f_nOffset: " + 	Session.f_nOffset);	

	Server.logInfo("Session.f_nForLanguage: " + 	Session.f_nForLanguage);

	Server.logInfo("Session.f_nPressNumber: " + 	Session.f_nPressNumber);	



	Session.f_strSignal = "A/pc@"+Session.p_oMS.strConnectionId+"(fdt="+Session.f_nSilence+" ip="+Session.f_nForLanguage+","+Session.f_nPressNumber+" dm=x)";

	//Session.f_strSignal = "A/pc@"+Session.p_oMS.strConnectionId+"(fdt="+Session.f_nSilence+" ip="+Session.f_nForLanguage+","+Session.f_nPressNumber+" dm=x)";	

	Session.f_strRequest = "A/oc@"+Session.p_oMS.strConnectionId+",A/of@"+Session.p_oMS.strConnectionId;

	

	



	

} else {

	Server.logError("MS TYPE NOT VALID! p_oMS.strType: <" + Session.p_oMS.strType + ">");

}

]]></script>
          </scripts>
        </action>
        <action id="19" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=254 y=379 ?>
          <!--Play Language Option-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="60" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="&quot;(x)&quot;" language="p_oAPI.strLanguage" digits="f_strDigitCollected" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="url" >p_strLanguageMenu</audio>
            <audio type="index" >f_oOptions[0].nPressCS1</audio>
            <audio type="index" >f_oOptions[0].nPressCS2</audio>
            <audio type="index" >f_oOptions[0].nOptionCS</audio>
          </play>
          <results >
            <result name="Default" link="6" stubbed="1"/>
            <result name="Success" link="5" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout" link="5" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[
if((Session.p_oACD.strEnableFlag == "T" || Session.p_oAPI.strCustomerServicePhone != "") && 
   Session.p_oACD.strLanguageMenuZeroOut == "T") {
   
   	Session.f_oOptions[0].nOptionCS = 931;// Customer Service
	Session.f_oOptions[0].nPressCS1 = 310; // Press
	Session.f_oOptions[0].nPressCS2 = 1; // 0

} else {

   	Session.f_oOptions[0].nOptionCS = 99; // silence
	Session.f_oOptions[0].nPressCS1 = 99; // 
	Session.f_oOptions[0].nPressCS2 = 99; // 

}]]></script>
          </scripts>
        </action>
      </actions>
    </function>
    <function name="pinMaint" start="5" event="pinMaint" returns="i4" >
      <parameters >
        <parameter name="p_oMS" type="object" pass="byref"/>
        <parameter name="p_strLanguage" type="string"/>
        <parameter name="p_nPROMPTLENGTH" type="i4"/>
        <parameter name="p_strPin" type="string" pass="byref"/>
        <parameter name="p_nMaxLoginAttempts" type="i4"/>
        <parameter name="p_strPinDigitMap" type="string"/>
        <parameter name="p_strPlatformSessionId" type="string"/>
        <parameter name="p_strProcDBName" type="string"/>
        <parameter name="p_lServiceProviderId" type="i8"/>
        <parameter name="p_lSubscriberId" type="i8"/>
      </parameters>
      <local-vars >
        <var name="f_strDigitCollected" type="string" ></var>
        <var name="f_nERROR" type="i4" >-1</var>
        <var name="f_bIsValid" type="boolean" >1</var>
        <var name="f_strTerminationDigit" type="string" ></var>
        <var name="f_strDigitCollected2" type="string" ></var>
        <var name="f_nNumRetry" type="i4" >0</var>
        <var name="f_nCounter" type="i4" >0</var>
        <var name="f_nSUCCESS" type="i4" >0</var>
        <var name="f_bValidLength" type="boolean" >1</var>
        <var name="f_nPrompt" type="i4" >0</var>
        <var name="f_nMS_ERROR" type="i4" >-1</var>
        <var name="f_nRC" type="i4" >-59</var>
      </local-vars>
      <actions >
        <action id="5" plug-in="Pactolus.Branch.1" ><?xtml-editor x=22 y=49 ?>
          <results >
            <result name="Default" link="1" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_nCounter = Session.p_nMaxLoginAttempts;]]></script>
          </scripts>
        </action>
        <action id="1" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=212 y=114 ?>
          <!--4125:Please enter your current PIN.-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="p_nPROMPTLENGTH" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="p_strPinDigitMap" language="p_strLanguage" digits="f_strDigitCollected" retry-count="f_nCounter" clear-digits="1" terminating-digit="f_strTerminationDigit" quick-collect="0" digit-timer="" >
            <audio type="index" >4125</audio>
            <timeout-prompt type="index" >552</timeout-prompt>
          </play>
          <results >
            <result name="Default" link="21" stubbed="1"/>
            <result name="Success" link="2" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout" link="7" stubbed="0"/>
            <result name="Pin Match" link="3" stubbed="0" >p_strPin match f_strDigitCollected</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_bIsValid = true;

Session.f_strTerminationDigit = "";

Session.f_strDigitCollected = "";]]></script>
            <script language="javascript" timing="last" ><![CDATA[if(Result.id == 5) {

	Session.f_nCounter = Session.p_nMaxLoginAttempts;

	Session.f_nNumRetry = 0;

	Session.f_bIsValid = true;

	Session.f_strTerminationDigit = "";

	Session.f_strDigitCollected = "";

}]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=467 y=63 ?>
          <!--4126:You have entered an invalid PIN.-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="p_nPROMPTLENGTH" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >4126</audio>
          </play>
          <results >
            <result name="Default" link="21" stubbed="1"/>
            <result name="Success" link="6" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_nCounter--;

Session.f_nNumRetry++;]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=17 y=315 ?>
          <!--4111:Enter a new four digit PIN now-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="p_nPROMPTLENGTH" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="p_strPinDigitMap" language="p_strLanguage" digits="f_strDigitCollected" retry-count="p_nMaxLoginAttempts" clear-digits="1" terminating-digit="f_strTerminationDigit" quick-collect="0" digit-timer="" >
            <audio type="index" >4111</audio>
            <timeout-prompt type="index" >552</timeout-prompt>
          </play>
          <results >
            <result name="Default" link="21" stubbed="1"/>
            <result name="Success" link="4" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
            <result name="bIsValid = false" link="11" stubbed="0" >f_bIsValid == false</result>
            <result name="bValidLength = false" link="11" stubbed="0" >f_bValidLength == false</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_bValidLength = true;

Session.f_bIsValid = true;

Session.f_strTerminationDigit = "";

Session.f_strDigitCollected = "";]]></script>
            <script language="javascript" timing="middle" ><![CDATA[if(Session.f_strTerminationDigit == "*" || Session.f_strTerminationDigit == "#") {

	Session.f_bIsValid = false;

	Session.f_nPrompt = 4126;

} else if(Session.f_strDigitCollected.length != 4) {

	Session.f_bValidLength = false;

	Session.f_nPrompt = 4114; //The new PIN must be 4 digits long.

	

} else {

	Session.f_bIsValid = true;

	Session.f_bValidLength = true;

	Session.f_nPrompt = 99;

}]]></script>
          </scripts>
        </action>
        <action id="4" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=20 y=611 ?>
          <!--4116:Please enter the new PIN again.-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="p_nPROMPTLENGTH" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="p_strPinDigitMap" language="p_strLanguage" digits="f_strDigitCollected2" retry-count="p_nMaxLoginAttempts" clear-digits="1" terminating-digit="f_strTerminationDigit" quick-collect="0" digit-timer="" >
            <audio type="index" >4116</audio>
            <timeout-prompt type="index" >552</timeout-prompt>
          </play>
          <results >
            <result name="Default" link="21" stubbed="1"/>
            <result name="Success" link="16" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
            <result name="Pin Match" link="22" stubbed="0" >f_strDigitCollected match f_strDigitCollected2</result>
          </results>
        </action>
        <action id="6" plug-in="Pactolus.Branch.1" ><?xtml-editor x=702 y=131 ?>
          <results >
            <result name="Default" link="8" stubbed="0"/>
            <result name="retry = max" link="7" stubbed="0" >f_nNumRetry == p_nMaxLoginAttempts</result>
          </results>
        </action>
        <action id="7" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=1059 y=369 ?>
          <!--4115:Please check your service instructions and call back later.-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="p_nPROMPTLENGTH" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >4115</audio>
          </play>
          <results >
            <result name="Default" link="21" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="8" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=935 y=55 ?>
          <!--302: Please try again-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="p_nPROMPTLENGTH" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >302</audio>
          </play>
          <results >
            <result name="Default" link="21" stubbed="1"/>
            <result name="Success" link="1" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="9" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=1374 y=745 ?>
          <!--f_nSUCCESS-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nSUCCESS"/>
        </action>
        <action id="10" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=1201 y=558 ?>
          <!--4102:Thank you for using Slovak Telecom services.-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="p_nPROMPTLENGTH" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >4102</audio>
          </play>
          <results >
            <result name="Default" link="21" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="11" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=270 y=456 ?>
          <!--f_nPrompt-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="p_nPROMPTLENGTH" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >f_nPrompt</audio>
          </play>
          <results >
            <result name="Default" link="21" stubbed="1"/>
            <result name="Success" link="12" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_nCounter--;

Session.f_nNumRetry++;]]></script>
          </scripts>
        </action>
        <action id="12" plug-in="Pactolus.Branch.1" ><?xtml-editor x=474 y=342 ?>
          <results >
            <result name="Default" link="13" stubbed="0"/>
            <result name="retry = max" link="21" stubbed="1" >f_nNumRetry == p_nMaxLoginAttempts</result>
          </results>
        </action>
        <action id="13" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=723 y=313 ?>
          <!--302: Please try again-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="p_nPROMPTLENGTH" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >302</audio>
          </play>
          <results >
            <result name="Default" link="3" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="15" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=500 y=966 ?>
          <!--4112:Your PIN has been updated. -->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="p_nPROMPTLENGTH" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="0" return-immediate="0" digit-map="" language="p_strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >4112</audio>
          </play>
          <results >
            <result name="Default" link="21" stubbed="1"/>
            <result name="Success" link="9" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.p_strPin = Session.f_strDigitCollected;

Server.logInfo("Session.p_strPin: " + Session.p_strPin);]]></script>
          </scripts>
        </action>
        <action id="16" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=291 y=670 ?>
          <!--4113:The new PIN you entered does not match.-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="p_nPROMPTLENGTH" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >4113</audio>
          </play>
          <results >
            <result name="Default" link="21" stubbed="1"/>
            <result name="Success" link="17" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_nCounter--;

Session.f_nNumRetry++;]]></script>
          </scripts>
        </action>
        <action id="17" plug-in="Pactolus.Branch.1" ><?xtml-editor x=547 y=651 ?>
          <results >
            <result name="Default" link="18" stubbed="0"/>
            <result name="retry = max" link="21" stubbed="1" >f_nNumRetry == p_nMaxLoginAttempts</result>
          </results>
        </action>
        <action id="18" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=806 y=616 ?>
          <!--302: Please try again-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="p_nPROMPTLENGTH" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >302</audio>
          </play>
          <results >
            <result name="Default" link="21" stubbed="1"/>
            <result name="Success" link="4" stubbed="1"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="19" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=815 y=796 ?>
          <!--?: Your pin did not change-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="p_nPROMPTLENGTH" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >4127</audio>
          </play>
          <results >
            <result name="Default" link="21" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="20" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=690 y=471 ?>
          <!--?: Your pin did not change-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="p_nPROMPTLENGTH" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >4127</audio>
          </play>
          <results >
            <result name="Default" link="21" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="21" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=33 y=1203 ?>
          <!--f_nMS_ERROR-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nMS_ERROR"/>
        </action>
        <action id="22" plug-in="Pactolus.JavaStaticMethod.1" ><?xtml-editor x=152 y=882 ?>
          <!--processPin-->
          <java xmlns="urn:www.pactolus.com:xtml:application" class="&quot;com.pactolus.postpaid.psAPIScePinMaint&quot;" method="&quot;processPin&quot;" timeout="" return="" method-return-var="f_nRC" method-return-type="0" >
            <parameter type="in" var-type="string" >p_strPlatformSessionId</parameter>
            <parameter type="in" var-type="string" >p_strProcDBName</parameter>
            <parameter type="in" var-type="i8" >p_lServiceProviderId</parameter>
            <parameter type="in" var-type="string" >p_strPin</parameter>
            <parameter type="in" var-type="string" >f_strDigitCollected</parameter>
            <parameter type="in" var-type="i8" >p_lSubscriberId</parameter>
          </java>
          <results >
            <result name="Default" link="23" stubbed="0"/>
            <result name="Success" link="15" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
            <result name="RC != 0" link="23" stubbed="0" >f_nRC != 0</result>
          </results>
          <scripts >
            <script language="javascript" timing="last" ><![CDATA[Server.logInfo("result.id: " + Result.id);

Server.logInfo("f_nRC: " + Session.f_nRC);]]></script>
          </scripts>
        </action>
        <action id="23" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=264 y=1069 ?>
          <!--363: trans could not be processed-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="p_nPROMPTLENGTH" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >36363</audio>
          </play>
          <results >
            <result name="Default" link="21" stubbed="1"/>
            <result name="Success" link="9" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("There was an error updating the PIN.");

Server.logError("Result.id: " + Result.id);

Server.logError("Session.f_nRC: " + Session.f_nRC);]]></script>
          </scripts>
        </action>
      </actions>
    </function>
    <function name="StartTimer" start="3" event="StartTimer" returns="i4" >
      <parameters >
        <parameter name="p_oTimer" type="object" pass="byref"/>
      </parameters>
      <actions >
        <action id="3" plug-in="Pactolus.Branch.1" ><?xtml-editor x=22 y=45 ?>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="non-zero sleep time" link="1" stubbed="0" >p_oTimer.lSleepTime &gt; 0</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.p_oTimer.lTimerId = 0;
Session.p_oTimer.bOn = false ;]]></script>
          </scripts>
        </action>
        <action id="1" plug-in="Standard.Timer.1" ><?xtml-editor x=89 y=161 ?>
          <!--Start Timer-->
          <timer xmlns="urn:www.pactolus.com:xtml:application" start="1" id="p_oTimer.lTimerId" duration="p_oTimer.lSleepTime"/>
          <results >
            <result name="Default" link="2" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="last" ><![CDATA[Session.p_oTimer.bOn = true;]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=349 y=196 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value=""/>
        </action>
      </actions>
    </function>
    <function name="SetTimers" start="1" event="SetTimers" returns="i4" >
      <parameters >
        <parameter name="p_oTimerThreshold1" type="object" pass="byref"/>
        <parameter name="p_oTimerThreshold2" type="object" pass="byref"/>
        <parameter name="p_oTimerThreshold3" type="object" pass="byref"/>
        <parameter name="p_oTimerPhoneA" type="object" pass="byref"/>
        <parameter name="p_oTimerPhoneB" type="object" pass="byref"/>
        <parameter name="p_oTimerGSXA" type="object" pass="byref"/>
        <parameter name="p_oTimerGSXB" type="object" pass="byref"/>
        <parameter name="p_oTimerMaxTime" type="object" pass="byref"/>
        <parameter name="p_strSessionTimerFlag" type="string"/>
        <parameter name="p_oAPI" type="object"/>
        <parameter name="p_oCallLegA" type="object"/>
        <parameter name="p_oCallLegB" type="object"/>
        <parameter name="p_nSetUpDuration" type="i4"/>
        <parameter name="p_oSUB" type="object"/>
        <parameter name="p_oRATE" type="object"/>
        <parameter name="p_oTimerMaxTimeALeg" type="object" pass="byref"/>
        <parameter name="p_oTimerLongCallInterval" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_oCallLegArray" type="object" ></var>
        <var name="f_fAmountLeft" type="float" >0</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.Branch.1" ><?xtml-editor x=16 y=94 ?>
          <!--session timer ON?-->
          <results >
            <result name="Default" link="4" stubbed="1"/>
            <result name="p_strSessionTimerFlag = T" link="13" stubbed="0" >p_strSessionTimerFlag match "T"</result>
            <result name="~GSXA.lSleepTime &gt; 0" link="2" stubbed="0" >p_oTimerGSXA.lSleepTime &gt; 0</result>
          </results>
          <scripts >
            <script language="javascript" timing="last" ><![CDATA[if(1 == Result.id) {

	Server.logInfo("Did not set GSX reinvite timers or call leg session timers.");

}]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=266 y=208 ?>
          <!--StartTimer - p_oTimerGSXA-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="1" library="" >
            <parameter >p_oTimerGSXA</parameter>
          </function>
          <results >
            <result name="Default" link="3" stubbed="0"/>
          </results>
        </action>
        <action id="3" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=562 y=220 ?>
          <!--StartTimer - p_oTimerGSXB-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="1" library="" >
            <parameter >p_oTimerGSXB</parameter>
          </function>
          <results >
            <result name="Default" link="4" stubbed="1"/>
          </results>
        </action>
        <action id="4" plug-in="Pactolus.Branch.1" ><?xtml-editor x=10 y=334 ?>
          <!--outdial csr?-->
          <results >
            <result name="Default" link="20" stubbed="0"/>
            <result name="~OutdialOperatorFlag==T" link="21" stubbed="0" >p_oAPI.strOutdialOperatorFlag match "T"</result>
          </results>
        </action>
        <action id="5" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=729 y=362 ?>
          <!--StartTimer - p_oTimerMaxTime-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="1" library="" >
            <parameter >p_oTimerMaxTime</parameter>
          </function>
          <results >
            <result name="Default" link="21" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[





if(Session.p_oTimerMaxTime.lSleepTime > 4294967)

{

	Session.p_oTimerMaxTime.lSleepTime = 4294967;

}

]]></script>
          </scripts>
        </action>
        <action id="6" plug-in="Pactolus.Branch.1" ><?xtml-editor x=218 y=503 ?>
          <!--~1.nThresholdTime > 0-->
          <results >
            <result name="Default" link="8" stubbed="0"/>
            <result name="~1.nThresholdTime &gt; 0" link="7" stubbed="0" >p_oTimerMaxTime.lSleepTime &gt; p_oTimerThreshold1.nThresholdTime

AND p_oTimerThreshold1.nThresholdTime &gt; 0</result>
          </results>
        </action>
        <action id="7" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=389 y=638 ?>
          <!--StartTimer - p_oTimerThreshold1-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="1" library="" >
            <parameter >p_oTimerThreshold1</parameter>
          </function>
          <results >
            <result name="Default" link="8" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.p_oTimerThreshold1.lSleepTime = Session.p_oTimerMaxTime.lSleepTime - Session.p_oTimerThreshold1.nThresholdTime;



]]></script>
          </scripts>
        </action>
        <action id="8" plug-in="Pactolus.Branch.1" ><?xtml-editor x=572 y=526 ?>
          <!--~2.nThresholdTime > 0-->
          <results >
            <result name="Default" link="10" stubbed="0"/>
            <result name="~hold2.nThresholdTime&gt; 0" link="9" stubbed="0" >p_oTimerMaxTime.lSleepTime &gt; p_oTimerThreshold2.nThresholdTime

AND p_oTimerThreshold2.nThresholdTime &gt; 0</result>
          </results>
        </action>
        <action id="9" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=725 y=647 ?>
          <!--StartTimer - p_oTimerThreshold2-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="1" library="" >
            <parameter >p_oTimerThreshold2</parameter>
          </function>
          <results >
            <result name="Default" link="10" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.p_oTimerThreshold2.lSleepTime = Session.p_oTimerMaxTime.lSleepTime - Session.p_oTimerThreshold2.nThresholdTime;]]></script>
          </scripts>
        </action>
        <action id="10" plug-in="Pactolus.Branch.1" ><?xtml-editor x=901 y=529 ?>
          <!--~3.nThresholdTime > 0-->
          <results >
            <result name="Default" link="22" stubbed="0"/>
            <result name="~3.nThresholdTime &gt; 0" link="11" stubbed="0" >p_oTimerMaxTime.lSleepTime &gt; p_oTimerThreshold3.nThresholdTime

AND p_oTimerThreshold3.nThresholdTime &gt; 0</result>
          </results>
        </action>
        <action id="11" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=1046 y=661 ?>
          <!--StartTimer - p_oTimerThreshold3-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="1" library="" >
            <parameter >p_oTimerThreshold3</parameter>
          </function>
          <results >
            <result name="Default" link="22" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.p_oTimerThreshold3.lSleepTime = Session.p_oTimerMaxTime.lSleepTime - Session.p_oTimerThreshold3.nThresholdTime;]]></script>
          </scripts>
        </action>
        <action id="12" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=16 y=998 ?>
          <!--0-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="0"/>
        </action>
        <action id="13" plug-in="Pactolus.Branch.1" ><?xtml-editor x=234 y=20 ?>
          <!--~LegB.nSessionTimer > 0-->
          <results >
            <result name="Default" link="14" stubbed="0"/>
            <result name="~LegB.nSessionTimer &gt; 0" link="15" stubbed="0" >p_oCallLegB.nSessionTimer &gt; 0</result>
          </results>
        </action>
        <action id="14" plug-in="Pactolus.Branch.1" ><?xtml-editor x=622 y=28 ?>
          <!--~LegA.nSessionTimer > 0-->
          <results >
            <result name="Default" link="4" stubbed="1"/>
            <result name="~LegA.nSessionTimer &gt; 0" link="16" stubbed="0" >p_oCallLegA.nSessionTimer &gt; 0</result>
          </results>
        </action>
        <action id="15" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=437 y=117 ?>
          <!--StartTimer - p_oTimerPhoneB-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="1" library="" >
            <parameter >p_oTimerPhoneB</parameter>
          </function>
          <results >
            <result name="Default" link="14" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[//Session.p_oTimerPhoneB.lSleepTime = Session.p_oCallLegB.nSessionTimer - Session.p_nSetUpDuration - 15;



//if (Session.p_oTimerPhoneB.lSleepTime <= 0)

//{
//rh - 09-Oct-2006  Set the refresh timer to 1/2 the session expires value
// with the initial math, we weren't refreshing until ~20 seconds before the session expires time
// and the Cisco gateway was sending a BYE before we got to it. 
	Session.p_oTimerPhoneB.lSleepTime = Number(Session.g_oCallLegB.nSessionTimer) / 2;

//}]]></script>
            <script language="javascript" timing="last" ><![CDATA[Session.p_oTimerPhoneB.lSleepTime = Number(Session.g_oCallLegB.nSessionTimer) / 2;]]></script>
          </scripts>
        </action>
        <action id="16" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=830 y=64 ?>
          <!--StartTimer - p_oTimerPhoneA-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="1" library="" >
            <parameter >p_oTimerPhoneA</parameter>
          </function>
          <results >
            <result name="Default" link="4" stubbed="1"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[//Session.p_oTimerPhoneA.lSleepTime = Session.p_oCallLegA.nSessionTimer - Session.p_nSetUpDuration - 6;



//if (Session.p_oTimerPhoneA.lSleepTime <= 0){



	Session.p_oTimerPhoneA.lSleepTime = Number(Session.p_oCallLegA.nSessionTimer) / 2;

	

	if (Session.p_oCallLegA.nSessionTimer == Session.p_oCallLegB.nSessionTimer)	{

		Session.p_oTimerPhoneA.lSleepTime += 4;

	}



//}



]]></script>
            <script language="javascript" timing="last" ><![CDATA[Session.p_oTimerPhoneA.lSleepTime = Number(Session.g_oCallLegA.nSessionTimer) / 2;



if (Session.g_oCallLegA.nSessionTimer == Session.g_oCallLegB.nSessionTimer) {

	Session.p_oTimerPhoneA.lSleepTime += 4;

}

]]></script>
          </scripts>
        </action>
        <action id="19" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=483 y=390 ?>
          <!--StopOneTimer-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StopOneTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerMaxTimeALeg</parameter>
          </function>
          <results >
            <result name="Default" link="5" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("p_oAPI.strCreditLimitFlag: " + Session.p_oAPI.strCreditLimitFlag);

Server.logInfo("p_oAPI.fCreditLimit: " + Session.p_oAPI.fCreditLimit);

Server.logInfo("p_oAPI.fCreditUsed: " + Session.p_oAPI.fCreditUsed);



if(Session.p_oAPI.strPostPaidFlag == "T") {





	Server.logInfo("postpaid: Need to recalculate time available with A leg rating.");

	

	Session.p_oCallLegB.oRATE = Session.p_oRATE;

	Session.f_oCallLegArray[0] = Session.p_oCallLegB;

	Session.f_oCallLegArray[1] = Session.p_oCallLegA;	

	

	

	Session.f_fAmountLeft = Session.p_oAPI.fCreditLimit - Session.p_oAPI.fCreditUsed;

	timeRemaining(Session.f_fAmountLeft, Session.f_oCallLegArray, Session.p_oAPI.nRoundingSeconds, Session.p_oTimerMaxTime.lSleepTime);		

	Server.logInfo("new time is: " + Session.p_oTimerMaxTime.lSleepTime);		





} else {



	Server.logInfo("prepaid: Need to recalculate time available for A leg rating.");



	Session.p_oCallLegB.oRATE = Session.p_oRATE;

	Session.f_oCallLegArray[0] = Session.p_oCallLegB;

	Session.f_oCallLegArray[1] = Session.p_oCallLegA;



	timeRemaining(Session.p_oSUB.fPrepaidBalance, Session.f_oCallLegArray, Session.p_oAPI.nRoundingSeconds, Session.p_oTimerMaxTime.lSleepTime);

	Server.logInfo("new time is: " + Session.p_oTimerMaxTime.lSleepTime);



}	

]]></script>
          </scripts>
        </action>
        <action id="20" plug-in="Pactolus.Branch.1" ><?xtml-editor x=255 y=328 ?>
          <results >
            <result name="Default" link="5" stubbed="0"/>
            <result name="oAPI.bALegRatingOn" link="19" stubbed="0" >p_oAPI.bALegRatingOn == true</result>
          </results>
        </action>
        <action id="21" plug-in="Pactolus.Branch.1" ><?xtml-editor x=10 y=560 ?>
          <results >
            <result name="Default" link="6" stubbed="0"/>
            <result name="bPctMaxCallDuration" link="22" stubbed="0" >p_oAPI.bPctMaxCallDuration == true</result>
          </results>
        </action>
        <action id="22" plug-in="Pactolus.Branch.1" ><?xtml-editor x=16 y=787 ?>
          <results >
            <result name="Default" link="12" stubbed="0"/>
            <result name="long call interval &gt; 0" link="24" stubbed="0" >p_oAPI.nLongCallInterval &gt; 0</result>
          </results>
        </action>
        <action id="24" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=308 y=799 ?>
          <!--StartTimer - p_oTimerLongCallInterval-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="1" library="lib_utils.xml" >
            <parameter >p_oTimerLongCallInterval</parameter>
          </function>
          <results >
            <result name="Default" link="12" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.p_oTimerLongCallInterval.lSleepTime = Session.p_oAPI.nLongCallInterval * 60;



]]></script>
          </scripts>
        </action>
      </actions>
    </function>
    <function name="StopTimers" start="1" event="StopTimers" returns="i4" >
      <parameters >
        <parameter name="p_oTimerGSXA" type="object" pass="byref"/>
        <parameter name="p_oTimerMaxTime" type="object" pass="byref"/>
        <parameter name="p_oTimerPhoneA" type="object" pass="byref"/>
        <parameter name="p_oTimerThreshold1" type="object" pass="byref"/>
        <parameter name="p_oTimerThreshold2" type="object" pass="byref"/>
        <parameter name="p_oTimerThreshold3" type="object" pass="byref"/>
        <parameter name="p_oArrayCallLegs" type="object" pass="byref"/>
        <parameter name="p_oTimerMaxTimeALeg" type="object" pass="byref"/>
        <parameter name="p_oTimerLongCallInterval" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_bMore" type="boolean" >0</var>
        <var name="i" type="i4" >-1</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.Branch.1" ><?xtml-editor x=7 y=26 ?>
          <results >
            <result name="Default" link="3" stubbed="0"/>
            <result name="p_oTimerMaxTime.bOn" link="18" stubbed="0" >p_oTimerMaxTime.bOn == true</result>
          </results>
        </action>
        <action id="3" plug-in="Pactolus.Branch.1" ><?xtml-editor x=256 y=37 ?>
          <results >
            <result name="Default" link="5" stubbed="0"/>
            <result name="p_oTimerThreshold1.bOn" link="19" stubbed="0" >p_oTimerThreshold1.bOn == true</result>
          </results>
        </action>
        <action id="5" plug-in="Pactolus.Branch.1" ><?xtml-editor x=502 y=50 ?>
          <results >
            <result name="Default" link="7" stubbed="0"/>
            <result name="p_oTimerThreshold2.bOn" link="20" stubbed="0" >p_oTimerThreshold2.bOn == true</result>
          </results>
        </action>
        <action id="7" plug-in="Pactolus.Branch.1" ><?xtml-editor x=739 y=53 ?>
          <results >
            <result name="Default" link="9" stubbed="1"/>
            <result name="p_oTimerThreshold3.bOn" link="21" stubbed="0" >p_oTimerThreshold3.bOn == true</result>
          </results>
        </action>
        <action id="9" plug-in="Pactolus.Branch.1" ><?xtml-editor x=15 y=307 ?>
          <results >
            <result name="Default" link="13" stubbed="0"/>
            <result name="p_oTimerPhoneA.bOn" link="22" stubbed="0" >p_oTimerPhoneA.bOn == true</result>
          </results>
        </action>
        <action id="13" plug-in="Pactolus.Branch.1" ><?xtml-editor x=261 y=322 ?>
          <results >
            <result name="Default" link="26" stubbed="0"/>
            <result name="p_oTimerGSXA.bOn" link="24" stubbed="0" >p_oTimerGSXA.bOn == true</result>
          </results>
        </action>
        <action id="17" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=805 y=617 ?>
          <!--0-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="0"/>
        </action>
        <action id="18" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=98 y=171 ?>
          <!--StopOneTimer: p_oTimerMaxTime-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StopOneTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerMaxTime</parameter>
          </function>
          <results >
            <result name="Default" link="3" stubbed="0"/>
          </results>
        </action>
        <action id="19" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=368 y=181 ?>
          <!--StopOneTimer: p_oTimerThreshold1-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StopOneTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerThreshold1</parameter>
          </function>
          <results >
            <result name="Default" link="5" stubbed="0"/>
          </results>
        </action>
        <action id="20" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=598 y=180 ?>
          <!--StopOneTimer: p_oTimerThreshold2-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StopOneTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerThreshold2</parameter>
          </function>
          <results >
            <result name="Default" link="7" stubbed="0"/>
          </results>
        </action>
        <action id="21" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=797 y=184 ?>
          <!--StopOneTimer: p_oTimerThreshold3-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StopOneTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerThreshold3</parameter>
          </function>
          <results >
            <result name="Default" link="9" stubbed="0"/>
          </results>
        </action>
        <action id="22" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=122 y=423 ?>
          <!--StopOneTimer: p_oTimerPhoneA-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StopOneTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerPhoneA</parameter>
          </function>
          <results >
            <result name="Default" link="13" stubbed="0"/>
          </results>
        </action>
        <action id="24" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=378 y=430 ?>
          <!--StopOneTimer: p_oTimerGSXA-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StopOneTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerGSXA</parameter>
          </function>
          <results >
            <result name="Default" link="26" stubbed="0"/>
          </results>
        </action>
        <action id="26" plug-in="Pactolus.Branch.1" ><?xtml-editor x=572 y=336 ?>
          <results >
            <result name="Default" link="32" stubbed="1"/>
            <result name="f_bMore" link="31" stubbed="0" >f_bMore == true</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.i++;



Session.f_bMore = false;



if(Session.i < Session.p_oArrayCallLegs.length) {

	Session.f_bMore = true;

}]]></script>
          </scripts>
        </action>
        <action id="31" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=729 y=446 ?>
          <!--StopBLegTimers-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StopBLegTimers&quot;" return="" external-function="0" library="" >
            <parameter >p_oArrayCallLegs[i].oTimer</parameter>
            <parameter >p_oArrayCallLegs[i].oTimerGSX</parameter>
          </function>
          <results >
            <result name="Default" link="26" stubbed="0"/>
          </results>
        </action>
        <action id="32" plug-in="Pactolus.Branch.1" ><?xtml-editor x=20 y=583 ?>
          <results >
            <result name="Default" link="34" stubbed="0"/>
            <result name="TimerMaxTimeALeg.bOn" link="33" stubbed="0" >p_oTimerMaxTimeALeg.bOn == true</result>
          </results>
        </action>
        <action id="33" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=254 y=638 ?>
          <!--StopOneTimer: p_oTimerMaxTimeALeg-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StopOneTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerMaxTimeALeg</parameter>
          </function>
          <results >
            <result name="Default" link="34" stubbed="0"/>
          </results>
        </action>
        <action id="34" plug-in="Pactolus.Branch.1" ><?xtml-editor x=467 y=611 ?>
          <results >
            <result name="Default" link="17" stubbed="0"/>
            <result name="TimerLongCallInterval.bOn" link="35" stubbed="0" >p_oTimerLongCallInterval.bOn == true</result>
          </results>
        </action>
        <action id="35" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=639 y=672 ?>
          <!--StopOneTimer: p_oTimerLongCallInterval-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StopOneTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerLongCallInterval</parameter>
          </function>
          <results >
            <result name="Default" link="17" stubbed="0"/>
          </results>
        </action>
      </actions>
    </function>
    <function name="ProcessReInvite" start="1" event="ProcessReInvite" returns="i4" >
      <parameters >
        <parameter name="p_b_A_re_INVITE" type="boolean"/>
        <parameter name="p_b_New_A_SDP" type="boolean"/>
        <parameter name="p_b_B_re_INVITE" type="boolean"/>
        <parameter name="p_b_New_B_SDP" type="boolean"/>
        <parameter name="p_oTimerPhoneA" type="object" pass="byref"/>
        <parameter name="p_oTimerPhoneB" type="object" pass="byref"/>
        <parameter name="p_oCallLegA" type="object" pass="byref"/>
        <parameter name="p_oCallLegB" type="object" pass="byref"/>
        <parameter name="p_oTimerGSXA" type="object" pass="byref"/>
        <parameter name="p_oTimerGSXB" type="object" pass="byref"/>
        <parameter name="p_strContentType" type="string" pass="byref"/>
        <parameter name="p_strContact" type="string" pass="byref"/>
        <parameter name="p_strCallId" type="string"/>
        <parameter name="p_strCSeq" type="string"/>
        <parameter name="p_strTo" type="string"/>
        <parameter name="p_strFrom" type="string"/>
        <parameter name="p_strVia" type="string"/>
        <parameter name="p_strSessionExpires" type="string"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >0</var>
        <var name="f_nStopTimers_HangUpB" type="i4" >-2</var>
        <var name="f_nStopTimers_EndSession" type="i4" >-3</var>
        <var name="f_nSend481" type="i4" >1</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.Branch.1" ><?xtml-editor x=14 y=338 ?>
          <!--re-INVTE from phone A or B?-->
          <results >
            <result name="Default" link="28" stubbed="1"/>
            <result name="From Phone A with new SDP" link="3" stubbed="0" >p_b_A_re_INVITE == true

AND p_b_New_A_SDP == true</result>
            <result name="From Phone B with new SDP" link="4" stubbed="0" >p_b_B_re_INVITE == true

AND p_b_New_B_SDP == true</result>
            <result name="From Phone A" link="9" stubbed="0" >p_b_A_re_INVITE == true

AND p_b_New_A_SDP == false</result>
            <result name="From Phone B" link="10" stubbed="0" >p_b_B_re_INVITE == true

AND p_b_New_B_SDP == false</result>
          </results>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=18 y=629 ?>
          <!--0-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="0"/>
        </action>
        <action id="3" plug-in="Pactolus.Branch.1" ><?xtml-editor x=256 y=32 ?>
          <results >
            <result name="Default" link="5" stubbed="0"/>
            <result name="~TimerPhoneB.bOn" link="7" stubbed="0" >p_oTimerPhoneB.bOn == true</result>
          </results>
        </action>
        <action id="4" plug-in="Pactolus.Branch.1" ><?xtml-editor x=295 y=266 ?>
          <results >
            <result name="Default" link="6" stubbed="0"/>
            <result name="~TimerPhoneA.bOn" link="8" stubbed="0" >p_oTimerPhoneA.bOn == true</result>
          </results>
        </action>
        <action id="5" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=473 y=136 ?>
          <!--ReInviteB @ A SDP-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;ReInviteParty&quot;" return="f_nReturnCode" external-function="1" library="" >
            <parameter >p_oCallLegB</parameter>
            <parameter >p_oCallLegA.strContent</parameter>
            <parameter >p_strContentType</parameter>
            <parameter >p_strContact</parameter>
          </function>
          <results >
            <result name="Default" link="15" stubbed="0"/>
            <result name="Success" link="9" stubbed="0" >f_nReturnCode == s_sSUCCESS</result>
          </results>
        </action>
        <action id="6" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=461 y=344 ?>
          <!--ReInviteA @ B SDP-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;ReInviteParty&quot;" return="f_nReturnCode" external-function="1" library="" >
            <parameter >p_oCallLegA</parameter>
            <parameter >p_oCallLegB.strContent</parameter>
            <parameter >p_strContentType</parameter>
            <parameter >p_strContact</parameter>
          </function>
          <results >
            <result name="Default" link="31" stubbed="0"/>
            <result name="Success" link="10" stubbed="0" >f_nReturnCode == s_sSUCCESS</result>
            <result name="Final Timeout" link="30" stubbed="0" >f_nReturnCode == -2</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.p_oCallLegA.nInviteStatus = 0;]]></script>
          </scripts>
        </action>
        <action id="7" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=700 y=27 ?>
          <!--StopOneTimer: p_oTimerPhoneB-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StopOneTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerPhoneB</parameter>
          </function>
          <results >
            <result name="Default" link="17" stubbed="0"/>
          </results>
        </action>
        <action id="8" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=715 y=306 ?>
          <!--StopOneTimer: p_oTimerPhoneA-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StopOneTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerPhoneA</parameter>
          </function>
          <results >
            <result name="Default" link="25" stubbed="0"/>
          </results>
        </action>
        <action id="9" plug-in="Pactolus.SipResponse.1" ><?xtml-editor x=748 y=648 ?>
          <!--200 OK SDP of B-->
          <sip-response xmlns="urn:www.pactolus.com:xtml:sip" remove-via="0" reliable="0" increment-cseq-first="0" increment-cseq-last="0" >
            <call-id >p_strCallId</call-id>
            <contact >p_strContact</contact>
            <content >p_oCallLegB.strContent</content>
            <content-type >p_strContentType</content-type>
            <cseq >p_strCSeq</cseq>
            <from >p_strFrom</from>
            <status >"SIP/2.0 200 OK"</status>
            <to >p_strTo</to>
            <via >p_strVia</via>
          </sip-response>
          <results >
            <result name="Default" link="2" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
            <result name="~GSXA.lSleepTime &gt; 0" link="13" stubbed="0" >p_oTimerGSXA.lSleepTime &gt; 0</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.p_oTimerGSXA.lSleepTime = Clib.atoi(Session.p_strSessionExpires);

]]></script>
          </scripts>
        </action>
        <action id="10" plug-in="Pactolus.SipResponse.1" ><?xtml-editor x=682 y=840 ?>
          <!--200 OK SDP of A-->
          <sip-response xmlns="urn:www.pactolus.com:xtml:sip" remove-via="0" reliable="0" increment-cseq-first="0" increment-cseq-last="0" >
            <call-id >p_strCallId</call-id>
            <contact >p_strContact</contact>
            <content >p_oCallLegA.strContent</content>
            <content-type >p_strContentType</content-type>
            <cseq >p_strCSeq</cseq>
            <from >p_strFrom</from>
            <status >"SIP/2.0 200 OK"</status>
            <to >p_strTo</to>
            <via >p_strVia</via>
          </sip-response>
          <results >
            <result name="Default" link="2" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
            <result name="~GSXB.lSleepTime &gt; 0" link="11" stubbed="0" >p_oTimerGSXB.lSleepTime &gt; 0</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.p_oTimerGSXB.lSleepTime = Clib.atoi(Session.p_strSessionExpires);]]></script>
          </scripts>
        </action>
        <action id="11" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=977 y=891 ?>
          <!--StopOneTimer: p_oTimerGSXB-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StopOneTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerGSXB</parameter>
          </function>
          <results >
            <result name="Default" link="12" stubbed="0"/>
          </results>
        </action>
        <action id="12" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=1209 y=863 ?>
          <!--StartTimer - p_oTimerGSXB-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="1" library="" >
            <parameter >p_oTimerGSXB</parameter>
          </function>
          <results >
            <result name="Default" link="2" stubbed="1"/>
          </results>
        </action>
        <action id="13" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=974 y=703 ?>
          <!--StopOneTimer: p_oTimerGSXA-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StopOneTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerGSXA</parameter>
          </function>
          <results >
            <result name="Default" link="14" stubbed="0"/>
          </results>
        </action>
        <action id="14" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=1216 y=694 ?>
          <!--StartTimer - p_oTimerGSXA-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="1" library="" >
            <parameter >p_oTimerGSXA</parameter>
          </function>
          <results >
            <result name="Default" link="2" stubbed="1"/>
          </results>
        </action>
        <action id="15" plug-in="Pactolus.SipResponse.1" ><?xtml-editor x=941 y=158 ?>
          <!--200 OK @ SDP of B-->
          <sip-response xmlns="urn:www.pactolus.com:xtml:sip" remove-via="0" reliable="0" increment-cseq-first="0" increment-cseq-last="0" >
            <call-id >p_strCallId</call-id>
            <contact >p_strContact</contact>
            <content >p_oCallLegB.strContent</content>
            <content-type >p_strContentType</content-type>
            <cseq >p_strCSeq</cseq>
            <from >p_strFrom</from>
            <status >"SIP/2.0 200 OK"</status>
            <to >p_strTo</to>
            <via >p_strVia</via>
          </sip-response>
          <results >
            <result name="Default" link="23" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO REINVITE B.");]]></script>
          </scripts>
        </action>
        <action id="16" plug-in="Pactolus.SipResponse.1" ><?xtml-editor x=990 y=440 ?>
          <!--200 OK @ SDP of A-->
          <sip-response xmlns="urn:www.pactolus.com:xtml:sip" remove-via="0" reliable="0" increment-cseq-first="0" increment-cseq-last="0" >
            <call-id >p_strCallId</call-id>
            <contact >p_strContact</contact>
            <content >p_oCallLegA.strContent</content>
            <content-type >p_strContentType</content-type>
            <cseq >p_strCSeq</cseq>
            <from >p_strFrom</from>
            <status >"SIP/2.0 200 OK"</status>
            <to >p_strTo</to>
            <via >p_strVia</via>
          </sip-response>
          <results >
            <result name="Default" link="27" stubbed="0"/>
            <result name="Success" ><?xtml-editor visible=no?></result>
            <result name="Error" ><?xtml-editor visible=no?></result>
            <result name="Timeout" ><?xtml-editor visible=no?></result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO REINVITE A.");]]></script>
          </scripts>
        </action>
        <action id="17" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=935 y=30 ?>
          <!--ReInviteB @ A SDP-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;ReInviteParty&quot;" return="f_nReturnCode" external-function="1" library="" >
            <parameter >p_oCallLegB</parameter>
            <parameter >p_oCallLegA.strContent</parameter>
            <parameter >p_strContentType</parameter>
            <parameter >p_strContact</parameter>
          </function>
          <results >
            <result name="Default" link="18" stubbed="0"/>
            <result name="Success" link="15" stubbed="0" >f_nReturnCode == s_sSUCCESS</result>
          </results>
        </action>
        <action id="18" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=1211 y=31 ?>
          <!--StartTimer - p_oTimerPhoneB-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="1" library="" >
            <parameter >p_oTimerPhoneB</parameter>
          </function>
          <results >
            <result name="Default" link="19" stubbed="0"/>
          </results>
        </action>
        <action id="19" plug-in="Pactolus.SipResponse.1" ><?xtml-editor x=1468 y=39 ?>
          <!--200 OK SDP of B-->
          <sip-response xmlns="urn:www.pactolus.com:xtml:sip" remove-via="0" reliable="0" increment-cseq-first="0" increment-cseq-last="0" >
            <call-id >p_strCallId</call-id>
            <contact >p_strContact</contact>
            <content >p_oCallLegB.strContent</content>
            <content-type >p_strContentType</content-type>
            <cseq >p_strCSeq</cseq>
            <from >p_strFrom</from>
            <status >"SIP/2.0 200 OK"</status>
            <to >p_strTo</to>
            <via >p_strVia</via>
          </sip-response>
          <results >
            <result name="Default" link="2" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="23" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=1225 y=207 ?>
          <!--f_nStopTimers_HangUpB-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nStopTimers_HangUpB"/>
        </action>
        <action id="24" plug-in="Pactolus.SipResponse.1" ><?xtml-editor x=1457 y=345 ?>
          <!--200 OK SDP of A-->
          <sip-response xmlns="urn:www.pactolus.com:xtml:sip" remove-via="0" reliable="0" increment-cseq-first="0" increment-cseq-last="0" >
            <call-id >p_strCallId</call-id>
            <contact >p_strContact</contact>
            <content >p_oCallLegA.strContent</content>
            <content-type >p_strContentType</content-type>
            <cseq >p_strCSeq</cseq>
            <from >p_strFrom</from>
            <status >"SIP/2.0 200 OK"</status>
            <to >p_strTo</to>
            <via >p_strVia</via>
          </sip-response>
          <results >
            <result name="Default" link="2" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="25" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=946 y=306 ?>
          <!--ReInviteA @ B SDP-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;ReInviteParty&quot;" return="f_nReturnCode" external-function="1" library="" >
            <parameter >p_oCallLegA</parameter>
            <parameter >p_oCallLegB.strContent</parameter>
            <parameter >p_strContentType</parameter>
            <parameter >p_strContact</parameter>
          </function>
          <results >
            <result name="Default" link="16" stubbed="0"/>
            <result name="Success" link="26" stubbed="0" >f_nReturnCode == s_sSUCCESS</result>
            <result name="Final Timeout" link="30" stubbed="1" >f_nReturnCode == -2</result>
          </results>
        </action>
        <action id="26" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=1207 y=317 ?>
          <!--StartTimer - p_oTimerPhoneA-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="1" library="" >
            <parameter >p_oTimerPhoneA</parameter>
          </function>
          <results >
            <result name="Default" link="24" stubbed="0"/>
          </results>
        </action>
        <action id="27" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=1258 y=578 ?>
          <!--f_nStopTimers_EndSession-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nStopTimers_EndSession"/>
        </action>
        <action id="28" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=16 y=541 ?>
          <!--f_nSend481-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nSend481"/>
        </action>
        <action id="30" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=751 y=548 ?>
          <!--CancelParty-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;CancelParty&quot;" return="" external-function="1" library="lib_callcontrol.xml" >
            <parameter >p_oCallLegA</parameter>
            <parameter >p_strContact</parameter>
          </function>
          <results >
            <result name="Default" link="27" stubbed="0"/>
          </results>
        </action>
        <action id="31" plug-in="Pactolus.Branch.1" ><?xtml-editor x=762 y=434 ?>
          <results >
            <result name="Default" link="16" stubbed="0"/>
            <result name="A.nInviteStatus = 488" link="32" stubbed="0" >p_oCallLegA.nInviteStatus == 488</result>
          </results>
        </action>
        <action id="32" plug-in="Pactolus.SipResponse.1" ><?xtml-editor x=1018 y=536 ?>
          <!--SIP/2.0 488 Not Acceptable-->
          <sip-response xmlns="urn:www.pactolus.com:xtml:sip" remove-via="0" reliable="0" increment-cseq-first="0" increment-cseq-last="0" >
            <call-id >p_strCallId</call-id>
            <contact >p_strContact</contact>
            <content >p_oCallLegA.strContent</content>
            <content-type >p_strContentType</content-type>
            <cseq >p_strCSeq</cseq>
            <from >p_strFrom</from>
            <status >"SIP/2.0 488 Not Acceptable"</status>
            <to >p_strTo</to>
            <via >p_strVia</via>
          </sip-response>
          <results >
            <result name="Default" link="27" stubbed="0"/>
            <result name="Success" ><?xtml-editor visible=no?></result>
            <result name="Error" ><?xtml-editor visible=no?></result>
            <result name="Timeout" ><?xtml-editor visible=no?></result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR: FAIL TO REINVITE A.");]]></script>
          </scripts>
        </action>
      </actions>
    </function>
    <function name="StopOneTimer" start="1" event="StopOneTimer" returns="i4" >
      <parameters >
        <parameter name="p_oTimer" type="object" pass="byref"/>
      </parameters>
      <actions >
        <action id="1" plug-in="Standard.Timer.1" ><?xtml-editor x=109 y=139 ?>
          <!--Stop p_oTimer.lTimerId-->
          <timer xmlns="urn:www.pactolus.com:xtml:application" start="0" id="p_oTimer.lTimerId" duration=""/>
          <results >
            <result name="Default" link="2" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="last" ><![CDATA[// js_initTimer(Session.p_oTimer);

Session.p_oTimer.lTimerId = 0;]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=344 y=138 ?>
          <!--0-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="0"/>
        </action>
      </actions>
    </function>
    <function name="ProcessOnTimer" start="1" event="ProcessOnTimer" returns="i4" >
      <parameters >
        <parameter name="p_nTimerId" type="i4"/>
        <parameter name="p_oTimerPhoneA" type="object" pass="byref"/>
        <parameter name="p_oTimerPhoneB" type="object" pass="byref"/>
        <parameter name="p_oTimerThreshold" type="object" pass="byref"/>
        <parameter name="p_oTimerGSXA" type="object"/>
        <parameter name="p_oTimerGSXB" type="object"/>
        <parameter name="p_oTimerMaxTime" type="object"/>
        <parameter name="p_oTimerMOH" type="object"/>
        <parameter name="p_oTimerPleaseHold" type="object" pass="byref"/>
        <parameter name="p_oTimerMaxWaitCSR" type="object"/>
        <parameter name="p_oCallLegA" type="object" pass="byref"/>
        <parameter name="p_oCallLegB" type="object" pass="byref"/>
        <parameter name="p_strContact" type="string" pass="byref"/>
        <parameter name="p_strContentType" type="string"/>
        <parameter name="p_oMS" type="object" pass="byref"/>
        <parameter name="p_oAPIObject" type="object" pass="byref"/>
        <parameter name="p_oACD" type="object" pass="byref"/>
        <parameter name="p_oSUB" type="object" pass="byref"/>
        <parameter name="p_oPrompts" type="object"/>
        <parameter name="p_oTimerHeartBeat" type="object" pass="byref"/>
        <parameter name="p_oArrayCallLegs" type="object" pass="byref"/>
        <parameter name="p_oConfMS" type="object" pass="byref"/>
        <parameter name="p_oTimerMaxTimeALeg" type="object" pass="byref"/>
        <parameter name="p_oTimerLongCallInterval" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-50</var>
        <var name="f_nHangupAB_EndSession" type="i4" >-3</var>
        <var name="f_nHangUpB_Continue" type="i4" >-2</var>
        <var name="f_nPrompt" type="i4" >0</var>
        <var name="f_nSUCCESS" type="i4" >0</var>
        <var name="f_strRequestNotify" type="string" ></var>
        <var name="f_nEnd_Session_Only" type="i4" >-4</var>
        <var name="f_strTransactionId" type="string" ></var>
        <var name="f_strACDControllerIP" type="string" ></var>
        <var name="f_nACDControllerPort" type="i4" >0</var>
        <var name="f_strEventReceived" type="string" ></var>
        <var name="f_nSECOND" type="i4" >0</var>
        <var name="f_strMSType" type="string" ></var>
        <var name="f_nHangUpA_EndSession" type="i4" >-5</var>
        <var name="f_bMaxCallTimeReached" type="boolean" >0</var>
        <var name="f_nBLegError_Continue" type="i4" >-6</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.Branch.1" ><?xtml-editor x=36 y=143 ?>
          <!--p_nTimerId = ?-->
          <results >
            <result name="Default" link="2" stubbed="1"/>
            <result name="~CallLegA.lTimerId" link="3" stubbed="0" >p_oTimerPhoneA.lTimerId == p_nTimerId</result>
            <result name="~CallLegB.lTimerId" link="8" stubbed="0" >p_oTimerPhoneB.lTimerId == p_nTimerId</result>
            <result name="~Threshold.lTimerId" link="11" stubbed="1" >p_oTimerThreshold.lTimerId == p_nTimerId</result>
            <result name="~MaxTime .lTimerId + Prompt" link="11" stubbed="0" >p_oTimerMaxTime.lTimerId == p_nTimerId

AND (p_oAPIObject.nDisconnectPrompt &gt; 0

OR p_oAPIObject.strDisconnectPromptUrl.length &gt; 0)

AND p_oAPIObject.bPctMaxCallDuration == false</result>
            <result name="~GXSA or B.lTimerId" link="7" stubbed="1" >p_oTimerGSXB.lTimerId == p_nTimerId

OR p_oTimerGSXA.lTimerId == p_nTimerId</result>
            <result name="~MaxWaitCSR.lTimerId" link="22" stubbed="0" >p_oTimerMaxWaitCSR.lTimerId == p_nTimerId</result>
            <result name="~PleaseHold.lTimerId" link="12" stubbed="0" >p_oTimerPleaseHold.lTimerId == p_nTimerId</result>
            <result name="~MOH.lTimerId" link="14" stubbed="0" >p_oTimerMOH.lTimerId == p_nTimerId</result>
            <result name="~MaxTime.lTimerId" link="10" stubbed="1" >p_oTimerMaxTime.lTimerId == p_nTimerId</result>
            <result name="~TimerHeartBeat.lTimerId" link="26" stubbed="1" >p_oTimerHeartBeat.lTimerId == p_nTimerId</result>
            <result name="~MaxTimeALeg.lTimerId" link="28" stubbed="1" >p_nTimerId == p_oTimerMaxTimeALeg.lTimerId</result>
            <result name="~LongCallInterval.lTimerId" link="29" stubbed="0" >p_nTimerId == p_oTimerLongCallInterval.lTimerId</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("p_oMS.bUseForACD: " + Session.p_oMS.bUseForACD);

Server.logInfo("p_oMS.bUseForMOH: " + Session.p_oMS.bUseForMOH);

Server.logInfo("p_oMS.strType: " + Session.p_oMS.strType);

Server.logInfo("p_oMS.strACDType: " + Session.p_oMS.strACDType);

Server.logInfo("p_oMS.strMOHType: " + Session.p_oMS.strMOHType);





if (Session.p_oMS.bUseForMOH)

{

	Session.f_strMSType = Session.p_oMS.strMOHType;

}

else if (Session.p_oMS.bUseForACD)

{

	Session.f_strMSType = Session.p_oMS.strACDType;

}

else

{

	Session.f_strMSType = Session.p_oMS.strType;

}

Server.logInfo("f_strMSType is: " + Session.f_strMSType);]]></script>
            <script language="javascript" timing="last" ><![CDATA[if(Result.id == 5 || Result.id == 10 || Result.id == 12) {

	Session.p_oAPIObject.nCallTerminationReason = 3;

	Session.p_oAPIObject.nSessionTerminationReason = 8;

} 

switch (Result.id)

{

	case 2:

		Server.logInfo("TIME TO SEND REINVITE TO CALL LEG A");

		break;

	case 3:

		Server.logInfo("TIME TO SEND REINVITE TO CALL LEG B");

		break;

	case 4:

		Server.logInfo("TIME TO PLAY THRESHOLD PROMPT");

		break;

	case 5:

		Server.logInfo("TIME TO PLAY PROMPT and HANGUP");

		Session.f_bMaxCallTimeReached = true;

		break;

	case 6:

		Server.logInfo("TIME TO HANGUP BECAUSE NO REINVITE FROM GSX");

		break;

	case 7:

		Server.logInfo("TIME TO HANGUP BECAUSE EXCEED MAX WAIT FOR CSR");

		break;

	case 8:

		Server.logInfo("TIME TO PLAY PLEASE CONTINUTE TO HOLD");

		break;

	case 9:

		Server.logInfo("TIME TO PLAY MUSIC ON HOLD");

		break;

	case 10:

		Server.logInfo("TIME TO HANGUP BECAUSE NO TIME LEFT");

		break;

	case 11:

		Server.logInfo("TIME TO SEND HEART BEAT TO ACD CONTROLLER");

		break;

	case 12:

		Server.logInfo("TIME TO HANGUP BECAUSE A LEG RATING TIMER EXPIRES");

		break;

	case 13:

		Server.logInfo("TIME TO INTERRUPT CALL FOR MANUAL EXTENSION");

		break;

	default:

		Server.logInfo("DOESN'T MATCH ANY TIMER");

		break;

}]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=48 y=500 ?>
          <!--0-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="0"/>
        </action>
        <action id="3" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=499 y=103 ?>
          <!--re-inviteA @ B SDP-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;ReInviteParty&quot;" return="f_nReturnCode" external-function="1" library="" >
            <parameter >p_oCallLegA</parameter>
            <parameter >p_oCallLegB.strContent</parameter>
            <parameter >p_strContentType</parameter>
            <parameter >p_strContact</parameter>
          </function>
          <results >
            <result name="Default" link="7" stubbed="1"/>
            <result name="Success" link="5" stubbed="0" >f_nReturnCode == s_sSUCCESS</result>
          </results>
        </action>
        <action id="5" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=788 y=104 ?>
          <!--StartTimer - p_oTimerPhoneA-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerPhoneA</parameter>
          </function>
          <results >
            <result name="Default" link="2" stubbed="1"/>
          </results>
        </action>
        <action id="7" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=49 y=417 ?>
          <!--f_nHangupAB_EndSession-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nHangupAB_EndSession"/>
        </action>
        <action id="8" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=501 y=225 ?>
          <!--re-inviteB @ A SDP-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;ReInviteParty&quot;" return="f_nReturnCode" external-function="1" library="" >
            <parameter >p_oCallLegB</parameter>
            <parameter >p_oCallLegA.strContent</parameter>
            <parameter >p_strContentType</parameter>
            <parameter >p_strContact</parameter>
          </function>
          <results >
            <result name="Default" link="10" stubbed="0"/>
            <result name="Success" link="9" stubbed="0" >f_nReturnCode == s_sSUCCESS</result>
          </results>
          <scripts >
            <script language="javascript" timing="last" ><![CDATA[if(1 == Result.id) {

	Session.p_oAPI.nCallTerminationReason = 9;

	Session.p_oAPI.nSessionTerminationReason = 11;

}]]></script>
          </scripts>
        </action>
        <action id="9" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=788 y=314 ?>
          <!--StartTimer - p_oTimerPhoneB-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerPhoneB</parameter>
          </function>
          <results >
            <result name="Default" link="2" stubbed="1"/>
          </results>
        </action>
        <action id="10" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=772 y=214 ?>
          <!--f_nHangUpB_Continue-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nHangUpB_Continue"/>
        </action>
        <action id="11" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=498 y=354 ?>
          <!--Play Threshold promp-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;PlayThresholdPrompt&quot;" return="f_nReturnCode" external-function="0" library="" >
            <parameter >p_oCallLegA</parameter>
            <parameter >p_oCallLegB</parameter>
            <parameter >f_nPrompt</parameter>
            <parameter >p_strContact</parameter>
            <parameter >p_oAPIObject</parameter>
            <parameter >p_oTimerGSXA</parameter>
            <parameter >p_oTimerGSXB</parameter>
            <parameter >p_oTimerPhoneA</parameter>
            <parameter >p_oTimerPhoneB</parameter>
            <parameter >p_oPrompts</parameter>
            <parameter >p_oArrayCallLegs</parameter>
            <parameter >p_oConfMS</parameter>
            <parameter >f_bMaxCallTimeReached</parameter>
          </function>
          <results >
            <result name="Default" link="2" stubbed="1"/>
            <result name="End Session" link="24" stubbed="0" >f_nReturnCode == -98</result>
            <result name="Hangup A&amp;B, End Session" link="7" stubbed="1" >f_nReturnCode == -99</result>
            <result name="Hangup B, continue" link="10" stubbed="1" >f_nReturnCode == -97</result>
            <result name="B Leg Error, Continue" link="31" stubbed="0" >f_nReturnCode == -6</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_nPrompt = Session.p_oTimerThreshold.nThresholdTime;]]></script>
          </scripts>
        </action>
        <action id="12" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=504 y=514 ?>
          <!--please continue to hold-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="10" ms-type="f_strMSType" returns="" start-play="1" interrupt="0" return-immediate="0" digit-map="" language="p_oAPIObject.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >898</audio>
          </play>
          <results >
            <result name="Default" link="7" stubbed="1"/>
            <result name="Success" link="13" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="13" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=756 y=530 ?>
          <!--reset please hold timer-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerPleaseHold</parameter>
          </function>
          <results >
            <result name="Default" link="2" stubbed="1"/>
          </results>
        </action>
        <action id="14" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=496 y=641 ?>
          <!--"ConnectToMOH"-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;ConnectToMOH&quot;" return="f_nReturnCode" external-function="1" library="lib_moh.xml" >
            <parameter >p_oMS</parameter>
            <parameter >p_oAPIObject</parameter>
            <parameter >p_strContact</parameter>
            <parameter >p_oCallLegA</parameter>
            <parameter >p_oMS.strSessionId</parameter>
            <parameter >p_oMS.nConfIndex</parameter>
            <parameter >p_oMS.strConferenceId</parameter>
            <parameter >p_oAPIObject.strLanguage</parameter>
          </function>
          <results >
            <result name="Default" link="7" stubbed="1"/>
            <result name="SUCCESS" link="2" stubbed="1" >f_nReturnCode == f_nSUCCESS</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.p_oMS.bMuteFlag = true;]]></script>
          </scripts>
        </action>
        <action id="17" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=838 y=763 ?>
          <!--can't reach CSR-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="10" ms-type="f_strMSType" returns="" start-play="1" interrupt="0" return-immediate="0" digit-map="" language="p_oAPIObject.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >1503</audio>
          </play>
          <results >
            <result name="Default" link="7" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
            <result name="p_oMS.bConnected" link="19" stubbed="0" >p_oMS.bConnected == true</result>
          </results>
        </action>
        <action id="19" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=1050 y=848 ?>
          <!--"DisconnectFromMOH"-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;DisconnectFromMOH&quot;" return="f_nReturnCode" external-function="1" library="lib_moh.xml" >
            <parameter >p_oMS</parameter>
            <parameter >p_oMS.strSessionId</parameter>
            <parameter >p_oMS.nConfIndex</parameter>
            <parameter >p_oAPIObject.strSessionId</parameter>
          </function>
          <results >
            <result name="Default" link="7" stubbed="1"/>
          </results>
        </action>
        <action id="22" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=398 y=779 ?>
          <!--Soap EndRequest-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;MsgEndRequestCSR&quot;" return="" external-function="1" library="lib_soap.xml" >
            <parameter >p_oACD</parameter>
          </function>
          <results >
            <result name="Default" link="23" stubbed="0"/>
          </results>
        </action>
        <action id="23" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=625 y=766 ?>
          <!--API EndRequest-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;ACDAPIEndRequest&quot;" return="" external-function="1" library="lib_APISce.xml" >
            <parameter >p_oAPIObject</parameter>
            <parameter >p_oACD</parameter>
            <parameter >p_oSUB</parameter>
          </function>
          <results >
            <result name="Default" link="17" stubbed="0"/>
          </results>
        </action>
        <action id="24" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=772 y=406 ?>
          <!--f_nEnd_Session_Only-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nEnd_Session_Only"/>
        </action>
        <action id="25" plug-in="Standard.WaitEvent.1" ><?xtml-editor x=635 y=966 ?>
          <!--wait for heartbeat response-->
          <wait xmlns="urn:www.pactolus.com:xtml:communication" timeout="10" recv-name="f_strEventReceived" >
            <msg name="HeartbeatResponse" >
              <parameter >f_strACDControllerIP</parameter>
              <parameter >f_nACDControllerPort</parameter>
              <parameter >f_strTransactionId</parameter>
            </msg>
          </wait>
          <results >
            <result name="Default" link="7" stubbed="1"/>
            <result name="Success" link="27" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="26" plug-in="Pactolus.SOAPMessage.1" ><?xtml-editor x=400 y=965 ?>
          <!--heartbeat request-->
          <SOAP xmlns="urn:www.pactolus.com:xtml:communication" destination-ip="p_oACD.strACDControllerIP" transaction="f_strTransactionId" message-name="&quot;HeartbeatRequest&quot;" destination-port="p_oACD.nACDControllerPort" destination-type="4" destination-session="" waiting-session-selected="" xml-namespace="" >
            <parameter tag="&quot;SoapAgentPort&quot;" value="p_oACD.nSoapPort"/>
          </SOAP>
          <results >
            <result name="Default" link="25" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[var strTransId = new String(Server.getUTCTime());

Session.f_strTransactionId = strTransId;]]></script>
          </scripts>
        </action>
        <action id="27" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=880 y=962 ?>
          <!--reset please hold timer-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerHeartBeat</parameter>
          </function>
          <results >
            <result name="Default" link="2" stubbed="1"/>
          </results>
        </action>
        <action id="28" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=51 y=589 ?>
          <!--f_nHangUpA_EndSession-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nHangUpA_EndSession"/>
        </action>
        <action id="29" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=223 y=955 ?>
          <!--Play Long Call Interval Prompt-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;PlayThresholdPrompt&quot;" return="f_nReturnCode" external-function="0" library="" >
            <parameter >p_oCallLegA</parameter>
            <parameter >p_oCallLegB</parameter>
            <parameter >f_nPrompt</parameter>
            <parameter >p_strContact</parameter>
            <parameter >p_oAPIObject</parameter>
            <parameter >p_oTimerGSXA</parameter>
            <parameter >p_oTimerGSXB</parameter>
            <parameter >p_oTimerPhoneA</parameter>
            <parameter >p_oTimerPhoneB</parameter>
            <parameter >p_oPrompts</parameter>
            <parameter >p_oArrayCallLegs</parameter>
            <parameter >p_oConfMS</parameter>
            <parameter >f_bMaxCallTimeReached</parameter>
          </function>
          <results >
            <result name="Default" link="30" stubbed="0"/>
            <result name="End Session" link="24" stubbed="1" >f_nReturnCode == -98</result>
            <result name="Hangup A&amp;B, End Session" link="7" stubbed="1" >f_nReturnCode == -99</result>
            <result name="Hangup B, continue" link="10" stubbed="1" >f_nReturnCode == -97</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_nPrompt = 592; // to continue this call ...
Session.p_oAPIObject.bLongCallIntervalTimerFlag = true;
]]></script>
            <script language="javascript" timing="last" ><![CDATA[Session.p_oAPIObject.bLongCallIntervalTimerFlag = false;]]></script>
          </scripts>
        </action>
        <action id="30" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=226 y=1173 ?>
          <!--reset long call interval timer-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerLongCallInterval</parameter>
          </function>
          <results >
            <result name="Default" link="2" stubbed="1"/>
          </results>
        </action>
        <action id="31" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=983 y=480 ?>
          <!--f_nBLegError_Continue-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nBLegError_Continue"/>
        </action>
      </actions>
    </function>
    <function name="PlayThresholdPrompt" start="58" event="PlayThresholdPrompt" returns="i4" >
      <parameters >
        <parameter name="p_oCallLegA" type="object" pass="byref"/>
        <parameter name="p_oCallLegB" type="object" pass="byref"/>
        <parameter name="p_nPrompt" type="i4"/>
        <parameter name="p_strContact" type="string" pass="byref"/>
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oTimerGSXA" type="object" pass="byref"/>
        <parameter name="p_oTimerGSXB" type="object" pass="byref"/>
        <parameter name="p_oTimerPhoneA" type="object" pass="byref"/>
        <parameter name="p_oTimerPhoneB" type="object" pass="byref"/>
        <parameter name="p_oPrompts" type="object"/>
        <parameter name="p_oArrayCallLegs" type="object" pass="byref"/>
        <parameter name="p_oConfMS" type="object" pass="byref"/>
        <parameter name="p_bMaxCallTimeReached" type="boolean"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-99</var>
        <var name="f_oMS" type="object" ></var>
        <var name="f_lFILLER" type="i8" >0</var>
        <var name="f_bGSXOn" type="boolean" >0</var>
        <var name="f_bPhoneOn" type="boolean" >0</var>
        <var name="f_lSleepTime" type="i8" >0</var>
        <var name="f_lSleepTimeB" type="i8" >0</var>
        <var name="f_nHANGUP_BOTH" type="i4" >-99</var>
        <var name="f_nEND_SESSION" type="i4" >-98</var>
        <var name="f_nMinutes" type="i4" >0</var>
        <var name="f_nSeconds" type="i4" >0</var>
        <var name="f_nPROMPT_MIN" type="i4" >99</var>
        <var name="f_nPROMPT_SEC" type="i4" >99</var>
        <var name="f_oBLegTimers" type="object" ></var>
        <var name="i" type="i4" >0</var>
        <var name="f_strBackupSoftswitch" type="string" ></var>
        <var name="f_nHANGUP_B" type="i4" >-97</var>
        <var name="bPlayRingback" type="boolean" >0</var>
        <var name="f_oMS2" type="object" ></var>
        <var name="f_strDigit" type="string" ></var>
        <var name="f_nRetries" type="i4" >0</var>
        <var name="f_nB_LEG_ERROR" type="i4" >-96</var>
        <var name="f_bBLegError" type="boolean" >0</var>
      </local-vars>
      <actions >
        <action id="58" plug-in="Pactolus.Branch.1" ><?xtml-editor x=127 y=725 ?>
          <results >
            <result name="Default" link="69" stubbed="0"/>
            <result name="A in conf?" link="100" stubbed="0" >p_oConfMS.bCurrentlyInConf == true</result>
          </results>
        </action>
        <action id="22" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=884 y=1682 ?>
          <!--f_nHANGUP_BOTH-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nHANGUP_BOTH"/>
        </action>
        <action id="50" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=665 y=1690 ?>
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oConfMS.strConnectionId" endpoint="p_oConfMS.strEndPoint" callid="p_oConfMS.strCallId" repeat="1" timeout="30" ms-type="p_oConfMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >p_oPrompts.nMaxThresholdPrompt</audio>
          </play>
          <results >
            <result name="Default" link="22" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="51" plug-in="Pactolus.Branch.1" ><?xtml-editor x=401 y=1413 ?>
          <results >
            <result name="Default" link="52" stubbed="0"/>
            <result name="nMaxThresholdPrompt &gt; 0" link="50" stubbed="0" >p_oPrompts.nMaxThresholdPrompt &gt; 0</result>
          </results>
        </action>
        <action id="52" plug-in="Pactolus.Branch.1" ><?xtml-editor x=650 y=1233 ?>
          <results >
            <result name="Default" link="56" stubbed="0"/>
            <result name="minutes &gt; 0, seconds &gt; 0" link="53" stubbed="0" >f_nMinutes &gt; 0

AND f_nSeconds &gt; 0</result>
            <result name="minutes &gt; 0, seconds = 0" link="54" stubbed="0" >f_nMinutes &gt; 0

AND f_nSeconds == 0</result>
            <result name="minutes = 0, seconds &gt; 0" link="55" stubbed="0" >f_nMinutes == 0

AND f_nSeconds &gt; 0</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_nMinutes = Session.p_oPrompts.nTime / 60;

Session.f_nSeconds = Session.p_oPrompts.nTime % 60;



if(1 == Session.f_nMinutes) {

	Session.f_nPROMPT_MIN = 308;

} else if(Session.f_nMinutes > 1) {

	Session.f_nPROMPT_MIN = 309;

}



if(1 == Session.f_nSeconds) {

	Session.f_nPROMPT_SEC = 54;

} else if(Session.f_nSeconds > 1) {

	Session.f_nPROMPT_SEC = 46;

}]]></script>
          </scripts>
        </action>
        <action id="53" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=981 y=1311 ?>
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oConfMS.strConnectionId" endpoint="p_oConfMS.strEndPoint" callid="p_oConfMS.strCallId" repeat="1" timeout="30" ms-type="p_oConfMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="number" >f_nMinutes</audio>
            <audio type="index" >f_nPROMPT_MIN</audio>
            <audio type="index" >52</audio>
            <audio type="number" >f_nSeconds</audio>
            <audio type="index" >f_nPROMPT_SEC</audio>
          </play>
          <results >
            <result name="Default" link="57" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[if(Session.p_oPrompts.nTime == 0) {

	Session.p_oPrompts.nTime = Session.p_nPrompt;

}]]></script>
          </scripts>
        </action>
        <action id="54" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=981 y=1425 ?>
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oConfMS.strConnectionId" endpoint="p_oConfMS.strEndPoint" callid="p_oConfMS.strCallId" repeat="1" timeout="30" ms-type="p_oConfMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="number" >f_nMinutes</audio>
            <audio type="index" >f_nPROMPT_MIN</audio>
          </play>
          <results >
            <result name="Default" link="57" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[if(Session.p_oPrompts.nTime == 0) {

	Session.p_oPrompts.nTime = Session.p_nPrompt;

}]]></script>
          </scripts>
        </action>
        <action id="55" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=977 y=1547 ?>
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oConfMS.strConnectionId" endpoint="p_oConfMS.strEndPoint" callid="p_oConfMS.strCallId" repeat="1" timeout="30" ms-type="p_oConfMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="number" >f_nSeconds</audio>
            <audio type="index" >f_nPROMPT_SEC</audio>
          </play>
          <results >
            <result name="Default" link="57" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[if(Session.p_oPrompts.nTime == 0) {

	Session.p_oPrompts.nTime = Session.p_nPrompt;

}]]></script>
          </scripts>
        </action>
        <action id="56" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=956 y=1142 ?>
          <!--517: You have ...-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oConfMS.strConnectionId" endpoint="p_oConfMS.strEndPoint" callid="p_oConfMS.strCallId" repeat="1" timeout="30" ms-type="p_oConfMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >p_oPrompts.nPrompt1</audio>
            <audio type="number" >p_oPrompts.nTime</audio>
            <audio type="index" >p_oPrompts.nPrompt2</audio>
            <audio type="index" >p_oPrompts.nPrompt3</audio>
          </play>
          <results >
            <result name="Default" link="57" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[if(Session.p_oPrompts.nTime == 0) {

	Session.p_oPrompts.nTime = Session.p_nPrompt;

}]]></script>
          </scripts>
        </action>
        <action id="57" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=1172 y=1142 ?>
          <!--0-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="0"/>
        </action>
        <action id="59" plug-in="Pactolus.Branch.1" ><?xtml-editor x=860 y=268 ?>
          <results >
            <result name="Default" link="60" stubbed="1"/>
            <result name="p_oTimerPhoneB.bOn" link="63" stubbed="0" >p_oTimerPhoneB.bOn == true</result>
          </results>
        </action>
        <action id="60" plug-in="Pactolus.Branch.1" ><?xtml-editor x=619 y=128 ?>
          <results >
            <result name="Default" link="61" stubbed="1"/>
            <result name="p_oTimerGSXA.bOn" link="64" stubbed="0" >p_oTimerGSXA.bOn == true</result>
          </results>
        </action>
        <action id="61" plug-in="Pactolus.Branch.1" ><?xtml-editor x=1075 y=119 ?>
          <results >
            <result name="Default" link="90" stubbed="0"/>
            <result name="p_oTimerGSXB.bOn" link="65" stubbed="0" >p_oTimerGSXB.bOn == true</result>
          </results>
        </action>
        <action id="62" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=640 y=267 ?>
          <!--StopOneTimer: p_oTimerPhoneA-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StopOneTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerPhoneA</parameter>
          </function>
          <results >
            <result name="Default" link="59" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_bPhoneOn = true

Session.f_lSleepTime = Session.p_oTimerPhoneA.lSleepTime;]]></script>
          </scripts>
        </action>
        <action id="63" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=1094 y=268 ?>
          <!--StopOneTimer: p_oTimerPhoneB-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StopOneTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerPhoneB</parameter>
          </function>
          <results >
            <result name="Default" link="60" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_lSleepTimeB = Session.p_oTimerPhoneB.lSleepTime;]]></script>
          </scripts>
        </action>
        <action id="64" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=844 y=124 ?>
          <!--StopOneTimer: p_oTimerGSXA-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StopOneTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerGSXA</parameter>
          </function>
          <results >
            <result name="Default" link="61" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_bGSXOn = true

Session.f_lSleepTime = Session.p_oTimerGSXA.lSleepTime;]]></script>
          </scripts>
        </action>
        <action id="65" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=1309 y=110 ?>
          <!--StopOneTimer: p_oTimerGSXB-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StopOneTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerGSXB</parameter>
          </function>
          <results >
            <result name="Default" link="90" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_lSleepTimeB = Session.p_oTimerGSXB.lSleepTime;]]></script>
          </scripts>
        </action>
        <action id="69" plug-in="Pactolus.Branch.1" ><?xtml-editor x=387 y=197 ?>
          <results >
            <result name="Default" link="60" stubbed="0"/>
            <result name="p_oTimerPhoneA.bOn" link="62" stubbed="0" >p_oTimerPhoneA.bOn == true</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_oBLegTimers = Session.p_oArrayCallLegs;]]></script>
          </scripts>
        </action>
        <action id="70" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=1547 y=257 ?>
          <!--put A on hold-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;PutPartyOnHold&quot;" return="f_nReturnCode" external-function="1" library="" >
            <parameter >p_oCallLegA</parameter>
            <parameter >p_strContact</parameter>
          </function>
          <results >
            <result name="Default" link="22" stubbed="1"/>
            <result name="Success" link="71" stubbed="0" >f_nReturnCode == 0</result>
          </results>
          <scripts >
            <script language="javascript" timing="last" ><![CDATA[if(1 == Result.id) {

	Session.p_oAPI.nCallTerminationReason = 6;

	Session.p_oAPI.nSessionTerminationReason = 5;

}



if(0 != Session.f_nReturnCode) {

	Server.logError("ERROR putting A leg on hold before playing threshold prompt. Session will end.");

}]]></script>
          </scripts>
        </action>
        <action id="71" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=1767 y=257 ?>
          <!--put B on hold-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;PutPartyOnHold&quot;" return="f_nReturnCode" external-function="1" library="" >
            <parameter >p_oCallLegB</parameter>
            <parameter >p_strContact</parameter>
          </function>
          <results >
            <result name="Default" link="22" stubbed="1"/>
            <result name="Success" link="72" stubbed="1" >f_nReturnCode == 0</result>
          </results>
          <scripts >
            <script language="javascript" timing="last" ><![CDATA[if(1 == Result.id) {

	Session.p_oAPI.nCallTerminationReason = 6;

	Session.p_oAPI.nSessionTerminationReason = 5;

}



if(0 != Session.f_nReturnCode) {

	Server.logError("ERROR putting B leg on hold before playing threshold prompt. Session will end.");

}]]></script>
          </scripts>
        </action>
        <action id="72" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=589 y=621 ?>
          <!--outdial from MS-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;MSOutdialParty&quot;" return="f_nReturnCode" external-function="1" library="" >
            <parameter >p_oCallLegA</parameter>
            <parameter >f_oMS</parameter>
            <parameter >p_strContact</parameter>
          </function>
          <results >
            <result name="Default" link="22" stubbed="1"/>
            <result name="Success" link="104" stubbed="0" >f_nReturnCode == s_sSUCCESS</result>
            <result name="A Leg Hangup" link="22" stubbed="1" >f_nReturnCode == -2</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[js_initMS(Session.f_oMS, Session.s_strMSType);]]></script>
            <script language="javascript" timing="last" ><![CDATA[if(1 == Result.id) {

	Session.p_oAPI.nCallTerminationReason = 4;
	Session.p_oAPI.nSessionTerminationReason = 12;
	Server.logError("ERROR outdialing A leg to media server. Session will end.");

} else if(3 == Result.id) {

	Session.g_oAPI.nCallTerminationReason = 2;
	Session.g_oAPI.nSessionTerminationReason = 7;
	Server.logInfo("Could not connect A leg to MS because A leg has hung up. Session will end.");

}]]></script>
          </scripts>
        </action>
        <action id="73" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=1486 y=390 ?>
          <!--517: You have ...-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="f_oMS.strConnectionId" endpoint="f_oMS.strEndPoint" callid="f_oMS.strCallId" repeat="1" timeout="30" ms-type="f_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >p_oPrompts.nPrompt1</audio>
            <audio type="number" >p_oPrompts.nTime</audio>
            <audio type="index" >p_oPrompts.nPrompt2</audio>
            <audio type="index" >p_oPrompts.nPrompt3</audio>
          </play>
          <results >
            <result name="Default" link="81" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[if(Session.p_oPrompts.nTime == 0) {

	Session.p_oPrompts.nTime = Session.p_nPrompt;

}]]></script>
          </scripts>
        </action>
        <action id="74" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=1129 y=765 ?>
          <!--oAPI.nDisconnectPrompt-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="f_oMS.strConnectionId" endpoint="f_oMS.strEndPoint" callid="f_oMS.strCallId" repeat="1" timeout="30" ms-type="f_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >p_oAPI.nDisconnectPrompt</audio>
          </play>
          <results >
            <result name="Default" link="80" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="75" plug-in="Pactolus.Branch.1" ><?xtml-editor x=892 y=644 ?>
          <results >
            <result name="Default" link="106" stubbed="0"/>
            <result name="MaxTime, I and Indx &gt; 0" link="74" stubbed="0" >p_bMaxCallTimeReached == true

AND p_oAPI.strDisconnectPromptType == "I"

AND p_oAPI.nDisconnectPrompt &gt; 0</result>
            <result name="MaxTime, U, and Url &gt; 0" link="88" stubbed="0" >p_bMaxCallTimeReached == true

AND p_oAPI.strDisconnectPromptType == "U"

AND p_oAPI.strDisconnectPromptUrl.length &gt; 0</result>
            <result name="Long Call Interval interruption" link="94" stubbed="1" >p_oAPI.bLongCallIntervalTimerFlag == true</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_nRetries = 0;]]></script>
          </scripts>
        </action>
        <action id="76" plug-in="Pactolus.Branch.1" ><?xtml-editor x=1130 y=551 ?>
          <results >
            <result name="Default" link="73" stubbed="0"/>
            <result name="minutes &gt; 0, seconds &gt; 0" link="77" stubbed="0" >f_nMinutes &gt; 0

AND f_nSeconds &gt; 0</result>
            <result name="minutes &gt; 0, seconds = 0" link="78" stubbed="0" >f_nMinutes &gt; 0

AND f_nSeconds == 0</result>
            <result name="minutes = 0, seconds &gt; 0" link="79" stubbed="0" >f_nMinutes == 0

AND f_nSeconds &gt; 0</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_nMinutes = Session.p_oPrompts.nTime / 60;

Session.f_nSeconds = Session.p_oPrompts.nTime % 60;



if(1 == Session.f_nMinutes) {

	Session.f_nPROMPT_MIN = 308;

} else if(Session.f_nMinutes > 1) {

	Session.f_nPROMPT_MIN = 309;

}



if(1 == Session.f_nSeconds) {

	Session.f_nPROMPT_SEC = 54;

} else if(Session.f_nSeconds > 1) {

	Session.f_nPROMPT_SEC = 46;

}]]></script>
          </scripts>
        </action>
        <action id="77" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=1511 y=559 ?>
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="f_oMS.strConnectionId" endpoint="f_oMS.strEndPoint" callid="f_oMS.strCallId" repeat="1" timeout="30" ms-type="f_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="number" >f_nMinutes</audio>
            <audio type="index" >f_nPROMPT_MIN</audio>
            <audio type="index" >52</audio>
            <audio type="number" >f_nSeconds</audio>
            <audio type="index" >f_nPROMPT_SEC</audio>
          </play>
          <results >
            <result name="Default" link="81" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[if(Session.p_oPrompts.nTime == 0) {

	Session.p_oPrompts.nTime = Session.p_nPrompt;

}]]></script>
          </scripts>
        </action>
        <action id="78" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=1511 y=673 ?>
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="f_oMS.strConnectionId" endpoint="f_oMS.strEndPoint" callid="f_oMS.strCallId" repeat="1" timeout="30" ms-type="f_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="number" >f_nMinutes</audio>
            <audio type="index" >f_nPROMPT_MIN</audio>
          </play>
          <results >
            <result name="Default" link="81" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[if(Session.p_oPrompts.nTime == 0) {

	Session.p_oPrompts.nTime = Session.p_nPrompt;

}]]></script>
          </scripts>
        </action>
        <action id="79" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=1507 y=795 ?>
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="f_oMS.strConnectionId" endpoint="f_oMS.strEndPoint" callid="f_oMS.strCallId" repeat="1" timeout="30" ms-type="f_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="number" >f_nSeconds</audio>
            <audio type="index" >f_nPROMPT_SEC</audio>
          </play>
          <results >
            <result name="Default" link="81" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[if(Session.p_oPrompts.nTime == 0) {

	Session.p_oPrompts.nTime = Session.p_nPrompt;

}]]></script>
          </scripts>
        </action>
        <action id="80" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=1349 y=945 ?>
          <!--delete MS connection-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;DeleteMSConnection&quot;" return="" external-function="1" library="" >
            <parameter >f_oMS</parameter>
          </function>
          <results >
            <result name="Default" link="93" stubbed="0"/>
          </results>
        </action>
        <action id="81" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=1721 y=389 ?>
          <!--delete MS connection-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;DeleteMSConnection&quot;" return="" external-function="1" library="" >
            <parameter >f_oMS</parameter>
          </function>
          <results >
            <result name="Default" link="92" stubbed="0"/>
          </results>
        </action>
        <action id="82" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=1961 y=385 ?>
          <!--outdial-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;OutdialParty&quot;" return="f_nReturnCode" external-function="1" library="lib_callcontrol.xml" >
            <parameter >p_oCallLegA</parameter>
            <parameter >p_oCallLegB</parameter>
            <parameter >f_lFILLER</parameter>
            <parameter >f_lFILLER</parameter>
            <parameter >p_oCallLegB.strSIPStatus</parameter>
            <parameter >p_strContact</parameter>
            <parameter >p_oAPI</parameter>
            <parameter >bPlayRingback</parameter>
            <parameter >f_oMS</parameter>
          </function>
          <results >
            <result name="Default" link="22" stubbed="1"/>
            <result name="SUCCESS" link="83" stubbed="0" >f_nReturnCode == 0</result>
            <result name="f_bLegError" link="105" stubbed="0" >f_bBLegError == true</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[// We do not want to try the back up softswitch in case of a failure, so we need to save this off and clear the value.

// We will set this back at the end of the attempt.

Session.f_strBackupSoftswitch = Session.p_oCallLegB.strBackupRequestUri;

Session.p_oCallLegB.strBackupRequestUri = "";

// set the A Leg sdp to what the A leg originally offered. This will be passed
// on to the B Leg and will allow the B Leg to choose from what the A Leg 
// offered originally. That way we're guaranteed that the calls will be brought
// back together.
Session.p_oCallLegA.strContent = Session.p_oCallLegA.strOriginalContent;]]></script>
            <script language="javascript" timing="middle" ><![CDATA[if(Session.f_nReturnCode != 0) {
	Server.logInfo("Problem bringing A and B back together after playing threshold prompt. f_nReturnCode: " + Session.f_nReturnCode);

	if(2 == Session.f_nReturnCode) {
		Server.logInfo("B Leg returned Busy.");
		Session.f_bBLegError = true;
	} else if(-2 == Session.f_nReturnCode) {
		Server.logInfo("B Leg returned Called Party Error.");
		Session.f_bBLegError = true;
	} else if(1 == Session.f_nReturnCode) {
		Server.logInfo("B Leg returned Ring No Answer.");	
		Session.f_bBLegError = true;
	} else {
		Server.logError("B leg returned: " + Session.f_nReturnCode);
	}
}]]></script>
            <script language="javascript" timing="last" ><![CDATA[Session.p_oCallLegB.strBackupRequestUri = Session.f_strBackupSoftswitch;]]></script>
          </scripts>
        </action>
        <action id="83" plug-in="Pactolus.Sleep.1" ><?xtml-editor x=2211 y=382 ?>
          <!--1 sec-->
          <sleep xmlns="urn:www.pactolus.com:xtml:application" duration="1"/>
          <results >
            <result name="Default" link="57" stubbed="1"/>
            <result name="f_bGSXOn" link="84" stubbed="0" >f_bGSXOn == true</result>
            <result name="f_bPhoneOn" link="87" stubbed="0" >f_bPhoneOn == true</result>
          </results>
          <scripts >
            <script language="javascript" timing="last" ><![CDATA[if(1 == Result.id) {

	Server.logInfo("WARNING: THRESHOLD PROMPT WAS PLAYED, BUT APP DID NOT SET GSX REINVITE TIMERS OR CALL LEG SESSION TIMERS.");

}]]></script>
          </scripts>
        </action>
        <action id="84" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=2484 y=375 ?>
          <!--StartTimer - p_oTimerGSXA-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="1" library="" >
            <parameter >p_oTimerGSXA</parameter>
          </function>
          <results >
            <result name="Default" link="85" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.p_oTimerGSXA.lSleepTime = Session.f_lSleepTime;]]></script>
          </scripts>
        </action>
        <action id="85" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=2714 y=375 ?>
          <!--StartTimer - p_oTimerGSXB-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="1" library="" >
            <parameter >p_oTimerGSXB</parameter>
          </function>
          <results >
            <result name="Default" link="57" stubbed="1"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.p_oTimerGSXB.lSleepTime = Session.f_lSleepTimeB;]]></script>
          </scripts>
        </action>
        <action id="86" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=2731 y=491 ?>
          <!--StartTimer - p_oTimerPhoneB-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="1" library="" >
            <parameter >p_oTimerPhoneB</parameter>
          </function>
          <results >
            <result name="Default" link="57" stubbed="1"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.p_oTimerPhoneB.lSleepTime = Session.f_lSleepTimeB;]]></script>
          </scripts>
        </action>
        <action id="87" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=2499 y=491 ?>
          <!--StartTimer - p_oTimerPhoneA-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="1" library="" >
            <parameter >p_oTimerPhoneA</parameter>
          </function>
          <results >
            <result name="Default" link="86" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.p_oTimerPhoneA.lSleepTime = Session.f_lSleepTime;]]></script>
          </scripts>
        </action>
        <action id="88" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=1110 y=954 ?>
          <!--oAPI.nDisconnectPrompt-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="f_oMS.strConnectionId" endpoint="f_oMS.strEndPoint" callid="f_oMS.strCallId" repeat="1" timeout="30" ms-type="f_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="url" >p_oAPI.strDisconnectPrompt</audio>
          </play>
          <results >
            <result name="Default" link="80" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="89" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=1621 y=1004 ?>
          <!--f_nHANGUP_B-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nHANGUP_B"/>
        </action>
        <action id="90" plug-in="Pactolus.Branch.1" ><?xtml-editor x=1320 y=267 ?>
          <results >
            <result name="Default" link="70" stubbed="0"/>
            <result name="bSuppressOnHold" link="72" stubbed="1" >p_oAPI.bSuppressOnHold == true</result>
          </results>
        </action>
        <action id="91" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=687 y=925 ?>
          <!--outdial from MS-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;MSOutdialParty&quot;" return="f_nReturnCode" external-function="1" library="lib_mediaserver.xml" >
            <parameter >p_oCallLegB</parameter>
            <parameter >f_oMS2</parameter>
            <parameter >p_strContact</parameter>
          </function>
          <results >
            <result name="Default" link="22" stubbed="1"/>
            <result name="Success" link="75" stubbed="0" >f_nReturnCode == s_sSUCCESS</result>
            <result name="B Leg Hangup" link="22" stubbed="1" >f_nReturnCode == -2</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[js_initMS(Session.f_oMS2, Session.s_strMSType);]]></script>
            <script language="javascript" timing="last" ><![CDATA[if(1 == Result.id) {
	Session.p_oAPI.nCallTerminationReason = 4;
	Session.p_oAPI.nSessionTerminationReason = 12;
	Server.logError("ERROR outdialing B leg to media server. Session will end.");

} else if(3 == Result.id) {

	Session.g_oAPI.nCallTerminationReason = 2;
	Session.g_oAPI.nSessionTerminationReason = 7;
	Server.logInfo("Could not connect B leg to MS because A leg has hung up. Session will end.");

}]]></script>
          </scripts>
        </action>
        <action id="92" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=1842 y=516 ?>
          <!--Delete MS connection for B Leg-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;DeleteMSConnection&quot;" return="" external-function="1" library="lib_mediaserver.xml" >
            <parameter >f_oMS2</parameter>
          </function>
          <results >
            <result name="Default" link="82" stubbed="0"/>
          </results>
        </action>
        <action id="93" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=1404 y=1084 ?>
          <!--Delete MS connection for B Leg-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;DeleteMSConnection&quot;" return="" external-function="1" library="lib_mediaserver.xml" >
            <parameter >f_oMS2</parameter>
          </function>
          <results >
            <result name="Default" link="89" stubbed="0"/>
          </results>
        </action>
        <action id="94" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=677 y=1890 ?>
          <!--592: To continue this call ... press 1-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="f_oMS.strConnectionId" endpoint="f_oMS.strEndPoint" callid="f_oMS.strCallId" repeat="1" timeout="30" ms-type="f_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="&quot;(x)&quot;" language="p_oAPI.strLanguage" digits="f_strDigit" retry-count="0" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="silence" >1</audio>
            <audio type="index" >592</audio>
            <audio type="index" >311</audio>
            <audio type="index" >911</audio>
            <audio type="index" >312</audio>
            <timeout-prompt type="index" >552</timeout-prompt>
          </play>
          <results >
            <result name="Default" link="97" stubbed="0"/>
            <result name="Success" link="95" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[js_enable_event();]]></script>
          </scripts>
        </action>
        <action id="95" plug-in="Pactolus.Branch.1" ><?xtml-editor x=925 y=2058 ?>
          <!--Extend call?-->
          <results >
            <result name="Default" link="97" stubbed="0"/>
            <result name="conitnue the call" link="103" stubbed="0" >f_strDigit match "1"</result>
            <result name="End the call" link="102" stubbed="0" >f_strDigit match "2"</result>
          </results>
        </action>
        <action id="97" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=931 y=1816 ?>
          <!--Invalid entry-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="f_oMS.strConnectionId" endpoint="f_oMS.strEndPoint" callid="f_oMS.strCallId" repeat="1" timeout="" ms-type="f_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="silence" >1</audio>
            <audio type="index" >337</audio>
          </play>
          <results >
            <result name="Default" link="94" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
            <result name="max retry exceeded" link="102" stubbed="0" >f_nRetries &gt;= 2</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_nRetries++;]]></script>
          </scripts>
        </action>
        <action id="98" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=1388 y=1900 ?>
          <!--delete MS connection-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;DeleteMSConnection&quot;" return="" external-function="1" library="" >
            <parameter >f_oMS</parameter>
          </function>
          <results >
            <result name="Default" link="99" stubbed="0"/>
          </results>
        </action>
        <action id="99" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=1403 y=2083 ?>
          <!--Delete MS connection for B Leg-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;DeleteMSConnection&quot;" return="" external-function="1" library="lib_mediaserver.xml" >
            <parameter >f_oMS2</parameter>
          </function>
          <results >
            <result name="Default" link="22" stubbed="1"/>
          </results>
        </action>
        <action id="100" plug-in="Pactolus.Branch.1" ><?xtml-editor x=126 y=973 ?>
          <results >
            <result name="Default" link="51" stubbed="0"/>
            <result name="Long Call Interval interruption" link="94" stubbed="1" >p_oAPI.bLongCallIntervalTimerFlag == true</result>
          </results>
          <scripts >
            <script language="javascript" timing="last" ><![CDATA[if(Result.id == 2) {
	Session.f_oMS = Session.p_oConfMS;
}]]></script>
          </scripts>
        </action>
        <action id="102" plug-in="Pactolus.Branch.1" ><?xtml-editor x=1216 y=1805 ?>
          <results >
            <result name="Default" link="98" stubbed="0"/>
            <result name="A in conf?" link="22" stubbed="1" >p_oConfMS.bCurrentlyInConf == true</result>
          </results>
        </action>
        <action id="103" plug-in="Pactolus.Branch.1" ><?xtml-editor x=1184 y=2169 ?>
          <results >
            <result name="Default" link="81" stubbed="1"/>
            <result name="A in conf?" link="57" stubbed="1" >p_oConfMS.bCurrentlyInConf == true</result>
          </results>
        </action>
        <action id="104" plug-in="Pactolus.Branch.1" ><?xtml-editor x=648 y=786 ?>
          <results >
            <result name="Default" link="75" stubbed="0"/>
            <result name="bSuppressOnHold" link="91" stubbed="0" >p_oAPI.bSuppressOnHold == true</result>
          </results>
        </action>
        <action id="105" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=2143 y=567 ?>
          <!--f_nBLegError-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nB_LEG_ERROR"/>
        </action>
        <action id="106" plug-in="Pactolus.Branch.1" ><?xtml-editor x=881 y=464 ?>
          <!--Are we playing the warnings as a tone?-->
          <results >
            <result name="Default" link="76" stubbed="0"/>
            <result name="play warnings as a tone" link="107" stubbed="0" >p_oAPI.strWarningAsToneFlag match "T"</result>
          </results>
        </action>
        <action id="107" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=1184 y=380 ?>
          <!--play warning threshold as a tone-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="f_oMS.strConnectionId" endpoint="f_oMS.strEndPoint" callid="f_oMS.strCallId" repeat="1" timeout="30" ms-type="f_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >226</audio>
          </play>
          <results >
            <result name="Default" link="81" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[if(Session.p_oPrompts.nTime == 0) {

	Session.p_oPrompts.nTime = Session.p_nPrompt;

}]]></script>
          </scripts>
        </action>
      </actions>
    </function>
    <function name="PlayTimeAvailable" start="1" event="PlayTimeAvailable" returns="i4" >
      <parameters >
        <parameter name="p_nSecondsAnnounce" type="i4"/>
        <parameter name="p_oMS" type="object"/>
        <parameter name="p_strLanguage" type="string"/>
      </parameters>
      <local-vars >
        <var name="f_nMinsAvailable" type="i4" >0</var>
        <var name="f_nSecsAvailable" type="i4" >0</var>
        <var name="f_nMinsPrompt" type="i4" >0</var>
        <var name="f_nSecsPrompt" type="i4" >0</var>
        <var name="f_nTIMEOUT" type="i4" >10</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.Branch.1" ><?xtml-editor x=82 y=321 ?>
          <!--calculation mins and secs-->
          <results >
            <result name="Default" link="2" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_nMinsAvailable = Session.p_nSecondsAnnounce / 60;

if (Session.f_nMinsAvailable > 1)

{

	Session.f_nMinsPrompt = 309; //minutes

}

else

{

	Session.f_nMinsPrompt = 308; //minute

}

Session.f_nSecsAvailable = Session.p_nSecondsAnnounce % 60;

if (Session.f_nSecsAvailable > 1)

{

	Session.f_nSecsPrompt = 46; //seconds

}

else

{

	Session.f_nSecsPrompt = 54; //second

}]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Pactolus.Branch.1" ><?xtml-editor x=347 y=314 ?>
          <!--minutes available-->
          <results >
            <result name="Default" link="3" stubbed="0"/>
            <result name="0 minute" link="10" stubbed="0" >f_nMinsAvailable == 0</result>
            <result name="1 or more minutes" link="5" stubbed="0" >f_nMinsAvailable &gt;= 1</result>
          </results>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=594 y=212 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value=""/>
        </action>
        <action id="5" plug-in="Pactolus.Branch.1" ><?xtml-editor x=676 y=510 ?>
          <!--seconds available-->
          <results >
            <result name="Default" link="11" stubbed="0"/>
            <result name="0 second" link="13" stubbed="0" >f_nSecsAvailable == 0</result>
          </results>
        </action>
        <action id="7" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=901 y=309 ?>
          <!--Seconds prompt-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="f_nTIMEOUT" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >515</audio>
            <audio type="number" >f_nSecsAvailable</audio>
            <audio type="index" >f_nSecsPrompt</audio>
            <audio type="index" >516</audio>
          </play>
          <results >
            <result name="Default" link="3" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="10" plug-in="Pactolus.Branch.1" ><?xtml-editor x=660 y=313 ?>
          <!--seconds available-->
          <results >
            <result name="Default" link="7" stubbed="0"/>
            <result name="0 second" link="3" stubbed="1" >f_nSecsAvailable == 0</result>
          </results>
        </action>
        <action id="11" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=934 y=497 ?>
          <!--Minutes and Seconds prompts-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="f_nTIMEOUT" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >515</audio>
            <audio type="number" >f_nMinsAvailable</audio>
            <audio type="index" >f_nMinsPrompt</audio>
            <audio type="index" >52</audio>
            <audio type="number" >f_nSecsAvailable</audio>
            <audio type="index" >f_nSecsPrompt</audio>
            <audio type="index" >516</audio>
          </play>
          <results >
            <result name="Default" link="3" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="13" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=952 y=663 ?>
          <!--Minutes prompt-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="f_nTIMEOUT" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >515</audio>
            <audio type="number" >f_nMinsAvailable</audio>
            <audio type="index" >f_nMinsPrompt</audio>
            <audio type="index" >516</audio>
          </play>
          <results >
            <result name="Default" link="3" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
      </actions>
    </function>
    <function name="ProcessCSRAttempt" start="1" event="ProcessCSRAttempt" returns="i4" >
      <parameters >
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oACD" type="object" pass="byref"/>
        <parameter name="p_nPleaseHold" type="i4"/>
        <parameter name="p_nNotAllowed" type="i4"/>
        <parameter name="p_oMS" type="object" pass="byref"/>
        <parameter name="p_oCSR_REASONS" type="object"/>
        <parameter name="p_nTIME_OUT" type="i4"/>
      </parameters>
      <local-vars >
        <var name="f_nMAKE_CONNECTION" type="i4" >1</var>
        <var name="f_nROUTE_TO_CSR" type="i4" >2</var>
        <var name="f_nRC" type="i4" >-1</var>
        <var name="f_nEND_CALL" type="i4" >3</var>
        <var name="f_nDO_NOTHING" type="i4" >0</var>
        <var name="f_bOptionNotAllowed" type="boolean" >0</var>
        <var name="f_bDialCSRNum" type="boolean" >0</var>
        <var name="f_bRouteToACD" type="boolean" >0</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.Branch.1" ><?xtml-editor x=18 y=17 ?>
          <!--ACD on?-->
          <results >
            <result name="Default" link="7" stubbed="0"/>
            <result name="ACD " link="6" stubbed="0" >f_bRouteToACD == true</result>
            <result name="CSR phone" link="5" stubbed="0" >f_bDialCSRNum == true</result>
            <result name="Zero Out" link="2" stubbed="0" >f_bOptionNotAllowed == true</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("Session.p_oACD.nCSRRouteReasonCode: " + Session.p_oACD.nCSRRouteReasonCode);
Server.logInfo("Session.p_oAPI.strCustomerServicePhone: " + Session.p_oACD.strCustomerServicePhone);
Server.logInfo("Session.p_oACD.strEnableFlag: " + Session.p_oACD.strEnableFlag);
Server.logInfo("p_oACD.strPinZeroOut " + Session.p_oACD.strPinZeroOut);
Server.logInfo("p_oACD.strLanguageMenuZeroOut " + Session.p_oACD.strLanguageMenuZeroOut);
Server.logInfo("p_oACD.strMainMenuZeroOut " + Session.p_oACD.strMainMenuZeroOut);
Server.logInfo("p_oACD.strPinMaxTimeouts " + Session.p_oACD.strPinMaxTimeouts);
Server.logInfo("p_oACD.strPinMaxInvalids " + Session.p_oACD.strPinMaxInvalids);
Server.logInfo("p_oACD.strMainMenuMaxInvalids " + Session.p_oACD.strMainMenuMaxInvalids);
Server.logInfo("p_oACD.strLanguageMenuMaxInvalids " + Session.p_oACD.strLanguageMenuMaxInvalids);
Server.logInfo("p_oACD.strDestMaxInvalids " + Session.p_oACD.strDestMaxInvalids);
Server.logInfo("p_oACD.strDestMaxTimeouts " + Session.p_oACD.strDestMaxTimeouts);
Server.logInfo("p_oACD.strDestZeroOut " + Session.p_oACD.strDestZeroOut);
Server.logInfo("p_oACD.strMainMenuMaxTimeouts " + Session.p_oACD.strMainMenuMaxTimeouts);
Server.logInfo("p_oACD.strLanguageMenuMaxTimeouts " + Session.p_oACD.strLanguageMenuMaxTimeouts);


if(Session.p_oACD.nCSRRouteReasonCode == Session.p_oCSR_REASONS.nLanguageMenuZeroOut) {

	if("T" == Session.p_oACD.strLanguageMenuZeroOut) {
		if("T" == Session.p_oACD.strEnableFlag) {
			Session.f_bRouteToACD = true;
		} else if(Session.p_oAPI.strCustomerServicePhone != "" || Session.p_oAPI.strThirdPartyOutdialNumber != "") {
			Session.f_bDialCSRNum = true;
		}			
	} else {
		Session.f_bOptionNotAllowed = true;
	}

} else if(Session.p_oACD.nCSRRouteReasonCode == Session.p_oCSR_REASONS.nLanguageMenuMaxInvalids) {
	
	if("T" == Session.p_oACD.strLanguageMenuMaxInvalids) {
		if("T" == Session.p_oACD.strEnableFlag) {
			Session.f_bRouteToACD = true;
		} else if(Session.p_oAPI.strCustomerServicePhone != "" || Session.p_oAPI.strThirdPartyOutdialNumber != "") {
			Session.f_bDialCSRNum = true;
		}			
	} 
	
} else if(Session.p_oACD.nCSRRouteReasonCode == Session.p_oCSR_REASONS.nLanguageMenuMaxTimeouts) {
	
	if("T" == Session.p_oACD.strLanguageMenuMaxTimeouts) {
		if("T" == Session.p_oACD.strEnableFlag) {
			Session.f_bRouteToACD = true;
		} else if(Session.p_oAPI.strCustomerServicePhone != "" || Session.p_oAPI.strThirdPartyOutdialNumber != "") {
			Session.f_bDialCSRNum = true;
		}			
	} 
	
} else if(Session.p_oACD.nCSRRouteReasonCode == Session.p_oCSR_REASONS.nPinZeroOut) {

	if("T" == Session.p_oACD.strPinZeroOut) {
		if("T" == Session.p_oACD.strEnableFlag) {
			Session.f_bRouteToACD = true;
		} else if(Session.p_oAPI.strCustomerServicePhone != "" || Session.p_oAPI.strThirdPartyOutdialNumber != "") {
			Session.f_bDialCSRNum = true;
		}			
	} else {
		Session.f_bOptionNotAllowed = true;
	}

} else if(Session.p_oACD.nCSRRouteReasonCode == Session.p_oCSR_REASONS.nPinMaxInvalids) {

	if("T" == Session.p_oACD.strPinMaxInvalids) {
		if("T" == Session.p_oACD.strEnableFlag) {
			Session.f_bRouteToACD = true;
		} else if(Session.p_oAPI.strCustomerServicePhone != "" || Session.p_oAPI.strThirdPartyOutdialNumber != "") {
			Session.f_bDialCSRNum = true;
		} 
	}		
	
} else if(Session.p_oACD.nCSRRouteReasonCode == Session.p_oCSR_REASONS.nPinMaxTimeouts) {
	
	if("T" == Session.p_oACD.strPinMaxTimeouts) {

		if("T" == Session.p_oACD.strEnableFlag) {
			Session.f_bRouteToACD = true;
		} else if(Session.p_oAPI.strCustomerServicePhone != "" || Session.p_oAPI.strThirdPartyOutdialNumber != "") {
			Session.f_bDialCSRNum = true;
		} 
	}		
	
} else if(Session.p_oACD.nCSRRouteReasonCode == Session.p_oCSR_REASONS.nDestZeroOut) {
	
	if("T" == Session.p_oACD.strDestZeroOut) {
		if("T" == Session.p_oACD.strEnableFlag) {
			Session.f_bRouteToACD = true;
		} else if(Session.p_oAPI.strCustomerServicePhone != "" || Session.p_oAPI.strThirdPartyOutdialNumber != "") {
			Session.f_bDialCSRNum = true;
		}			
	} else {
		Session.f_bOptionNotAllowed = true;
	}

} else if(Session.p_oACD.nCSRRouteReasonCode == Session.p_oCSR_REASONS.nDestMaxTimeouts) {
	
	if("T" == Session.p_oACD.strDestMaxInvalids) {
		if("T" == Session.p_oACD.strEnableFlag) {
			Session.f_bRouteToACD = true;
		} else if(Session.p_oAPI.strCustomerServicePhone != "" || Session.p_oAPI.strThirdPartyOutdialNumber != "") {
			Session.f_bDialCSRNum = true;
		} 
	}		
	
} else if(Session.p_oACD.nCSRRouteReasonCode == Session.p_oCSR_REASONS.nDestMaxInvalids) {
	
	if("T" == Session.p_oACD.strDestMaxTimeouts) {
		if("T" == Session.p_oACD.strEnableFlag) {
			Session.f_bRouteToACD = true;
		} else if(Session.p_oAPI.strCustomerServicePhone != "" || Session.p_oAPI.strThirdPartyOutdialNumber != "") {
			Session.f_bDialCSRNum = true;
		} 
	}		
	
} else if(Session.p_oACD.nCSRRouteReasonCode == Session.p_oCSR_REASONS.nMainMenuZeroOut) {
	
	if("T" == Session.p_oACD.strMainMenuZeroOut) {
		if("T" == Session.p_oACD.strEnableFlag) {
			Session.f_bRouteToACD = true;
		} else if(Session.p_oAPI.strCustomerServicePhone != "" || Session.p_oAPI.strThirdPartyOutdialNumber != "") {
			Session.f_bDialCSRNum = true;
		}			
	} else {
		Session.f_bOptionNotAllowed = true;
	}

} else if(Session.p_oACD.nCSRRouteReasonCode == Session.p_oCSR_REASONS.nMainMenuMaxTimeouts) {
	
	if("T" == Session.p_oACD.strMainMenuMaxInvalids) {
		if("T" == Session.p_oACD.strEnableFlag) {
			Session.f_bRouteToACD = true;
		} else if(Session.p_oAPI.strCustomerServicePhone != "" || Session.p_oAPI.strThirdPartyOutdialNumber != "") {
			Session.f_bDialCSRNum = true;
		} 
	}		
	
} else if(Session.p_oACD.nCSRRouteReasonCode == Session.p_oCSR_REASONS.nMainMenuMaxInvalids) {
	
	if("T" == Session.p_oACD.strMainMenuMaxTimeouts) {
		if("T" == Session.p_oACD.strEnableFlag) {
			Session.f_bRouteToACD = true;
		} else if(Session.p_oAPI.strCustomerServicePhone != "" || Session.p_oAPI.strThirdPartyOutdialNumber != "") {
			Session.f_bDialCSRNum = true;
		} 
	}		

}	]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=299 y=590 ?>
          <!--option not allow-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="p_nTIME_OUT" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="0" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >p_nNotAllowed</audio>
          </play>
          <results >
            <result name="Default" link="8" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_nRC = Session.f_nDO_NOTHING;]]></script>
          </scripts>
        </action>
        <action id="5" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=311 y=422 ?>
          <!--please hold for csr-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="p_nTIME_OUT" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="0" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >p_nPleaseHold</audio>
          </play>
          <results >
            <result name="Default" link="8" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[
if(Session.p_oAPI.strThirdPartyOutdialNumber != "") {

	Session.p_oAPI.strDestinationNumber = Session.p_oAPI.strThirdPartyOutdialNumber;
	Session.p_oAPI.strOutdialDestNumber = Session.p_oAPI.strThirdPartyOutdialNumber;

} else {
	Session.p_oAPI.strDestinationNumber = Session.p_oAPI.strCustomerServicePhone;
	Session.p_oAPI.strOutdialDestNumber = Session.p_oAPI.strCustomerServicePhone;
}

Session.p_oAPI.strOutdialOperatorFlag = "T";
Session.f_nRC = Session.f_nMAKE_CONNECTION;

]]></script>
          </scripts>
        </action>
        <action id="6" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=351 y=202 ?>
          <!--please hold for csr-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="p_nTIME_OUT" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="0" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >p_nPleaseHold</audio>
          </play>
          <results >
            <result name="Default" link="8" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_nRC = Session.f_nROUTE_TO_CSR;

]]></script>
          </scripts>
        </action>
        <action id="7" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=399 y=45 ?>
          <!--"PlayPromptAndHangup"-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;PlayPromptAndHangup&quot;" return="" external-function="1" library=""/>
          <results >
            <result name="Default" link="8" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_nRC = Session.f_nEND_CALL;]]></script>
          </scripts>
        </action>
        <action id="8" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=838 y=343 ?>
          <!--f_nRC-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nRC"/>
        </action>
      </actions>
    </function>
    <function name="MoveFromMainConfToSubConf" start="1" event="MoveFromMainConfToSubConf" returns="i4" >
      <parameters >
        <parameter name="p_bCreateNewConference" type="boolean"/>
        <parameter name="p_oConferenceMS" type="object" pass="byref"/>
        <parameter name="p_oSubConferenceMS" type="object" pass="byref"/>
        <parameter name="p_oCallLeg" type="object" pass="byref"/>
        <parameter name="p_strContact" type="string"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-1</var>
        <var name="f_nSUCCESS" type="i4" >0</var>
        <var name="f_nFAILURE" type="i4" >-1</var>
        <var name="f_nCALLERHUNGUP" type="i4" >-2</var>
        <var name="nExceedMaxFullDuplex" type="i4" >-3</var>
        <var name="nEndCall" type="i4" >-4</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=144 y=136 ?>
          <!--Remove member from conference-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;RemoveMemberFromConference&quot;" return="f_nReturnCode" external-function="1" library="" >
            <parameter >p_oConferenceMS</parameter>
          </function>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="SUCCESS" link="5" stubbed="0" >f_nReturnCode == f_nSUCCESS</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("INFO: MoveFromMainConfToSubConf");

Server.logInfo("p_bCreateNewConference : " + Session.p_bCreateNewConference);

Server.logInfo("p_oConferenceMS.strConferenceId : " + Session.p_oConferenceMS.strConferenceId);

Server.logInfo("p_oConferenceMS.strCallId : " + Session.p_oConferenceMS.strCallId);

Server.logInfo("p_oConferenceMS.strEndPoint : " + Session.p_oConferenceMS.strEndPoint);

Server.logInfo("p_oConferenceMS.strConnectionId : " + Session.p_oConferenceMS.strConnectionId);

Server.logInfo("p_oConferenceMS.bPersistentFlag : " + Session.p_oConferenceMS.bPersistentFlag);





Server.logInfo("p_oSubConferenceMS.strConferenceId : " + Session.p_oSubConferenceMS.strConferenceId);

Server.logInfo("p_oSubConferenceMS.strCallId : " + Session.p_oSubConferenceMS.strCallId);

Server.logInfo("p_oSubConferenceMS.strEndPoint : " + Session.p_oSubConferenceMS.strEndPoint);

Server.logInfo("p_oSubConferenceMS.strConnectionId : " + Session.p_oSubConferenceMS.strConnectionId);

Server.logInfo("p_oSubConferenceMS.bPersistentFlag : " + Session.p_oSubConferenceMS.bPersistentFlag);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=377 y=136 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
        </action>
        <action id="5" plug-in="Pactolus.Branch.1" ><?xtml-editor x=637 y=259 ?>
          <!--create new conf?-->
          <results >
            <result name="Default" link="9" stubbed="1"/>
            <result name="p_bCreateNewConference" link="6" stubbed="0" >p_bCreateNewConference == true</result>
          </results>
        </action>
        <action id="6" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=879 y=254 ?>
          <!--Create Sub Conference-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;CreateConference&quot;" return="f_nReturnCode" external-function="1" library="lib_mediaserver.xml" >
            <parameter >p_oSubConferenceMS</parameter>
          </function>
          <results >
            <result name="Default" link="7" stubbed="0"/>
            <result name="SUCCESS" link="9" stubbed="0" >f_nReturnCode == f_nSUCCESS</result>
          </results>
        </action>
        <action id="7" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=1106 y=251 ?>
          <!--put back to Main conference-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;NewAddMemberToConference&quot;" return="f_nReturnCode" external-function="1" library="" >
            <parameter >p_oConferenceMS</parameter>
            <parameter >p_oCallLeg</parameter>
            <parameter >p_strContact</parameter>
          </function>
          <results >
            <result name="Default" link="14" stubbed="1"/>
            <result name="FAILURE" link="14" stubbed="0" >f_nReturnCode == f_nFAILURE</result>
            <result name="CALLER HUNGUP" link="8" stubbed="0" >f_nReturnCode == f_nCALLERHUNGUP</result>
            <result name="ExceedMaxFullDuplex" link="13" stubbed="0" >f_nReturnCode == nExceedMaxFullDuplex</result>
            <result name="SUCCESS" link="2" stubbed="1" >f_nReturnCode == f_nSUCCESS</result>
          </results>
        </action>
        <action id="8" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=1371 y=307 ?>
          <!--f_nCALLERHUNGUP-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nCALLERHUNGUP"/>
        </action>
        <action id="9" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=136 y=476 ?>
          <!--AddMemberToTempConference-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;NewAddMemberToConference&quot;" return="f_nReturnCode" external-function="1" library="lib_mediaserver.xml" >
            <parameter >p_oSubConferenceMS</parameter>
            <parameter >p_oCallLeg</parameter>
            <parameter >p_strContact</parameter>
          </function>
          <results >
            <result name="Default" link="10" stubbed="0"/>
            <result name="FAILURE" link="7" stubbed="1" >f_nReturnCode == f_nFAILURE</result>
            <result name="CALLERHUNGUP" link="8" stubbed="1" >f_nReturnCode == f_nCALLERHUNGUP</result>
          </results>
        </action>
        <action id="10" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=389 y=454 ?>
          <!--f_nSUCCESS-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nSUCCESS"/>
        </action>
        <action id="11" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=404 y=535 ?>
          <!--"DeleteConference"-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;DeleteConference&quot;" return="f_nReturnCode" external-function="1" library="lib_mediaserver.xml" >
            <parameter >p_oSubConferenceMS</parameter>
          </function>
          <results >
            <result name="Default" link="7" stubbed="1"/>
          </results>
        </action>
        <action id="12" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=423 y=635 ?>
          <!--"DeleteConference"-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;DeleteConference&quot;" return="f_nReturnCode" external-function="1" library="lib_mediaserver.xml" >
            <parameter >p_oSubConferenceMS</parameter>
          </function>
          <results >
            <result name="Default" link="8" stubbed="1"/>
          </results>
        </action>
        <action id="13" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=1385 y=428 ?>
          <!--nExceedMaxFullDuplex-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nExceedMaxFullDuplex"/>
        </action>
        <action id="14" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=1339 y=156 ?>
          <!--nEndCall-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nEndCall"/>
        </action>
      </actions>
    </function>
    <function name="MoveFromSubConfToMainConf" start="1" event="MoveFromSubConfToMainConf" returns="i4" >
      <parameters >
        <parameter name="p_oSubConferenceMS" type="object" pass="byref"/>
        <parameter name="p_oConferenceMS" type="object" pass="byref"/>
        <parameter name="p_oCallLeg" type="object" pass="byref"/>
        <parameter name="p_strContact" type="string"/>
        <parameter name="p_strDeleteSubConf" type="string"/>
      </parameters>
      <local-vars >
        <var name="f_nReturnCode" type="i4" >-1</var>
        <var name="f_nSUCCESS" type="i4" >0</var>
        <var name="f_nFAILURE" type="i4" >-1</var>
        <var name="f_nCALLERHUNGUP" type="i4" >-2</var>
        <var name="nExceedMaxFullDuplex" type="i4" >-3</var>
        <var name="nEndCall" type="i4" >-4</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=105 y=126 ?>
          <!--Remove member from conference-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;RemoveMemberFromConference&quot;" return="f_nReturnCode" external-function="1" library="" >
            <parameter >p_oSubConferenceMS</parameter>
          </function>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="SUCCESS" link="4" stubbed="0" >f_nReturnCode == f_nSUCCESS</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("INFO: MoveFromSubConfToMainConf");

Server.logInfo("p_oConferenceMS.strConferenceId : " + Session.p_oConferenceMS.strConferenceId);

Server.logInfo("p_oConferenceMS.strCallId : " + Session.p_oConferenceMS.strCallId);

Server.logInfo("p_oConferenceMS.strEndPoint : " + Session.p_oConferenceMS.strEndPoint);

Server.logInfo("p_oConferenceMS.strConnectionId : " + Session.p_oConferenceMS.strConnectionId);

Server.logInfo("p_oSubConferenceMS.strConferenceId : " + Session.p_oSubConferenceMS.strConferenceId);

Server.logInfo("p_oSubConferenceMS.strCallId : " + Session.p_oSubConferenceMS.strCallId);

Server.logInfo("p_oSubConferenceMS.strEndPoint : " + Session.p_oSubConferenceMS.strEndPoint);

Server.logInfo("p_oSubConferenceMS.strConnectionId : " + Session.p_oSubConferenceMS.strConnectionId);]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=338 y=126 ?>
          <!--f_nFAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nFAILURE"/>
        </action>
        <action id="4" plug-in="Pactolus.Branch.1" ><?xtml-editor x=606 y=243 ?>
          <!--delete sub conf?-->
          <results >
            <result name="Default" link="6" stubbed="1"/>
            <result name="p_strDeleteSubConf==&quot;T&quot;" link="5" stubbed="0" >p_strDeleteSubConf match "T"</result>
          </results>
        </action>
        <action id="5" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=843 y=239 ?>
          <!--"DeleteConference"-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;DeleteConference&quot;" return="f_nReturnCode" external-function="1" library="lib_mediaserver.xml" >
            <parameter >p_oSubConferenceMS</parameter>
          </function>
          <results >
            <result name="Default" link="6" stubbed="0"/>
          </results>
        </action>
        <action id="6" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=1055 y=239 ?>
          <!--AddMemberToMainConference-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;NewAddMemberToConference&quot;" return="f_nReturnCode" external-function="1" library="lib_mediaserver.xml" >
            <parameter >p_oConferenceMS</parameter>
            <parameter >p_oCallLeg</parameter>
            <parameter >p_strContact</parameter>
          </function>
          <results >
            <result name="Default" link="10" stubbed="1"/>
            <result name="FAILURE" link="10" stubbed="0" >f_nReturnCode == f_nFAILURE</result>
            <result name="CALLERHUNGUP" link="7" stubbed="0" >f_nReturnCode == f_nCALLERHUNGUP</result>
            <result name="ExceedMaxFullDuplex" link="9" stubbed="0" >f_nReturnCode == nExceedMaxFullDuplex</result>
            <result name="SUCCESS" link="8" stubbed="0" >f_nReturnCode == f_nSUCCESS</result>
          </results>
        </action>
        <action id="7" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=1314 y=326 ?>
          <!--f_nCALLERHUNGUP-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nCALLERHUNGUP"/>
        </action>
        <action id="8" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=1320 y=584 ?>
          <!--f_nSUCCESS-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nSUCCESS"/>
        </action>
        <action id="9" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=1321 y=451 ?>
          <!--nExceedMaxFullDuplex-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nExceedMaxFullDuplex"/>
        </action>
        <action id="10" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=1300 y=202 ?>
          <!--nEndCall-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nEndCall"/>
        </action>
      </actions>
    </function>
    <function name="StopBLegTimers" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="p_oTimerPhoneB" type="object" pass="byref"/>
        <parameter name="p_oTimerGSXB" type="object" pass="byref"/>
      </parameters>
      <actions >
        <action id="1" plug-in="Pactolus.Branch.1" ><?xtml-editor x=20 y=20 ?>
          <results >
            <result name="Default" link="3" stubbed="0"/>
            <result name="p_oTimerPhoneB.bOn" link="2" stubbed="0" >p_oTimerPhoneB.bOn == true</result>
          </results>
        </action>
        <action id="2" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=166 y=171 ?>
          <!--StopOneTimer: p_oTimerPhoneB-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StopOneTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerPhoneB</parameter>
          </function>
          <results >
            <result name="Default" link="3" stubbed="0"/>
          </results>
        </action>
        <action id="3" plug-in="Pactolus.Branch.1" ><?xtml-editor x=369 y=40 ?>
          <results >
            <result name="Default" link="5" stubbed="0"/>
            <result name="p_oTimerGSXB.bOn" link="4" stubbed="0" >p_oTimerGSXB.bOn == true</result>
          </results>
        </action>
        <action id="4" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=550 y=175 ?>
          <!--StopOneTimer: p_oTimerGSXB-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StopOneTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerGSXB</parameter>
          </function>
          <results >
            <result name="Default" link="5" stubbed="0"/>
          </results>
        </action>
        <action id="5" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=682 y=43 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value="0"/>
        </action>
      </actions>
    </function>
    <function name="StartBLegTimers" start="6" event="" returns="i4" >
      <parameters >
        <parameter name="p_oCallLegB" type="object" pass="byref"/>
        <parameter name="p_strSessionTimerFlag" type="string"/>
      </parameters>
      <actions >
        <action id="6" plug-in="Pactolus.Branch.1" ><?xtml-editor x=39 y=53 ?>
          <!--session timer ON?-->
          <results >
            <result name="Default" link="9" stubbed="0"/>
            <result name="p_strSessionTimerFlag = T" link="7" stubbed="0" >p_strSessionTimerFlag match "T"</result>
            <result name="~GSXB.lSleepTime &gt; 0" link="10" stubbed="0" >p_oCallLegB.oTimerGSX.lSleepTime &gt; 0</result>
          </results>
          <scripts >
            <script language="javascript" timing="last" ><![CDATA[if(1 == Result.id) {

	Server.logInfo("Did not set GSX reinvite timers or call leg session timers.");

}]]></script>
          </scripts>
        </action>
        <action id="7" plug-in="Pactolus.Branch.1" ><?xtml-editor x=335 y=129 ?>
          <!--~LegB.nSessionTimer > 0-->
          <results >
            <result name="Default" link="9" stubbed="0"/>
            <result name="~LegB.nSessionTimer &gt; 0" link="8" stubbed="0" >p_oCallLegB.nSessionTimer &gt; 0</result>
          </results>
        </action>
        <action id="8" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=525 y=256 ?>
          <!--StartTimer - p_oTimerPhoneB-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="1" library="lib_utils.xml" >
            <parameter >p_oCallLegB.oTimer</parameter>
          </function>
          <results >
            <result name="Default" link="9" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.p_oTimerPhoneB.lSleepTime = Session.p_oCallLegB.nSessionTimer - Session.p_nSetUpDuration - 15;



if (Session.p_oTimerPhoneB.lSleepTime <= 0)

{

	Session.p_oTimerPhoneB.lSleepTime = Number(Session.g_oCallLegB.nSessionTimer) / 2;

}]]></script>
            <script language="javascript" timing="last" ><![CDATA[Session.p_oTimerPhoneB.lSleepTime = Number(Session.g_oCallLegB.nSessionTimer) / 2;]]></script>
          </scripts>
        </action>
        <action id="9" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=785 y=124 ?>
          <return xmlns="urn:www.pactolus.com:xtml:application" value="0"/>
        </action>
        <action id="10" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=234 y=348 ?>
          <!--StartTimer - p_oTimerGSXB-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="1" library="lib_utils.xml" >
            <parameter >p_oCallLegB.oTimerGSX</parameter>
          </function>
          <results >
            <result name="Default" link="9" stubbed="0"/>
          </results>
        </action>
      </actions>
    </function>
    <function name="ResetTimers" start="20" event="" returns="i4" >
      <parameters >
        <parameter name="p_oTimerThreshold1" type="object" pass="byref"/>
        <parameter name="p_oTimerThreshold2" type="object" pass="byref"/>
        <parameter name="p_oTimerThreshold3" type="object" pass="byref"/>
        <parameter name="p_oTimerMaxTime" type="object" pass="byref"/>
      </parameters>
      <actions >
        <action id="20" plug-in="Pactolus.Branch.1" ><?xtml-editor x=12 y=34 ?>
          <results >
            <result name="Default" link="21" stubbed="0"/>
            <result name="p_oTimerMaxTime.bOn" link="22" stubbed="0" >p_oTimerMaxTime.bOn == true</result>
          </results>
        </action>
        <action id="11" plug-in="Pactolus.Branch.1" ><?xtml-editor x=243 y=351 ?>
          <!--~1.nThresholdTime > 0-->
          <results >
            <result name="Default" link="13" stubbed="0"/>
            <result name="~1.nThresholdTime &gt; 0" link="12" stubbed="0" >p_oTimerMaxTime.lSleepTime &gt; p_oTimerThreshold1.nThresholdTime

AND p_oTimerThreshold1.nThresholdTime &gt; 0</result>
          </results>
        </action>
        <action id="12" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=322 y=500 ?>
          <!--StartTimer - p_oTimerThreshold1-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="1" library="" >
            <parameter >p_oTimerThreshold1</parameter>
          </function>
          <results >
            <result name="Default" link="13" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.p_oTimerThreshold1.lSleepTime = Session.p_oTimerMaxTime.lSleepTime - Session.p_oTimerThreshold1.nThresholdTime;



]]></script>
          </scripts>
        </action>
        <action id="13" plug-in="Pactolus.Branch.1" ><?xtml-editor x=485 y=358 ?>
          <!--~2.nThresholdTime > 0-->
          <results >
            <result name="Default" link="15" stubbed="0"/>
            <result name="~hold2.nThresholdTime&gt; 0" link="14" stubbed="0" >p_oTimerMaxTime.lSleepTime &gt; p_oTimerThreshold2.nThresholdTime

AND p_oTimerThreshold2.nThresholdTime &gt; 0</result>
          </results>
        </action>
        <action id="14" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=614 y=508 ?>
          <!--StartTimer - p_oTimerThreshold2-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="1" library="" >
            <parameter >p_oTimerThreshold2</parameter>
          </function>
          <results >
            <result name="Default" link="15" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.p_oTimerThreshold2.lSleepTime = Session.p_oTimerMaxTime.lSleepTime - Session.p_oTimerThreshold2.nThresholdTime;]]></script>
          </scripts>
        </action>
        <action id="15" plug-in="Pactolus.Branch.1" ><?xtml-editor x=759 y=353 ?>
          <!--~3.nThresholdTime > 0-->
          <results >
            <result name="Default" link="17" stubbed="1"/>
            <result name="~3.nThresholdTime &gt; 0" link="16" stubbed="0" >p_oTimerMaxTime.lSleepTime &gt; p_oTimerThreshold3.nThresholdTime

AND p_oTimerThreshold3.nThresholdTime &gt; 0</result>
          </results>
        </action>
        <action id="16" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=873 y=503 ?>
          <!--StartTimer - p_oTimerThreshold3-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="1" library="" >
            <parameter >p_oTimerThreshold3</parameter>
          </function>
          <results >
            <result name="Default" link="17" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.p_oTimerThreshold3.lSleepTime = Session.p_oTimerMaxTime.lSleepTime - Session.p_oTimerThreshold3.nThresholdTime;]]></script>
          </scripts>
        </action>
        <action id="17" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=48 y=739 ?>
          <!--0-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="0"/>
        </action>
        <action id="21" plug-in="Pactolus.Branch.1" ><?xtml-editor x=261 y=45 ?>
          <results >
            <result name="Default" link="24" stubbed="0"/>
            <result name="p_oTimerThreshold1.bOn" link="23" stubbed="0" >p_oTimerThreshold1.bOn == true</result>
          </results>
        </action>
        <action id="22" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=103 y=179 ?>
          <!--StopOneTimer: p_oTimerMaxTime-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StopOneTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerMaxTime</parameter>
          </function>
          <results >
            <result name="Default" link="21" stubbed="0"/>
          </results>
        </action>
        <action id="23" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=373 y=189 ?>
          <!--StopOneTimer: p_oTimerThreshold1-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StopOneTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerThreshold1</parameter>
          </function>
          <results >
            <result name="Default" link="24" stubbed="0"/>
          </results>
        </action>
        <action id="24" plug-in="Pactolus.Branch.1" ><?xtml-editor x=507 y=58 ?>
          <results >
            <result name="Default" link="26" stubbed="0"/>
            <result name="p_oTimerThreshold2.bOn" link="25" stubbed="0" >p_oTimerThreshold2.bOn == true</result>
          </results>
        </action>
        <action id="25" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=603 y=188 ?>
          <!--StopOneTimer: p_oTimerThreshold2-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StopOneTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerThreshold2</parameter>
          </function>
          <results >
            <result name="Default" link="26" stubbed="0"/>
          </results>
        </action>
        <action id="26" plug-in="Pactolus.Branch.1" ><?xtml-editor x=744 y=61 ?>
          <results >
            <result name="Default" link="11" stubbed="1"/>
            <result name="p_oTimerThreshold3.bOn" link="27" stubbed="0" >p_oTimerThreshold3.bOn == true</result>
          </results>
        </action>
        <action id="27" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=802 y=192 ?>
          <!--StopOneTimer: p_oTimerThreshold3-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StopOneTimer&quot;" return="" external-function="0" library="" >
            <parameter >p_oTimerThreshold3</parameter>
          </function>
          <results >
            <result name="Default" link="28" stubbed="0"/>
          </results>
        </action>
        <action id="28" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=8 y=349 ?>
          <!--StartTimer - p_oTimerMaxTime-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;StartTimer&quot;" return="" external-function="1" library="" >
            <parameter >p_oTimerMaxTime</parameter>
          </function>
          <results >
            <result name="Default" link="11" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[if(Session.p_oTimerMaxTime.lSleepTime > 4294967)

{

	Session.p_oTimerMaxTime.lSleepTime = 4294967;

}

]]></script>
          </scripts>
        </action>
      </actions>
    </function>
    <function name="IVRCallbackCollectNbr" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="oMS" type="object" pass="byref"/>
        <parameter name="strCallbackNbr" type="string" pass="byref"/>
        <parameter name="oAPI" type="object"/>
      </parameters>
      <local-vars >
        <var name="nTimeout" type="i4" >30</var>
        <var name="nNumRetries" type="i4" >0</var>
        <var name="nRETURN_INVALID_NBR" type="i4" >1</var>
        <var name="nRETURN_FATAL_ERROR" type="i4" >-1</var>
        <var name="nRETURN_SUCCESS" type="i4" >0</var>
        <var name="bValidNbr" type="boolean" >0</var>
        <var name="strTermDigit" type="string" ></var>
        <var name="strExtension" type="string" ></var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.CollectPlay.1" ><?xtml-editor x=33 y=37 ?>
          <!--Enter the callback number-->
          <collect-play xmlns="urn:www.pactolus.com:xtml:media" endpoint="oMS.strEndPoint" connection-id="oMS.strConnectionId" timeout="nTimeout" ms-type="oMS.strType" played-length="" digits="strCallbackNbr" terminating-char="strTermDigit" rc="" returns="" play-offset="" language="oAPI.strLanguage" retry-count="1" time-to-play="" interrupt="1" repeat="0" clear-digits="1" digit-map="&quot;(x.T)&quot;" fdt="100" idt="40" ict="16" terminating-digit="&quot;#&quot;" >
            <audio type="index" >285</audio>
          </collect-play>
          <results >
            <result name="Default" link="5" stubbed="1"/>
            <result name="Success" link="8" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
            <result name="No/Impossible Match" link="8" stubbed="0"/>
            <result name="First/Inter Digit Timeout" link="2" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.strCallbackNbr = "";]]></script>
            <script language="javascript" timing="last" ><![CDATA[if (1 == Result.id || 3 == Result.id) {

	Server.logError("ERROR PLAY CALLBACK SETTINGS MENU. EXIT ON: " + Result.name);

}	

]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=217 y=246 ?>
          <!--didn't hear response-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="oMS.strConnectionId" endpoint="oMS.strEndPoint" callid="oMS.strCallId" repeat="1" timeout="nTimeout" ms-type="oMS.strType" returns="" start-play="1" interrupt="0" return-immediate="0" digit-map="" language="oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >301</audio>
            <audio type="index" >552</audio>
          </play>
          <results >
            <result name="Default" link="3" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="3" plug-in="Pactolus.Branch.1" ><?xtml-editor x=463 y=374 ?>
          <!--exceed max retries?-->
          <results >
            <result name="Default" link="1" stubbed="1"/>
            <result name="nNumRetries &gt;= nMaxLoginAttempts" link="6" stubbed="0" >nNumRetries &gt;= oAPI.nMaxLoginAttempts</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.nNumRetries++;]]></script>
          </scripts>
        </action>
        <action id="4" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=553 y=131 ?>
          <!--514:The phone number you entered is invalid.-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="oMS.strConnectionId" endpoint="oMS.strEndPoint" callid="oMS.strCallId" repeat="1" timeout="nTimeout" ms-type="oMS.strType" returns="" start-play="1" interrupt="0" return-immediate="0" digit-map="" language="oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >514</audio>
          </play>
          <results >
            <result name="Default" link="3" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="5" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=25 y=700 ?>
          <!--nRETURN_FATAL_ERROR-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nRETURN_FATAL_ERROR"/>
        </action>
        <action id="6" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=751 y=396 ?>
          <!--nRETURN_INVALID_NBR-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nRETURN_INVALID_NBR"/>
        </action>
        <action id="7" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=311 y=477 ?>
          <!--nRETURN_SUCCESS-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nRETURN_SUCCESS"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("strExtension: <" + Session.strExtension + ">");

if(Session.strExtension.length > 0 && Session.strExtension != "*" && Session.strExtension != "#") {

	Session.strCallbackNbr = Session.strCallbackNbr + "x" + Session.strExtension;	

}



]]></script>
          </scripts>
        </action>
        <action id="8" plug-in="Pactolus.Branch.1" ><?xtml-editor x=317 y=80 ?>
          <results >
            <result name="Default" link="9" stubbed="1"/>
            <result name="!bValidNbr " link="4" stubbed="0" >bValidNbr == false</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[if(Session.strCallbackNbr.length > 3) {

	Session.bValidNbr = true;

	Session.nNumRetries = 0;

} else {

	Session.bValidNbr = false;

}]]></script>
          </scripts>
        </action>
        <action id="9" plug-in="Pactolus.CollectPlay.1" ><?xtml-editor x=16 y=449 ?>
          <!--Enter extension-->
          <collect-play xmlns="urn:www.pactolus.com:xtml:media" endpoint="oMS.strEndPoint" connection-id="oMS.strConnectionId" timeout="nTimeout" ms-type="oMS.strType" played-length="" digits="strExtension" terminating-char="strTermDigit" rc="" returns="" play-offset="" language="oAPI.strLanguage" retry-count="1" time-to-play="" interrupt="1" repeat="0" clear-digits="1" digit-map="&quot;(x.T|*)&quot;" fdt="100" idt="40" ict="16" terminating-digit="&quot;#&quot;" >
            <audio type="index" >278</audio>
            <audio type="index" >320</audio>
          </collect-play>
          <results >
            <result name="Default" link="5" stubbed="1"/>
            <result name="Success" link="7" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
            <result name="No/Impossible Match"/>
            <result name="First/Inter Digit Timeout" link="10" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.strExtension = "";]]></script>
            <script language="javascript" timing="last" ><![CDATA[if (1 == Result.id || 3 == Result.id) {

	Server.logError("ERROR PLAY ENTER EXTENSION. EXIT ON: " + Result.name);

}	

]]></script>
          </scripts>
        </action>
        <action id="10" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=256 y=582 ?>
          <!--didn't hear response-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="oMS.strConnectionId" endpoint="oMS.strEndPoint" callid="oMS.strCallId" repeat="1" timeout="nTimeout" ms-type="oMS.strType" returns="" start-play="1" interrupt="0" return-immediate="0" digit-map="" language="oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >301</audio>
            <audio type="index" >552</audio>
          </play>
          <results >
            <result name="Default" link="11" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="11" plug-in="Pactolus.Branch.1" ><?xtml-editor x=546 y=552 ?>
          <!--exceed max retries?-->
          <results >
            <result name="Default" link="9" stubbed="1"/>
            <result name="nNumRetries &gt;= nMaxLoginAttempts" link="6" stubbed="0" >nNumRetries &gt;= oAPI.nMaxLoginAttempts</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.nNumRetries++;]]></script>
          </scripts>
        </action>
      </actions>
    </function>
    <function name="IVRCallbackPlayNbr" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="oAPI" type="object"/>
        <parameter name="oMS" type="object"/>
        <parameter name="nType" type="i4"/>
        <parameter name="strCallbackNbr" type="string"/>
        <parameter name="bEnabled" type="boolean"/>
      </parameters>
      <local-vars >
        <var name="nTimeout" type="i4" >30</var>
        <var name="nTYPE_NEW_NBR" type="i4" >1</var>
        <var name="nTYPE_INIT_CALLBACK" type="i4" >2</var>
        <var name="nTYPE_PLAY_ONLY" type="i4" >3</var>
        <var name="bHasExtension" type="boolean" >0</var>
        <var name="strPhoneNumber" type="string" ></var>
        <var name="strExtension" type="string" ></var>
        <var name="oPrompts" type="object" ></var>
        <var name="nFirstPrompt" type="i4" >0</var>
        <var name="nPromptExtension" type="i4" >277</var>
        <var name="nEnableDisablePrompt" type="i4" >0</var>
        <var name="strDigitsCollected" type="string" ></var>
        <var name="nNumRetries" type="i4" >0</var>
        <var name="nRC_INVALID_ENTRY" type="i4" >-1</var>
        <var name="nRC_SUCCESS" type="i4" >0</var>
        <var name="bValidEntry" type="boolean" >0</var>
        <var name="nRC_DTMF" type="i4" >-1</var>
        <var name="nRC_FATAL_ERROR" type="i4" >-2</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.Branch.1" ><?xtml-editor x=12 y=28 ?>
          <results >
            <result name="Default" link="15" stubbed="1"/>
            <result name="HasExt, PlayOnly" link="3" stubbed="0" >bHasExtension == true

AND nTYPE_PLAY_ONLY == nType</result>
            <result name="!HasExt, PlayOnly" link="4" stubbed="0" >bHasExtension == false

AND nType == nTYPE_PLAY_ONLY</result>
            <result name="HasExt" link="5" stubbed="0" >bHasExtension == true</result>
            <result name="!HasExt" link="6" stubbed="0" >bHasExtension == false</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[var myString = new String (Session.strCallbackNbr);

var myArray = myString.split("x");

if (myArray.length > 1)

{

	Session.bHasExtension = true;

	Session.strPhoneNumber = myArray[0];

	Session.strExtension = myArray[1];

}

else

{

	Session.bHasExtension = false;

	Session.strPhoneNumber = myArray[0];

}







if(Session.nType == Session.nTYPE_INIT_CALLBACK) {



	Session.nFirstPrompt = 291; // You will be called at



	Session.oPrompts[0].nOption = 292;

	Session.oPrompts[0].nPress = 311; // Press 1



	Session.oPrompts[1].nOption = 293; // To change this to a new number...

	Session.oPrompts[1].nPress = 312; // Press 2

	

	Session.oPrompts[2].nOption = 384; // With One Step Dialing, you can make calls without entering your PIN number. To setup this phone number....

	Session.oPrompts[2].nPress = 313; // Press 3

	

	Session.oPrompts[3].nOption = 294; // To cancel the callback...

	Session.oPrompts[3].nPress = 314; // Press 4

	

	

} else if(Session.nType == Session.nTYPE_NEW_NBR) {



	Session.nFirstPrompt = 339; // You entered



	Session.oPrompts[0].nOption = 335; // if this is correct...

	Session.oPrompts[0].nPress = 311;  // Press 1



	Session.oPrompts[1].nOption = 298; // If this is not correct...

	Session.oPrompts[1].nPress = 312; // Press 2

	

	Session.oPrompts[2].nOption = 99;

	Session.oPrompts[2].nPress = 99;



	Session.oPrompts[3].nOption = 99;

	Session.oPrompts[3].nPress = 99;

	



} else if(Session.nType == Session.nTYPE_PLAY_ONLY) {



	Session.nFirstPrompt = 299;

	

	if (Session.bEnabled) {

		Session.nEnableDisablePrompt = 288;

	} else {

		Session.nEnableDisablePrompt = 289;	

	}	



} else {

	Server.logError("Uknown type for IVRCallbackNbr");

}



]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=269 y=13 ?>
          <!--your callback number is:-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="oMS.strConnectionId" endpoint="oMS.strEndPoint" callid="oMS.strCallId" repeat="1" timeout="nTimeout" ms-type="oMS.strType" returns="" start-play="1" interrupt="0" return-immediate="0" digit-map="" language="oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >nFirstPrompt</audio>
            <audio type="digits" >strPhoneNumber</audio>
            <audio type="index" >nPromptExtension</audio>
            <audio type="digits" >strExtension</audio>
            <audio type="index" >nEnableDisablePrompt</audio>
          </play>
          <results >
            <result name="Default" link="15" stubbed="1"/>
            <result name="Success" link="7" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="4" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=273 y=168 ?>
          <!--your callback number is:-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="oMS.strConnectionId" endpoint="oMS.strEndPoint" callid="oMS.strCallId" repeat="1" timeout="nTimeout" ms-type="oMS.strType" returns="" start-play="1" interrupt="0" return-immediate="0" digit-map="" language="oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >nFirstPrompt</audio>
            <audio type="digits" >strPhoneNumber</audio>
            <audio type="index" >nEnableDisablePrompt</audio>
          </play>
          <results >
            <result name="Default" link="15" stubbed="1"/>
            <result name="Success" link="7" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="5" plug-in="Pactolus.CollectPlay.1" ><?xtml-editor x=267 y=303 ?>
          <collect-play xmlns="urn:www.pactolus.com:xtml:media" endpoint="oMS.strEndPoint" connection-id="oMS.strConnectionId" timeout="nTimeout" ms-type="oMS.strType" played-length="" digits="strDigitsCollected" terminating-char="" rc="" returns="" play-offset="" language="oAPI.strLanguage" retry-count="1" time-to-play="" interrupt="1" repeat="0" clear-digits="1" digit-map="&quot;(x)&quot;" fdt="100" idt="40" ict="16" terminating-digit="" >
            <audio type="index" >nFirstPrompt</audio>
            <audio type="digits" >strPhoneNumber</audio>
            <audio type="index" >nPromptExtension</audio>
            <audio type="digits" >strExtension</audio>
            <audio type="index" >oPrompts[0].nOption</audio>
            <audio type="index" >oPrompts[0].nPress</audio>
            <audio type="index" >oPrompts[1].nOption</audio>
            <audio type="index" >oPrompts[1].nPress</audio>
            <audio type="index" >oPrompts[2].nOption</audio>
            <audio type="index" >oPrompts[2].nPress</audio>
            <audio type="index" >oPrompts[3].nOption</audio>
            <audio type="index" >oPrompts[3].nPress</audio>
          </collect-play>
          <results >
            <result name="Default" link="15" stubbed="1"/>
            <result name="Success" link="13" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
            <result name="No/Impossible Match"/>
            <result name="First/Inter Digit Timeout" link="8" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="last" ><![CDATA[if (1 == Result.id || 3 == Result.id)

	Server.logError("ERROR PLAY CALLBACK SETTINGS MENU. EXIT ON: " + Result.name);

Server.logInfo("EXIT ON BRANCH: " + Result.name);]]></script>
          </scripts>
        </action>
        <action id="6" plug-in="Pactolus.CollectPlay.1" ><?xtml-editor x=259 y=488 ?>
          <collect-play xmlns="urn:www.pactolus.com:xtml:media" endpoint="oMS.strEndPoint" connection-id="oMS.strConnectionId" timeout="nTimeout" ms-type="oMS.strType" played-length="" digits="strDigitsCollected" terminating-char="" rc="" returns="" play-offset="" language="oAPI.strLanguage" retry-count="1" time-to-play="" interrupt="1" repeat="0" clear-digits="1" digit-map="&quot;(x)&quot;" fdt="100" idt="40" ict="16" terminating-digit="" >
            <audio type="index" >nFirstPrompt</audio>
            <audio type="digits" >strPhoneNumber</audio>
            <audio type="index" >oPrompts[0].nOption</audio>
            <audio type="index" >oPrompts[0].nPress</audio>
            <audio type="index" >oPrompts[1].nOption</audio>
            <audio type="index" >oPrompts[1].nPress</audio>
            <audio type="index" >oPrompts[2].nOption</audio>
            <audio type="index" >oPrompts[2].nPress</audio>
            <audio type="index" >oPrompts[3].nOption</audio>
            <audio type="index" >oPrompts[3].nPress</audio>
          </collect-play>
          <results >
            <result name="Default" link="15" stubbed="1"/>
            <result name="Success" link="13" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
            <result name="No/Impossible Match"/>
            <result name="First/Inter Digit Timeout" link="8" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="last" ><![CDATA[if (1 == Result.id || 3 == Result.id)

	Server.logError("ERROR PLAY CALLBACK SETTINGS MENU. EXIT ON: " + Result.name);

Server.logInfo("EXIT ON BRANCH: " + Result.name);]]></script>
          </scripts>
        </action>
        <action id="7" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=535 y=34 ?>
          <!--nRC_SUCCESS-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nRC_SUCCESS"/>
        </action>
        <action id="8" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=553 y=599 ?>
          <!--didn't hear response-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="oMS.strConnectionId" endpoint="oMS.strEndPoint" callid="oMS.strCallId" repeat="1" timeout="nTimeout" ms-type="oMS.strType" returns="" start-play="1" interrupt="0" return-immediate="0" digit-map="" language="oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >301</audio>
            <audio type="index" >552</audio>
          </play>
          <results >
            <result name="Default" link="10" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="9" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=758 y=265 ?>
          <!--invalid choice-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="oMS.strConnectionId" endpoint="oMS.strEndPoint" callid="oMS.strCallId" repeat="1" timeout="nTimeout" ms-type="oMS.strType" returns="" start-play="1" interrupt="0" return-immediate="0" digit-map="" language="oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >301</audio>
            <audio type="index" >337</audio>
          </play>
          <results >
            <result name="Default" link="10" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="10" plug-in="Pactolus.Branch.1" ><?xtml-editor x=757 y=567 ?>
          <!--exceed max retries?-->
          <results >
            <result name="Default" link="11" stubbed="0"/>
            <result name="nNumRetries &gt;= nMaxLoginAttempts" link="12" stubbed="0" >nNumRetries &gt;= oAPI.nMaxLoginAttempts</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.nNumRetries++;]]></script>
          </scripts>
        </action>
        <action id="11" plug-in="Pactolus.Branch.1" ><?xtml-editor x=968 y=516 ?>
          <results >
            <result name="Default" link="6" stubbed="1"/>
            <result name="HasExt" link="5" stubbed="1" >bHasExtension == true</result>
          </results>
        </action>
        <action id="12" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=964 y=712 ?>
          <!--nRC_INVALID_ENTRY-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nRC_INVALID_ENTRY"/>
        </action>
        <action id="13" plug-in="Pactolus.Branch.1" ><?xtml-editor x=526 y=281 ?>
          <results >
            <result name="Default" link="9" stubbed="0"/>
            <result name="bValidEntry" link="14" stubbed="0" >bValidEntry == true</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[if(Session.strDigitsCollected == "#" || 

   Session.strDigitsCollected == "*" || 

   Session.strDigitsCollected == "0") {



	Session.bValidEntry = false;

	return;

} 



Session.nRC_DTMF = Clib.atoi(Session.strDigitsCollected);



if(Session.nRC_DTMF <= 2) {

	Session.bValidEntry = true;

} else if(Session.nRC_DTMF <= 4 && Session.nType == Session.nTYPE_INIT_CALLBACK) {

	// 3 and 4 are valid option for this type

	Session.bValidEntry = true;

} else {

	Session.bValidEntry = false;

}]]></script>
          </scripts>
        </action>
        <action id="14" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=532 y=399 ?>
          <!--nRC_DTMF-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nRC_DTMF"/>
        </action>
        <action id="15" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=32 y=606 ?>
          <!--nRC_FATAL_ERROR-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nRC_FATAL_ERROR"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("Error in IVRCallbackPlayNbr.");]]></script>
          </scripts>
        </action>
      </actions>
    </function>
    <function name="OneStepDialingMaint" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="p_oSUB" type="object" pass="byref"/>
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oMS" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="nReturnCode" type="i4" >-50</var>
        <var name="oResultPrompt" type="object" ></var>
        <var name="strPhoneNumber" type="string" ></var>
        <var name="strTermDigit" type="string" ></var>
        <var name="nTimeout" type="i4" >30</var>
        <var name="nNumRetries" type="i4" >0</var>
        <var name="nFATAL_ERROR" type="i4" >-99</var>
        <var name="bMainMenu" type="boolean" >0</var>
        <var name="bValidNbr" type="boolean" >0</var>
        <var name="strPhoneNumberTemp" type="string" ></var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=25 y=48 ?>
          <!--psAPIAddAuthAni-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;psAPIAddAuthAni&quot;" return="nReturnCode" external-function="1" library="lib_APISce.xml" >
            <parameter >p_oSUB</parameter>
            <parameter >p_oAPI</parameter>
          </function>
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="ReturnCode == 0" link="7" stubbed="0" >nReturnCode == 0</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("strPhoneNumber " + Session.strPhoneNumber);





if(Session.strPhoneNumber.length > 0) {

	Session.p_oSUB.strOneStepDialingNumber = Session.strPhoneNumber;

} 



if(Session.p_oSUB.strOneStepDialingNumber.length <= 0) {

	Server.logError("Calling psAPIAddAniAuth with blank number; p_oSUB.strOneStepDialingNumber: " + Session.p_oSUB.strOneStepDialingNumber);

} else {

	Session.strPhoneNumberTemp = Session.p_oSUB.strOneStepDialingNumber;



}]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=278 y=49 ?>
          <!--Unable to save-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="nTimeout" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="0" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >387</audio>
          </play>
          <results >
            <result name="Default" link="3" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=775 y=200 ?>
          <!--Success-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="0"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.p_oSUB.strOneStepDialingNumber = Session.strPhoneNumberTemp;]]></script>
          </scripts>
        </action>
        <action id="4" plug-in="Pactolus.Branch.1" ><?xtml-editor x=274 y=234 ?>
          <results >
            <result name="Default" link="1" stubbed="1"/>
            <result name="bMainMenu" link="3" stubbed="0" >bMainMenu == true</result>
            <result name="!bValidNbr " link="6" stubbed="0" >bValidNbr == false</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[if(Session.strPhoneNumber == "*") {	



	Session.bMainMenu = true;

	

} else if(Session.strPhoneNumber.length > 3) {



	Session.bValidNbr = true;

	Session.nNumRetries = 0;

	

} else {



	Session.bValidNbr = false;



}]]></script>
          </scripts>
        </action>
        <action id="5" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=440 y=607 ?>
          <!--didn't hear response-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="nTimeout" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="0" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >301</audio>
            <audio type="index" >552</audio>
          </play>
          <results >
            <result name="Default" link="3" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="6" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=444 y=379 ?>
          <!--514:The phone number you entered is invalid.-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="nTimeout" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="0" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >514</audio>
          </play>
          <results >
            <result name="Default" link="3" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="7" plug-in="Pactolus.CollectPlay.1" ><?xtml-editor x=27 y=287 ?>
          <!--Success prompt and (enter another number or exit)-->
          <collect-play xmlns="urn:www.pactolus.com:xtml:media" endpoint="p_oMS.strEndPoint" connection-id="p_oMS.strConnectionId" timeout="60" ms-type="p_oMS.strType" played-length="" digits="strPhoneNumber" terminating-char="strTermDigit" rc="" returns="" play-offset="" language="p_oAPI.strLanguage" retry-count="1" time-to-play="" interrupt="1" repeat="0" clear-digits="1" digit-map="&quot;(x.T|*)&quot;" fdt="100" idt="40" ict="16" terminating-digit="&quot;#&quot;" >
            <audio type="index" >385</audio>
            <audio type="digits" >p_oSUB.strOneStepDialingNumber</audio>
            <audio type="index" >386</audio>
            <audio type="index" >388</audio>
          </collect-play>
          <results >
            <result name="Default" link="4" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
            <result name="No/Impossible Match"/>
            <result name="First/Inter Digit Timeout" link="5" stubbed="0"/>
          </results>
        </action>
      </actions>
    </function>
    <function name="IVRCallbackSettings" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="oAPI" type="object" pass="byref"/>
        <parameter name="oSUB" type="object" pass="byref"/>
        <parameter name="oMS" type="object" pass="byref"/>
        <parameter name="oCallLegA" type="object" pass="byref"/>
        <parameter name="strContact" type="string" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="nTimeout" type="i4" >60</var>
        <var name="strDigitsCollected" type="string" ></var>
        <var name="strTerminationDigit" type="string" ></var>
        <var name="nReasonCode" type="i4" >-1</var>
        <var name="nReturnCode" type="i4" >-1</var>
        <var name="nRC_FAILURE" type="i4" >-1</var>
        <var name="nNumRetries" type="i4" >0</var>
        <var name="oOptionMenuPrompts" type="object" ></var>
        <var name="nEnableDisablePrompt" type="i4" >0</var>
        <var name="strCallbackNbr" type="string" ></var>
        <var name="nRC_INIT_CALLBACK" type="i4" >1</var>
        <var name="strCallbackNbrTemp" type="string" ></var>
        <var name="bCallbackEnabledTemp" type="boolean" >0</var>
        <var name="nResultPrompt" type="i4" >0</var>
        <var name="strCallbackNbrPlay" type="string" ></var>
        <var name="strCallbackNbrExtension" type="string" ></var>
        <var name="nPLAY_TYPE_INIT_CALLBACK" type="i4" >2</var>
        <var name="nPLAY_TYPE_NEW_NBR" type="i4" >1</var>
        <var name="nPLAY_TYPE_PLAY_ONLY" type="i4" >3</var>
        <var name="nRC_SUCCESS" type="i4" >0</var>
        <var name="f_bSetOrChange" type="boolean" >0</var>
        <var name="f_bInitCallback" type="boolean" >0</var>
        <var name="f_bHearCurrentNbr" type="boolean" >0</var>
        <var name="f_bEnableOrDisable" type="boolean" >0</var>
        <var name="oPromptIndex" type="object" ></var>
        <var name="f_bMainMenu" type="boolean" >0</var>
        <var name="f_bSetOneStepDialing" type="boolean" >0</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.Branch.1" ><?xtml-editor x=14 y=16 ?>
          <results >
            <result name="Default" link="2" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo(Session._sessionId + "     CURRENTLY IN FUNCTION: IVRCallbackSettings");



Server.logInfo("oSUB.strCallbackNumber: " + Session.oSUB.strCallbackNumber);

Server.logInfo("oSUB.bCallbackNumberEnable: " + Session.oSUB.bCallbackNumberEnable);

Server.logInfo("oAPI.strOriginationNumber: " + Session.oAPI.strOriginationNumber);

Server.logInfo("oAPI.strUsedDefaultANIFlag: " + Session.oAPI.strUsedDefaultANIFlag);







Session.oPromptIndex.iDisable = 297;

Session.oPromptIndex.iEnable = 296;

Session.oPromptIndex.iCurrentNbr = 287;

Session.oPromptIndex.iInitCallback = 290;

Session.oPromptIndex.iSetOrChange = 284;

Session.oPromptIndex.iSetOneStepDialing = 384;



Session.strCallbackNbr = "";



// Set call back number for session

if (Session.oSUB.strCallbackNumber.length > 0 && Session.oSUB.bCallbackNumberEnable) {

	Session.strCallbackNbr = Session.oSUB.strCallbackNumber;

} else if(Session.oAPI.strOriginationNumber.length > 3 && Session.oAPI.strUsedDefaultANIFlag != "T") {

	Session.strCallbackNbr = Session.oAPI.strOriginationNumber;

} else if(Session.oSUB.strOneStepDialingNumber.length > 3) {

	Session.strCallbackNbr = Session.oSUB.strOneStepDialingNumber;

} else {

	Server.logInfo("Both the Callback number and orignation number are not valid. Option to Initiate Callback should not be played.");

}





// assume all options is ON



Session.oOptionMenuPrompts[1].nOption = Session.oPromptIndex.iSetOrChange;	// To set or change your callback number

Session.oOptionMenuPrompts[1].nPress = 311; 	// Press 1

Session.oOptionMenuPrompts[1].nHalfTenth = 220; // Play half second silence since assumming all options are on.



Session.oOptionMenuPrompts[2].nOption = Session.oPromptIndex.iInitCallback;	// To initiate a callback...

Session.oOptionMenuPrompts[2].nPress = 312; 	// Press 2

Session.oOptionMenuPrompts[2].nHalfTenth = 220; // Play half second silence



Session.oOptionMenuPrompts[3].nOption = Session.oPromptIndex.iCurrentNbr;	// To hear your stored callback number....

Session.oOptionMenuPrompts[3].nPress = 313; 	// Press 3

Session.oOptionMenuPrompts[3].nHalfTenth = 220; // Play half second silence



Session.oOptionMenuPrompts[4].nOption = Session.oPromptIndex.iDisable; 	// To disable your stored callback number...

Session.oOptionMenuPrompts[4].nPress = 314; 	// Press 4

Session.oOptionMenuPrompts[4].nHalfTenth = 220; // Play half second silence



Session.oOptionMenuPrompts[5].nOption = Session.oPromptIndex.iSetOneStepDialing; 	// To set up future calls for One Step Dialing from...

Session.oOptionMenuPrompts[5].nPress = 315; 	// Press 5

Session.oOptionMenuPrompts[5].nHalfTenth = 220; // Play half second silence





Session.oOptionMenuPrompts[0].nOption = 560; 	// To return to the main menu, please press star.



Session.nEnableDisablePrompt = 288;



if (Session.oSUB.strCallbackNumber.length <= 0) {



	if(!Session.oSUB.bCallbackNumberEnable && (Session.oAPI.strOriginationNumber.length <= 3 || Session.oAPI.strUsedDefaultANIFlag == "T")) {

		

		Session.oOptionMenuPrompts[1].nHalfTenth = 99;

		

		Session.oOptionMenuPrompts[2].nOption = 99;

		Session.oOptionMenuPrompts[2].nPress = 99;

		Session.oOptionMenuPrompts[2].nHalfTenth = 99;

		

		Session.oOptionMenuPrompts[5].nOption = 99;

		Session.oOptionMenuPrompts[5].nPress = 99;

		Session.oOptionMenuPrompts[5].nHalfTenth = 99;			

		

	} else {

	

		Session.oOptionMenuPrompts[3].nOption = Session.oPromptIndex.iSetOneStepDialing; 	// To set up future calls for One Step Dialing from...

		Session.oOptionMenuPrompts[3].nPress = 313; 	// Press 3

		Session.oOptionMenuPrompts[3].nHalfTenth = 220; // Play half second silence

	

	}

	



	Session.oOptionMenuPrompts[3].nOption = 99;

	Session.oOptionMenuPrompts[3].nPress = 99;

	Session.oOptionMenuPrompts[3].nHalfTenth = 99;

	

	Session.oOptionMenuPrompts[4].nOption = 99;

	Session.oOptionMenuPrompts[4].nPress = 99;

	Session.oOptionMenuPrompts[4].nHalfTenth = 99;	

	

	

		

	

} else if (!Session.oSUB.bCallbackNumberEnable) {



	Session.oOptionMenuPrompts[4].nOption = Session.oPromptIndex.iEnable; //To enable your stored callback number...		

	

	if(Session.strCallbackNbr == "") {

		Session.oOptionMenuPrompts[2].nOption = Session.oPromptIndex.iCurrentNbr;

		Session.oOptionMenuPrompts[2].nPress = 312;

		Session.oOptionMenuPrompts[2].nHalfTenth = 220;



		Session.oOptionMenuPrompts[3].nOption = Session.oOptionMenuPrompts[4].nOption;

		Session.oOptionMenuPrompts[3].nPress = 313;

		Session.oOptionMenuPrompts[3].nHalfTenth = 220;

		

		Session.oOptionMenuPrompts[4].nOption = 99;

		Session.oOptionMenuPrompts[4].nPress = 99;

		Session.oOptionMenuPrompts[4].nHalfTenth = 99;		

		

		Session.oOptionMenuPrompts[5].nOption = 99;

		Session.oOptionMenuPrompts[5].nPress = 99;

		Session.oOptionMenuPrompts[5].nHalfTenth = 99;				



	}

	





} 













]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Pactolus.CollectPlay.1" ><?xtml-editor x=15 y=169 ?>
          <collect-play xmlns="urn:www.pactolus.com:xtml:media" endpoint="oMS.strEndPoint" connection-id="oMS.strConnectionId" timeout="nTimeout" ms-type="oMS.strType" played-length="" digits="strDigitsCollected" terminating-char="strTerminationDigit" rc="nReasonCode" returns="nReturnCode" play-offset="" language="oAPI.strLanguage" retry-count="1" time-to-play="" interrupt="1" repeat="0" clear-digits="1" digit-map="&quot;(x|*|#)&quot;" fdt="100" idt="40" ict="16" terminating-digit="" >
            <audio type="index" >oOptionMenuPrompts[1].nOption</audio>
            <audio type="index" >oOptionMenuPrompts[1].nPress</audio>
            <audio type="index" >oOptionMenuPrompts[1].nHalfTenth</audio>
            <audio type="index" >oOptionMenuPrompts[2].nOption</audio>
            <audio type="index" >oOptionMenuPrompts[2].nPress</audio>
            <audio type="index" >oOptionMenuPrompts[2].nHalfTenth</audio>
            <audio type="index" >oOptionMenuPrompts[3].nOption</audio>
            <audio type="index" >oOptionMenuPrompts[3].nPress</audio>
            <audio type="index" >oOptionMenuPrompts[3].nHalfTenth</audio>
            <audio type="index" >oOptionMenuPrompts[4].nOption</audio>
            <audio type="index" >oOptionMenuPrompts[4].nPress</audio>
            <audio type="index" >oOptionMenuPrompts[4].nHalfTenth</audio>
            <audio type="index" >oOptionMenuPrompts[5].nOption</audio>
            <audio type="index" >oOptionMenuPrompts[5].nPress</audio>
            <audio type="index" >oOptionMenuPrompts[5].nHalfTenth</audio>
            <audio type="index" >oOptionMenuPrompts[0].nOption</audio>
          </collect-play>
          <results >
            <result name="Default" link="3" stubbed="1"/>
            <result name="Success" link="4" stubbed="0"/>
            <result name="Error"/>
            <result name="Timeout"/>
            <result name="No/Impossible Match"/>
            <result name="First/Inter Digit Timeout" link="6" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.strDigitsCollected = "";

Session.strTerminationDigit = "";]]></script>
            <script language="javascript" timing="last" ><![CDATA[if (1 == Result.id || 3 == Result.id)

	Server.logError("ERROR PLAY CALLBACK SETTINGS MENU. EXIT ON: " + Result.name);

Server.logInfo("EXIT ON BRANCH: " + Result.name);]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=26 y=1040 ?>
          <!--nRC_FAILURE-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nRC_FAILURE"/>
        </action>
        <action id="4" plug-in="Pactolus.Branch.1" ><?xtml-editor x=265 y=70 ?>
          <results >
            <result name="Default" link="5" stubbed="0"/>
            <result name="Set or change" link="13" stubbed="1" >f_bSetOrChange == true</result>
            <result name="Init callback" link="19" stubbed="1" >f_bInitCallback == true</result>
            <result name="Hear current number" link="20" stubbed="1" >f_bHearCurrentNbr == true</result>
            <result name="Enable/Disable" link="14" stubbed="1" >f_bEnableOrDisable == true</result>
            <result name="Return Main Menu" link="8" stubbed="1" >f_bMainMenu == true</result>
            <result name="One Step Dialing" link="22" stubbed="0" >f_bSetOneStepDialing == true</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[





Session.f_bEnableOrDisable = false;

Session.f_bHearCurrentNbr = false;

Session.f_bInitCallback = false;

Session.f_bMainMenu = false;

Session.f_bSetOrChange = false;



if(Session.strDigitsCollected == "1") {



	Session.f_bSetOrChange = true; // Set or change is always option 1



} else if(Session.strDigitsCollected == "2") {



	if(Session.oOptionMenuPrompts[2].nOption == Session.oPromptIndex.iInitCallback) {

		Session.f_bInitCallback = true;

	} else if(Session.oOptionMenuPrompts[2].nOption == Session.oPromptIndex.iCurrentNbr) {

		Session.f_bHearCurrentNbr = true;	

	} else if(Session.oOptionMenuPrompts[2].nOption == Session.oPromptIndex.iSetOneStepDialing) {

		Session.f_bSetOneStepDialing = true;

	}



} else if(Session.strDigitsCollected == "3") {



	if(Session.oOptionMenuPrompts[3].nOption == Session.oPromptIndex.iDisable || Session.oOptionMenuPrompts[3].nOption == Session.oPromptIndex.iEnable) {

		Session.f_bEnableOrDisable = true;

	} else if(Session.oOptionMenuPrompts[3].nOption == Session.oPromptIndex.iCurrentNbr) {

		Session.f_bHearCurrentNbr = true;	

	} else if(Session.oOptionMenuPrompts[3].nOption == Session.oPromptIndex.iSetOneStepDialing) {

		Session.f_bSetOneStepDialing = true;

	}



} else if(Session.strDigitsCollected == "4") {



	if(Session.oOptionMenuPrompts[4].nOption == Session.oPromptIndex.iDisable || Session.oOptionMenuPrompts[4].nOption == Session.oPromptIndex.iEnable) {

		Session.f_bEnableOrDisable = true;

	} else if(Session.oOptionMenuPrompts[4].nOption == Session.oPromptIndex.iSetOneStepDialing) {

		Session.f_bSetOneStepDialing = true;

	}

	

} else if(Session.strDigitsCollected == "5") {	



	if(Session.oOptionMenuPrompts[5].nOption == Session.oPromptIndex.iSetOneStepDialing) {

		Session.f_bSetOneStepDialing = true;

	} 

	



} else if(Session.strDigitsCollected == "*") {



	Session.f_bMainMenu = true;



} 



]]></script>
            <script language="javascript" timing="last" ><![CDATA[if (Result.id != 1)

	Session.nNumRetries = 0;]]></script>
          </scripts>
        </action>
        <action id="5" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=483 y=45 ?>
          <!--invalid choice-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="oMS.strConnectionId" endpoint="oMS.strEndPoint" callid="oMS.strCallId" repeat="1" timeout="nTimeout" ms-type="oMS.strType" returns="" start-play="1" interrupt="0" return-immediate="0" digit-map="" language="oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >301</audio>
            <audio type="index" >337</audio>
          </play>
          <results >
            <result name="Default" link="7" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="6" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=224 y=257 ?>
          <!--didn't hear response-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="oMS.strConnectionId" endpoint="oMS.strEndPoint" callid="oMS.strCallId" repeat="1" timeout="nTimeout" ms-type="oMS.strType" returns="" start-play="1" interrupt="0" return-immediate="0" digit-map="" language="oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >301</audio>
            <audio type="index" >552</audio>
          </play>
          <results >
            <result name="Default" link="7" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="7" plug-in="Pactolus.Branch.1" ><?xtml-editor x=761 y=262 ?>
          <!--exceed max retries?-->
          <results >
            <result name="Default" link="2" stubbed="1"/>
            <result name="nNumRetries &gt;= nMaxLoginAttempts" link="3" stubbed="1" >nNumRetries &gt;= oAPI.nMaxLoginAttempts</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.nNumRetries++;]]></script>
          </scripts>
        </action>
        <action id="8" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=28 y=972 ?>
          <!--nRC_SUCCESS-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nRC_SUCCESS"/>
        </action>
        <action id="9" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=514 y=402 ?>
          <!--"psAPIUpdateSubCallbackSettings"-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;psAPIUpdateSubCallbackSettings&quot;" return="nReturnCode" external-function="1" library="lib_APISce.xml" >
            <parameter >oAPI</parameter>
            <parameter >oSUB</parameter>
          </function>
          <results >
            <result name="Default" link="16" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[// Save Temp in case update fails, will need to restore old value

Session.strCallbackNbrTemp = Session.oSUB.strCallbackNumber;

Session.bCallbackEnabledTemp = Session.oSUB.bCallbackNumberEnable;



Session.oSUB.strCallbackNumber = Session.strCallbackNbr;

Session.oSUB.bCallbackNumberEnable = true;]]></script>
            <script language="javascript" timing="last" ><![CDATA[if(0 != Session.nReturnCode) {

	Server.logError("Error calling psAPIUpdateSubCallbackSettings; nReturnCode: " + Session.nReturnCode);

	Session.oSUB.strCallbackNumber = Session.strCallbackNbrTemp;

	Session.oSUB.bCallbackNumberEnable = Session.bCallbackEnabledTemp;

	Session.nResultPrompt = 305; //A system error has occurred. 

} else {

	Session.nResultPrompt = 286; // Your callback number has been saved.



}]]></script>
          </scripts>
        </action>
        <action id="11" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=824 y=732 ?>
          <!--nRC_INIT_CALLBACK-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="nRC_INIT_CALLBACK"/>
        </action>
        <action id="12" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=416 y=759 ?>
          <!--IVRCallbackCollectNbr-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;IVRCallbackCollectNbr&quot;" return="nReturnCode" external-function="0" library="" >
            <parameter >oMS</parameter>
            <parameter >strCallbackNbr</parameter>
            <parameter >oAPI</parameter>
          </function>
          <results >
            <result name="Default" link="3" stubbed="1"/>
            <result name="0: Success" link="19" stubbed="1" >nReturnCode == 0</result>
            <result name="2: Main Menu" link="8" stubbed="1" >nReturnCode == 2</result>
          </results>
          <scripts >
            <script language="javascript" timing="last" ><![CDATA[/*

if(Session.nReturnCode == 0) {

	Session.oSUB.strCallbackNumber = Session.strCallbackNbr;

}	

*/]]></script>
          </scripts>
        </action>
        <action id="13" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=13 y=402 ?>
          <!--IVRCallbackCollectNbr-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;IVRCallbackCollectNbr&quot;" return="nReturnCode" external-function="0" library="" >
            <parameter >oMS</parameter>
            <parameter >strCallbackNbr</parameter>
            <parameter >oAPI</parameter>
          </function>
          <results >
            <result name="Default" link="3" stubbed="1"/>
            <result name="0: Success" link="18" stubbed="0" >nReturnCode == 0</result>
            <result name="2: Main Menu" link="8" stubbed="1" >nReturnCode == 2</result>
          </results>
          <scripts >
            <script language="javascript" timing="last" ><![CDATA[if (2 == Result.id)

	Session.nNumRetries = 0;]]></script>
          </scripts>
        </action>
        <action id="14" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=25 y=882 ?>
          <!--"psAPIUpdateSubCallbackSettings"-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;psAPIUpdateSubCallbackSettings&quot;" return="nReturnCode" external-function="1" library="lib_APISce.xml" >
            <parameter >oAPI</parameter>
            <parameter >oSUB</parameter>
          </function>
          <results >
            <result name="Default" link="15" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[// Save value incase update fails, will need to roll back

Session.bCallbackEnabledTemp = Session.oSUB.bCallbackNumberEnable;





if (Session.oSUB.bCallbackNumberEnable)

	Session.oSUB.bCallbackNumberEnable = false;

else

	Session.oSUB.bCallbackNumberEnable = true;]]></script>
          </scripts>
        </action>
        <action id="15" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=257 y=876 ?>
          <!--nEnableDisablePrompt-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="oMS.strConnectionId" endpoint="oMS.strEndPoint" callid="oMS.strCallId" repeat="1" timeout="nTimeout" ms-type="oMS.strType" returns="" start-play="1" interrupt="0" return-immediate="0" digit-map="" language="oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >nResultPrompt</audio>
          </play>
          <results >
            <result name="Default" link="1" stubbed="1"/>
            <result name="Success" ><?xtml-editor visible=no?></result>
            <result name="Error" ><?xtml-editor visible=no?></result>
            <result name="Timeout" ><?xtml-editor visible=no?></result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[if(0 != Session.nReturnCode) {

	Session.oSUB.bCallbackNumberEnable = Session.bCallbackEnabledTemp;

	Session.nResultPrompt = 305;

	Server.logError("Error calling psAPIUpdateSubCallbackSettings; nReturnCode: " + Session.nReturnCode);	

} else {



	if (Session.oSUB.bCallbackNumberEnable) {

		Session.nEnableDisablePrompt = 279;

	} else {

		Session.nEnableDisablePrompt = 280;

	}		

	

	Session.nResultPrompt = Session.nEnableDisablePrompt;

	

}	]]></script>
          </scripts>
        </action>
        <action id="16" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=740 y=407 ?>
          <!--Saved or Error-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="oMS.strConnectionId" endpoint="oMS.strEndPoint" callid="oMS.strCallId" repeat="1" timeout="nTimeout" ms-type="oMS.strType" returns="" start-play="1" interrupt="0" return-immediate="0" digit-map="" language="oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >nResultPrompt</audio>
          </play>
          <results >
            <result name="Default" link="1" stubbed="1"/>
            <result name="Success" ><?xtml-editor visible=no?></result>
            <result name="Error" ><?xtml-editor visible=no?></result>
            <result name="Timeout" ><?xtml-editor visible=no?></result>
          </results>
        </action>
        <action id="17" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=367 y=546 ?>
          <!--295-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="oMS.strConnectionId" endpoint="oMS.strEndPoint" callid="oMS.strCallId" repeat="1" timeout="nTimeout" ms-type="oMS.strType" returns="" start-play="1" interrupt="0" return-immediate="0" digit-map="" language="oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >295</audio>
          </play>
          <results >
            <result name="Default" link="21" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.oSUB.strCallbackNumber = Session.strCallbackNbr;

Session.oSUB.bCallbackNumberEnable = true;]]></script>
          </scripts>
        </action>
        <action id="18" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=278 y=396 ?>
          <!--IVRCallbackPlayNbr: New Number-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;IVRCallbackPlayNbr&quot;" return="nReturnCode" external-function="0" library="" >
            <parameter >oAPI</parameter>
            <parameter >oMS</parameter>
            <parameter >nPLAY_TYPE_NEW_NBR</parameter>
            <parameter >strCallbackNbr</parameter>
            <parameter >oSUB.bCallbackNumberEnable</parameter>
          </function>
          <results >
            <result name="Default" link="3" stubbed="1"/>
            <result name="1: Accept" link="9" stubbed="0" >nReturnCode == 1</result>
            <result name="2: Try Again" link="13" stubbed="1" >nReturnCode == 2</result>
          </results>
        </action>
        <action id="19" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=13 y=547 ?>
          <!--IVRCallbackPlayNbr: Init Callback-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;IVRCallbackPlayNbr&quot;" return="nReturnCode" external-function="0" library="" >
            <parameter >oAPI</parameter>
            <parameter >oMS</parameter>
            <parameter >nPLAY_TYPE_INIT_CALLBACK</parameter>
            <parameter >strCallbackNbr</parameter>
            <parameter >oSUB.bCallbackNumberEnable</parameter>
          </function>
          <results >
            <result name="Default" link="3" stubbed="1"/>
            <result name="1: Continue" link="17" stubbed="0" >nReturnCode == 1</result>
            <result name="2: New Number" link="12" stubbed="0" >nReturnCode == 2</result>
            <result name="3: Save ANI" link="23" stubbed="0" >nReturnCode == 3</result>
            <result name="4: Cancel" link="1" stubbed="1" >nReturnCode == 4</result>
          </results>
        </action>
        <action id="20" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=20 y=733 ?>
          <!--IVRCallbackPlayNbr: Play Only-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;IVRCallbackPlayNbr&quot;" return="nReturnCode" external-function="0" library="" >
            <parameter >oAPI</parameter>
            <parameter >oMS</parameter>
            <parameter >nPLAY_TYPE_PLAY_ONLY</parameter>
            <parameter >oSUB.strCallbackNumber</parameter>
            <parameter >oSUB.bCallbackNumberEnable</parameter>
          </function>
          <results >
            <result name="Default" link="3" stubbed="1"/>
            <result name="0: Success" link="1" stubbed="1" >nReturnCode == 0</result>
          </results>
        </action>
        <action id="21" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=588 y=668 ?>
          <!--HangUpParty-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;HangUpParty&quot;" return="" external-function="1" library="lib_callcontrol.xml" >
            <parameter >oCallLegA</parameter>
            <parameter >strContact</parameter>
          </function>
          <results >
            <result name="Default" link="11" stubbed="0"/>
          </results>
        </action>
        <action id="22" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=493 y=222 ?>
          <!--OneStepDialingMaint-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;OneStepDialingMaint&quot;" return="nReturnCode" external-function="0" library="" >
            <parameter >oSUB</parameter>
            <parameter >oAPI</parameter>
            <parameter >oMS</parameter>
          </function>
          <results >
            <result name="Default" link="2" stubbed="1"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.oSUB.strOneStepDialingNumber = Session.strCallbackNbr;]]></script>
          </scripts>
        </action>
        <action id="23" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=188 y=689 ?>
          <!--OneStepDialingMaint-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;OneStepDialingMaint&quot;" return="nReturnCode" external-function="0" library="" >
            <parameter >oSUB</parameter>
            <parameter >oAPI</parameter>
            <parameter >oMS</parameter>
          </function>
          <results >
            <result name="Default" link="19" stubbed="1"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.oSUB.strOneStepDialingNumber = Session.strCallbackNbr;]]></script>
            <script language="javascript" timing="last" ><![CDATA[Session.strCallbackNbr = Session.oSUB.strOneStepDialingNumber;]]></script>
          </scripts>
        </action>
      </actions>
    </function>
    <function name="PlayDirectCallMainMenu" start="27" event="" returns="i4" >
      <parameters >
        <parameter name="p_oSUB" type="object" pass="byref"/>
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oMS" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_strDigitsCollected" type="string" ></var>
        <var name="f_nNumTries" type="i4" >0</var>
        <var name="f_nMS_ERROR" type="i4" >-1</var>
        <var name="f_nRC" type="i4" >0</var>
        <var name="f_nPrompt" type="i4" >337</var>
        <var name="f_oOptions" type="object" ></var>
        <var name="f_bIsValid" type="boolean" >1</var>
        <var name="f_nReturnCode" type="i4" >0</var>
        <var name="f_nTimeoutNumRetries" type="i4" >0</var>
        <var name="f_nDISABLE_CALL_ID" type="i4" >1</var>
        <var name="f_nENABLE_CALL_ID" type="i4" >2</var>
        <var name="f_nGET_NEW_DIRECT_CALL_ID" type="i4" >3</var>
        <var name="f_nPLAY_DIRECT_CALL_ID" type="i4" >4</var>
        <var name="f_nPLAY_DESTINATION_NUMBER" type="i4" >5</var>
        <var name="f_nCHANGE_DESTINATION_NUMBER" type="i4" >6</var>
        <var name="f_nMenuSelection" type="i4" >0</var>
        <var name="f_nMaxRetries" type="i4" >3</var>
        <var name="f_bEnableFlag" type="boolean" >0</var>
        <var name="f_strConfirmDestinationNum" type="string" ></var>
      </local-vars>
      <actions >
        <action id="27" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=33 y=35 ?>
          <!--"psAPIGetSubscriberDirectCallInfo"-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;psAPIGetSubscriberDirectCallInfo&quot;" return="f_nReturnCode" external-function="1" library="lib_APISce.xml" >
            <parameter >p_oSUB</parameter>
            <parameter >p_oAPI</parameter>
          </function>
          <results >
            <result name="Default" link="5" stubbed="0"/>
            <result name="Error" link="5" stubbed="0" >f_nReturnCode == -1</result>
            <result name="DB Error" link="5" stubbed="0" >f_nReturnCode == -99</result>
            <result name="Success" link="11" stubbed="1" >f_nReturnCode == 0</result>
            <result name="No Record Founds" link="12" stubbed="0" >f_nReturnCode == -2</result>
          </results>
        </action>
        <action id="2" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=50 y=341 ?>
          <!--Play Main Menu-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="60" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="&quot;(x)&quot;" language="p_oAPI.strLanguage" digits="f_strDigitsCollected" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >f_oOptions[0].nPressDC</audio>
            <audio type="index" >f_oOptions[0].nOptionDC</audio>
            <audio type="index" >220</audio>
            <audio type="index" >f_oOptions[1].nPressDC</audio>
            <audio type="index" >f_oOptions[1].nOptionDC</audio>
            <audio type="index" >220</audio>
            <audio type="index" >f_oOptions[2].nPressDC</audio>
            <audio type="index" >f_oOptions[2].nOptionDC</audio>
            <audio type="index" >220</audio>
            <audio type="index" >f_oOptions[3].nPressDC</audio>
            <audio type="index" >f_oOptions[3].nOptionDC</audio>
            <audio type="index" >220</audio>
            <audio type="index" >f_oOptions[4].nPressDC</audio>
            <audio type="index" >f_oOptions[4].nOptionDC</audio>
            <audio type="index" >220</audio>
            <audio type="index" >f_oOptions[5].nPressDC</audio>
          </play>
          <results >
            <result name="Default" link="4" stubbed="0"/>
            <result name="Success" link="3" stubbed="0"/>
            <result name="Error" link="4" stubbed="0"/>
            <result name="Timeout" link="9" stubbed="0"/>
            <result name="Return to Menu Main" link="5" stubbed="1" >f_strDigitsCollected match "*"</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_strDigitsCollected = "";

Session.f_oOptions[0].nPressDC = 311;        // Press 1
Session.f_oOptions[0].nOptionDC = 595;       // To disable your easy call id ...

Session.f_oOptions[1].nPressDC = 312;        // Press 2
Session.f_oOptions[1].nOptionDC = 599;       // To get a new easy call id ...

Session.f_oOptions[2].nPressDC = 313;        // Press 3
Session.f_oOptions[2].nOptionDC = 600;       // To play your easy call id ...

Session.f_oOptions[3].nPressDC = 314;        // Press 4
Session.f_oOptions[3].nOptionDC = 601;       // To play your easy call destination number ...

Session.f_oOptions[4].nPressDC = 315;        // Press 5
Session.f_oOptions[4].nOptionDC = 590;       // To enter a new destination number ...

Session.f_oOptions[5].nPressDC = 334;        // Press star at any time to return to main menu ...
]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Pactolus.Branch.1" ><?xtml-editor x=283 y=400 ?>
          <!--Check for invalid input.-->
          <results >
            <result name="Default" link="17" stubbed="0"/>
            <result name="!isValid" link="6" stubbed="0" >f_bIsValid == false</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_bIsValid = true;
Session.f_nPrompt = 337;

Server.logInfo("Digits collected = " + Session.f_strDigitsCollected);

// Check for invalid inputs.
if(Session.f_strDigitsCollected == "" || Session.f_strDigitsCollected.length <= 0 ||
   Session.f_strDigitsCollected.length > 1 || Session.f_strDigitsCollected <= 0  || Session.f_strDigitsCollected > 6)
{
   Session.f_bIsValid = false;
}

// Get user option.
if (Session.f_bIsValid == true) 
{
    if ( Session.f_strDigitsCollected == "1" ) {
       Session.f_nMenuSelection = Session.f_nDISABLE_CALL_ID;
    } else if (Session.f_strDigitsCollected == "2" ) {
       Session.f_nMenuSelection = Session.f_nGET_NEW_DIRECT_CALL_ID;
    } else if (Session.f_strDigitsCollected == "3" ) {
       Session.f_nMenuSelection = Session.f_nPLAY_DIRECT_CALL_ID;
    } else if (Session.f_strDigitsCollected == "4" ) {
       Session.f_nMenuSelection = Session.f_nPLAY_DESTINATION_NUMBER;
    } else if (Session.f_strDigitsCollected == "5" ) {
       Session.f_nMenuSelection = Session.f_nCHANGE_DESTINATION_NUMBER;
    } else {
       Server.logError("Unknown menu option selected: " + Session.f_strDigitsCollected);
    }
}]]></script>
          </scripts>
        </action>
        <action id="4" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=279 y=312 ?>
          <!--f_nMS_ERROR-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nMS_ERROR"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logError("ERROR playing language menu.");]]></script>
          </scripts>
        </action>
        <action id="5" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=474 y=94 ?>
          <!--f_nRC-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nRC"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("Returning to Menu Main.");]]></script>
          </scripts>
        </action>
        <action id="6" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=494 y=327 ?>
          <!--I'm Sorry ...
f_nPrompt : Play Prompt-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >301</audio>
            <audio type="index" >f_nPrompt</audio>
          </play>
          <results >
            <result name="Default" link="4" stubbed="1"/>
            <result name="Success" link="11" stubbed="1"/>
            <result name="Error" link="4" stubbed="1"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="9" plug-in="Pactolus.Branch.1" ><?xtml-editor x=286 y=496 ?>
          <!--Exceeded Max Retry Attempts?-->
          <results >
            <result name="Default" link="6" stubbed="0"/>
            <result name="f_nTimeoutNumRetries &gt;= f_nMaxRetries" link="4" stubbed="1" >f_nTimeoutNumRetries &gt;= f_nMaxRetries</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_nTimeoutNumRetries++;  // Increment count.
Session.f_nPrompt = 1810;]]></script>
          </scripts>
        </action>
        <action id="11" plug-in="Pactolus.Branch.1" ><?xtml-editor x=55 y=193 ?>
          <!--Is direct call enabled?-->
          <results >
            <result name="Default" link="12" stubbed="0"/>
            <result name="Enabled" link="2" stubbed="0" >p_oSUB.bSubDirectCallFlag == true</result>
          </results>
        </action>
        <action id="12" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=271 y=136 ?>
          <!--Play Enable Message ...-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="60" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="&quot;(x)&quot;" language="p_oAPI.strLanguage" digits="f_strDigitsCollected" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >f_oOptions[0].nPressDC</audio>
            <audio type="index" >f_oOptions[0].nOptionDC</audio>
            <audio type="index" >220</audio>
            <audio type="index" >f_oOptions[1].nPressDC</audio>
          </play>
          <results >
            <result name="Default" link="4" stubbed="1"/>
            <result name="Success" link="15" stubbed="0"/>
            <result name="Error" link="4" stubbed="1"/>
            <result name="Timeout" link="9" stubbed="1"/>
            <result name="Return to Main Menu" link="5" stubbed="1" >f_strDigitsCollected match "*"</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_strDigitsCollected = "";

Session.f_oOptions[0].nPressDC = 311;        // Press 1
Session.f_oOptions[0].nOptionDC = 594;       // To enable your easy call id ...

Session.f_oOptions[1].nPressDC = 334;        // Press star at any time to return to main menu ...
]]></script>
          </scripts>
        </action>
        <action id="15" plug-in="Pactolus.Branch.1" ><?xtml-editor x=507 y=195 ?>
          <!--Check for invalid input.-->
          <results >
            <result name="Default" link="17" stubbed="0"/>
            <result name="!isValid" link="6" stubbed="0" >f_bIsValid == false</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_bIsValid = true;
Session.f_nPrompt = 337;

// Check for invalid inputs.
if(Session.f_strDigitsCollected == "" || Session.f_strDigitsCollected.length <= 0 ||
   Session.f_strDigitsCollected.length > 1 || Session.f_strDigitsCollected <= 0 || Session.f_strDigitsCollected > 2)
{
   Session.f_bIsValid = false;
}

// Get user option.
if (Session.f_bIsValid == true) 
{
    if ( Session.f_strDigitsCollected == "1" ) {
       Session.f_nMenuSelection = Session.f_nENABLE_CALL_ID;
    } else {
       Server.logError("Unknown menu option selected: " + Session.f_strDigitsCollected);
    }
}]]></script>
          </scripts>
        </action>
        <action id="17" plug-in="Pactolus.Branch.1" ><?xtml-editor x=742 y=255 ?>
          <!--f_nMenuSelection-->
          <results >
            <result name="Default" link="11" stubbed="1"/>
            <result name="Get New Direct Call ID" link="48" stubbed="0" >f_nMenuSelection == f_nGET_NEW_DIRECT_CALL_ID</result>
            <result name="Play Direct Call ID" link="20" stubbed="0" >f_nMenuSelection == f_nPLAY_DIRECT_CALL_ID</result>
            <result name="Play Destination Number" link="21" stubbed="0" >f_nMenuSelection == f_nPLAY_DESTINATION_NUMBER</result>
            <result name="Change Destination Number" link="46" stubbed="0" >f_nMenuSelection == f_nCHANGE_DESTINATION_NUMBER</result>
            <result name="Disable Feature" link="28" stubbed="0" >f_nMenuSelection == f_nDISABLE_CALL_ID</result>
            <result name="Enable Feature" link="45" stubbed="0" >f_nMenuSelection == f_nENABLE_CALL_ID</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Server.logInfo("Selected Menu Option is: " + Session.f_nMenuSelection);

]]></script>
            <script language="javascript" timing="last" ><![CDATA[if (Session.f_nMenuSelection == Session.f_nDISABLE_CALL_ID) {
    Session.f_bEnableFlag = false;  // Disable direct call.
}


if (Session.f_nMenuSelection == Session.f_nENABLE_CALL_ID) {
    Session.f_bEnableFlag = true;  // Enable direct call.
}]]></script>
          </scripts>
        </action>
        <action id="20" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=1186 y=155 ?>
          <!--Your easy call id is ...-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >605</audio>
            <audio type="digits" >p_oSUB.strDirectCallId</audio>
          </play>
          <results >
            <result name="Default" link="11" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="21" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=1458 y=256 ?>
          <!--602:  Your stored easy call destination number is ...-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >602</audio>
            <audio type="digits" >p_oAPI.strDestinationNumber</audio>
          </play>
          <results >
            <result name="Default" link="11" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="23" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=1294 y=534 ?>
          <!--603: Your easy call id has been disabled.-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >603</audio>
          </play>
          <results >
            <result name="Default" link="5" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="25" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=1706 y=457 ?>
          <!--Your easy destination number has been saved.-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >596</audio>
          </play>
          <results >
            <result name="Default" link="27" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="28" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=1042 y=470 ?>
          <!--"psAPISetSubscriberDirectCallFlag"-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;psAPISetSubscriberDirectCallFlag&quot;" return="f_nReturnCode" external-function="1" library="lib_APISce.xml" >
            <parameter >p_oSUB</parameter>
            <parameter >p_oAPI</parameter>
            <parameter >f_bEnableFlag</parameter>
          </function>
          <results >
            <result name="Default" link="6" stubbed="1"/>
            <result name="Success" link="23" stubbed="0" >f_nReturnCode == 0</result>
            <result name="Error" link="6" stubbed="1" >f_nReturnCode == -1</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_nPrompt = 363;  // Your transaction could not be processed at this time.


]]></script>
          </scripts>
        </action>
        <action id="41" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=1207 y=724 ?>
          <!--"psAPIAddDirectCall"-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;psAPIAddDirectCall&quot;" return="f_nReturnCode" external-function="1" library="lib_APISce.xml" >
            <parameter >p_oSUB</parameter>
            <parameter >p_oAPI</parameter>
            <parameter >p_oMS</parameter>
          </function>
          <results >
            <result name="Default" link="6" stubbed="1"/>
            <result name="Success" link="42" stubbed="0" >f_nReturnCode == 0</result>
            <result name="Error" link="6" stubbed="1" >f_nReturnCode == -1</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_nPrompt = 363;  // Your transaction could not be processed at this time.


]]></script>
          </scripts>
        </action>
        <action id="42" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=1385 y=823 ?>
          <!--596:  Your easy call id has been enabled.-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >604</audio>
          </play>
          <results >
            <result name="Default" link="43" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="43" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=1593 y=915 ?>
          <!--"psAPISetSubscriberDirectCallFlag"-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;psAPISetSubscriberDirectCallFlag&quot;" return="f_nReturnCode" external-function="1" library="lib_APISce.xml" >
            <parameter >p_oSUB</parameter>
            <parameter >p_oAPI</parameter>
            <parameter >f_bEnableFlag</parameter>
          </function>
          <results >
            <result name="Default" link="6" stubbed="1"/>
            <result name="Success" link="49" stubbed="1" >f_nReturnCode == 0</result>
            <result name="Error" link="6" stubbed="1" >f_nReturnCode == -1</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_nPrompt = 363;  // For Error message ... Your transaction could not be processed at this time.
]]></script>
          </scripts>
        </action>
        <action id="44" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=1479 y=436 ?>
          <!--"psAPIUpdateDirectCallDestinationNumber"-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;psAPIUpdateDirectCallDestinationNumber&quot;" return="f_nReturnCode" external-function="1" library="lib_APISce.xml" >
            <parameter >p_oSUB</parameter>
            <parameter >p_oAPI</parameter>
          </function>
          <results >
            <result name="Default" link="25" stubbed="0"/>
            <result name="Success" link="25" stubbed="0" >f_nReturnCode == 0</result>
            <result name="Error" link="6" stubbed="1" >f_nReturnCode == -1</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_nPrompt = 363;  // Your transaction could not be processed at this time.


]]></script>
          </scripts>
        </action>
        <action id="45" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=957 y=583 ?>
          <!--"GetDestinationNumber"-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;GetDestinationNumber&quot;" return="f_nReturnCode" external-function="0" library="lib_APISce.xml" >
            <parameter >p_oSUB</parameter>
            <parameter >p_oAPI</parameter>
            <parameter >p_oMS</parameter>
          </function>
          <results >
            <result name="Default" link="4" stubbed="1"/>
            <result name="Success" link="41" stubbed="0" >f_nReturnCode == 0</result>
            <result name="Error" link="4" stubbed="1" >f_nReturnCode == -1</result>
            <result name="Timeout" link="11" stubbed="1" >f_nReturnCode == -2</result>
            <result name="Cancel" link="11" stubbed="1" >f_nReturnCode == -3</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_nPrompt = 363;  // For Error message ... Your transaction could not be processed at this time.


]]></script>
          </scripts>
        </action>
        <action id="46" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=1227 y=377 ?>
          <!--"GetDestinationNumber"-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;GetDestinationNumber&quot;" return="f_nReturnCode" external-function="0" library="lib_APISce.xml" >
            <parameter >p_oSUB</parameter>
            <parameter >p_oAPI</parameter>
            <parameter >p_oMS</parameter>
          </function>
          <results >
            <result name="Default" link="4" stubbed="1"/>
            <result name="Success" link="44" stubbed="0" >f_nReturnCode == 0</result>
            <result name="Error" link="4" stubbed="1" >f_nReturnCode == -1</result>
            <result name="Timeout" link="11" stubbed="1" >f_nReturnCode == -2</result>
            <result name="Cancel" link="11" stubbed="1" >f_nReturnCode == -3</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_nPrompt = 363;  // For Error message ... Your transaction could not be processed at this time.


]]></script>
          </scripts>
        </action>
        <action id="48" plug-in="Standard.FunctionCall.1" ><?xtml-editor x=919 y=77 ?>
          <!--"psAPISetSubscriberDirectCallFlag"-->
          <function xmlns="urn:www.pactolus.com:xtml:application" name="&quot;psAPIUpdateDirectCallId&quot;" return="f_nReturnCode" external-function="1" library="lib_APISce.xml" >
            <parameter >p_oSUB</parameter>
            <parameter >p_oAPI</parameter>
            <parameter >p_oMS</parameter>
          </function>
          <results >
            <result name="Default" link="6" stubbed="1"/>
            <result name="Success" link="49" stubbed="0" >f_nReturnCode == 0</result>
            <result name="Error" link="6" stubbed="1" >f_nReturnCode == -1</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_nPrompt = 363;    // Your transaction could not be processed ...
]]></script>
          </scripts>
        </action>
        <action id="49" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=1175 y=15 ?>
          <!--Your easy call id is ...-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >605</audio>
            <audio type="digits" >p_oSUB.strDirectCallId</audio>
          </play>
          <results >
            <result name="Default" link="27" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
      </actions>
    </function>
    <function name="GetDestinationNumber" start="1" event="" returns="i4" >
      <parameters >
        <parameter name="p_oSUB" type="object" pass="byref"/>
        <parameter name="p_oAPI" type="object" pass="byref"/>
        <parameter name="p_oMS" type="object" pass="byref"/>
      </parameters>
      <local-vars >
        <var name="f_strDigitsCollected" type="string" ></var>
        <var name="f_strConfirmDestinationNum" type="string" ></var>
        <var name="f_nERROR" type="i4" >-1</var>
        <var name="f_nSUCCESS" type="i4" >0</var>
        <var name="f_nTIMEOUT" type="i4" >-2</var>
        <var name="f_nTimeoutRetries" type="i4" >0</var>
        <var name="f_nMaxRetries" type="i4" >3</var>
        <var name="f_nConfirmRetries" type="i4" >0</var>
        <var name="f_nCANCEL" type="i4" >-3</var>
      </local-vars>
      <actions >
        <action id="1" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=72 y=170 ?>
          <!--607:  Please enter your easy destination number ...-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="p_oSUB.strDirectCallDigitMap" language="p_oAPI.strLanguage" digits="f_strDigitsCollected" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >607</audio>
          </play>
          <results >
            <result name="Default" link="4" stubbed="0"/>
            <result name="Success" link="2" stubbed="0"/>
            <result name="Error" link="4" stubbed="0"/>
            <result name="Timeout" link="8" stubbed="0"/>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_strDigitsCollected = "";]]></script>
          </scripts>
        </action>
        <action id="2" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=377 y=237 ?>
          <!--608 - The destination number your entered is ...-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="&quot;(x)&quot;" language="p_oAPI.strLanguage" digits="f_strConfirmDestinationNum" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >608</audio>
            <audio type="digits" >f_strDigitsCollected</audio>
            <audio type="index" >609</audio>
            <audio type="index" >311</audio>
            <audio type="index" >1282</audio>
            <audio type="index" >312</audio>
          </play>
          <results >
            <result name="Default" link="14" stubbed="0"/>
            <result name="Success" link="14" stubbed="0"/>
            <result name="Error" link="1" stubbed="1"/>
            <result name="Timeout" link="10" stubbed="0"/>
            <result name="Yes, correct ..." link="3" stubbed="0" >f_strConfirmDestinationNum match "1"</result>
            <result name="No, re-enter ..." link="11" stubbed="0" >f_strConfirmDestinationNum match "2"</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_strConfirmDestinationNum = "";
]]></script>
          </scripts>
        </action>
        <action id="3" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=823 y=450 ?>
          <!--f_nSUCCESS-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nSUCCESS"/>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.p_oAPI.strDestinationNumber = Session.f_strDigitsCollected;]]></script>
          </scripts>
        </action>
        <action id="4" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=336 y=107 ?>
          <!--f_nERROR-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nERROR"/>
        </action>
        <action id="6" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=513 y=552 ?>
          <!--f_nTIMEOUT-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nTIMEOUT"/>
        </action>
        <action id="7" plug-in="Pactolus.Branch.1" ><?xtml-editor x=303 y=450 ?>
          <!--Exceeded Max Retry Attempts?-->
          <results >
            <result name="Default" link="1" stubbed="0"/>
            <result name="f_nTimeoutRetries &gt;= f_nMaxRetries" link="6" stubbed="0" >f_nTimeoutRetries &gt;= f_nMaxRetries</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_nTimeoutNumRetries++;  // Increment count.]]></script>
          </scripts>
        </action>
        <action id="8" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=66 y=480 ?>
          <!--I'm Sorry ... I did not hear anything.-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >301</audio>
            <audio type="index" >1810</audio>
          </play>
          <results >
            <result name="Default" link="7" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="9" plug-in="Pactolus.Branch.1" ><?xtml-editor x=866 y=144 ?>
          <!--Exceeded Max Retry Attempts?-->
          <results >
            <result name="Default" link="2" stubbed="0"/>
            <result name="f_nConfirmRetries &gt;= f_nMaxRetries" link="6" stubbed="1" >f_nConfirmRetries &gt;= f_nMaxRetries</result>
          </results>
          <scripts >
            <script language="javascript" timing="first" ><![CDATA[Session.f_nConfirmRetries++;  // Increment count.]]></script>
          </scripts>
        </action>
        <action id="10" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=611 y=156 ?>
          <!--I'm Sorry ... I did not hear anything.-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >301</audio>
            <audio type="index" >1810</audio>
          </play>
          <results >
            <result name="Default" link="9" stubbed="0"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
        <action id="11" plug-in="Standard.FunctionReturn.1" ><?xtml-editor x=614 y=490 ?>
          <!--f_nCANCEL-->
          <return xmlns="urn:www.pactolus.com:xtml:application" value="f_nCANCEL"/>
        </action>
        <action id="14" plug-in="Pactolus.MGCPPlay.1" ><?xtml-editor x=776 y=313 ?>
          <!--I'm Sorry.   Invalid Option.-->
          <play xmlns="urn:www.pactolus.com:xtml:media" connection-id="p_oMS.strConnectionId" endpoint="p_oMS.strEndPoint" callid="p_oMS.strCallId" repeat="1" timeout="" ms-type="p_oMS.strType" returns="" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="p_oAPI.strLanguage" digits="" retry-count="" clear-digits="1" terminating-digit="" quick-collect="0" digit-timer="" >
            <audio type="index" >301</audio>
            <audio type="index" >337</audio>
          </play>
          <results >
            <result name="Default" link="2" stubbed="1"/>
            <result name="Success"/>
            <result name="Error"/>
            <result name="Timeout"/>
          </results>
        </action>
      </actions>
    </function>
  </functions>
  <script language="javascript" ><![CDATA[#include <javascript_utils.jsh>]]></script>
  <properties >
    <property key="default" value="C:/prompts/pactolus/english/vox/pcs_english.vox"/>
    <property key="disable-logging" value=""/>
    <property key="js-include-path" value="../Libs"/>
    <property key="library-modules" value="lib_3WayCalling.xml;lib_APISce.xml;lib_acd.xml;lib_soap.xml;lib_speeddial.xml;lib_utils.xml;lib_moh.xml;lib_callcontrol.xml;lib_mediaserver.xml;javascript_utils.jsh;dialing_plan_utils.jsh"/>
    <property key="library-path" value="../Libs"/>
  </properties>
  <application-version >
    <revision >$Id: lib_utils.xml,v 1.144 2007/12/07 20:59:28 hlam Exp $</revision>
    <label >$Name: PCS-A-4-1-1-1-4-c6 $</label>
  </application-version>
</xtml>