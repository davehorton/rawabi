<?xml version="1.0"?>
<xtml version="1.0"><events><event name="OnIVRConfAddParty" display="IVRConfAddParty"><parameter name="calledNumber" type="string"/><parameter name="callingNumber" type="string"/><parameter name="endPoint" type="string"/><parameter name="transactionID" type="string"/></event><event name="OnIVRConfBridgeParty" display="IVRConfBridgeParty"><parameter name="strMSEndPoint" type="string"/></event><event name="OnIVRConfRemoveParty" display="IVRConfRemoveParty"/><event name="ConfHoldPartyRequest" display="ConfHoldPartyRequest"><parameter name="strConfControllerIpAddress" type="string"/><parameter name="nConfControllerPort" type="i4"/><parameter name="strTransactionId" type="string"/></event><event name="ConfOffholdPartyRequest" display="ConfOffholdPartyRequest"><parameter name="strConfControllerIpAddress" type="string"/><parameter name="nConfControllerPort" type="i4"/><parameter name="strTransactionId" type="string"/></event><event name="ConfPlayPromptRequest" display="ConfPlayPromptRequest"><parameter name="nIndex" type="i4"/></event><event name="ModeratorJoinRequest" display="ModeratorJoinRequest"><parameter name="strConferenceResource" type="string"/></event><event name="IVRConfAddPartyResponse" display="IVRConfAddPartyResponse"><parameter name="intReturnCode" type="i4"/><parameter name="strReturnMsg" type="string"/></event><event name="OnConfPlayWarningPromptRequest" display="ConfPlayWarningPromptRequest"><parameter name="strConfControllerIP" type="string"/><parameter name="strConfControllerPort" type="string"/><parameter name="strTransactionID" type="string"/><parameter name="intMinute" type="i4"/><parameter name="intSecond" type="i4"/></event><event name="ConfFunctionsStateChange" display="ConfFunctionsStateChange"><parameter name="strConfControllerIP" type="string"/><parameter name="intConfControllerPort" type="i4"/><parameter name="strTransactionID" type="string"/><parameter name="strConferenceID" type="string"/><parameter name="strFunctionName" type="string"/><parameter name="strNewState" type="string"/></event><event name="IVRConfPartyDecline" display="IVRConfPartyDecline"/></events><global-handlers><handler event="ConfMutePartyRequest" function="OnMutePartyRequest" public="0" always-on="0"/><handler event="ConfRemovePartyRequest" function="OnRemovePartyRequest" public="0" always-on="0"/><handler event="ConfAddPartyRequest" function="OnAddPartyRequest" public="1" always-on="0"/><handler event="Pactolus.EveSipInvite.1" function="OnInvite" public="1" always-on="0"/><handler event="Pactolus.EveSipBye.1" function="OnBye" public="0" always-on="0"/><handler event="Pactolus.EveSipCancel.1" function="OnCancel" public="0" always-on="0"/><handler event="Standard.OnServiceLoad.1" function="OnServiceLoad" public="0" always-on="0"/><handler event="Standard.OnSessionEnd.1" function="OnSessionEnd" public="0" always-on="0"/><handler event="Standard.OnTimer.1" function="OnTimer" public="0" always-on="0"/><handler event="ConfUnmutePartyRequest" function="OnUnmutePartyRequest" public="0" always-on="0"/><handler event="Pactolus.EveSipOptions.1" function="OnOptions" public="0" always-on="0"/><handler event="Pactolus.EveSipResponse.1" function="OnResponse" public="0" always-on="0"/><handler event="Pactolus.MGCPDtmf.1" function="OnDTMF" public="0" always-on="0"/><handler event="OnIVRConfAddParty" function="OnIVRConfAddParty" public="1" always-on="0"/><handler event="OnIVRConfBridgeParty" function="OnIVRConfBridgeParty" public="0" always-on="0"/><handler event="OnIVRConfRemoveParty" function="OnIVRConfRemoveParty" public="0" always-on="0"/><handler event="ConfHoldPartyRequest" function="ConfHoldPartyRequest" public="0" always-on="0"/><handler event="ConfOffholdPartyRequest" function="ConfOffholdPartyRequest" public="0" always-on="0"/><handler event="ConfPlayPromptRequest" function="OnConfPlayPromptRequest" public="0" always-on="0"/><handler event="ModeratorJoinRequest" function="ModeratorJoinRequest" public="0" always-on="0"/><handler event="OnConfPlayWarningPromptRequest" function="OnConfPlayWarningPromptRequest" public="0" always-on="0"/><handler event="ConfFunctionsStateChange" function="ConfFunctionsStateChange" public="0" always-on="0"/></global-handlers><global-vars><var name="g_intReturnCode" type="i4">0</var><var name="g_strFrom" type="string"></var><var name="g_strTo" type="string"></var><var name="g_strVia" type="string"></var><var name="g_strContent" type="string"></var><var name="g_strCallId" type="string"></var><var name="g_strCSeq" type="string"></var><var name="g_strRequestURI" type="string"></var><var name="g_boolConnectedToMS" type="boolean">0</var><var name="g_longStartTime" type="i8">0</var><var name="g_longEndTime" type="i8">0</var><var name="g_longMSConnectTime" type="i8">0</var><var name="g_strOrigNbr" type="string"></var><var name="g_strInfoDigits" type="string"></var><var name="g_strConfResource" type="string"></var><var name="g_strPassCode" type="string"></var><var name="g_strAccessNumber" type="string"></var><var name="g_intScheduleDuration" type="i4">0</var><var name="g_strScheduleStartTime" type="string"></var><var name="g_longTimeAvailable" type="i8">0</var><var name="g_strConfScheduleId" type="string"></var><var name="g_strCallLegId" type="string"></var><var name="g_intAccessNumberId" type="i4">0</var><var name="g_strConfEventId" type="string"></var><var name="g_longTimerId" type="i8">0</var><var name="g_boolTimerSet" type="boolean">0</var><var name="g_strMSCallId" type="string"></var><var name="g_intCallMode" type="i4">1</var><var name="g_intTerminationReason" type="i4">0</var><var name="g_strMSConnectionId" type="string"></var><var name="g_strMSSDP" type="string"></var><var name="g_strMSEndPoint" type="string"></var><var name="g_intJoinTonePrompt" type="i4">4</var><var name="g_strConfControllerIP" type="string"></var><var name="g_intConfControllerPort" type="i4">1234</var><var name="g_strModeratorFlag" type="string"></var><var name="g_strCallerOrg" type="string"></var><var name="g_strCallerFirstName" type="string"></var><var name="g_strReturnMsg" type="string"></var><var name="g_intSoapPort" type="i4">0</var><var name="g_strSessionID" type="string"></var><var name="g_strSoapAddress" type="string"></var><var name="g_strSipAddress" type="string"></var><var name="g_strAppServerAddress" type="string"></var><var name="g_intSipPort" type="i4">0</var><var name="g_strDestNbr" type="string"></var><var name="g_longServiceProviderID" type="i8">0</var><var name="g_strRetryFlag" type="string">F</var><var name="g_intAllowPasscodeTries" type="i4">0</var><var name="g_intNumbPasscodeTries" type="i4">0</var><var name="g_strOrigDomIntlFlag" type="string">D</var><var name="g_intOrigCountryID" type="i4">0</var><var name="g_strGWIpIngress" type="string"></var><var name="g_intGWPortIngress" type="i4">0</var><var name="g_strGWIpEngress" type="string"></var><var name="g_intGWPortEngress" type="i4">0</var><var name="g_intRtpClockRate" type="i4">0</var><var name="g_intRtpEncoding" type="i4">0</var><var name="g_strOutdialFlag" type="string">F</var><var name="g_intDialPlanID" type="i4">1</var><var name="g_strDBSessionID" type="string"></var><var name="g_strWelcomePromptType" type="string"></var><var name="g_strWelcomePromptUrl" type="string"></var><var name="g_intWelcomePromptIndex" type="i4">0</var><var name="g_strCustomerServicePhone" type="string"></var><var name="g_strPartyPasscodeFlag" type="string"></var><var name="g_strTransactionID" type="string"></var><var name="g_longTransactionID" type="i8">0</var><var name="g_boolInConference" type="boolean">0</var><var name="g_strCallerLastName" type="string"></var><var name="g_strOrigCallingCode" type="string"></var><var name="g_strOrigAreaCode" type="string"></var><var name="g_strSIPStatus" type="string"></var><var name="g_strLanguage" type="string">en</var><var name="g_strMuteFlag" type="string"></var><var name="g_strEventReceived" type="string"></var><var name="g_strConfPassCode" type="string"></var><var name="g_intMaxCallerHoldTime" type="i4">0</var><var name="g_strFirstModeratorFlag" type="string"></var><var name="g_strTerminationDigit" type="string"></var><var name="g_boolNullString" type="boolean">0</var><var name="g_boolReturnToConf" type="boolean">0</var><var name="g_intCurrentNbrCallegs" type="i4">0</var><var name="g_boolNewConfCreated" type="boolean">0</var><var name="g_boolWaitForModerator" type="boolean">0</var><var name="g_longWFMTimerID" type="i8">0</var><var name="g_longHoldTimerID" type="i8">0</var><var name="g_boolHoldTimerFlag" type="boolean">0</var><var name="g_strPostPinPromptType" type="string"></var><var name="g_strPostPinPromptUrl" type="string"></var><var name="g_intPostPinPromptIndex" type="i4">0</var><var name="g_intTempInt" type="i4">0</var><var name="g_strOutdialDestNbr" type="string"></var><var name="g_intDestCountryID" type="i4">0</var><var name="g_strDestDomIntlFlag" type="string"></var><var name="g_strDestAreaCode" type="string"></var><var name="g_strDestCallingCode" type="string"></var><var name="g_intServiceID" type="i4">0</var><var name="g_strSPTimeZone" type="string"></var><var name="g_boolWebDialOut" type="boolean">0</var><var name="g_boolIVRDialOut" type="boolean">0</var><var name="g_strSelfMute" type="string">F</var><var name="g_intPromptMuteUnMute" type="i4">859</var><var name="g_intPromptLockUnLock" type="i4">857</var><var name="g_intPromptAllowDisallow" type="i4">902</var><var name="g_strPartyScheduleID" type="string"></var><var name="g_strStatus" type="string"></var><var name="g_strIntlPrependFlag" type="string">F</var><var name="g_intLocalGMTOffset" type="i4">0</var><var name="g_strStrippedOrigNbr" type="string"></var><var name="g_strAlarmType" type="string"></var><var name="g_strAlarmPriority" type="string"></var><var name="g_strOrigASDP" type="string"></var><var name="g_strContact" type="string"></var><var name="g_intPromptSelfMuteUnMute" type="i4">907</var><var name="g_strIVRAddPartySessionID" type="string"></var><var name="g_strLastPartySessionID" type="string"></var><var name="g_strModeratorRequiredFlag" type="string"></var><var name="g_strMSMemberEndPoint" type="string"></var><var name="g_strMSConferenceID" type="string"></var><var name="g_strDBNAME" type="string">pactolusdb</var><var name="g_boolCurrentlyInMMenu" type="boolean">0</var><var name="g_boolMutedState" type="boolean">0</var><var name="g_boolFirstCaller" type="boolean">0</var><var name="g_strNewConfResource" type="string"></var><var name="g_boolInNewConf" type="boolean">0</var><var name="g_boolMutedByMod" type="boolean">0</var><var name="g_boolHoldState" type="boolean">0</var></global-vars><shared-vars><var name="s_intTIMEOUT" type="i4">60</var><var name="s_intSTATE_GET_PASSCODE" type="i4">2</var><var name="s_intSTATE_SET_CONFRESOURCE" type="i4">4</var><var name="s_intSTATE_DIRECT_TO_MS" type="i4">1</var><var name="s_intSTATE_END_CALL" type="i4">10</var><var name="s_intSTATE_REPLY_UNAVAILABLE" type="i4">9</var><var name="s_intFAILURE" type="i4">-1</var><var name="s_intSUCCESS" type="i4">0</var><var name="s_intFIRSTCALLER" type="i4">1</var><var name="s_intNONFIRSTCALLER" type="i4">0</var><var name="s_intENDCALL" type="i4">-2</var><var name="s_intSTATE_MS_TO_CALLER" type="i4">3</var><var name="s_intSTATE_CONF_PLAY_PROMPT" type="i4">5</var><var name="s_strCONF_LEAVE" type="string">ConfLeaveEvent</var><var name="s_strCONF_JOIN" type="string">ConfJoinEvent</var><var name="s_strCONF_ADD_RESPONSE" type="string">ConfAddPartyResponse</var><var name="s_strCONF_REMOVE_RESPONSE" type="string">ConfRemovePartyResponse</var><var name="s_strCONF_MUTE_RESPONSE" type="string">ConfMutePartyResponse</var><var name="s_strCONF_UNMUTE_RESPONSE" type="string">ConfUnmutePartyResponse</var><var name="s_intSTATE_INITIALIZE_CONF" type="i4">0</var><var name="s_intPROMPT_DEPART_TONE" type="i4">234</var><var name="s_intPROMPT_JOIN_TONE" type="i4">233</var><var name="s_intPROMPT_LOGIN_FAIL" type="i4">853</var><var name="s_intPROMPT_NO_RESPONSE" type="i4">552</var><var name="s_intPROMPT_PASSWORD" type="i4">852</var><var name="s_intPROMPT_TRY_AGAIN" type="i4">853</var><var name="s_intPROMPT_WELCOME" type="i4">4009</var><var name="s_intPROMPT_FIRST_CALLER" type="i4">4010</var><var name="s_intPROMPT_TO_EARLY" type="i4">872</var><var name="s_intSTATE_WAIT" type="i4">-1</var><var name="s_intPROMPT_TOO_LATE" type="i4">875</var><var name="s_intPROMPT_DISABLED_SUB" type="i4">506</var><var name="s_intPROMPT_MAX_ATTENDEES" type="i4">880</var><var name="s_intPROMPT_DB_ERROR" type="i4">874</var><var name="s_strEMPTY_STRING" type="string"></var><var name="s_intRING_NO_ANSWER" type="i4">20</var><var name="s_strCONF_LOCK_REQUEST" type="string">LockConferenceRequest</var><var name="s_strCONF_UNLOCK_REQUEST" type="string">UnlockConferenceRequest</var><var name="s_strCONF_END_REQUEST" type="string">EndConferenceRequest</var><var name="s_strCONF_REMOVE_LAST_REQUEST" type="string">RemoveLastPartyRequest</var><var name="s_strCONF_ADD_REQUEST" type="string">ConfAddPartyRequest</var><var name="s_strCONF_HOLD_RESPONSE" type="string">ConfHoldPartyResponse</var><var name="s_strCONF_OFFHOLD_RESPONSE" type="string">ConfOffholdPartyResponse</var><var name="s_strMUTE_ALL_REQUEST" type="string">MuteAllRequest</var><var name="s_strUNMUTE_ALL_REQUEST" type="string">UnmuteAllRequest</var><var name="s_strCONF_EXTENT_REQUEST" type="string">ExtendConferenceRequest</var><var name="s_intPROMPT_CONF_LOCKED" type="i4">888</var><var name="s_intPROMPT_CONF_ENDED" type="i4">875</var><var name="s_intPROMPT_PASSCODE_INUSED" type="i4">877</var><var name="s_intPROMPT_MOD_NOT_IN" type="i4">876</var><var name="s_intPROMPT_NO_CONF_CONTROLLER" type="i4">874</var><var name="s_intSTATE_WAIT_FOR_MOD" type="i4">6</var><var name="s_intSLEEPTIME" type="i4">10</var><var name="s_intWFM" type="i4">-11</var><var name="s_strCONF_CONTINUE_REQUEST" type="string">ContinueConferenceRequest</var><var name="s_strCONF_DISCONTINUE_REQUEST" type="string">DiscontinueConferenceRequest</var><var name="s_strIVR_CONF_ADD_PARTY" type="string">OnIVRConfAddParty</var><var name="s_strIVR_CONF_REMOVE_PARTY" type="string">OnIVRConfRemoveParty</var><var name="s_strIVR_CONF_BRIDGE_PARTY" type="string">OnIVRConfBridgeParty</var><var name="s_strIVR_CONF_ADD_RESPONSE" type="string">IVRConfAddPartyResponse</var><var name="s_strSEND_ALARM_REQUEST" type="string">OnAlarm</var><var name="s_strIVR_CONF_PARTY_DECLINE" type="string">IVRConfPartyDecline</var><var name="s_strPrimaryPSX" type="string"></var><var name="s_strBackupPSX" type="string"></var><var name="s_strUseSoftswitchFlag" type="string"></var><var name="s_strLocalHost" type="string"></var><var name="s_strDEFAULT_ANI" type="string"></var><var name="s_strMediaServerType" type="string">NMS</var><var name="s_intSTATE_CREATE_CONFERENCE" type="i4">7</var><var name="s_intSTATE_ADD_TO_CONFERENCE" type="i4">8</var><var name="s_intPacketizationPeriod" type="i4">20</var><var name="s_strApplicationName" type="string"></var><var name="s_strSendAlarmFlag" type="string"></var></shared-vars><functions><function name="OnInvite" start="26" returns="void"><parameters><parameter name="strAccept" type="string"/><parameter name="strAcceptEncoding" type="string"/><parameter name="strAcceptLanguage" type="string"/><parameter name="strAuthorization" type="string"/><parameter name="strCallId" type="string"/><parameter name="strContact" type="string"/><parameter name="strContent" type="string"/><parameter name="strContentDisposition" type="string"/><parameter name="strContentType" type="string"/><parameter name="strCSeq" type="string"/><parameter name="strDate" type="string"/><parameter name="strEncryption" type="string"/><parameter name="strExpires" type="string"/><parameter name="strFrom" type="string"/><parameter name="nMaxForwards" type="i2"/><parameter name="strProxyAuthorization" type="string"/><parameter name="strProxyRequire" type="string"/><parameter name="strRecordRoute" type="string"/><parameter name="strRequestURI" type="string"/><parameter name="strRequire" type="string"/><parameter name="strResponseKey" type="string"/><parameter name="strRoute" type="string"/><parameter name="strSessionExpires" type="string"/><parameter name="strSubject" type="string"/><parameter name="strSupported" type="string"/><parameter name="strTimestamp" type="string"/><parameter name="strTo" type="string"/><parameter name="strVia" type="string"/></parameters><local-vars><var name="strRequestNotify" type="string"></var><var name="bool_ReInviteFlag" type="boolean">0</var><var name="bool_New_A_SDP" type="boolean">0</var></local-vars><actions><action id="26" plug-in="Pactolus.Branch.1"><?xtml-editor x=95 y=91 ?><!--re-invite?--><results><result name="Default" link="1" stubbed="0"/><result name="re-invite" link="27" stubbed="0">bool_ReInviteFlag == true</result></results><scripts><script language="javascript" timing="first"><![CDATA[var tempResult;

tempResult = Clib.strcmpi(Session.strCallId, Session.g_strCallId);
if (0 == tempResult)
{
	Session.bool_ReInviteFlag = true;
	tempResult = Clib.strcmpi(Session.strContent, Session.g_strOrigASDP);
	if (tempResult != 0)
	{
		Session.bool_New_A_SDP = true;
		Session.g_strContent = Session.strContent;
	}
}

Session.g_strContact = "sip:" + Server.ipAddress;
if( Server.sipPort != 5060 )
{
 Session.g_strContact += ":" + Server.sipPort;
}

]]></script></scripts></action><action id="1" plug-in="Pactolus.Branch.1"><?xtml-editor x=317 y=222 ?><!--save caller info--><results><result name="Default" link="30" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_longStartTime = Server.getUTCTime();
Session.g_strSessionID = Session._sessionId;
Session.g_strAppServerAddress = Server.ipAddress;
Session.g_strSipAddress = Server.sipAddress;
Session.g_intSipPort = Server.sipPort;
Session.g_strSoapAddress = Server.soapAddress;
Session.g_intSoapPort = Server.soapPort;
Session.g_strFrom = Session.strFrom;
Session.g_strTo = Session.strTo;
Session.g_strVia = Session.strVia;
Session.g_strCallId = Session.strCallId;
Session.g_strCSeq = Session.strCSeq;
Session.g_strContent = Session.strContent;
Session.g_strRequestURI = Session.strContact + " SIP/2.0";
var from = new SipFrom(Session.strFrom);
Session.g_strOrigNbr = from.url.user;
if (Session.g_strOrigNbr.length == 0)
{
	Session.g_strOrigNbr = Session.s_strDEFAULT_ANI;
}
Session.g_strGWIpIngress = from.url.host;
Session.g_intGWPortIngress = from.url.port;

var contact = new SipNameAddr(Session.strContact);
Session.g_strGWIpEngress = contact.url.host;
Session.g_intGWPortEngress = contact.url.port;

var to = new SipTo(Session.strTo);
Session.g_strAccessNumber = to.url.user;

//parse out the info digits
var from_uri = new SipFrom( Session.strFrom ) ;
var phoneA = new String(from_uri.url.user);
if (phoneA.charAt(0) == "+")
{
	Session.g_strIntlPrependFlag = "T";
}

//search all of the url parameters
for( var i = 0; i < from_uri.url.parms.length; i++ )
{
	//separate parameter tokens from values (i.e, token=value)
	var arr = from_uri.url.parms[i].split( '=' ) ;
	if( arr.length == 2 )
	{
		var i = 0 ;
		
		//skip leading whitespace for tokens
		while( arr[0].charAt( i ) == ' ' )
		{
			i++ ;
		}
		arr[0] = arr[0].slice( i ) ;

		//now check to see if the token is "isup-oli", this indicates info digits 
		if( arr[0] == "isup-oli")
		{
			Session.g_strInfoDigits = arr[1] ;
			break ;
		}
	}
}
Server.logInfo( "Info digits for incoming call are: " + Session.g_strInfoDigits ) ;]]></script><script language="javascript" timing="last"><![CDATA[Server.logInfo("INFO: THE SIP ADDRESS IS: " + Server.sipAddress);
Server.logInfo("INFO: THE SIP PORT IS: " + Server.sipPort);
Server.logInfo("INFO: THE SOAP ADDRESS IS: " + Server.soapAddress);
Server.logInfo("INFO: THE SOAP PORT IS: " + Server.soapPort);]]></script></scripts></action><action id="2" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1307 y=221 ?><!--Goto MAIN function
Direct caller to MS--><function name="&quot;Main&quot;" return=""/><results><result name="Default" link="24" stubbed="0"/></results></action><action id="12" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=972 y=506 ?><return value=""/></action><action id="19" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1050 y=222 ?><!--strip the leading one of access number--><function name="&quot;StripLeadingOne&quot;" return="g_strAccessNumber"><parameter>g_strAccessNumber</parameter></function><results><result name="Default" link="2" stubbed="0"/></results></action><action id="22" plug-in="Standard.FunctionCall.1"><?xtml-editor x=528 y=381 ?><!--party join to conf controller--><function name="&quot;PartyJoin&quot;" return=""/><results><result name="Default" link="23" stubbed="0"/></results></action><action id="23" plug-in="Standard.FunctionCall.1"><?xtml-editor x=750 y=439 ?><!--set DTMF Detection ON--><function name="&quot;SetDTMFOn&quot;" return=""/><results><result name="Default" link="12" stubbed="0"/></results></action><action id="24" plug-in="Pactolus.Branch.1"><?xtml-editor x=314 y=381 ?><!--wait for moderator--><results><result name="Default" link="22" stubbed="0"/><result name="WaitForModerator==true" link="25" stubbed="0">g_boolWaitForModerator == true</result></results></action><action id="25" plug-in="Pactolus.Branch.1"><?xtml-editor x=544 y=536 ?><results><result name="Default" link="12" stubbed="0"/></results></action><action id="27" plug-in="Pactolus.SipResponse.1"><?xtml-editor x=326 y=76 ?><!--200 OK--><sip-response remove-via="0" reliable="0"><call-id>strCallId</call-id><contact>g_strContact</contact><cseq>strCSeq</cseq><from>strFrom</from><status>"SIP/2.0 200 OK"</status><to>strTo</to><via>strVia</via></sip-response><results><result name="Default" link="28" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS RESPONSE 200 OK FOR RE-INVITE.");
}
else
{
	Server.logError("ERROR: FAIL TO RESPONSE 200 OK FOR RE-INVITE, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="28" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=555 y=78 ?><return value=""/></action><action id="30" plug-in="Pactolus.UserFunction.1"><?xtml-editor x=579 y=191 ?><!--Format g_strOrigNbr--><user-function process="&quot;PACTOLUS_ps_c_adaptor&quot;" function="&quot;strip_digits&quot;" timeout="s_intTIMEOUT" return="g_intReturnCode" async="0"><parameter>g_strOrigNbr</parameter><parameter>g_strOrigNbr</parameter></user-function><results><result name="Default" link="32" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[//Server.logInfo("BEFORE: phone number is " + Session.g_strOrigNbr);]]></script><script language="javascript" timing="last"><![CDATA[//Server.logInfo("AFTER: phone number is " + Session.g_strOrigNbr);
if (Result.id == 2)
{
	//Server.logInfo("INFO: SUCCESS CALL C++ FUNCTION.");
}
else
{
	Server.logError("ERROR: FAIL TO CALL C++ FUNCTION, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="32" plug-in="Pactolus.UserFunction.1"><?xtml-editor x=821 y=194 ?><!--Format g_strInfoDigits--><user-function process="&quot;PACTOLUS_ps_c_adaptor&quot;" function="&quot;strip_digits&quot;" timeout="s_intTIMEOUT" return="g_intReturnCode" async="0"><parameter>g_strInfoDigits</parameter><parameter>g_strInfoDigits</parameter></user-function><results><result name="Default" link="19" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[// Server.logInfo("BEFORE: info digit is " + Session.g_strInfoDigits);]]></script><script language="javascript" timing="last"><![CDATA[//Server.logInfo("AFTER: info digit is " + Session.g_strInfoDigits);
if (Result.id == 2)
{
	//Server.logInfo("INFO: SUCCESS CALL C++ FUNCTION.");
}
else
{
	Server.logError("ERROR: FAIL TO CALL C++ FUNCTION, EXIT ON: " + Result.name);
}]]></script></scripts></action></actions></function><function name="DirectCallerToMS" start="1" returns="i4"><actions><action id="1" plug-in="Pactolus.MSConnect.1"><?xtml-editor x=84 y=313 ?><!--connect caller to MS--><cc-connect call-id="g_strCallId" caller-sdp="g_strContent" capability="0" inbound="1" returns="g_intReturnCode" timeout="s_intTIMEOUT" endpoint="g_strMSEndPoint" connection-id="g_strMSConnectionId" ms-sdp="g_strMSSDP" to="g_strTo" from="g_strFrom" cseq="g_strCSeq" via="g_strVia" mgcp-call-id="g_strMSCallId" ingress-gateway="" packetization-period="s_intPacketizationPeriod" codec="0"/><results><result name="Default" link="6" stubbed="0"/><result name="Success" link="2" stubbed="0"/><result name="Error"/><result name="Timeout"/><result name="Resource Unavailable"/><result name="Caller Hung up" link="4" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: DIRECT CALLER TO MS ");
Server.logInfo("INFO: BEFORE g_strMSSDP = " + Session.g_strMSSDP);
Server.logInfo("INFO: BEFORE g_strMSCallId = " + Session.g_strMSCallId);
Server.logInfo("INFO: BEFORE g_strMSConnectionId = " + Session.g_strMSConnectionId);
Server.logInfo("INFO: BEFORE g_strMSEndPoint = " + Session.g_strMSEndPoint);]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS CONNECT TO MS.");
	Server.logInfo("INFO: AFTER g_strMSSDP = " + Session.g_strMSSDP);
	Server.logInfo("INFO: AFTER g_strMSCallId = " + Session.g_strMSCallId);
	Server.logInfo("INFO: AFTER g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logInfo("INFO: AFTER g_strMSEndPoint = " + Session.g_strMSEndPoint);
}
else
{
	Server.logError("ERROR: FAIL TO CONNECT TO MS, EXIT ON: " + Result.name);
	Server.logError("ERROR: g_strMSCallId = " + Session.g_strMSCallId);
	Server.logError("ERROR: g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: g_strMSEndPoint = " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=388 y=372 ?><!--SUCCESS--><return value="s_intSUCCESS"/><scripts><script language="javascript" timing="first"><![CDATA[// Session.g_longStartTime = Server.getUTCTime();
Session.g_boolConnectedToMS = true;]]></script></scripts></action><action id="3" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=808 y=234 ?><!--FAILURE--><return value="s_intFAILURE"/><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: FAIL TO DIRECT CALLER TO MS.");]]></script></scripts></action><action id="4" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=394 y=466 ?><!--ENDCALL--><return value="s_intENDCALL"/></action><action id="5" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=579 y=236 ?><!--send ALARM--><SOAP destination-ip="" transaction="" message-name="s_strSEND_ALARM_REQUEST" destination-port="" destination-type="1" destination-session="" waiting-session-selected=""><parameter tag="&quot;calling_number&quot;" value="g_strAlarmType"/><parameter tag="&quot;called_number&quot;" value="g_strAlarmPriority"/></SOAP><results><result name="Default" link="3" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strAlarmType = "MEDIASERVER: connect party to ms";
Session.g_strAlarmPriority = "MAJOR";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND ALERT");
}
else
{
	Server.logError("ERROR: FAIL TO SEND ALERT, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="6" plug-in="Pactolus.Branch.1"><?xtml-editor x=338 y=122 ?><!--s_strSendAlarmFlag==T--><results><result name="Default" link="3" stubbed="0"/><result name="s_strSendAlarmFlag==T" link="5" stubbed="0">s_strSendAlarmFlag match "T"</result></results></action></actions></function><function name="OutdialFromMSToCaller" start="6" returns="i4"><actions><action id="6" plug-in="Pactolus.Branch.1"><?xtml-editor x=210 y=337 ?><!--g_strMuteFlag==T--><results><result name="Default" link="1" stubbed="0"/><result name="g_strMuteFlag==T" link="11" stubbed="0">g_strMuteFlag match "T"</result></results></action><action id="1" plug-in="Pactolus.MSConnect.1"><?xtml-editor x=434 y=273 ?><!--connect caller to MS--><cc-connect call-id="g_strCallId" caller-sdp="g_strContent" capability="2" inbound="0" returns="g_intReturnCode" timeout="s_intTIMEOUT" endpoint="g_strMSEndPoint" connection-id="g_strMSConnectionId" ms-sdp="g_strMSSDP" to="g_strFrom" from="g_strTo" cseq="g_strCSeq" via="" mgcp-call-id="g_strMSCallId" ingress-gateway="g_strRequestURI" packetization-period="s_intPacketizationPeriod" codec="0"/><results><result name="Default" link="15" stubbed="0"/><result name="Success" link="2" stubbed="0"/><result name="Error"/><result name="Timeout"/><result name="Resource Unavailable"/><result name="Caller Hung up" link="4" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: **** OUTDIAL FROM MEDIA SERVER TO CALLER ****");]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS CREATE MS CONNECTION");
	Server.logInfo("INFO: AFTER g_strMSSDP = " + Session.g_strMSSDP);
	Server.logInfo("INFO: AFTER g_strMSCallId = " + Session.g_strMSCallId);
	Server.logInfo("INFO: AFTER g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logInfo("INFO: AFTER g_strMSEndPoint = " + Session.g_strMSEndPoint);
}
else
{
	Server.logError("ERROR: FAIL TO CREATE MS CONNECTION, EXIT ON: " + Result.name);
	Server.logError("ERROR: g_strMSCallId = " + Session.g_strMSCallId);
	Server.logError("ERROR: g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: g_strMSEndPoint = " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=666 y=350 ?><!--SUCCESS--><return value="s_intSUCCESS"/><scripts><script language="javascript" timing="first"><![CDATA[Session.g_boolConnectedToMS = true;
Session.g_boolInConference = true;
Session.g_longMSConnectTime = Server.getUTCTime();]]></script></scripts></action><action id="3" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1327 y=186 ?><!--FAILURE--><return value="s_intFAILURE"/></action><action id="4" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=666 y=429 ?><!--ENDCALL--><return value="s_intENDCALL"/><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intTerminationReason = 1;]]></script></scripts></action><action id="5" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1085 y=184 ?><!--Hangup caller--><function name="&quot;HangUpCaller&quot;" return=""/><results><result name="Default" link="3" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intTerminationReason = 17;]]></script></scripts></action><action id="7" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=687 y=800 ?><!--SUCCESS--><return value="s_intSUCCESS"/><scripts><script language="javascript" timing="first"><![CDATA[Session.g_boolConnectedToMS = true;
Session.g_boolInConference = true;
Session.g_longMSConnectTime = Server.getUTCTime();]]></script></scripts></action><action id="8" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1343 y=658 ?><!--FAILURE--><return value="s_intFAILURE"/></action><action id="9" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=691 y=874 ?><!--ENDCALL--><return value="s_intENDCALL"/><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intTerminationReason = 1;]]></script></scripts></action><action id="10" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1111 y=656 ?><!--Hangup caller--><function name="&quot;HangUpCaller&quot;" return=""/><results><result name="Default" link="8" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intTerminationReason = 17;]]></script></scripts></action><action id="11" plug-in="Pactolus.MSConnect.1"><?xtml-editor x=442 y=667 ?><!--connect caller to MS--><cc-connect call-id="g_strCallId" caller-sdp="g_strContent" capability="2" inbound="0" returns="g_intReturnCode" timeout="s_intTIMEOUT" endpoint="g_strMSEndPoint" connection-id="g_strMSConnectionId" ms-sdp="g_strMSSDP" to="g_strFrom" from="g_strTo" cseq="g_strCSeq" via="" mgcp-call-id="g_strMSCallId" ingress-gateway="g_strRequestURI" packetization-period="s_intPacketizationPeriod" codec="0"/><results><result name="Default" link="14" stubbed="0"/><result name="Success" link="7" stubbed="0"/><result name="Error"/><result name="Timeout"/><result name="Resource Unavailable"/><result name="Caller Hung up" link="9" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: **** OUTDIAL FROM MEDIA SERVER TO CALLER ****");]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS DELETE MS CONNECTION");
	Server.logInfo("INFO: AFTER g_strMSSDP = " + Session.g_strMSSDP);
	Server.logInfo("INFO: AFTER g_strMSCallId = " + Session.g_strMSCallId);
	Server.logInfo("INFO: AFTER g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logInfo("INFO: AFTER g_strMSEndPoint = " + Session.g_strMSEndPoint);
}
else
{
	Server.logError("ERROR: FAIL TO CREATE MS CONNECTION, EXIT ON: " + Result.name);
	Server.logError("ERROR: g_strMSCallId = " + Session.g_strMSCallId);
	Server.logError("ERROR: g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: g_strMSEndPoint = " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="12" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=867 y=187 ?><!--send ALARM--><SOAP destination-ip="" transaction="" message-name="s_strSEND_ALARM_REQUEST" destination-port="" destination-type="1" destination-session="" waiting-session-selected=""><parameter tag="&quot;calling_number&quot;" value="g_strAlarmType"/><parameter tag="&quot;called_number&quot;" value="g_strAlarmPriority"/></SOAP><results><result name="Default" link="5" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strAlarmType = "MEDIASERVER: connect party to conference";
Session.g_strAlarmPriority = "MAJOR";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND ALERT");
}
else
{
	Server.logError("ERROR: FAIL TO SEND ALERT, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="13" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=889 y=659 ?><!--send ALARM--><SOAP destination-ip="" transaction="" message-name="s_strSEND_ALARM_REQUEST" destination-port="" destination-type="1" destination-session="" waiting-session-selected=""><parameter tag="&quot;calling_number&quot;" value="g_strAlarmType"/><parameter tag="&quot;called_number&quot;" value="g_strAlarmPriority"/></SOAP><results><result name="Default" link="10" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strAlarmType = "MEDIASERVER: connect party to conference";
Session.g_strAlarmPriority = "MAJOR";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND ALERT");
}
else
{
	Server.logError("ERROR: FAIL TO SEND ALERT, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="14" plug-in="Pactolus.Branch.1"><?xtml-editor x=665 y=540 ?><!--s_strSendAlarmFlag==T--><results><result name="Default" link="10" stubbed="0"/><result name="s_strSendAlarmFlag==T" link="13" stubbed="0">s_strSendAlarmFlag match "T"</result></results></action><action id="15" plug-in="Pactolus.Branch.1"><?xtml-editor x=641 y=73 ?><!--s_strSendAlarmFlag==T--><results><result name="Default" link="5" stubbed="0"/><result name="s_strSendAlarmFlag==T" link="12" stubbed="0">s_strSendAlarmFlag match "T"</result></results></action></actions></function><function name="HangUpCaller" start="10" returns="i4"><local-vars><var name="intReturnCode" type="i4">0</var><var name="strSignal" type="string"></var></local-vars><actions><action id="10" plug-in="Pactolus.Branch.1"><?xtml-editor x=36 y=232 ?><!--MS connection?--><results><result name="Default" link="9" stubbed="0"/><result name="null string == true" link="7" stubbed="0">g_boolNullString == true
OR g_boolConnectedToMS == false</result></results><scripts><script language="javascript" timing="first"><![CDATA[if ( (Session.g_strMSCallId.length == 0) || (Session.g_strMSConnectionId.length == 0) || (Session.g_strMSEndPoint.length == 0) )
{
	Session.g_boolNullString = true;
}
else
{
	Session.g_boolNullString = false;
}
]]></script></scripts></action><action id="1" plug-in="Pactolus.SipBye.1"><?xtml-editor x=781 y=99 ?><!--send BYE to dial in--><sip-bye add-record-route="1" add-via="1" handle-responses="0" act-as-proxy="0"><call-id>g_strCallId</call-id><cseq>g_strCSeq</cseq><from>g_strTo</from><request-uri>g_strRequestURI</request-uri><to>g_strFrom</to></sip-bye><results><result name="Default" link="2" stubbed="0"/><result name="Success"/><result name="Client error (4xx)"/><result name="Server error (5xx)"/><result name="Global error (6xx)"/><result name="Timeout"/><result name="Error"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND SIP BYE TO CALLED PARTY.");
	Session.intReturnCode = Session.s_intSUCCESS;
}
else
{
	Server.logError("ERROR: FAIL TO PLAY SIP BYE TO CALLED PARTY, EXIT ON: " + Result.name);
	Session.intReturnCode = Session.s_intFAILURE;
}]]></script></scripts></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1038 y=281 ?><return value="intReturnCode"/></action><action id="7" plug-in="Pactolus.Branch.1"><?xtml-editor x=561 y=235 ?><!--Dial In?--><results><result name="Default" link="1" stubbed="0"/><result name="g_strOutdialFlag = &quot;T&quot;;" link="8" stubbed="0">g_strOutdialFlag match "T"</result></results></action><action id="8" plug-in="Pactolus.SipBye.1"><?xtml-editor x=799 y=356 ?><!--send BYE to dial out--><sip-bye add-record-route="1" add-via="1" handle-responses="0" act-as-proxy="0"><call-id>g_strCallId</call-id><cseq>g_strCSeq</cseq><from>g_strFrom</from><request-uri>g_strRequestURI</request-uri><to>g_strTo</to></sip-bye><results><result name="Default" link="2" stubbed="0"/><result name="Success"/><result name="Client error (4xx)"/><result name="Server error (5xx)"/><result name="Global error (6xx)"/><result name="Timeout"/><result name="Error"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND SIP BYE TO CALLED PARTY.");
	Session.intReturnCode = Session.s_intSUCCESS;
}
else
{
	Server.logError("ERROR: FAIL TO PLAY SIP BYE TO CALLED PARTY, EXIT ON: " + Result.name);
	Session.intReturnCode = Session.s_intFAILURE;
}]]></script></scripts></action><action id="9" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=308 y=158 ?><!--good bye--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="0" parse-on-ms="1" terminating-digit=""><audio type="index">322</audio></play><results><result name="Default" link="7" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY GOOD BYE.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY GOOD BYE, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}]]></script></scripts></action></actions></function><function name="Main" start="1" returns="void"><local-vars><var name="intReturnCode" type="i4">0</var><var name="intCurrentState" type="i4">0</var><var name="boolFirstCaller" type="boolean">0</var><var name="intPromptNumber" type="i4">0</var><var name="strRequestNotify" type="string"></var></local-vars><actions><action id="1" plug-in="Pactolus.Branch.1"><?xtml-editor x=25 y=112 ?><!--What is the current state?--><results><result name="Default" link="19" stubbed="0"/><result name="InitializeConf" link="25" stubbed="0">intCurrentState == s_intSTATE_INITIALIZE_CONF</result><result name="Direct caller to MS" link="2" stubbed="0">intCurrentState == s_intSTATE_DIRECT_TO_MS</result><result name="Get Pass Code" link="4" stubbed="0">intCurrentState == s_intSTATE_GET_PASSCODE</result><result name="Outdial from MS to Caller" link="7" stubbed="0">intCurrentState == s_intSTATE_MS_TO_CALLER</result><result name="Set Conference Resource" link="15" stubbed="0">intCurrentState == s_intSTATE_SET_CONFRESOURCE</result><result name="Play Join Tone To Conf" link="17" stubbed="0">intCurrentState == s_intSTATE_CONF_PLAY_PROMPT</result><result name="Response Unavailable" link="20" stubbed="0">intCurrentState == s_intSTATE_REPLY_UNAVAILABLE</result><result name="End Session" link="23" stubbed="0">intCurrentState == s_intSTATE_END_CALL</result><result name="Wait For Moderator" link="28" stubbed="0">intCurrentState == s_intSTATE_WAIT_FOR_MOD</result><result name="Create A Conference" link="38" stubbed="0">intCurrentState == s_intSTATE_CREATE_CONFERENCE</result><result name="Add To A Conference" link="44" stubbed="0">intCurrentState == s_intSTATE_ADD_TO_CONFERENCE</result></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: conference.Main.1: IN MAIN FUNCTION");
Session.intReturnCode = 0;]]></script></scripts></action><action id="2" plug-in="Standard.FunctionCall.1"><?xtml-editor x=597 y=281 ?><!--Direct caller to MS--><function name="&quot;DirectCallerToMS&quot;" return="intReturnCode"/><results><result name="Default" link="3" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: BEFORE g_strMSSDP = " + Session.g_strMSSDP);
Server.logInfo("INFO: BEFORE g_strMSCallId = " + Session.g_strMSCallId);
Server.logInfo("INFO: BEFORE g_strMSConnectionId = " + Session.g_strMSConnectionId);
Server.logInfo("INFO: BEFORE g_strMSEndPoint = " + Session.g_strMSEndPoint);]]></script><script language="javascript" timing="last"><![CDATA[Server.logInfo("INFO: AFTER g_strMSSDP = " + Session.g_strMSSDP);
Server.logInfo("INFO: AFTER g_strMSCallId = " + Session.g_strMSCallId);
Server.logInfo("INFO: AFTER g_strMSConnectionId = " + Session.g_strMSConnectionId);
Server.logInfo("INFO: AFTER g_strMSEndPoint = " + Session.g_strMSEndPoint);]]></script></scripts></action><action id="3" plug-in="Pactolus.Branch.1"><?xtml-editor x=808 y=279 ?><!--GET PASS CODE--><results><result name="Default" link="1" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[if (Session.intReturnCode == Session.s_intSUCCESS)
{
	Session.intCurrentState = Session.s_intSTATE_GET_PASSCODE;
}
else if ( Session.intReturnCode == Session.s_intFAILURE)
{
	Session.intCurrentState = Session.s_intSTATE_REPLY_UNAVAILABLE;
}
else
{
	Session.intCurrentState = Session.s_intSTATE_END_CALL;
}]]></script></scripts></action><action id="4" plug-in="Standard.FunctionCall.1"><?xtml-editor x=566 y=368 ?><!--Get Pass Code--><function name="&quot;GetPassCode&quot;" return="intReturnCode"/><results><result name="Default" link="30" stubbed="0"/></results></action><action id="5" plug-in="Pactolus.Branch.1"><?xtml-editor x=1783 y=264 ?><!--create conf, then add to conf
OR
just add to conf--><results><result name="Default" link="1" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[if (Session.intReturnCode == Session.s_intFIRSTCALLER)
{
	Session.boolFirstCaller = true;
	Session.intCurrentState = Session.s_intSTATE_CREATE_CONFERENCE;
}
else if (Session.intReturnCode == Session.s_intNONFIRSTCALLER)
{
	Session.intCurrentState = Session.s_intSTATE_ADD_TO_CONFERENCE;
}
else
{
	Session.intCurrentState = Session.s_intSTATE_END_CALL;
}]]></script></scripts></action><action id="6" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1276 y=413 ?><!--Delete MS Connection--><function name="&quot;DeleteMSConnection&quot;" return=""/><results><result name="Default" link="9" stubbed="0"/></results></action><action id="7" plug-in="Standard.FunctionCall.1"><?xtml-editor x=568 y=699 ?><!--outdial from MS to Caller--><function name="&quot;OutdialFromMSToCaller&quot;" return="intReturnCode"/><results><result name="Default" link="10" stubbed="0"/></results></action><action id="9" plug-in="Pactolus.Branch.1"><?xtml-editor x=1519 y=411 ?><!--clear out MS variables--><results><result name="Default" link="5" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strMSCallId = "";
Session.g_strMSConnectionId = "";
Session.g_strMSEndPoint = "";
Session.g_strMSSDP = "";]]></script></scripts></action><action id="10" plug-in="Pactolus.Branch.1"><?xtml-editor x=791 y=696 ?><!--CALLER IN CONFERENCE?--><results><result name="Default" link="13" stubbed="0"/><result name="return code == SUCCESS" link="12" stubbed="0">intReturnCode == s_intSUCCESS</result></results></action><action id="12" plug-in="Pactolus.Branch.1"><?xtml-editor x=1303 y=647 ?><!--SET CONF RESOURCE--><results><result name="Default" link="1" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[if (Session.boolFirstCaller == true)
{
	Session.intCurrentState = Session.s_intSTATE_SET_CONFRESOURCE;
}
else
{
	Session.intCurrentState = Session.s_intSTATE_CONF_PLAY_PROMPT;
	Session.intPromptNumber = Session.s_intPROMPT_JOIN_TONE;
}]]></script></scripts></action><action id="13" plug-in="Pactolus.Branch.1"><?xtml-editor x=1041 y=684 ?><!--END THE CALL--><results><result name="Default" link="1" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.intCurrentState = Session.s_intSTATE_END_CALL;]]></script></scripts></action><action id="14" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1300 y=754 ?><!--set time available for this caller--><function name="&quot;SetTimer&quot;" return=""/><results><result name="Default"/></results></action><action id="15" plug-in="Standard.FunctionCall.1"><?xtml-editor x=552 y=966 ?><!--set conference resource--><function name="&quot;psAPISceSetConfResource&quot;" return="intReturnCode"/><results><result name="Default" link="16" stubbed="0"/></results></action><action id="16" plug-in="Pactolus.Branch.1"><?xtml-editor x=814 y=961 ?><!--PLAY join tone to conference--><results><result name="Default" link="1" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[if (Session.intReturnCode != Session.s_intSUCCESS)
{
	Session.intCurrentState = Session.s_intSTATE_END_CALL;
}
else
{
	Session.intCurrentState = Session.s_intSTATE_CONF_PLAY_PROMPT;
	Session.intPromptNumber = Session.s_intPROMPT_JOIN_TONE;
}]]></script></scripts></action><action id="17" plug-in="Standard.FunctionCall.1"><?xtml-editor x=548 y=1082 ?><!--play prompt to conference--><function name="&quot;PlayPromptToConference&quot;" return="intReturnCode"><parameter>intPromptNumber</parameter></function><results><result name="Default" link="18" stubbed="0"/></results></action><action id="18" plug-in="Pactolus.Branch.1"><?xtml-editor x=819 y=1080 ?><!--set current state = WAIT STATE--><results><result name="Default" link="1" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.intCurrentState = Session.s_intSTATE_WAIT;]]></script></scripts></action><action id="19" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=499 y=124 ?><return value=""/></action><action id="20" plug-in="Standard.FunctionCall.1"><?xtml-editor x=532 y=856 ?><!--response unavailable--><function name="&quot;Unavailable&quot;" return=""/><results><result name="Default" link="21" stubbed="0"/></results></action><action id="21" plug-in="Pactolus.Branch.1"><?xtml-editor x=778 y=1205 ?><!--END SESSION--><results><result name="Default" link="1" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.intCurrentState = Session.s_intSTATE_END_CALL;]]></script></scripts></action><action id="23" plug-in="Standard.FunctionCall.1"><?xtml-editor x=484 y=1288 ?><!--End Call--><function name="&quot;EndCall&quot;" return=""/><results><result name="Default" link="24" stubbed="0"/></results></action><action id="24" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=696 y=1287 ?><return value=""/></action><action id="25" plug-in="Standard.FunctionCall.1"><?xtml-editor x=603 y=174 ?><!--Initialize Conference--><function name="&quot;psAPISceInitConfSession&quot;" return="intReturnCode"/><results><result name="Default" link="26" stubbed="0"/></results></action><action id="26" plug-in="Pactolus.Branch.1"><?xtml-editor x=808 y=175 ?><!--Direct caller to  MS--><results><result name="Default" link="1" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[if (Session.intReturnCode == Session.s_intSUCCESS)
{
	Session.intCurrentState = Session.s_intSTATE_DIRECT_TO_MS;
}
else
{
	Session.intCurrentState = Session.s_intSTATE_REPLY_UNAVAILABLE;
}]]></script></scripts></action><action id="27" plug-in="Pactolus.Hold.1"><?xtml-editor x=1049 y=366 ?><cc-hold to="g_strTo" from="g_strFrom" ingress-gateway="g_strRequestURI" cseq="g_strCSeq" call-id="g_strCallId" sdp="g_strContent" status=""/><results><result name="Default" link="36" stubbed="0"/><result name="Success" link="6" stubbed="0"/><result name="Error"/><result name="Timeout"/></results></action><action id="28" plug-in="Standard.FunctionCall.1"><?xtml-editor x=447 y=1401 ?><!--WaitForModerator--><function name="&quot;WaitForModerator&quot;" return="intReturnCode"/><results><result name="Default" link="29" stubbed="0"/></results></action><action id="29" plug-in="Pactolus.Branch.1"><?xtml-editor x=685 y=1398 ?><!--set current state = wait for mod join request or end session--><results><result name="Default" link="1" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.intCurrentState = Session.intReturnCode;]]></script></scripts></action><action id="30" plug-in="Pactolus.Branch.1"><?xtml-editor x=793 y=368 ?><!--FAILURE or WFM--><results><result name="Default" link="33" stubbed="0"/><result name="SUCCESS" link="27" stubbed="0">intReturnCode == s_intFIRSTCALLER
OR intReturnCode == s_intNONFIRSTCALLER</result><result name="FAILURE" link="31" stubbed="0">intReturnCode == s_intFAILURE</result><result name="WFM" link="32" stubbed="0">intReturnCode == s_intWFM</result></results></action><action id="31" plug-in="Pactolus.Branch.1"><?xtml-editor x=1037 y=503 ?><results><result name="Default" link="1" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.intCurrentState = Session.s_intSTATE_END_CALL;]]></script></scripts></action><action id="32" plug-in="Pactolus.Branch.1"><?xtml-editor x=1046 y=574 ?><results><result name="Default" link="1" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.intCurrentState = Session.s_intSTATE_WAIT_FOR_MOD;]]></script></scripts></action><action id="33" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1021 y=261 ?><!--Hang up caller--><function name="&quot;HangUpCaller&quot;" return=""/><results><result name="Default" link="1" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.intCurrentState = Session.s_intSTATE_END_CALL;]]></script></scripts></action><action id="34" plug-in="Pactolus.Branch.1"><?xtml-editor x=634 y=1546 ?><!--PLAY welcome or join tone--><results><result name="Default"/></results><scripts><script language="javascript" timing="first"><![CDATA[if (Session.intReturnCode != 0)
{
	Session.intCurrentState = Session.s_intSTATE_END_CALL;
}
else
{
	Session.intCurrentState = Session.s_intSTATE_CONF_PLAY_PROMPT;
	Session.intPromptNumber = Session.s_intPROMPT_CONF_IN_PROGRESS;
}]]></script></scripts></action><action id="35" plug-in="Standard.FunctionCall.1"><?xtml-editor x=393 y=1549 ?><!--play join prompt--><function name="&quot;PlayJoinPrompt&quot;" return="intReturnCode"/><results><result name="Default" link="34" stubbed="0"/></results></action><action id="36" plug-in="Pactolus.Branch.1"><?xtml-editor x=1259 y=255 ?><!--END THE CALL--><results><result name="Default" link="1" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.intCurrentState = Session.s_intSTATE_END_CALL;]]></script></scripts></action><action id="38" plug-in="Standard.FunctionCall.1"><?xtml-editor x=395 y=1675 ?><!--CreateAConference--><function name="&quot;CreateAConference&quot;" return="intReturnCode"/><results><result name="Default" link="43" stubbed="0"/></results></action><action id="43" plug-in="Pactolus.Branch.1"><?xtml-editor x=615 y=1676 ?><!--set conf resource OR
end call?--><results><result name="Default" link="1" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[if (Session.intReturnCode != Session.s_intSUCCESS)
{
	Session.intCurrentState = Session.s_intSTATE_END_CALL;
}
else
{
	Session.intCurrentState = Session.s_intSTATE_SET_CONFRESOURCE;
}]]></script></scripts></action><action id="44" plug-in="Standard.FunctionCall.1"><?xtml-editor x=416 y=1825 ?><!--AddToConference--><function name="&quot;AddToConference&quot;" return="intReturnCode"/><results><result name="Default" link="45" stubbed="0"/></results></action><action id="45" plug-in="Pactolus.Branch.1"><?xtml-editor x=634 y=1822 ?><!--play join tone OR
end call?--><results><result name="Default" link="1" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[if (Session.intReturnCode != Session.s_intSUCCESS)
{
	Session.intCurrentState = Session.s_intSTATE_END_CALL;
}
else
{
	Session.intCurrentState = Session.s_intSTATE_CONF_PLAY_PROMPT;
	Session.intPromptNumber = Session.s_intPROMPT_JOIN_TONE;
}]]></script></scripts></action></actions></function><function name="Unavailable" start="1" returns="void"><actions><action id="1" plug-in="Pactolus.SipResponse.1"><?xtml-editor x=161 y=172 ?><sip-response remove-via="0" reliable="0"><call-id>g_strCallId</call-id><cseq>g_strCSeq</cseq><from>g_strFrom</from><status>"SIP/2.0 480 Temporarily Unavailable"</status><to>g_strTo</to><via>g_strVia</via></sip-response><results><result name="Default" link="2" stubbed="0"/><result name="Success" link="3" stubbed="0"/><result name="Error"/><result name="Timeout"/></results></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=427 y=174 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: conference.Unavailable.2 RESPONSE UNAVAILABLE FAILURE");]]></script></scripts></action><action id="3" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=431 y=246 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: conference.Unavailable.3: RESPONSE UNAVAILABLE SUCCCESS ****");]]></script></scripts></action></actions></function><function name="GetPassCode" start="14" returns="i4"><local-vars><var name="shortCounter" type="i2">0</var><var name="intReturnCode" type="i4">-1</var><var name="shortMaxRetry" type="i2">0</var><var name="intTempInt" type="i4">0</var><var name="strRequestNotify" type="string"></var></local-vars><actions><action id="14" plug-in="Pactolus.Branch.1"><?xtml-editor x=77 y=254 ?><!--strWelcomePromptType = U or V--><results><result name="Default" link="1" stubbed="0"/><result name="strWelcomePromptType==U" link="15" stubbed="0">g_strWelcomePromptType match "U"</result><result name="strWelcomePromptType==V" link="13" stubbed="0">g_strWelcomePromptType match "V"</result></results></action><action id="1" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=43 y=678 ?><!--Collect pass code--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="&quot;(xxxxxxxxxx|x.T|x.#)&quot;" language="g_strLanguage" digits="g_strPassCode" retry-count="shortMaxRetry" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">s_intPROMPT_PASSWORD</audio><timeout-prompt type="index">s_intPROMPT_NO_RESPONSE</timeout-prompt></play><results><result name="Default" link="86" stubbed="0"/><result name="Success" link="2" stubbed="0"/><result name="Error"/><result name="Timeout" link="72" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.shortMaxRetry = Session.g_intNumbPasscodeTries;]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY AND COLLECT PASS CODE.");
}
else if (Result.id == 4)
{
	Server.logInfo("INFO: TIMEOUT GET PASSCODE.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY AND COLLECT PASSCODE, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
	Session.g_intTerminationReason = 17;
}]]></script></scripts></action><action id="2" plug-in="Standard.FunctionCall.1"><?xtml-editor x=462 y=1136 ?><!--authenticate pass code--><function name="&quot;psAPISceAuthConfPassCode&quot;" return="intReturnCode"/><results><result name="Default" link="6" stubbed="0"/></results></action><action id="3" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=933 y=592 ?><!--FAILURE--><return value="s_intFAILURE"/></action><action id="4" plug-in="Pactolus.Branch.1"><?xtml-editor x=923 y=698 ?><!--exceed max retry?--><results><result name="Default" link="18" stubbed="0"/><result name="Counter &gt;= MaxRetry?" link="52" stubbed="0">shortCounter &gt;= g_intNumbPasscodeTries</result></results><scripts><script language="javascript" timing="first"><![CDATA[Session.shortCounter++;]]></script></scripts></action><action id="5" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1832 y=817 ?><!--FAILURE--><return value="s_intFAILURE"/></action><action id="6" plug-in="Pactolus.Branch.1"><?xtml-editor x=720 y=1287 ?><!--return code == 0?--><results><result name="Default" link="4" stubbed="0"/><result name="return code == 0" link="57" stubbed="0">intReturnCode == 0</result><result name="return code == 1" link="57" stubbed="0">intReturnCode == 1</result><result name="return code == 2" link="84" stubbed="0">intReturnCode == 2</result><result name="return code == -2" link="28" stubbed="0">intReturnCode == -2</result><result name="return code == -3" link="32" stubbed="0">intReturnCode == -3</result><result name="return code == -4" link="34" stubbed="0">intReturnCode == -4</result><result name="return code == -5" link="36" stubbed="0">intReturnCode == -5</result><result name="return code == -6" link="41" stubbed="0">intReturnCode == -6</result><result name="return code == -7" link="44" stubbed="0">intReturnCode == -7</result><result name="return code == -8" link="45" stubbed="0">intReturnCode == -8</result><result name="return code == -9" link="47" stubbed="0">intReturnCode == -9</result><result name="return code == -10" link="49" stubbed="0">intReturnCode == -10</result><result name="return code == -99" link="38" stubbed="0">intReturnCode == -99</result><result name="return code == -11" link="53" stubbed="0">intReturnCode == -11</result><result name="return code == -14" link="4" stubbed="0">intReturnCode == 14</result></results></action><action id="10" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1395 y=734 ?><!--Login Failed--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">s_intPROMPT_LOGIN_FAIL</audio></play><results><result name="Default" link="11" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY FAIL TO GET IN THE CONFERENCE.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY FAIL TO GET IN THE CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="11" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1614 y=822 ?><!--Hang up caller--><function name="&quot;HangUpCaller&quot;" return=""/><results><result name="Default" link="5" stubbed="0"/></results></action><action id="12" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=713 y=428 ?><!--Welcome prompt Index--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="50" ms-type="s_strMediaServerType" returns="intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="&quot;(xxxxxx|x.T|x.#)&quot;" language="g_strLanguage" digits="g_strPassCode" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">g_intWelcomePromptIndex</audio><audio type="index">s_intPROMPT_PASSWORD</audio></play><results><result name="Default" link="85" stubbed="0"/><result name="Success" link="2" stubbed="1"/><result name="Error"/><result name="Timeout" link="54" stubbed="0"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY INDEX WELCOME PROMPT.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY INDEX WELCOME PROMPT, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="13" plug-in="Pactolus.Branch.1"><?xtml-editor x=454 y=384 ?><!--Welcome prompt?--><results><result name="Default" link="12" stubbed="0"/><result name="IWelcomePromptIndex &lt;= 0" link="1" stubbed="0">g_intWelcomePromptIndex &lt;= 0</result></results></action><action id="15" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=710 y=202 ?><!--Welcome prompt URL--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="40" ms-type="s_strMediaServerType" returns="intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="&quot;(xxxxxx|x.T|x.#)&quot;" language="g_strLanguage" digits="g_strPassCode" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="url">g_strWelcomePromptUrl</audio><audio type="index">s_intPROMPT_PASSWORD</audio></play><results><result name="Default" link="85" stubbed="0"/><result name="Success" link="2" stubbed="1"/><result name="Error"/><result name="Timeout" link="54" stubbed="0"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY URL WELCOME PROMPT.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY URL WELCOME PROMPT, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="16" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1937 y=311 ?><!--FAILURE--><return value="s_intFAILURE"/></action><action id="18" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1141 y=579 ?><!--try again--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">s_intPROMPT_TRY_AGAIN</audio></play><results><result name="Default" link="11" stubbed="0"/><result name="Success" link="1" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY TRY TO GET PASSCODE AGAIN.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY TRY TO GET PASSCODE AGAIN, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
	Session.g_intTerminationReason = 17;
}]]></script></scripts></action><action id="20" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1729 y=311 ?><!--Hang up caller--><function name="&quot;HangUpCaller&quot;" return=""/><results><result name="Default" link="16" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intTerminationReason = 17;]]></script></scripts></action><action id="27" plug-in="Pactolus.Sleep.1"><?xtml-editor x=1508 y=1270 ?><!--1 sec--><sleep duration="1"/><results><result name="Default" link="2" stubbed="0"/></results></action><action id="28" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1260 y=1548 ?><!--TOO EARLY--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">s_intPROMPT_TO_EARLY</audio><audio type="time">g_strScheduleStartTime</audio><audio type="index">873</audio></play><results><result name="Default" link="30" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: TOO EARLY PASSCODE:" + Session.g_strPassCode);
Session.g_intTerminationReason = 19;]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY TOO EARLY TO JOIN CONF.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY TO EARLY TO JOIN CONF, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="29" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1792 y=2216 ?><!--FAILURE--><return value="s_intFAILURE"/></action><action id="30" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1558 y=2213 ?><!--Hang up caller--><function name="&quot;HangUpCaller&quot;" return=""/><results><result name="Default" link="29" stubbed="0"/></results></action><action id="32" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1251 y=1702 ?><!--TOO LATE--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">s_intPROMPT_TOO_LATE</audio></play><results><result name="Default" link="30" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: TOO LATE PASSCODE:" + Session.g_strPassCode);
Session.g_intTerminationReason = 20;]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY TOO LATE TO JOIN CONF.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY TOO LATE TO JOIN CONF, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="34" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1241 y=1859 ?><!--DISABLED SUBSCRIBER--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">s_intPROMPT_DISABLED_SUB</audio></play><results><result name="Default" link="30" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: DISABLE SUBSCRIBER PASSCODE:" + Session.g_strPassCode);
Session.g_intTerminationReason = 4;]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY SUBSCRIBER DISABLE.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY SUBSCRIBER DISABLE, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="36" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1241 y=1992 ?><!--MAX ATTENDEES--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">s_intPROMPT_MAX_ATTENDEES</audio></play><results><result name="Default" link="30" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: MAX ATTENDEES PASSCODE:" + Session.g_strPassCode);
Session.g_intTerminationReason = 15;]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY MAX ATTENDEES IN CONF.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY MAX ATTENDESS IN CONF, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="38" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1242 y=2953 ?><!--DB ERROR--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">s_intPROMPT_DB_ERROR</audio></play><results><result name="Default" link="30" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: DB ERROR PASSCODE:" + Session.g_strPassCode);
Session.g_intTerminationReason = 6;]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY DB ERROR.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY DB ERROR, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="40" plug-in="Standard.FunctionCall.1"><?xtml-editor x=708 y=590 ?><!--Hang up caller--><function name="&quot;HangUpCaller&quot;" return=""/><results><result name="Default" link="3" stubbed="0"/></results></action><action id="41" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1243 y=2141 ?><!--CONF_LOCKED--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">s_intPROMPT_CONF_LOCKED</audio></play><results><result name="Default" link="30" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: CONF LOCKED PASSCODE:" + Session.g_strPassCode);
Session.g_intTerminationReason = 16;]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY CONF LOCKED.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY CONF LOCKED, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="44" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1251 y=2300 ?><!--ALREADY ENDED--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">s_intPROMPT_CONF_ENDED</audio></play><results><result name="Default" link="30" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: CONF ENDED PASSCODE:" + Session.g_strPassCode);
Session.g_intTerminationReason = 2;]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY CONF IS ALREADY ENDED.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY CONF IS ALREADY ENDED, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="45" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1255 y=2458 ?><!--PASSCODE_INUSED--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">s_intPROMPT_PASSCODE_INUSED</audio></play><results><result name="Default" link="30" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: PASSCODE IN USED PASSCODE:" + Session.g_strPassCode);
Session.g_intTerminationReason = 21;]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY PASSCODE IS IN USED.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY PASSCODE IS IN USED, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="47" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1253 y=2625 ?><!--MOD_NOT_IN--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">s_intPROMPT_MOD_NOT_IN</audio></play><results><result name="Default" link="30" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: MOD NOT IN PASSCODE:" + Session.g_strPassCode);
Session.g_intTerminationReason = 22;]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY NO MODERATOR.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY NO MODERATOR, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="49" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1244 y=2780 ?><!--NO_CONF_CONTROLLER--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">s_intPROMPT_NO_CONF_CONTROLLER</audio></play><results><result name="Default" link="30" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: NO CONF CONTROLLER :" + Session.g_strPassCode);
Session.g_intTerminationReason = 17;]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY CONF CONTROLLER.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY NO CONF CONTROLLER, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="52" plug-in="Pactolus.Branch.1"><?xtml-editor x=1180 y=734 ?><results><result name="Default" link="10" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO:  MAX RETRY GETTING PASSCODE.");
Session.g_intTerminationReason = 2;]]></script></scripts></action><action id="53" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1235 y=3096 ?><!--s_intWFM--><return value="s_intWFM"/><scripts><script language="javascript" timing="first"><![CDATA[Session.g_boolWaitForModerator = true;]]></script></scripts></action><action id="54" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1036 y=326 ?><!--sorry, did not hear response--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">s_intPROMPT_NO_RESPONSE</audio></play><results><result name="Default" link="85" stubbed="0"/><result name="Success" link="1" stubbed="1"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY SORRY, DID NOT HEAR A RESPONSE.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY SORRY, DID NOT HEAR A RESPONSE, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="55" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1440 y=1064 ?><!--PostPinPrompt--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="" returns="intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="0" terminating-digit=""><audio type="index">g_intPostPinPromptIndex</audio></play><results><result name="Default" link="11" stubbed="0"/><result name="Success" link="59" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY INDEX POST PIN PROMPT.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY INDEX POST PIN PROMPT, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
	Session.g_intTerminationReason = 17;
}]]></script></scripts></action><action id="56" plug-in="Pactolus.Branch.1"><?xtml-editor x=1230 y=1142 ?><!--PostPin prompt?--><results><result name="Default" link="55" stubbed="0"/><result name="PostPinPromptIndex &lt;= 0" link="59" stubbed="0">g_intPostPinPromptIndex &lt;= 0</result></results></action><action id="57" plug-in="Pactolus.Branch.1"><?xtml-editor x=987 y=837 ?><!--strPostPinPromptType = U or V--><results><result name="Default" link="59" stubbed="0"/><result name="strPostPinPromptType==U" link="58" stubbed="0">g_strPostPinPromptType match "U"</result><result name="strPostPinPromptType==V" link="56" stubbed="0">g_strPostPinPromptType match "V"</result></results><scripts><script language="javascript" timing="first"><![CDATA[Session.intTempInt = Session.intReturnCode;]]></script></scripts></action><action id="58" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1236 y=933 ?><!--PostPin prompt URL--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="url">g_strPostPinPromptUrl</audio></play><results><result name="Default" link="11" stubbed="0"/><result name="Success" link="59" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY URL POST PIN PROMPT.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY URL POST PIN PROMPT, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
	Session.g_intTerminationReason = 17;
}]]></script></scripts></action><action id="59" plug-in="Pactolus.Branch.1"><?xtml-editor x=1718 y=1123 ?><!--first caller?--><results><result name="Default" link="78" stubbed="0"/><result name="s_intFIRSTCALLER" link="80" stubbed="0">intTempInt == s_intFIRSTCALLER</result></results></action><action id="60" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1732 y=1479 ?><!--FAILURE--><return value="s_intFAILURE"/></action><action id="61" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1521 y=1483 ?><!--Hang up caller--><function name="&quot;HangUpCaller&quot;" return=""/><results><result name="Default" link="60" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intTerminationReason = 17;]]></script></scripts></action><action id="62" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=2157 y=1288 ?><!--FIRST CALLER--><return value="s_intFIRSTCALLER"/></action><action id="63" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=2363 y=1168 ?><!--NOT FIRST CALLER--><return value="s_intNONFIRSTCALLER"/></action><action id="72" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=459 y=768 ?><!--Login Failed--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">s_intPROMPT_LOGIN_FAIL</audio></play><results><result name="Default" link="40" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY MAX RETRY GET PASSCODE.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY MAX RETRY GET PASSCODE, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}
Session.g_intTerminationReason = 2;]]></script></scripts></action><action id="76" plug-in="Pactolus.MGCPNotifyRequest.1"><?xtml-editor x=82 y=112 ?><rqnt connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" timeout="s_intTIMEOUT" returns="g_intReturnCode"><parameters><quarantine step="1" loop="0" process="0" discard="1"/><events><![CDATA[strRequestNotify]]></events><signals><![CDATA[]]></signals><digit-map><![CDATA["(**)"]]></digit-map></parameters></rqnt><results><result name="Default" link="77" stubbed="0"/><result name="Success" link="14" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("RQNT MS call id = " + Session.g_strMSCallId);
Server.logInfo("RQNT MS connection id = " + Session.g_strMSConnectionId);
Server.logInfo("RQNT MS end point = " + Session.g_strMSEndPoint);
Session.strRequestNotify = "D/cc@" + Session.g_strMSConnectionId + "(lit=32,sit=4)";
// Session.strRequestNotify = "D/cc(lit=32,sit=4)";]]></script></scripts></action><action id="77" plug-in="Pactolus.Branch.1"><?xtml-editor x=297 y=110 ?><results><result name="Default"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: FAIL TO SEND RQNT");]]></script></scripts></action><action id="78" plug-in="Pactolus.Branch.1"><?xtml-editor x=1926 y=1053 ?><!--conferenceResource == null?--><results><result name="Default" link="81" stubbed="0"/><result name="conferenceResource == null" link="79" stubbed="0">g_strConfResource match "null"</result></results></action><action id="79" plug-in="Pactolus.Branch.1"><?xtml-editor x=2208 y=1040 ?><results><result name="Default" link="11" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: NOT THE FIRST CALLER, BUT CONF RESOURCE IS : " + Session.g_strConfResource);]]></script></scripts></action><action id="80" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1943 y=1291 ?><!--play join prompt--><function name="&quot;PlayJoinPrompt&quot;" return="intReturnCode"/><results><result name="Default" link="62" stubbed="0"/></results></action><action id="81" plug-in="Standard.FunctionCall.1"><?xtml-editor x=2150 y=1173 ?><!--play join prompt--><function name="&quot;PlayJoinPrompt&quot;" return="intReturnCode"/><results><result name="Default" link="63" stubbed="0"/></results></action><action id="82" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=1497 y=384 ?><!--send ALARM--><SOAP destination-ip="" transaction="" message-name="s_strSEND_ALARM_REQUEST" destination-port="" destination-type="1" destination-session="" waiting-session-selected=""><parameter tag="&quot;calling_number&quot;" value="g_strAlarmType"/><parameter tag="&quot;called_number&quot;" value="g_strAlarmPriority"/></SOAP><results><result name="Default" link="20" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strAlarmType = "MEDIASERVER: play welcome prompt";
Session.g_strAlarmPriority = "MAJOR";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND ALERT");
}
else
{
	Server.logError("ERROR: FAIL TO SEND ALERT, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="83" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=453 y=655 ?><!--send ALARM--><SOAP destination-ip="" transaction="" message-name="s_strSEND_ALARM_REQUEST" destination-port="" destination-type="1" destination-session="" waiting-session-selected=""><parameter tag="&quot;calling_number&quot;" value="g_strAlarmType"/><parameter tag="&quot;called_number&quot;" value="g_strAlarmPriority"/></SOAP><results><result name="Default" link="40" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strAlarmType = "MEDIASERVER: play get passcode";
Session.g_strAlarmPriority = "MAJOR";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND ALERT");
}
else
{
	Server.logError("ERROR: FAIL TO SEND ALERT, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="84" plug-in="Pactolus.Branch.1"><?xtml-editor x=1240 y=1376 ?><!--exceed max retry?--><results><result name="Default" link="27" stubbed="0"/><result name="Counter &gt;= MaxRetry?" link="61" stubbed="0">shortCounter &gt;= g_intNumbPasscodeTries</result></results><scripts><script language="javascript" timing="first"><![CDATA[Session.shortCounter++;
Session.g_strRetryFlag = "T";]]></script></scripts></action><action id="85" plug-in="Pactolus.Branch.1"><?xtml-editor x=1247 y=259 ?><!--s_strSendAlarmFlag==T--><results><result name="Default" link="20" stubbed="0"/><result name="s_strSendAlarmFlag==T" link="82" stubbed="0">s_strSendAlarmFlag match "T"</result></results></action><action id="86" plug-in="Pactolus.Branch.1"><?xtml-editor x=243 y=578 ?><!--s_strSendAlarmFlag==T--><results><result name="Default" link="40" stubbed="0"/><result name="s_strSendAlarmFlag==T" link="83" stubbed="0">s_strSendAlarmFlag match "T"</result></results></action></actions></function><function name="psAPISceAuthConfPassCode" start="1" returns="i4"><local-vars><var name="intReturnCode" type="i4">-50</var></local-vars><actions><action id="1" plug-in="Pactolus.JavaStaticMethod.1"><?xtml-editor x=149 y=289 ?><!--validatePassCode()--><java class="&quot;com.pactolus.conferencing.psAPISceAuthConfPasscode&quot;" method="&quot;validateConfPassCode&quot;" timeout="s_intTIMEOUT" return="" method-return-var="intReturnCode" method-return-type="0"><parameter type="in">g_strDBNAME</parameter><parameter type="in">g_strSessionID</parameter><parameter type="in">s_strApplicationName</parameter><parameter type="in">g_strPassCode</parameter><parameter type="in">g_strOrigNbr</parameter><parameter type="in">g_strDestNbr</parameter><parameter type="in">g_intAccessNumberId</parameter><parameter type="in">g_longServiceProviderID</parameter><parameter type="in">g_strRetryFlag</parameter><parameter type="in">g_strSoapAddress</parameter><parameter type="in">g_intSoapPort</parameter><parameter type="in">g_intAllowPasscodeTries</parameter><parameter type="in">g_intNumbPasscodeTries</parameter><parameter type="in">g_strOrigDomIntlFlag</parameter><parameter type="in">g_intOrigCountryID</parameter><parameter type="in">g_strInfoDigits</parameter><parameter type="in">g_strFrom</parameter><parameter type="in">g_strTo</parameter><parameter type="in">g_strCallId</parameter><parameter type="in">g_strSIPStatus</parameter><parameter type="in">g_longStartTime</parameter><parameter type="in">g_strGWIpIngress</parameter><parameter type="in">g_intGWPortIngress</parameter><parameter type="in">g_strGWIpEngress</parameter><parameter type="in">g_intGWPortEngress</parameter><parameter type="in">g_intRtpEncoding</parameter><parameter type="in">g_intRtpClockRate</parameter><parameter type="in">g_intCallMode</parameter><parameter type="in">g_strOutdialFlag</parameter><parameter type="in">g_strOrigCallingCode</parameter><parameter type="in">g_strOrigAreaCode</parameter><parameter type="in">g_strDestDomIntlFlag</parameter><parameter type="in">g_intDestCountryID</parameter><parameter type="in">g_strDestCallingCode</parameter><parameter type="in">g_strDestAreaCode</parameter><parameter type="in">g_strSPTimeZone</parameter><parameter type="inout">g_intScheduleDuration</parameter><parameter type="inout">g_strScheduleStartTime</parameter><parameter type="inout">g_longTimeAvailable</parameter><parameter type="inout">g_strConfScheduleId</parameter><parameter type="inout">g_strCallLegId</parameter><parameter type="inout">g_strConfResource</parameter><parameter type="inout">g_strConfEventId</parameter><parameter type="inout">g_strModeratorFlag</parameter><parameter type="inout">g_strConfControllerIP</parameter><parameter type="inout">g_intConfControllerPort</parameter><parameter type="inout">g_strCallerFirstName</parameter><parameter type="inout">g_strCallerLastName</parameter><parameter type="inout">g_strCallerOrg</parameter><parameter type="inout">g_strPartyPasscodeFlag</parameter><parameter type="inout">g_strMuteFlag</parameter><parameter type="inout">g_strConfPassCode</parameter><parameter type="inout">g_intMaxCallerHoldTime</parameter><parameter type="inout">g_strPostPinPromptType</parameter><parameter type="inout">g_intPostPinPromptIndex</parameter><parameter type="inout">g_strPostPinPromptUrl</parameter><parameter type="inout">g_intServiceID</parameter><parameter type="inout">g_strModeratorRequiredFlag</parameter></java><results><result name="Default" link="5" stubbed="0"/><result name="Success" link="3" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.enableEvents(false);
Session.g_strSIPStatus = Session.g_strSIPStatus.toString();
Server.logInfo("INFO: ********** JAVA CALLING AuthConfPasscode *********");
Server.logInfo("INFO: BEFORE pass code = " + Session.g_strPassCode);
Server.logInfo("INFO: BEFORE access number = " + Session.g_strAccessNumber);
Server.logInfo("INFO: BEFORE sched duration = " + Session.g_intScheduleDuration);
Server.logInfo("INFO: BEFORE sched start time = " + Session.g_strScheduleStartTime);
Server.logInfo("INFO: BEFORE time available = " + Session.g_longTimeAvailable);
Server.logInfo("INFO: BEFORE sched ID = " + Session.g_strConfScheduleId);
Server.logInfo("INFO: BEFORE call leg ID = " + Session.g_strCallLegId);
Server.logInfo("INFO: BEFORE DB name = " + Session.g_strDBNAME);
Server.logInfo("INFO: BEFORE access number ID = " + Session.g_intAccessNumberId);
Server.logInfo("INFO: BEFORE conf resource = " + Session.g_strConfResource);
Server.logInfo("INFO: BEFORE conf event ID = " + Session.g_strConfEventId);]]></script><script language="javascript" timing="last"><![CDATA[Server.logInfo("INFO: ********** iJavaReturnCode " + Session.intReturnCode);
if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS VALIDATE PASS CODE.");
	Server.logInfo("INFO: AFTER pass code = " + Session.g_strPassCode);
	Server.logInfo("INFO: AFTER access number = " + Session.g_strAccessNumber);
	Server.logInfo("INFO: AFTER sched duration = " + Session.g_intScheduleDuration);
	Server.logInfo("INFO: AFTER sched start time = " + Session.g_strScheduleStartTime);
	Server.logInfo("INFO: AFTER time available = " + Session.g_longTimeAvailable);
	Server.logInfo("INFO: AFTER sched ID = " + Session.g_strConfScheduleId);
	Server.logInfo("INFO: AFTER call leg ID = " + Session.g_strCallLegId);
	Server.logInfo("INFO: AFTER DB name = " + Session.g_strDBNAME);
	Server.logInfo("INFO: AFTER access number ID = " + Session.g_intAccessNumberId);
	Server.logInfo("INFO: AFTER conf resource = " + Session.g_strConfResource);
	Server.logInfo("INFO: AFTER conf event ID = " + Session.g_strConfEventId);
}
else
{
	Server.logError("ERROR: FAIL TO VALIDATE PASSCODE, EXIT ON: " + Result.name);
	Session.g_intTerminationReason = 6;
}]]></script></scripts></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=815 y=244 ?><!--FAILURE--><return value="s_intFAILURE"/><scripts><script language="javascript" timing="first"><![CDATA[Server.enableEvents(true);]]></script></scripts></action><action id="3" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=411 y=368 ?><!--return code from java
hard code time avail--><return value="intReturnCode"/><scripts><script language="javascript" timing="first"><![CDATA[Server.enableEvents(true);]]></script></scripts></action><action id="4" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=592 y=247 ?><!--send ALARM--><SOAP destination-ip="" transaction="" message-name="s_strSEND_ALARM_REQUEST" destination-port="" destination-type="1" destination-session="" waiting-session-selected=""><parameter tag="&quot;calling_number&quot;" value="g_strAlarmType"/><parameter tag="&quot;called_number&quot;" value="g_strAlarmPriority"/></SOAP><results><result name="Default" link="2" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strAlarmType = "JAVA: validatePassCode";
Session.g_strAlarmPriority = "MAJOR";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND ALERT");
}
else
{
	Server.logError("ERROR: FAIL TO SEND ALERT, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="5" plug-in="Pactolus.Branch.1"><?xtml-editor x=382 y=139 ?><!--s_strSendAlarmFlag==T--><results><result name="Default" link="2" stubbed="0"/><result name="s_strSendAlarmFlag==T" link="4" stubbed="0">s_strSendAlarmFlag match "T"</result></results></action></actions></function><function name="DeleteMSConnection" start="1" returns="void"><actions><action id="1" plug-in="Pactolus.Branch.1"><?xtml-editor x=66 y=105 ?><!--Connected to MS?--><results><result name="Default" link="11" stubbed="0"/><result name="g_boolConnectedToMS==true" link="5" stubbed="0">g_boolConnectedToMS == true</result></results></action><action id="5" plug-in="Pactolus.MGCPDelete.1"><?xtml-editor x=281 y=225 ?><!--DELETE CONNECTION--><dlcx connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" timeout="s_intTIMEOUT" returns="g_intReturnCode"><parameters><quarantine step="0" loop="0" process="0" discard="0"/><events><![CDATA[]]></events><signals><![CDATA[]]></signals><digit-map><![CDATA[]]></digit-map></parameters></dlcx><results><result name="Default" link="11" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: DELETE MS CONNECTION.");
Server.logInfo("INFO: ConnectionID: " + Session.g_strMSConnectionId);
Server.logInfo("INFO: CallID: " + Session.g_strMSCallId);
Server.logInfo("INFO: End Point: " + Session.g_strMSEndPoint);]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS DELETE MS CONNECTION");
	Session.g_boolConnectedToMS = false;
}
else
{
	Server.logError("ERROR: FAIL TO DELETE CONNECTION, EXIT ON: " + Result.name);
	Server.logError("ERROR: g_strMSCallId = " + Session.g_strMSCallId);
	Server.logError("ERROR: g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: g_strMSEndPoint = " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="6" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=2010 y=453 ?><return value=""/></action><action id="11" plug-in="Pactolus.Branch.1"><?xtml-editor x=533 y=219 ?><!--in the conference?--><results><result name="Default" link="13" stubbed="0"/><result name="inconference==true" link="12" stubbed="0">g_boolInConference == true</result></results></action><action id="12" plug-in="Pactolus.CNFRemoveMember.1"><?xtml-editor x=770 y=343 ?><remove-member ci="g_strConfResource" endpoint="g_strMSMemberEndPoint" connection-id="g_strMSConnectionId" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"/><results><result name="Default" link="13" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS REMOVE PARTY FROM CONFERENCE");
	Session.g_boolInConference = false;
}
else
{
	Server.logError("ERROR: FAIL TO REMOVE PARTY FROM CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: g_strConfRerouse = " + Session.g_strConfResource);
	Server.logError("ERROR: g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: g_strMSMemberEndPoint = " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="13" plug-in="Pactolus.Branch.1"><?xtml-editor x=997 y=330 ?><!--in new conference?--><results><result name="Default" link="15" stubbed="0"/><result name="g_boolInNewConf==true" link="14" stubbed="0">g_boolInNewConf == true</result></results></action><action id="14" plug-in="Pactolus.CNFRemoveMember.1"><?xtml-editor x=1232 y=436 ?><remove-member ci="g_strNewConfResource" endpoint="g_strMSMemberEndPoint" connection-id="g_strMSConnectionId" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"/><results><result name="Default" link="15" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS REMOVE PARTY FROM CONFERENCE");
	Session.g_boolInConference = false;
}
else
{
	Server.logError("ERROR: FAIL TO REMOVE PARTY FROM CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: g_strConfRerouse = " + Session.g_strNewConfResource);
	Server.logError("ERROR: g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: g_strMSMemberEndPoint = " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="15" plug-in="Pactolus.Branch.1"><?xtml-editor x=1523 y=389 ?><!--new conf created?--><results><result name="Default" link="6" stubbed="0"/><result name="g_boolNewConfCreated==true" link="16" stubbed="0">g_boolNewConfCreated == true</result></results></action><action id="16" plug-in="Pactolus.CNFDeleteConf.1"><?xtml-editor x=1757 y=479 ?><delete-conference ci="g_strNewConfResource" endpoint="g_strNewConfResource" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"/><results><result name="Default" link="6" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS DELETE A CONFERENCE.");
	Server.logInfo("INFO: MS CONFERENCE END POINT " + Session.g_strNewConfResource);
	Server.logInfo("INFO: MS CONFERENCE ID = " + Session.g_strNewConfResource);
}
else
{
	Server.logError("ERROR: FAIL TO DELETE A CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE END POINT " + Session.g_strNewConfResource);
	Server.logError("ERROR: MS CONFERENCE ID = " + Session.g_strNewConfResource);
}]]></script></scripts></action></actions></function><function name="SetTimer" start="1" returns="void"><actions><action id="1" plug-in="Standard.Timer.1"><?xtml-editor x=86 y=81 ?><!--SET TIMER--><timer start="1" id="g_longTimerId" duration="g_longTimeAvailable"/><results><result name="Default" link="2" stubbed="0"/></results></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=339 y=82 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Session.g_boolTimerSet = true;]]></script></scripts></action></actions></function><function name="StopTimer" start="1" returns="void"><actions><action id="1" plug-in="Pactolus.Branch.1"><?xtml-editor x=109 y=141 ?><!--timer started?--><results><result name="Default" link="9" stubbed="0"/><result name="timer set == true" link="2" stubbed="0">g_boolTimerSet == true</result></results></action><action id="2" plug-in="Standard.Timer.1"><?xtml-editor x=372 y=235 ?><!--stop WFM timer--><timer start="0" id="g_longWFMTimerID" duration=""/><results><result name="Default" link="10" stubbed="0"/></results></action><action id="5" plug-in="Pactolus.Branch.1"><?xtml-editor x=839 y=203 ?><!--timer started?--><results><result name="Default" link="6" stubbed="0"/><result name="timer set == true" link="7" stubbed="0">g_boolHoldTimerFlag == true</result></results></action><action id="6" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1099 y=123 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: no HOLD timer started, no need to stop timer.");]]></script></scripts></action><action id="7" plug-in="Standard.Timer.1"><?xtml-editor x=1109 y=293 ?><!--stop Hold timer--><timer start="0" id="g_longHoldTimerID" duration=""/><results><result name="Default" link="8" stubbed="0"/></results></action><action id="8" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1319 y=294 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Session.g_boolHoldTimerFlag = false;]]></script></scripts></action><action id="9" plug-in="Pactolus.Branch.1"><?xtml-editor x=353 y=125 ?><results><result name="Default" link="5" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: StopTimer.9: no WFM timer started, no need to stop timer ****");]]></script></scripts></action><action id="10" plug-in="Pactolus.Branch.1"><?xtml-editor x=594 y=279 ?><results><result name="Default" link="5" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_boolTimerSet = false;]]></script></scripts></action></actions></function><function name="psAPISceSetConfResource" start="3" returns="i4"><local-vars><var name="intReturnCode" type="i4">-50</var></local-vars><actions><action id="3" plug-in="Pactolus.JavaStaticMethod.1"><?xtml-editor x=331 y=191 ?><!--testSetConfResource()--><java class="&quot;com.pactolus.conferencing.psAPISceSetConfResource&quot;" method="&quot;setConfResource&quot;" timeout="s_intTIMEOUT" return="" method-return-var="intReturnCode" method-return-type="0"><parameter type="in">g_strDBNAME</parameter><parameter type="in">g_strSessionID</parameter><parameter type="in">g_strConfEventId</parameter><parameter type="in">g_strConfResource</parameter></java><results><result name="Default" link="2" stubbed="0"/><result name="Success" link="1" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[// Session.g_strConfResource = Session.g_strMSEndPoint;
Server.logInfo("INFO: *********JAVA CALLING SetConfResource *********");
Server.logInfo("INFO: BEFORE sched ID = " + Session.g_strConfScheduleId);
Server.logInfo("INFO: BEFORE conf resource = " + Session.g_strConfResource);
Server.logInfo("INFO: BEFORE DB name = " + Session.g_strDBNAME);]]></script><script language="javascript" timing="last"><![CDATA[Server.logInfo("INFO: ********* SetConfResource returns " + Session.intReturnCode);
if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS CALL SET CONF RESOURCE.");
	Server.logInfo("INFO: AFTER sched ID = " + Session.g_strConfScheduleId);
	Server.logInfo("INFO: AFTER conf resource = " + Session.g_strConfResource);
	Server.logInfo("INFO: AFTER DB name = " + Session.g_strDBNAME);
}
else
{
	Server.logError("ERROR: FAIL TO CALL SET CONF RESOURCE, EXIT ON: " + Result.name);
	Session.g_intTerminationReason = 6;
}]]></script></scripts></action><action id="1" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=633 y=294 ?><!--return JAVA_SUCCESS--><return value="intReturnCode"/><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("BEFORE conf schedule ID = " + Session.g_strConfScheduleId);
Server.logInfo("BEFORE conf resource = " + Session.g_strConfResource);
Server.logInfo("BEFORE DB name = " + Session.g_strDBNAME);
]]></script><script language="javascript" timing="last"><![CDATA[Server.logInfo("AFTER conf schedule ID = " + Session.g_strConfScheduleId);
Server.logInfo("AFTER conf resource = " + Session.g_strConfResource);
Server.logInfo("AFTER DB name = " + Session.g_strDBNAME);]]></script></scripts></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=631 y=88 ?><!--return FAILED_JAVA--><return value="s_intFAILURE"/><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: conference.psAPISceSetConfResource.2: FAIL TO SET CONFERENCE RESOURCE");]]></script></scripts></action></actions></function><function name="PlayPromptToConference" start="1" returns="i4"><parameters><parameter name="intPromptNumber" type="i4"/></parameters><local-vars><var name="strSignal" type="string"></var></local-vars><actions><action id="1" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=407 y=135 ?><!--play a prompt to conf--><play connection-id="" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="5" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">intPromptNumber</audio></play><results><result name="Default" link="2" stubbed="0"/><result name="Success" link="3" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY JOIN TONE TO CONFERENCE.");
	Server.logInfo("INFO: g_strMSSDP = " + Session.g_strMSSDP);
	Server.logInfo("INFO: g_strMSCallId = " + Session.g_strMSCallId);
	Server.logInfo("INFO: g_strMSConnectionId = * ");
	Server.logInfo("INFO: g_strMSEndPoint = " + Session.g_strMSEndPoint);
}
else if (Result.id == 3 && Session.g_intReturnCode == 800527)
{
	Server.logInfo("INFO: GOT 527 RETURN CODE.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY JOIN TONE TO CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: g_strMSCallId = " + Session.g_strMSCallId);
	Server.logError("ERROR: g_strMSConnectionId = * ");
	Server.logError("ERROR: g_strMSEndPoint = " + Session.g_strMSEndPoint);
	Server.logError("ERROR: g_intReturnCode = " + Session.g_intReturnCode);
}]]></script></scripts></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=702 y=139 ?><!--FAILURE--><return value="s_intFAILURE"/></action><action id="3" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=710 y=230 ?><!--SUCCESS--><return value="s_intSUCCESS"/></action><action id="4" plug-in="Pactolus.MGCPNotifyRequest.1"><?xtml-editor x=718 y=344 ?><!--issue A/null@connectionID--><rqnt connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" timeout="s_intTIMEOUT" returns="g_intReturnCode"><parameters><quarantine step="0" loop="0" process="0" discard="0"/><events><![CDATA[]]></events><signals><![CDATA[strSignal]]></signals><digit-map><![CDATA[]]></digit-map></parameters></rqnt><results><result name="Default"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.strSignal = "A/null@" + Session.g_strMSConnectionId;]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND A NULL RQNT.");
}
else
{
	Server.logError("ERROR: FAIL TO SEND A NULL RQNT, EXIT ON: " + Result.name);
	Server.logError("ERROR: g_strMSCallId = " + Session.g_strMSCallId);
	Server.logError("ERROR: g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: g_strMSEndPoint = " + Session.g_strMSEndPoint);
}]]></script></scripts></action></actions></function><function name="OnSessionEnd" start="4" returns="void"><parameters><parameter name="nSessionEndReason" type="i2"/></parameters><actions><action id="4" plug-in="Standard.FunctionCall.1"><?xtml-editor x=163 y=200 ?><!--ConfCallLegCompletion--><function name="&quot;psAPISceConfCallLegCompletion&quot;" return="g_intReturnCode"/><results><result name="Default" link="3" stubbed="0"/></results></action><action id="3" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=412 y=200 ?><return value=""/></action></actions></function><function name="EndCall" start="1" returns="void"><actions><action id="1" plug-in="Standard.FunctionCall.1"><?xtml-editor x=230 y=354 ?><!--delete MS if needed--><function name="&quot;DeleteMSConnection&quot;" return=""/><results><result name="Default" link="3" stubbed="0"/></results></action><action id="2" plug-in="Standard.FunctionCall.1"><?xtml-editor x=340 y=474 ?><!--stop timer if needed--><function name="&quot;StopTimer&quot;" return=""/><results><result name="Default" link="3" stubbed="0"/></results></action><action id="3" plug-in="Standard.EndSession.1"><?xtml-editor x=648 y=456 ?></action></actions></function><function name="OnBye" start="15" returns="void"><parameters><parameter name="strAccept" type="string"/><parameter name="strAcceptEncoding" type="string"/><parameter name="strAcceptLanguage" type="string"/><parameter name="strAuthorization" type="string"/><parameter name="strCallId" type="string"/><parameter name="strCSeq" type="string"/><parameter name="strDate" type="string"/><parameter name="strEncryption" type="string"/><parameter name="strFrom" type="string"/><parameter name="nMaxForwards" type="i2"/><parameter name="strProxyAuthorization" type="string"/><parameter name="strProxyRequire" type="string"/><parameter name="strRecordRoute" type="string"/><parameter name="strRequestURI" type="string"/><parameter name="strRequire" type="string"/><parameter name="strResponseKey" type="string"/><parameter name="strRoute" type="string"/><parameter name="strSupported" type="string"/><parameter name="strTimestamp" type="string"/><parameter name="strTo" type="string"/><parameter name="strVia" type="string"/></parameters><actions><action id="15" plug-in="Standard.FunctionCall.1"><?xtml-editor x=30 y=168 ?><!--stop timer if needed--><function name="&quot;StopTimer&quot;" return=""/><results><result name="Default" link="10" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.enableEvents(false);
Session.g_intTerminationReason = 1;]]></script></scripts></action><action id="1" plug-in="Pactolus.SipResponse.1"><?xtml-editor x=476 y=166 ?><!--Send 200 OK back to caller--><sip-response remove-via="0" reliable="0"><call-id>strCallId</call-id><cseq>strCSeq</cseq><from>strFrom</from><status>"SIP/2.0 200 OK"</status><to>strTo</to><via>strVia</via></sip-response><results><result name="Default" link="18" stubbed="0"/><result name="Success" link="6" stubbed="0"/><result name="Error"/><result name="Timeout"/></results></action><action id="4" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=316 y=653 ?><!--play depart tone--><play connection-id="&quot;*&quot;" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="1" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="0" parse-on-ms="1" terminating-digit=""><audio type="index">s_intPROMPT_DEPART_TONE</audio></play><results><result name="Default" link="17" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO:conference.OnBye.4: PLAY DEPART TONE.");
Server.logInfo("INFO:conference.OnBye.4: MS CALL ID: " + Session.g_strMSCallId);]]></script></scripts></action><action id="6" plug-in="Standard.FunctionCall.1"><?xtml-editor x=927 y=200 ?><!--End Call--><function name="&quot;EndCall&quot;" return=""/><results><result name="Default" link="20" stubbed="0"/></results></action><action id="9" plug-in="Standard.EndSession.1"><?xtml-editor x=1586 y=195 ?></action><action id="10" plug-in="Standard.FunctionCall.1"><?xtml-editor x=235 y=169 ?><!--PARTY LEAVE--><function name="&quot;PartyLeave&quot;" return=""/><results><result name="Default" link="1" stubbed="0"/></results></action><action id="11" plug-in="Pactolus.Branch.1"><?xtml-editor x=81 y=516 ?><!--caller in the conference?--><results><result name="Default" link="12" stubbed="0"/><result name="caller in conference" link="4" stubbed="0">g_boolInConference == true</result><result name="WFM">g_boolWaitForModerator == true</result></results></action><action id="12" plug-in="Pactolus.SipResponse.1"><?xtml-editor x=308 y=460 ?><!--Send 200 OK back to caller--><sip-response remove-via="0" reliable="0"><call-id>strCallId</call-id><cseq>strCSeq</cseq><from>strFrom</from><status>"SIP/2.0 200 OK"</status><to>strTo</to><via>strVia</via></sip-response><results><result name="Default" link="19" stubbed="0"/><result name="Success" link="13" stubbed="0"/><result name="Error"/><result name="Timeout"/></results></action><action id="13" plug-in="Standard.FunctionCall.1"><?xtml-editor x=789 y=453 ?><!--End Call--><function name="&quot;EndCall&quot;" return=""/><results><result name="Default" link="14" stubbed="0"/></results></action><action id="14" plug-in="Standard.EndSession.1"><?xtml-editor x=992 y=453 ?></action><action id="17" plug-in="Pactolus.Branch.1"><?xtml-editor x=531 y=626 ?><results><result name="Default"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: conference.OnBye.17: FAIL TO PLAY DEPART TONE.");]]></script></scripts></action><action id="18" plug-in="Pactolus.Branch.1"><?xtml-editor x=686 y=162 ?><results><result name="Default" link="6" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: FAIL TO RESPONSE 200 OK TO BYE.");]]></script></scripts></action><action id="19" plug-in="Pactolus.Branch.1"><?xtml-editor x=521 y=460 ?><!--log ERROR--><results><result name="Default" link="13" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR:conference.OnBye.19: FAIL TO RESPONSE 200 OK");]]></script></scripts></action><action id="20" plug-in="Pactolus.Branch.1"><?xtml-editor x=1148 y=198 ?><!--dial out--><results><result name="Default" link="9" stubbed="0"/><result name="dial out" link="21" stubbed="0">g_boolIVRDialOut == true
AND g_boolNullString == false</result></results></action><action id="21" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=1366 y=285 ?><!--party declined--><SOAP destination-ip="" transaction="" message-name="s_strIVR_CONF_PARTY_DECLINE" destination-port="" destination-type="3" destination-session="g_strIVRAddPartySessionID" waiting-session-selected=""/><results><result name="Default" link="9" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND PARTY DECLINED TO CONFERENCE CONTROLLER");
	Server.logError("ERROR: SEND PARTY DECLINED TO session ID is: " + Session.g_strIVRAddPartySessionID);
}
else
{
	Server.logError("ERROR: FAIL TO SEND PARTY DECLINCED TO CONFERENCE CONTROLLER, EXIT ON: " + Result.name);
	Server.logError("ERROR: SEND PARTY DECLINED TO session ID is: " + Session.g_strIVRAddPartySessionID);
}]]></script></scripts></action></actions></function><function name="psAPISceConfCallLegCompletion" start="4" returns="i4"><local-vars><var name="intReturnCode" type="i4">-50</var></local-vars><actions><action id="4" plug-in="Pactolus.Branch.1"><?xtml-editor x=192 y=50 ?><!--null string?--><results><result name="Default" link="1" stubbed="0"/><result name="null string" link="2" stubbed="0">g_boolNullString == true</result></results><scripts><script language="javascript" timing="first"><![CDATA[if (Session.g_strDBNAME.length <= 0)
{
	Session.g_boolNullString = true;
}
else
{
	Session.g_boolNullString = false;
}]]></script></scripts></action><action id="1" plug-in="Pactolus.JavaStaticMethod.1"><?xtml-editor x=443 y=179 ?><!--CallLegCompletion()--><java class="&quot;com.pactolus.conferencing.psAPISceConfCallLegCompletion&quot;" method="&quot;procConfCallCompletion&quot;" timeout="s_intTIMEOUT" return="" method-return-var="intReturnCode" method-return-type="0"><parameter type="in">g_strDBNAME</parameter><parameter type="in">g_strSessionID</parameter><parameter type="in">g_intTerminationReason</parameter><parameter type="in">g_longEndTime</parameter><parameter type="in">g_longMSConnectTime</parameter><parameter type="in">g_strConfEventId</parameter><parameter type="in">g_strCallLegId</parameter><parameter type="in">g_strModeratorFlag</parameter><parameter type="in">g_strSPTimeZone</parameter><parameter type="in">g_intAccessNumberId</parameter><parameter type="in">g_intCallMode</parameter><parameter type="in">g_strPartyScheduleID</parameter><parameter type="in">g_longServiceProviderID</parameter><parameter type="in">g_strInfoDigits</parameter><parameter type="in">g_strOrigDomIntlFlag</parameter><parameter type="in">g_strDestDomIntlFlag</parameter><parameter type="in">g_intOrigCountryID</parameter><parameter type="in">g_strOrigNbr</parameter><parameter type="in">g_strDestNbr</parameter><parameter type="in">g_intRtpEncoding</parameter><parameter type="in">g_intRtpClockRate</parameter><parameter type="in">g_strFrom</parameter><parameter type="in">g_strTo</parameter><parameter type="in">g_strCallId</parameter><parameter type="in">g_strStatus</parameter><parameter type="in">g_longStartTime</parameter><parameter type="in">g_strGWIpIngress</parameter><parameter type="in">g_intGWPortIngress</parameter><parameter type="in">g_strGWIpEngress</parameter><parameter type="in">g_intGWPortEngress</parameter><parameter type="in">s_strApplicationName</parameter><parameter type="in">g_strSoapAddress</parameter><parameter type="in">g_intSoapPort</parameter><parameter type="in">g_strOutdialFlag</parameter><parameter type="in">g_strOrigCallingCode</parameter><parameter type="in">g_strOrigAreaCode</parameter><parameter type="in">g_intDestCountryID</parameter><parameter type="in">g_strDestCallingCode</parameter><parameter type="in">g_strDestAreaCode</parameter></java><results><result name="Default" link="2" stubbed="0"/><result name="Success" link="5" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_longEndTime = Server.getUTCTime();
Server.logInfo("INFO: ********JAVA CALLING ConfCallLegComplettion *********");
Server.logInfo("INFO: BEFORE DB name = " + Session.g_strDBNAME);
Server.logInfo("INFO: BEFORE Session ID = " + Session.g_strSessionID);
Server.logInfo("INFO: BEFORE termination reason = " + Session.g_intTerminationReason);
Server.logInfo("INFO: BEFORE end time = " + Session.g_longEndTime);
Server.logInfo("INFO: BEFORE MS connect time = " + Session.g_longMSConnectTime);
Server.logInfo("INFO: BEFORE conf event ID = " + Session.g_strConfEventId);
Server.logInfo("INFO: BEFORE call leg ID = " + Session.g_strCallLegId);



]]></script><script language="javascript" timing="last"><![CDATA[Server.logInfo("INFO: conference.psAPISceConfCallLegCompletion.1: **** Conf Call Leg Completion returns " + Session.intReturnCode);
if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS WRITE CALL LEG CALL COMPLETION.");
	Server.logInfo("INFO: BEFORE DB name = " + Session.g_strDBNAME);
	Server.logInfo("INFO: BEFORE Session ID = " + Session.g_strSessionID);
	Server.logInfo("INFO: BEFORE termination reason = " + Session.g_intTerminationReason);
	Server.logInfo("INFO: BEFORE end time = " + Session.g_longEndTime);
	Server.logInfo("INFO: BEFORE MS connect time = " + Session.g_longMSConnectTime);
	Server.logInfo("INFO: BEFORE conf event ID = " + Session.g_strConfEventId);
	Server.logInfo("INFO: BEFORE call leg ID = " + Session.g_strCallLegId);
}
else
{
	Server.logError("ERROR: FAIL TO WRITE CALL LEG CALL COMPLETION, EXIT ON: " + Result.name);
	Session.g_intTerminationReason = 6;
}]]></script></scripts></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=729 y=204 ?><!--FAILURE--><return value="s_intFAILURE"/></action><action id="3" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=950 y=295 ?><!--JAVA RETURN CODE--><return value="intReturnCode"/></action><action id="5" plug-in="Pactolus.Branch.1"><?xtml-editor x=727 y=296 ?><!--last caller?--><results><result name="Default" link="3" stubbed="0"/><result name="intReturnCode==1" link="6" stubbed="0">intReturnCode == 1</result></results></action><action id="6" plug-in="Pactolus.CNFDeleteConf.1"><?xtml-editor x=958 y=407 ?><delete-conference ci="g_strMSConferenceID" endpoint="g_strConfResource" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"/><results><result name="Default" link="7" stubbed="0"/><result name="Success" link="8" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[if (Session.g_strMSConferenceID.length <= 0)
{
	Session.g_strMSConferenceID = Session.g_strConfResource;
}	]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS DELETE A CONFERENCE.");
	Server.logInfo("INFO: MS CONFERENCE END POINT " + Session.g_strConfResource);
	Server.logInfo("INFO: MS CONFERENCE ID = " + Session.g_strMSConferenceID);
}
else
{
	Server.logError("ERROR: FAIL TO DELETE A CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE END POINT " + Session.g_strConfResource);
	Server.logError("ERROR: MS CONFERENCE ID = " + Session.g_strMSConferenceID);
}]]></script></scripts></action><action id="7" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1200 y=407 ?><!--JAVA RETURN CODE--><return value="intReturnCode"/></action><action id="8" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1201 y=483 ?><!--FAILURE--><return value="s_intFAILURE"/></action></actions></function><function name="OnCancel" start="1" returns="void"><parameters><parameter name="strAccept" type="string"/><parameter name="strAcceptEncoding" type="string"/><parameter name="strAcceptLanguage" type="string"/><parameter name="strAuthorization" type="string"/><parameter name="strCallId" type="string"/><parameter name="strContent" type="string"/><parameter name="strContentDisposition" type="string"/><parameter name="strContentType" type="string"/><parameter name="strCSeq" type="string"/><parameter name="strDate" type="string"/><parameter name="strEncryption" type="string"/><parameter name="strFrom" type="string"/><parameter name="nMaxForwards" type="i2"/><parameter name="strProxyAuthorization" type="string"/><parameter name="strProxyRequire" type="string"/><parameter name="strRecordRoute" type="string"/><parameter name="strRequestURI" type="string"/><parameter name="strRequire" type="string"/><parameter name="strResponseKey" type="string"/><parameter name="strRoute" type="string"/><parameter name="strSupported" type="string"/><parameter name="strTimestamp" type="string"/><parameter name="strTo" type="string"/><parameter name="strVia" type="string"/></parameters><actions><action id="1" plug-in="Pactolus.SipResponse.1"><?xtml-editor x=99 y=116 ?><!--200 OK--><sip-response remove-via="0" reliable="0"><call-id>strCallId</call-id><cseq>strCSeq</cseq><from>strFrom</from><status>"SIP/2.0 200 OK"</status><to>strTo</to><via>strVia</via></sip-response><results><result name="Default" link="4" stubbed="0"/><result name="Success" link="3" stubbed="0"/><result name="Error"/><result name="Timeout"/></results></action><action id="3" plug-in="Standard.EndSession.1"><?xtml-editor x=606 y=119 ?></action><action id="4" plug-in="Pactolus.Branch.1"><?xtml-editor x=360 y=112 ?><!--log ERROR--><results><result name="Default" link="3" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: FAIL TO RESPONSE 200 OK TO CANCEL");]]></script></scripts></action></actions></function><function name="OnOptions" start="2" returns="void"><parameters><parameter name="strAccept" type="string"/><parameter name="strAcceptEncoding" type="string"/><parameter name="strAcceptLanguage" type="string"/><parameter name="strAuthorization" type="string"/><parameter name="strCallId" type="string"/><parameter name="strContact" type="string"/><parameter name="strContent" type="string"/><parameter name="strContentDisposition" type="string"/><parameter name="strContentType" type="string"/><parameter name="strCSeq" type="string"/><parameter name="strDate" type="string"/><parameter name="strEncryption" type="string"/><parameter name="strFrom" type="string"/><parameter name="nMaxForwards" type="i2"/><parameter name="strProxyAuthorization" type="string"/><parameter name="strProxyRequire" type="string"/><parameter name="strRecordRoute" type="string"/><parameter name="strRequestURI" type="string"/><parameter name="strRequire" type="string"/><parameter name="strResponseKey" type="string"/><parameter name="strRoute" type="string"/><parameter name="strSupported" type="string"/><parameter name="strTimestamp" type="string"/><parameter name="strTo" type="string"/><parameter name="strVia" type="string"/></parameters><actions><action id="2" plug-in="Pactolus.SipResponse.1"><?xtml-editor x=211 y=142 ?><sip-response remove-via="0" reliable="0"><call-id>strCallId</call-id><cseq>strCSeq</cseq><from>strFrom</from><status>"SIP/2.0 200 OK"</status><to>strTo</to><via>strVia</via></sip-response><results><result name="Default" link="3" stubbed="0"/><result name="Success" link="1" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[var cseq = new SipCSeq(Session.g_strCSeq);
cseq.increment();
Session.g_strCSeq = cseq.encode();]]></script></scripts></action><action id="1" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=629 y=181 ?><return value=""/></action><action id="3" plug-in="Pactolus.Branch.1"><?xtml-editor x=424 y=108 ?><!--log ERROR--><results><result name="Default" link="1" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: FAIL TO RESPONSE 200 OK");]]></script></scripts></action></actions></function><function name="PutCallerOnHold" start="4" returns="i4"><actions><action id="4" plug-in="Pactolus.Branch.1"><?xtml-editor x=306 y=213 ?><!--dial in or dial out?--><results><result name="Default" link="1" stubbed="0"/><result name="dial out" link="5" stubbed="0">g_boolIVRDialOut == true
OR g_boolWebDialOut == true</result></results></action><action id="1" plug-in="Pactolus.Hold.1"><?xtml-editor x=575 y=122 ?><cc-hold to="g_strTo" from="g_strFrom" ingress-gateway="g_strRequestURI" cseq="g_strCSeq" call-id="g_strCallId" sdp="g_strContent" status=""/><results><result name="Default" link="2" stubbed="0"/><result name="Success" link="3" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PUT CALLER ON HOLD.");
}
else
{
	Server.logError("ERROR: FAIL TO PUT CALLER ON HOLD, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=803 y=247 ?><return value="s_intFAILURE"/></action><action id="3" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1042 y=246 ?><return value="s_intSUCCESS"/></action><action id="5" plug-in="Pactolus.Hold.1"><?xtml-editor x=582 y=301 ?><cc-hold to="g_strFrom" from="g_strTo" ingress-gateway="g_strRequestURI" cseq="g_strCSeq" call-id="g_strCallId" sdp="g_strContent" status=""/><results><result name="Default" link="2" stubbed="0"/><result name="Success" link="3" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS TO PUT CALLER ON HOLD.");
}
else
{
	Server.logError("ERROR: FAIL TO PUT CALLER ON HOLD, EXIT ON: " + Result.name);
}]]></script></scripts></action></actions></function><function name="OnAddPartyRequest" start="35" returns="void"><parameters><parameter name="strConfControllerIpAddress" type="string"/><parameter name="nConfControllerPort" type="i4"/><parameter name="strTransactionId" type="string"/><parameter name="strConferenceID" type="string"/><parameter name="strCalledNumber" type="string"/><parameter name="strPassCode" type="string"/><parameter name="longServiceProviderID" type="i8"/><parameter name="intDestCountryID" type="i4"/><parameter name="strDestCallingCode" type="string"/><parameter name="strDestAreaCode" type="string"/><parameter name="strDomIntlFlag" type="string"/></parameters><local-vars><var name="intReturnCode" type="i4">0</var><var name="strRequestURI" type="string"></var><var name="strCallid" type="string"></var><var name="strCSeq" type="string"></var><var name="strSDP" type="string"></var><var name="strTo" type="string"></var><var name="strFrom" type="string"></var><var name="strDigits" type="string"></var><var name="shortMaxRetry" type="i2">0</var></local-vars><actions><action id="35" plug-in="Standard.FunctionCall.1"><?xtml-editor x=140 y=33 ?><!--Initialize Conference Outdial--><function name="&quot;psAPISceInitConfOutdialSession&quot;" return="intReturnCode"/><results><result name="Default" link="37" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_boolWebDialOut = true;
Session.g_longStartTime = Server.getUTCTime();
Session.g_strSessionID = Session._sessionId;
Session.g_strAppServerAddress = Server.ipAddress;
Session.g_strSipAddress = Server.sipAddress;
Session.g_intSipPort = parseInt(Server.sipPort);
Session.g_strSoapAddress = Server.soapAddress;
Session.g_intSoapPort = parseInt(Server.soapPort);
Session.g_strPassCode = Session.strPassCode;
Session.g_strOutdialFlag = "T";
Session.g_longServiceProviderID = Clib.atol(Session.longServiceProviderID);
Session.g_strConfScheduleId = Session.strConferenceID;
Session.g_strTransactionID = Session.strTransactionId;
Session.g_intDestCountryID = Session.intDestCountryID;
Session.g_strDestCallingCode = Session.strDestCallingCode;
Session.g_strDestAreaCode = Session.strDestAreaCode;
Session.g_strDestDomIntlFlag = Session.strDomIntlFlag;
Session.g_strDestNbr = Session.strCalledNumber;
Server.logInfo("INFO: RECEIVE ADD PARTY REQUEST FROM CONF CONTROLLER.");
Server.logInfo("INFO: conference ID: " + Session.strConferenceID);
Server.logInfo("INFO: called number: " + Session.strCalledNumber);
Server.logInfo("INFO: pass code: " + Session.strPassCode);
Server.logInfo("INFO: service provider ID: " + Session.longServiceProviderID);
Server.logInfo("INFO: dest country ID: " + Session.intDestCountryID);
Server.logInfo("INFO: dest area code: " + Session.strDestAreaCode);
Server.logInfo("INFO: dest calling code: " + Session.strDestCallingCode);
Server.logInfo("INFO: dest dom intl flag: " + Session.strDomIntlFlag);
Server.logInfo("INFO: TransactionID: " + Session.strTransactionId);
Server.logInfo("INFO: Conf Controller IP: " + Session.strConfControllerIpAddress);
Server.logInfo("INFO: Conf Controller Port: " + Session.nConfControllerPort);]]></script></scripts></action><action id="7" plug-in="Standard.FunctionCall.1"><?xtml-editor x=607 y=102 ?><!--validate the passcode--><function name="&quot;psAPISceAuthConfPassCode&quot;" return="intReturnCode"/><results><result name="Default" link="9" stubbed="0"/></results></action><action id="9" plug-in="Pactolus.Branch.1"><?xtml-editor x=50 y=206 ?><!--return code == ?--><results><result name="Default" link="25" stubbed="0"/><result name="return code == 0" link="88" stubbed="0">intReturnCode == 0</result><result name="return code == 1" link="88" stubbed="0">intReturnCode == 1</result><result name="return code == 2" link="25" stubbed="0">intReturnCode == 2</result></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intReturnCode = Session.intReturnCode;
if (Session.intReturnCode == Session.s_intFIRSTCALLER)
{
	Session.g_boolFirstCaller = true;
}
else
{
	Session.g_boolFirstCaller = false;
}	]]></script></scripts></action><action id="17" plug-in="Pactolus.Branch.1"><?xtml-editor x=474 y=332 ?><!--setup for conf party--><results><result name="Default" link="62" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strContact = "sip:" + Server.ipAddress;
if( Server.sipPort != 5060 )
{
  Session.g_strContact += ":" + Server.sipPort;
}
Session.g_strCallId = Server.getUTCTime() + Session._sessionId;
Session.g_strCSeq = "1001 INVITE";
Session.g_strTo = "sip:" + Session.g_strDestNbr + "@" + Session.s_strPrimaryPSX;
Session.g_strFrom = "sip:" + Server.ipAddress + ":" + Server.sipPort;
Session.g_strRequestURI = "sip:" + Session.g_strDestNbr + "@" + Session.s_strPrimaryPSX;]]></script></scripts></action><action id="19" plug-in="Pactolus.MSConnect.1"><?xtml-editor x=912 y=325 ?><!--save outdial INFO--><cc-connect call-id="g_strCallId" caller-sdp="g_strContent" capability="2" inbound="0" returns="g_intReturnCode" timeout="s_intRING_NO_ANSWER" endpoint="g_strMSEndPoint" connection-id="g_strMSConnectionId" ms-sdp="g_strMSSDP" to="g_strTo" from="g_strFrom" cseq="g_strCSeq" via="" mgcp-call-id="g_strMSCallId" ingress-gateway="g_strRequestURI" packetization-period="s_intPacketizationPeriod" codec="0"/><results><result name="Default" link="71" stubbed="0"/><result name="Success" link="64" stubbed="0"/><result name="Error"/><result name="Timeout" link="63" stubbed="0"/><result name="Resource Unavailable"/><result name="Caller Hung up"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS CONNECT OUTDIAL PARTY TO MS.");
	Session.g_boolConnectedToMS = true;
}
else
{
	Server.logError("ERROR: FAIL TO CONNECT OUTDIAL PARTY TO MS, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="21" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1410 y=985 ?><!--set time available for this caller--><function name="&quot;SetTimer&quot;" return=""/><results><result name="Default"/></results><scripts><script language="javascript" timing="first"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: conference.OnAddPartyRequest.58: SUCCESS CONNECT PARTY TO THE CONFERENCE");
}
else if (Result.id == 3)
{
	Server.logError("ERROR: conference.OnAddPartyRequest.58: ERROR BRANCH CONNECT PARTY TO THE CONFERENCE.");
	Server.logError("ERROR: conference.OnAddPartyRequest.58: g_strMSCallId = " + Session.g_strMSCallId);
	Server.logError("ERROR: conference.OnAddPartyRequest.58: g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: conference.OnAddPartyRequest.58: g_strMSEndPoint = " + Session.g_strMSEndPoint);
}
else if (Result.id == 4)
{
	Server.logError("ERROR: conference.OnAddPartyRequest.58: TIMEOUT BRANCH CONNECT PARTY TO THE CONFERENCE.");
	Server.logError("ERROR: conference.OnAddPartyRequest.58: g_strMSCallId = " + Session.g_strMSCallId);
	Server.logError("ERROR: conference.OnAddPartyRequest.58: g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: conference.OnAddPartyRequest.58: g_strMSEndPoint = " + Session.g_strMSEndPoint);
}
else if (Result.id == 1)
{
	Server.logError("ERROR: conference.OnAddPartyRequest.58: DEFAULT BRANCH CONNECT PARTY TO THE CONFERENCE.");
	Server.logError("ERROR: conference.OnAddPartyRequest.58: g_strMSCallId = " + Session.g_strMSCallId);
	Server.logError("ERROR: conference.OnAddPartyRequest.58: g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: conference.OnAddPartyRequest.58: g_strMSEndPoint = " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="25" plug-in="Standard.EndSession.1"><?xtml-editor x=867 y=207 ?></action><action id="26" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=1410 y=280 ?><!--FAIL to add a call party--><SOAP destination-ip="g_strConfControllerIP" transaction="strTransactionId" message-name="s_strCONF_ADD_RESPONSE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;resultCode&quot;" value="-999"/><parameter tag="&quot;resultMessage&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="55" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strReturnMsg = " FAILURE TO ADD PARTY TO THE CONFERENECE";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND FAIL TO ADD PARTY TO CONFERENCE CONTROLLER");
}
else
{
	Server.logError("ERROR: FAIL TO SEND FAIL TO ADD PARTY TO CONFERENCE CONTROLLER, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="34" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=2465 y=1592 ?><return value=""/></action><action id="37" plug-in="Pactolus.Branch.1"><?xtml-editor x=381 y=34 ?><!--check return code--><results><result name="Default" link="25" stubbed="0"/><result name="intReturnCode==0" link="7" stubbed="0">intReturnCode == 0</result></results></action><action id="38" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=542 y=2106 ?><!--Welcome prompt Index--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">g_intWelcomePromptIndex</audio></play><results><result name="Default" link="80" stubbed="0"/><result name="Success" link="38" stubbed="0"/><result name="Error"/><result name="Timeout"/></results></action><action id="39" plug-in="Pactolus.Branch.1"><?xtml-editor x=47 y=1942 ?><!--Welcome prompt?--><results><result name="Default" link="40" stubbed="0"/><result name="IWelcomePromptIndex &lt;= 0" link="39" stubbed="0">g_intWelcomePromptIndex &lt;= 0</result></results><scripts><script language="javascript" timing="first"><![CDATA[Server.enableEvents(false);]]></script></scripts></action><action id="40" plug-in="Pactolus.Branch.1"><?xtml-editor x=295 y=1926 ?><!--strWelcomePromptType = U or V--><results><result name="Default" link="40" stubbed="0"/><result name="strWelcomePromptType==U" link="41" stubbed="0">g_strWelcomePromptType match "U"</result><result name="strWelcomePromptType==V" link="38" stubbed="0">g_strWelcomePromptType match "V"</result></results></action><action id="41" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=533 y=1926 ?><!--Welcome prompt URL--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="url">g_strWelcomePromptUrl</audio></play><results><result name="Default" link="79" stubbed="0"/><result name="Success" link="41" stubbed="0"/><result name="Error"/><result name="Timeout"/></results></action><action id="42" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1182 y=871 ?><!--Hang up caller--><function name="&quot;HangUpCaller&quot;" return=""/><results><result name="Default" link="74" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[// Server.enableEvents(true);
Session.g_intTerminationReason = 1;]]></script></scripts></action><action id="44" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=193 y=624 ?><!--accept or decline--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="&quot;(1|2)&quot;" language="g_strLanguage" digits="strDigits" retry-count="shortMaxRetry" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">890</audio><audio type="index">311</audio><audio type="index">893</audio><audio type="index">312</audio><audio type="index">894</audio><audio type="index">895</audio><timeout-prompt type="index">s_intPROMPT_NO_RESPONSE</timeout-prompt></play><results><result name="Default" link="46" stubbed="0"/><result name="Success" link="45" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: ASK TO ACCEPT OR DECLINE.");
Session.shortMaxRetry = Session.g_intNumbPasscodeTries;]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY COLLECT USER CHOICE.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY COLLECT USER CHOICE, EXIT ON: " + Result.name);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="45" plug-in="Pactolus.Branch.1"><?xtml-editor x=436 y=784 ?><!--ACCEPT?--><results><result name="Default" link="47" stubbed="0"/><result name="strDigit == 1" link="97" stubbed="0">strDigits match "1"</result></results></action><action id="46" plug-in="Pactolus.Branch.1"><?xtml-editor x=413 y=625 ?><!--FAIL TO CONFIRM--><results><result name="Default" link="65" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: FAIL TO CONFIRM.");]]></script></scripts></action><action id="47" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=657 y=730 ?><!--GOOD BYE--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">322</audio></play><results><result name="Default" link="65" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY GOOD BYE.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY GOOD BYE, EXIT ON: " + Result.name);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="55" plug-in="Standard.EndSession.1"><?xtml-editor x=1635 y=453 ?><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intTerminationReason = 17;]]></script></scripts></action><action id="57" plug-in="Pactolus.Branch.1"><?xtml-editor x=435 y=1330 ?><!--SET MS VARS TO CONF--><results><result name="Default" link="95" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strMSMemberEndPoint = "";
Session.g_strMSCallId = "";
Session.g_strMSConnectionId = "";
Session.g_strMSSDP = "";
// Server.enableEvents(true);]]></script></scripts></action><action id="59" plug-in="Pactolus.MGCPDelete.1"><?xtml-editor x=1196 y=981 ?><dlcx connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" timeout="s_intTIMEOUT" returns="g_intReturnCode"><parameters><quarantine step="0" loop="0" process="0" discard="0"/><events><![CDATA[]]></events><signals><![CDATA[]]></signals><digit-map><![CDATA[]]></digit-map></parameters></dlcx><results><result name="Default" link="66" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS DELETE MS CONNECTION.");
	Session.g_boolConnectedToMS = false;
}
else
{
	Server.logError("ERROR: FAIL TO DELETE MS CONNECTION, EXIT ON: " + Result.name);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="60" plug-in="Standard.FunctionCall.1"><?xtml-editor x=2019 y=1592 ?><!--Send party join--><function name="&quot;PartyJoin&quot;" return=""/><results><result name="Default" link="61" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strTransactionID = Session.strTransactionId;]]></script></scripts></action><action id="61" plug-in="Standard.FunctionCall.1"><?xtml-editor x=2251 y=1591 ?><!--set DTMF detection ON--><function name="&quot;SetDTMFOn&quot;" return=""/><results><result name="Default" link="34" stubbed="0"/></results></action><action id="62" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=688 y=329 ?><!--dialing out to add a call party--><SOAP destination-ip="g_strConfControllerIP" transaction="strTransactionId" message-name="s_strCONF_ADD_RESPONSE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;resultCode&quot;" value="100"/><parameter tag="&quot;resultMessage&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="19" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strReturnMsg = "DIALING OUT TO PARTY";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND TRYING TO CONFERENCE CONTROLLER");
}
else
{
	Server.logError("ERROR: FAIL TO SEND TRYING TO CONFERENCE CONTROLLER.");
}]]></script></scripts></action><action id="63" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=1207 y=572 ?><!--No answer--><SOAP destination-ip="g_strConfControllerIP" transaction="strTransactionId" message-name="s_strCONF_ADD_RESPONSE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;resultCode&quot;" value="408"/><parameter tag="&quot;resultMessage&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="55" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strReturnMsg = "OUTDIAL: NO ANSWER";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND NO ANSWER TO CONFERENCE CONTROLLER");
}
else
{
	Server.logError("ERROR: FAIL TO SEND NO ANSWER TO CONFERENCE CONTROLLER, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="64" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=1177 y=384 ?><!--prompting party to join--><SOAP destination-ip="g_strConfControllerIP" transaction="strTransactionId" message-name="s_strCONF_ADD_RESPONSE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;resultCode&quot;" value="900"/><parameter tag="&quot;resultMessage&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="68" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strReturnMsg = "PROMPTING PARTY TO JOIN";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND PROMPTING TO CONFERENCE CONTROLLER");
}
else
{
	Server.logError("ERROR: FAIL SEND PROMPTING TO CONFERENCE CONTROLLER, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="65" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=906 y=710 ?><!--party declined--><SOAP destination-ip="g_strConfControllerIP" transaction="strTransactionId" message-name="s_strCONF_ADD_RESPONSE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;resultCode&quot;" value="902"/><parameter tag="&quot;resultMessage&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="42" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strReturnMsg = "OUTDIAL: PARTY DECLINED";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND PARTY DECLINED TO CONFERENCE CONTROLLER");
}
else
{
	Server.logError("ERROR: FAIL TO SEND PARTY DECLINED TO CONFERENCE CONTROLLER.");
}]]></script></scripts></action><action id="66" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=202 y=1330 ?><!--party accepted--><SOAP destination-ip="g_strConfControllerIP" transaction="strTransactionId" message-name="s_strCONF_ADD_RESPONSE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;resultCode&quot;" value="901"/><parameter tag="&quot;resultMessage&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="57" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strReturnMsg = "OUTDIAL: PARTY ACCEPTED";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND PARTY ACCEPTED TO CONFERENCE CONTROLLER");
}
else
{
	Server.logError("ERROR: FAIL TO SEND PARTY ACCEPTED TO CONFERENCE CONTROLLER.");
}]]></script></scripts></action><action id="68" plug-in="Pactolus.Sleep.1"><?xtml-editor x=195 y=527 ?><sleep duration="10"/><results><result name="Default" link="44" stubbed="0"/></results></action><action id="71" plug-in="Pactolus.Branch.1"><?xtml-editor x=1186 y=283 ?><!--log ERROR--><results><result name="Default" link="26" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: FAIL TO OUTDIAL PARTY");]]></script></scripts></action><action id="74" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=1408 y=870 ?><!--FAIL to add a call party--><SOAP destination-ip="g_strConfControllerIP" transaction="strTransactionId" message-name="s_strCONF_ADD_RESPONSE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;resultCode&quot;" value="-999"/><parameter tag="&quot;resultMessage&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="78" stubbed="0"/><result name="Success" link="77" stubbed="0"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strReturnMsg = " FAILURE TO ADD PARTY TO THE CONFERENECE";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND FAIL TO ADD PARTY TO CONFERENCE CONTROLLER");
}
else
{
	Server.logError("ERROR: FAIL TO SEND FAIL TO ADD PARTY TO CONFERENCE CONTROLLER.");
}]]></script></scripts></action><action id="76" plug-in="Standard.EndSession.1"><?xtml-editor x=2114 y=859 ?></action><action id="77" plug-in="Pactolus.MGCPDelete.1"><?xtml-editor x=1889 y=863 ?><dlcx connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" timeout="s_intTIMEOUT" returns="g_intReturnCode"><parameters><quarantine step="0" loop="0" process="0" discard="0"/><events><![CDATA[]]></events><signals><![CDATA[]]></signals><digit-map><![CDATA[]]></digit-map></parameters></dlcx><results><result name="Default" link="76" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS DELETE MS CONNECTION.");
	Session.g_boolConnectedToMS = false;
}
else
{
	Server.logError("ERROR: FAIL TO DELETE MS CONNECTION, EXIT ON: " + Result.name);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="78" plug-in="Pactolus.Branch.1"><?xtml-editor x=1649 y=863 ?><!--log ERROR--><results><result name="Default" link="77" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: FAIL TO SEND SOAP MESSAGE");]]></script></scripts></action><action id="79" plug-in="Pactolus.Branch.1"><?xtml-editor x=766 y=1925 ?><!--log ERROR--><results><result name="Default" link="79" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR:conference.OnAddPartyRequest.79: FAIL TO PLAY WELCOME URL PROMPT");]]></script></scripts></action><action id="80" plug-in="Pactolus.Branch.1"><?xtml-editor x=768 y=2106 ?><!--log ERROR--><results><result name="Default" link="80" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR:conference.OnAddPartyRequest.80: FAIL TO PLAY WELCOME INDEX PROMPT");]]></script></scripts></action><action id="85" plug-in="Standard.FunctionCall.1"><?xtml-editor x=909 y=876 ?><!--put caller on hold--><function name="&quot;PutCallerOnHold&quot;" return=""/><results><result name="Default" link="59" stubbed="0"/></results></action><action id="88" plug-in="Standard.FunctionCall.1"><?xtml-editor x=273 y=330 ?><!--PrependToOutdialDest--><function name="&quot;PrependToOutdialDest&quot;" return=""/><results><result name="Default" link="17" stubbed="0"/></results></action><action id="91" plug-in="Pactolus.Branch.1"><?xtml-editor x=907 y=1260 ?><!--conferenceResource == null?--><results><result name="Default" link="100" stubbed="0"/><result name="conferenceResource == null" link="92" stubbed="0">g_strConfResource match "null"</result></results></action><action id="92" plug-in="Pactolus.Branch.1"><?xtml-editor x=1148 y=1333 ?><results><result name="Default" link="99" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: NOT THE FIRST CALLER, BUT CONF RESOURCE IS : " + Session.g_strConfResource);]]></script></scripts></action><action id="95" plug-in="Pactolus.Branch.1"><?xtml-editor x=686 y=1328 ?><!--first caller?--><results><result name="Default" link="91" stubbed="0"/><result name="s_intFIRSTCALLER" link="98" stubbed="0">g_boolFirstCaller == true</result></results></action><action id="97" plug-in="Standard.FunctionCall.1"><?xtml-editor x=664 y=875 ?><!--play join prompt--><function name="&quot;PlayJoinPrompt&quot;" return="intReturnCode"/><results><result name="Default" link="85" stubbed="0"/></results></action><action id="98" plug-in="Standard.FunctionCall.1"><?xtml-editor x=921 y=1423 ?><!--create conference--><function name="&quot;CreateAConference&quot;" return="intReturnCode"/><results><result name="Default" link="101" stubbed="0"/></results></action><action id="99" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1796 y=1416 ?><!--Hang up caller--><function name="&quot;HangUpCaller&quot;" return=""/><results><result name="Default" link="105" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[// Server.enableEvents(true);
Session.g_intTerminationReason = 17;]]></script></scripts></action><action id="100" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1150 y=1239 ?><!--add to conference--><function name="&quot;AddToConference&quot;" return="intReturnCode"/><results><result name="Default" link="102" stubbed="0"/></results></action><action id="101" plug-in="Pactolus.Branch.1"><?xtml-editor x=1138 y=1420 ?><!--success?--><results><result name="Default" link="99" stubbed="0"/><result name="success" link="103" stubbed="0">intReturnCode == s_intSUCCESS</result></results></action><action id="102" plug-in="Pactolus.Branch.1"><?xtml-editor x=1363 y=1235 ?><!--success?--><results><result name="Default" link="99" stubbed="0"/><result name="success" link="108" stubbed="0">intReturnCode == s_intSUCCESS</result></results></action><action id="103" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1331 y=1508 ?><!--set conference resource--><function name="&quot;psAPISceSetConfResource&quot;" return="intReturnCode"/><results><result name="Default" link="104" stubbed="0"/></results></action><action id="104" plug-in="Pactolus.Branch.1"><?xtml-editor x=1553 y=1508 ?><!--success?--><results><result name="Default" link="99" stubbed="0"/><result name="success" link="108" stubbed="0">intReturnCode == s_intSUCCESS</result></results></action><action id="105" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=2016 y=1414 ?><!--FAIL to add a call party--><SOAP destination-ip="g_strConfControllerIP" transaction="strTransactionId" message-name="s_strCONF_ADD_RESPONSE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;resultCode&quot;" value="-999"/><parameter tag="&quot;resultMessage&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="106" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strReturnMsg = " FAILURE TO ADD PARTY TO THE CONFERENECE";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND FAIL TO ADD PARTY TO CONFERENCE CONTROLLER");
}
else
{
	Server.logError("ERROR: FAIL TO SEND FAIL TO ADD PARTY TO CONFERENCE CONTROLLER.");
}]]></script></scripts></action><action id="106" plug-in="Standard.FunctionCall.1"><?xtml-editor x=2238 y=1415 ?><!--End Call--><function name="&quot;EndCall&quot;" return=""/><results><result name="Default" link="107" stubbed="0"/></results></action><action id="107" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=2451 y=1414 ?><return value=""/></action><action id="108" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1786 y=1593 ?><!--play join tone prompt--><function name="&quot;PlayPromptToConference&quot;" return="g_intReturnCode"><parameter>s_intPROMPT_JOIN_TONE</parameter></function><results><result name="Default" link="60" stubbed="0"/></results></action></actions></function><function name="OnDTMF" start="23" returns="void"><parameters><parameter name="strEndpoint" type="string"/><parameter name="strDtmf" type="string"/></parameters><local-vars><var name="strRequestNotify" type="string"></var></local-vars><actions><action id="23" plug-in="Pactolus.Branch.1"><?xtml-editor x=89 y=33 ?><!--Main Menu?--><results><result name="Default" link="22" stubbed="0"/><result name="MainMenu" link="28" stubbed="0">strDtmf match "^\*\*$"</result><result name="Mute/UnMute">strDtmf match "^\*1$"</result></results></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1176 y=120 ?><return value=""/></action><action id="21" plug-in="Standard.FunctionCall.1"><?xtml-editor x=695 y=259 ?><!--Moderator Main Menu--><function name="&quot;ModMainMenu&quot;" return=""/><results><result name="Default" link="22" stubbed="0"/></results></action><action id="22" plug-in="Standard.FunctionCall.1"><?xtml-editor x=966 y=121 ?><!--set DTMF Detection ON--><function name="&quot;SetDTMFOn&quot;" return=""/><results><result name="Default" link="2" stubbed="0"/></results></action><action id="27" plug-in="Standard.FunctionCall.1"><?xtml-editor x=678 y=131 ?><!--NonModMainMenu--><function name="&quot;NonModMainMenu&quot;" return=""/><results><result name="Default" link="22" stubbed="0"/></results></action><action id="28" plug-in="Pactolus.Branch.1"><?xtml-editor x=435 y=177 ?><!--Moderator--><results><result name="Default" link="27" stubbed="0"/><result name="ModFlag==T" link="21" stubbed="0">g_strModeratorFlag match "T"</result></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_boolCurrentlyInMMenu = true;]]></script></scripts></action></actions></function><function name="OnMutePartyRequest" start="12" returns="void"><parameters><parameter name="strConfControllerIpAddress" type="string"/><parameter name="nConfControllerPort" type="i4"/><parameter name="strTransactionId" type="string"/><parameter name="strModeratorMute" type="string"/></parameters><actions><action id="12" plug-in="Pactolus.Branch.1"><?xtml-editor x=107 y=282 ?><!--currently in main menu?--><results><result name="Default" link="11" stubbed="0"/><result name="currentlyInMainMenu==true" link="2" stubbed="0">g_boolCurrentlyInMMenu == true</result></results><scripts><script language="javascript" timing="first"><![CDATA[if (Session.strModeratorMute == "T")
{
	Session.g_boolMutedByMod = true;
}
else
{
	Session.g_boolMutedByMod = false;
}]]></script></scripts></action><action id="1" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=908 y=278 ?><return value=""/></action><action id="2" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=599 y=298 ?><!--SUCCESS mute a party--><SOAP destination-ip="g_strConfControllerIP" transaction="strTransactionId" message-name="s_strCONF_MUTE_RESPONSE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;resultCode&quot;" value="s_intSUCCESS"/><parameter tag="&quot;resultMessage&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="1" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strReturnMsg = "SUCCESSFUL MUTE A PARTY";
Session.g_intPromptSelfMuteUnMute = 908;
Session.g_boolMutedState = true;]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: conference.OnMutePartyRequest.2: SUCCESS SEND MUTE PARTY TO CONFERENCE CONTROLLER");
}
else if (Result.id == 3)
{
	Server.logError("ERROR: conference.OnMutePartyRequest.2: ERROR BRANCH SEND MUTE PARTY TO CONFERENCE CONTROLLER.");
}
else if (Result.id == 1)
{
	Server.logError("ERROR: conference.OnMutePartyRequest.2: DEFAULT BRANCH SEND MUTE PARTY TO CONFERENCE CONTROLLER.");
}]]></script></scripts></action><action id="5" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=589 y=166 ?><!--FAILURE mute a party--><SOAP destination-ip="g_strConfControllerIP" transaction="strTransactionId" message-name="s_strCONF_MUTE_RESPONSE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;resultCode&quot;" value="s_intFAILURE"/><parameter tag="&quot;resultMessage&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="1" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strReturnMsg = "FAILURE MUTE A PARTY";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND MUTE PARTY FAIL TO CONFERENCE CONTROLLER");
}
else if (Result.id == 3)
{
	Server.logError("ERROR: FAIL TO SEND MUTE PARTY FAIL TO CONFERENCE CONTROLLER, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="11" plug-in="Pactolus.CNFModifyMember.1"><?xtml-editor x=353 y=207 ?><!--mute from conference--><modify-member ci="g_strConfResource" endpoint="g_strMSMemberEndPoint" connection-id="g_strMSConnectionId" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"><attributes mp="16" mt="3" ig="0" og="0" iat="-10" ias="-40" oat="-10" oas="-40" atn="3" att="2" ia="1" oa="1" te="0" le="1" tp="0" dc="1" tc="1" ate="0" se="0"/></modify-member><results><result name="Default" link="5" stubbed="0"/><result name="Success" link="2" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: RECEIVE MUTE PARTY REQUEST FROM CONF CONTROLLER.");
Server.logInfo("INFO: Moderator Mute Flag: " + Session.strModeratorMute);
Server.logInfo("INFO: Conf Controller Port: " + Session.nConfControllerPort);
Server.logInfo("INFO: Conf Controller IP: " + Session.strConfControllerIpAddress);
Server.logInfo("INFO: Transaction ID: " + Session.strTransactionId);]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS MODIFIED MEMBER SELF MUTE.");
	Server.logInfo("INFO: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logInfo("INFO: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logInfo("INFO: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);
}
else
{
	Server.logError("ERROR: FAIL TO MODIFIED MEMBER SELF MUTE, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logError("ERROR: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logError("ERROR: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);

}]]></script></scripts></action></actions><text-objects><text-object x-coord="86" y-coord="50" width="191" height="108" text="if currently in main menu,
already out of conference,
set mute flag, when return
to conference, check this flag
and set accordingly" font-name="Times New Roman" size="-16" red="0" green="0" blue="0" weight="0" underline="0" strikeout="0" point-size="12" italic="0"/></text-objects></function><function name="OnRemovePartyRequest" start="14" returns="void"><parameters><parameter name="strConfControllerIpAddress" type="string"/><parameter name="nConfControllerPort" type="i4"/><parameter name="strTransactionId" type="string"/><parameter name="intTerminationReason" type="i4"/></parameters><actions><action id="14" plug-in="Standard.FunctionCall.1"><?xtml-editor x=49 y=433 ?><!--hangup caller--><function name="&quot;HangUpCaller&quot;" return="g_intReturnCode"/><results><result name="Default" link="16" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intTerminationReason = Session.intTerminationReason;
Server.logInfo("INFO: RECEIVE REMOVE PARTY REQUEST FROM CONF CONTROLLER.");
Server.logInfo("INFO: Termination Reason: " + Session.intTerminationReason);
Server.logInfo("INFO: Conf Controller Port: " + Session.nConfControllerPort);
Server.logInfo("INFO: Conf Controller IP: " + Session.strConfControllerIpAddress);
Server.logInfo("INFO: Transaction ID: " + Session.strTransactionId);]]></script></scripts></action><action id="12" plug-in="Standard.FunctionCall.1"><?xtml-editor x=716 y=528 ?><!--Send party leave--><function name="&quot;PartyLeave&quot;" return=""/><results><result name="Default" link="20" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strTransactionID = Session.strTransactionId;]]></script></scripts></action><action id="16" plug-in="Pactolus.Branch.1"><?xtml-editor x=268 y=428 ?><!--success?--><results><result name="Default" link="19" stubbed="0"/><result name="g_intReturnCode=0" link="18" stubbed="0">g_intReturnCode == s_intSUCCESS</result></results></action><action id="18" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=490 y=530 ?><!--SUCCESS to remove a call party--><SOAP destination-ip="g_strConfControllerIP" transaction="strTransactionId" message-name="s_strCONF_REMOVE_RESPONSE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;resultCode&quot;" value="s_intSUCCESS"/><parameter tag="&quot;resultMessage&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="12" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strReturnMsg = "SUCCESSFUL REMOVE PARTY FROM CONFERENCE";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS RESPONSE ON REMOVE PARTY REQUEST");
}
else
{
	Server.logError("ERROR: FAIL TO RESPONSE ON REMOVE PARTY REQUEST, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="19" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=484 y=389 ?><!--FAILURE to remove a call party--><SOAP destination-ip="g_strConfControllerIP" transaction="strTransactionId" message-name="s_strCONF_REMOVE_RESPONSE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;resultCode&quot;" value="s_intFAILURE"/><parameter tag="&quot;resultMessage&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="21" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strReturnMsg = "FAILURE REMOVE PARTY FROM CONFERENCE";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS RESPONSE FAILURE ON REMOVE PARTY REQUEST");
}
else
{
	Server.logError("ERROR: FAIL TO RESPONSE FAILURE ON REMOVE PARTY REQUEST, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="20" plug-in="Standard.FunctionCall.1"><?xtml-editor x=937 y=524 ?><!--End the call--><function name="&quot;EndCall&quot;" return=""/><results><result name="Default" link="21" stubbed="0"/></results></action><action id="21" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1159 y=514 ?><return value=""/></action></actions></function><function name="OnUnmutePartyRequest" start="14" returns="void"><parameters><parameter name="strConfControllerIpAddress" type="string"/><parameter name="nConfControllerPort" type="i4"/><parameter name="strTransactionId" type="string"/><parameter name="strModeratorUnmute" type="string"/></parameters><actions><action id="14" plug-in="Pactolus.Branch.1"><?xtml-editor x=86 y=203 ?><!--mute by mod?--><results><result name="Default" link="6" stubbed="0"/><result name="Moderator == &quot;T&quot; or selfmute" link="16" stubbed="0">g_boolMutedByMod == false
OR strModeratorUnmute match "T"</result></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: RECEIVE UNMUTE PARTY REQUEST FROM CONF CONTROLLER.");
Server.logInfo("INFO: Moderator UnMute Flag: " + Session.strModeratorUnmute);
Server.logInfo("INFO: Conf Controller Port: " + Session.nConfControllerPort);
Server.logInfo("INFO: Conf Controller IP: " + Session.strConfControllerIpAddress);
Server.logInfo("INFO: Transaction ID: " + Session.strTransactionId);]]></script></scripts></action><action id="2" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=794 y=469 ?><!--SUCCESS unmute a party--><SOAP destination-ip="g_strConfControllerIP" transaction="strTransactionId" message-name="s_strCONF_UNMUTE_RESPONSE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;resultCode&quot;" value="s_intSUCCESS"/><parameter tag="&quot;resultMessage&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="3" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strReturnMsg = "SUCCESSFUL UNMUTE A PARTY";
Session.g_intPromptSelfMuteUnMute = 907;
Session.g_boolMutedState = false;]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND SUCCESS UNMUTE TO CONFERENCE CONTROLLER");
}
else
{
	Server.logError("ERROR: FAIL TO SEND SUCCESS UNMUTE TO CONFERENCE CONTROLLER, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="3" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1054 y=446 ?><return value=""/></action><action id="6" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=796 y=299 ?><!--FAILURE unmute a party--><SOAP destination-ip="g_strConfControllerIP" transaction="strTransactionId" message-name="s_strCONF_UNMUTE_RESPONSE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;resultCode&quot;" value="s_intFAILURE"/><parameter tag="&quot;resultMessage&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="3" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strReturnMsg = "FAIL TO UNMUTE A PARTY";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND FAILURE RESPONSE TO UNMUTE TO CONFERENCE CONTROLLER");
}
else
{
	Server.logError("ERROR: FAIL TO SEND FAILURE RESPONSE TO UNMUTE TO CONFERENCE CONTROLLER, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="15" plug-in="Pactolus.CNFModifyMember.1"><?xtml-editor x=560 y=347 ?><!--unmute from conference--><modify-member ci="g_strConfResource" endpoint="g_strMSMemberEndPoint" connection-id="g_strMSConnectionId" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"><attributes mp="16" mt="3" ig="0" og="0" iat="-10" ias="-40" oat="-10" oas="-40" atn="3" att="2" ia="1" oa="1" te="1" le="1" tp="0" dc="1" tc="1" ate="0" se="0"/></modify-member><results><result name="Default" link="6" stubbed="0"/><result name="Success" link="2" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS MODIFIED MEMBER UNMUTE.");
	Server.logInfo("INFO: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logInfo("INFO: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logInfo("INFO: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);
}
else
{
	Server.logError("ERROR: FAIL TO MODIFIED MEMBER UNMUTE, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logError("ERROR: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logError("ERROR: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);

}]]></script></scripts></action><action id="16" plug-in="Pactolus.Branch.1"><?xtml-editor x=338 y=432 ?><!--currently in main menu?--><results><result name="Default" link="15" stubbed="0"/><result name="currentlyInMainMenu==true" link="2" stubbed="0">g_boolCurrentlyInMMenu == true</result></results></action></actions><text-objects><text-object x-coord="93" y-coord="65" width="220" height="109" text="if currently in the main menu,
it is already out of the conf.
Just set the mute state flag to false,
when return to conference from 
main menu will check this flag" font-name="Times New Roman" size="-16" red="0" green="0" blue="0" weight="0" underline="0" strikeout="0" point-size="12" italic="0"/></text-objects></function><function name="OnTimer" start="9" returns="void"><parameters><parameter name="nTimerId" type="i4"/></parameters><actions><action id="9" plug-in="Pactolus.Branch.1"><?xtml-editor x=86 y=122 ?><!--timerID?--><results><result name="Default" link="14" stubbed="0"/><result name="WFM maxout" link="1" stubbed="0">nTimerId == g_longWFMTimerID</result><result name="Hold timer" link="10" stubbed="0">nTimerId == g_longHoldTimerID</result></results><scripts><script language="javascript" timing="first"><![CDATA[Server.enableEvents(false);]]></script></scripts></action><action id="1" plug-in="Standard.FunctionCall.1"><?xtml-editor x=320 y=181 ?><!--HangUp Caller--><function name="&quot;HangUpCaller&quot;" return="g_intReturnCode"/><results><result name="Default" link="17" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intTerminationReason = 22;]]></script></scripts></action><action id="5" plug-in="Standard.FunctionCall.1"><?xtml-editor x=986 y=179 ?><!--End Call--><function name="&quot;EndCall&quot;" return=""/><results><result name="Default" link="6" stubbed="0"/></results></action><action id="6" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1216 y=180 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Server.enableEvents(true);]]></script></scripts></action><action id="8" plug-in="Standard.FunctionCall.1"><?xtml-editor x=760 y=181 ?><!--party leave--><function name="&quot;PartyLeave&quot;" return=""/><results><result name="Default" link="5" stubbed="0"/></results></action><action id="10" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=327 y=317 ?><!--please hold--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="0" parse-on-ms="1" terminating-digit=""><audio type="index">904</audio></play><results><result name="Default" link="12" stubbed="0"/><result name="Success" link="11" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY PLEASE CONTINUE TO HOLD.");
	Session.g_boolConnectedToMS = false;
}
else
{
	Server.logError("ERROR: FAIL TO TO PLAY PLEASE CONTINUE TO HOLD, EXIT ON: " + Result.name);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="11" plug-in="Standard.Timer.1"><?xtml-editor x=576 y=408 ?><!--play please hold every 10 secs--><timer start="1" id="g_longHoldTimerID" duration="s_intSLEEPTIME"/><results><result name="Default" link="12" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_boolHoldTimerFlag = true;]]></script></scripts></action><action id="12" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=824 y=375 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Server.enableEvents(true);]]></script></scripts></action><action id="14" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=307 y=65 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: UNKNOWN TIMER ID: " + Session.nTimerId);
Server.enableEvents(true);]]></script></scripts></action><action id="17" plug-in="Standard.Timer.1"><?xtml-editor x=530 y=182 ?><!--stop Hold timer--><timer start="0" id="g_longHoldTimerID" duration=""/><results><result name="Default" link="8" stubbed="0"/></results></action></actions></function><function name="ErrorHandler" start="1" returns="void"><actions><action id="1" plug-in="Standard.FunctionCall.1"><?xtml-editor x=94 y=85 ?><!--HangUp Caller--><function name="&quot;HangUpCaller&quot;" return="g_intReturnCode"/><results><result name="Default" link="5" stubbed="0"/></results></action><action id="3" plug-in="Standard.FunctionCall.1"><?xtml-editor x=579 y=84 ?><!--End the call--><function name="&quot;EndCall&quot;" return=""/><results><result name="Default" link="4" stubbed="0"/></results></action><action id="4" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=853 y=86 ?><return value=""/></action><action id="5" plug-in="Standard.FunctionCall.1"><?xtml-editor x=335 y=83 ?><!--write CDR--><function name="&quot;psAPISceConfCallLegCompletion&quot;" return="g_intReturnCode"/><results><result name="Default" link="3" stubbed="0"/></results></action></actions></function><function name="psAPISceInitConfSession" start="3" returns="i4"><local-vars><var name="intReturnCode" type="i4">-50</var></local-vars><actions><action id="3" plug-in="Pactolus.JavaStaticMethod.1"><?xtml-editor x=202 y=211 ?><!--"initConfSession()"--><java class="&quot;com.pactolus.conferencing.psAPISceInitConfSession&quot;" method="&quot;initConfSession&quot;" timeout="s_intTIMEOUT" return="" method-return-var="intReturnCode" method-return-type="0"><parameter type="in">g_strSessionID</parameter><parameter type="in">g_strOrigNbr</parameter><parameter type="in">g_strAccessNumber</parameter><parameter type="in">g_strIntlPrependFlag</parameter><parameter type="inout">g_intAccessNumberId</parameter><parameter type="inout">g_longServiceProviderID</parameter><parameter type="inout">g_strLanguage</parameter><parameter type="inout">g_intNumbPasscodeTries</parameter><parameter type="inout">g_intDialPlanID</parameter><parameter type="inout">g_intOrigCountryID</parameter><parameter type="inout">g_strOrigCallingCode</parameter><parameter type="inout">g_strOrigAreaCode</parameter><parameter type="inout">g_strOrigDomIntlFlag</parameter><parameter type="inout">g_strDBNAME</parameter><parameter type="inout">g_strWelcomePromptType</parameter><parameter type="inout">g_strWelcomePromptUrl</parameter><parameter type="inout">g_intWelcomePromptIndex</parameter><parameter type="inout">g_strCustomerServicePhone</parameter><parameter type="inout">g_strSPTimeZone</parameter><parameter type="inout">g_intLocalGMTOffset</parameter><parameter type="inout">g_strStrippedOrigNbr</parameter></java><results><result name="Default" link="5" stubbed="0"/><result name="Success" link="2" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: *********JAVA CALLING INITIALIZE CONF *********");]]></script><script language="javascript" timing="last"><![CDATA[Server.logInfo("INFO: ********** iJavaReturnCode " + Session.intReturnCode);
if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS CALL INIT CONF SESSION");
}
else
{
	Server.logError("ERROR: FAIL TO CALL INIT CONF SESSION, EXIT ON: " + Result.name);
	Session.g_intTerminationReason = 6;
}]]></script></scripts></action><action id="1" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=900 y=218 ?><!--FAILURE--><return value="s_intFAILURE"/></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=447 y=352 ?><!--return code from java--><return value="intReturnCode"/></action><action id="4" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=647 y=225 ?><!--send ALARM--><SOAP destination-ip="" transaction="" message-name="s_strSEND_ALARM_REQUEST" destination-port="" destination-type="1" destination-session="" waiting-session-selected=""><parameter tag="&quot;calling_number&quot;" value="g_strAlarmType"/><parameter tag="&quot;called_number&quot;" value="g_strAlarmPriority"/></SOAP><results><result name="Default" link="1" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strAlarmType = "JAVA: initConfSession";
Session.g_strAlarmPriority = "MAJOR";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND ALERT");
}
else
{
	Server.logError("ERROR: FAIL TO SEND ALERT, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="5" plug-in="Pactolus.Branch.1"><?xtml-editor x=433 y=126 ?><!--s_strSendAlarmFlag==T--><results><result name="Default" link="1" stubbed="0"/><result name="s_strSendAlarmFlag==T" link="4" stubbed="0">s_strSendAlarmFlag match "T"</result></results></action></actions></function><function name="StripLeadingOne" start="1" returns="string"><parameters><parameter name="strPhoneNumber" type="string"/></parameters><actions><action id="1" plug-in="Pactolus.UserFunction.1"><?xtml-editor x=115 y=104 ?><!--strip the leading one--><user-function process="&quot;PACTOLUS_ps_c_adaptor&quot;" function="&quot;strip_leading_one&quot;" timeout="s_intTIMEOUT" return="g_intReturnCode" async="0"><parameter>strPhoneNumber</parameter><parameter>strPhoneNumber</parameter></user-function><results><result name="Default" link="3" stubbed="0"/><result name="Success" link="2" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("BEFORE strip leading one: <" + Session.strPhoneNumber + " >");]]></script><script language="javascript" timing="last"><![CDATA[Server.logInfo("AFTER strip leading one: <" + Session.strPhoneNumber + " >");]]></script></scripts></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=382 y=219 ?><return value="strPhoneNumber"/></action><action id="3" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=382 y=97 ?><return value="strPhoneNumber"/><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: FAIL TO STRIP THE LEADING ONE");]]></script></scripts></action></actions></function><function name="PartyJoin" start="2" returns="void"><actions><action id="2" plug-in="Pactolus.Branch.1"><?xtml-editor x=131 y=260 ?><!--CallPartyFlag==T?--><results><result name="Default" link="3" stubbed="0"/><result name="g_strPartyPasscodeFlag==T" link="1" stubbed="0">g_strPartyPasscodeFlag match "T"</result></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strTransactionID = Server.getUTCTime();
Server.logInfo("INFO: conference.PartyJoin.2: SEND PARTY JOIN ****");
Server.logInfo("INFO: conference.PartyJoin.2:  CONF CON IP = " + Session.g_strConfControllerIP);
Server.logInfo("INFO: conference.PartyJoin.2:  CONF CON PORT = " + Session.g_intConfControllerPort);
Server.logInfo("INFO: conference.PartyJoin.2:  CONF CON TRANS ID = " + Session.g_strTransactionID);
Server.logInfo("INFO: conference.PartyJoin.2:  CONF CON MSG NAME = " + Session.s_strCONF_JOIN);
Server.logInfo("INFO: conference.PartyJoin.2:  CONF EVENT ID =  " + Session.g_strConfEventId);
Server.logInfo("INFO: conference.PartyJoin.2:  CONF SCHED ID =  " + Session.g_strConfScheduleId);
Server.logInfo("INFO: conference.PartyJoin.2:  PASSCODE = " + Session.g_strPassCode);
Server.logInfo("INFO: conference.PartyJoin.2:  MODERATOR FLAG = " + Session.g_strModeratorFlag);
Server.logInfo("INFO: conference.PartyJoin.2:  CALLING NUMBER = " + Session.g_strOrigNbr);
Server.logInfo("INFO: conference.PartyJoin.2:  CALLER FIRST NAME = " + Session.g_strCallerFirstName);
Server.logInfo("INFO: conference.PartyJoin.2:  CALLER LAST NAME = " + Session.g_strCallerLastName);
Server.logInfo("INFO: conference.PartyJoin.2:  CALLER ORG = " + Session.g_strCallerOrg);
Server.logInfo("INFO: conference.PartyJoin.2:  SOAP PORT = " + Session.g_intSoapPort);]]></script></scripts></action><action id="1" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=414 y=465 ?><!--PARTY JOIN CONF--><SOAP destination-ip="g_strConfControllerIP" transaction="g_strTransactionID" message-name="s_strCONF_JOIN" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;conferenceID&quot;" value="g_strConfScheduleId"/><parameter tag="&quot;callerPassCode&quot;" value="g_strPassCode"/><parameter tag="&quot;moderatorFlag&quot;" value="g_strModeratorFlag"/><parameter tag="&quot;callingNumber&quot;" value="g_strOrigNbr"/><parameter tag="&quot;callerFirstName&quot;" value="g_strCallerFirstName"/><parameter tag="&quot;callerLastName&quot;" value="g_strCallerLastName"/><parameter tag="&quot;callerOrganization&quot;" value="g_strCallerOrg"/><parameter tag="&quot;soapPort&quot;" value="g_intSoapPort"/><parameter tag="&quot;muteFlag&quot;" value="g_strMuteFlag"/><parameter tag="&quot;mediaServerEndpoint&quot;" value="g_strConfResource"/><parameter tag="&quot;moderatorRequiredFlag&quot;" value="g_strModeratorRequiredFlag"/></SOAP><results><result name="Default" link="4" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND PARTY JOIN TO CONFERENCE CONTROLLER");
}
else
{
	Server.logError("ERROR: FAIL TO SEND PARTY JOIN CONFERENCE CONTROLLER, EXIT ON: " + Result.name);
}
]]></script></scripts></action><action id="3" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=396 y=129 ?><!--PARTY JOIN CONF--><SOAP destination-ip="g_strConfControllerIP" transaction="g_strTransactionID" message-name="s_strCONF_JOIN" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;conferenceID&quot;" value="g_strConfScheduleId"/><parameter tag="&quot;callerPassCode&quot;" value="s_strEMPTY_STRING"/><parameter tag="&quot;moderatorFlag&quot;" value="g_strModeratorFlag"/><parameter tag="&quot;callingNumber&quot;" value="g_strOrigNbr"/><parameter tag="&quot;callerFirstName&quot;" value="g_strCallerFirstName"/><parameter tag="&quot;callerLastName&quot;" value="g_strCallerLastName"/><parameter tag="&quot;callerOrganization&quot;" value="g_strCallerOrg"/><parameter tag="&quot;soapPort&quot;" value="g_intSoapPort"/><parameter tag="&quot;muteFlag&quot;" value="g_strMuteFlag"/><parameter tag="&quot;mediaServerEndpoint&quot;" value="g_strConfResource"/><parameter tag="&quot;moderatorRequiredFlag&quot;" value="g_strModeratorRequiredFlag"/></SOAP><results><result name="Default" link="4" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND PARTY JOIN TO CONF CONTROLLER");
}
else
{
	Server.logError("ERROR: FAIL TO SEND PARTY JOIN TO CONF CONTROLLER, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="4" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=693 y=330 ?><return value=""/></action></actions></function><function name="SetDTMFOn" start="2" returns="void"><local-vars><var name="strRequestNotify" type="string"></var></local-vars><actions><action id="2" plug-in="Pactolus.MGCPNotifyRequest.1"><?xtml-editor x=393 y=253 ?><rqnt connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" timeout="s_intTIMEOUT" returns="g_intReturnCode"><parameters><quarantine step="1" loop="0" process="0" discard="1"/><events><![CDATA[strRequestNotify]]></events><signals><![CDATA[]]></signals><digit-map><![CDATA["(**)"]]></digit-map></parameters></rqnt><results><result name="Default" link="3" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: RQNT MS call id = " + Session.g_strMSCallId);
Server.logInfo("INFO: RQNT MS connection id = " + Session.g_strMSConnectionId);
Server.logInfo("INFO: RQNT MS end point = " + Session.g_strMSMemberEndPoint);
// Session.strRequestNotify = "D/[0-9#*T]@" + Session.g_strMSConnectionId + "(D)";
Session.strRequestNotify = "D/[1*T]@" + Session.g_strMSConnectionId + "(D)";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND RQNT TO SET DTMF.");
}
else
{
	Server.logError("ERROR: FAIL TO SEND RQNT TO SET DTMF, EXIT ON: " + Result.name);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="1" plug-in="Pactolus.Branch.1"><?xtml-editor x=170 y=142 ?><!--is this the moderator--><results><result name="Default" link="3" stubbed="0"/><result name="g_strModeratorFlag==T" link="2" stubbed="0">g_strModeratorFlag match "T"</result></results></action><action id="3" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=631 y=207 ?><return value=""/></action></actions></function><function name="PartyLeave" start="7" returns="void"><local-vars><var name="strSignal" type="string"></var></local-vars><actions><action id="7" plug-in="Pactolus.Branch.1"><?xtml-editor x=51 y=75 ?><!--in the conference?--><results><result name="Default" link="10" stubbed="0"/><result name="g_boolInConference == true" link="12" stubbed="0">g_boolInConference == true</result><result name="g_boolWaitForMod == true" link="1" stubbed="0">g_boolWaitForModerator == true</result></results></action><action id="1" plug-in="Pactolus.Branch.1"><?xtml-editor x=1148 y=199 ?><!--CallPartyFlag==T?--><results><result name="Default" link="3" stubbed="0"/><result name="g_strPartyPasscodeFlag==T" link="2" stubbed="0">g_strPartyPasscodeFlag match "T"</result></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strTransactionID = Server.getUTCTime();
Server.logInfo("INFO: **** SEND PARTY LEAVE ****");
Server.logInfo("INFO: CONF CON IP = " + Session.g_strConfControllerIP);
Server.logInfo("INFO: CONF CON PORT = " + Session.g_intConfControllerPort);
Server.logInfo("INFO: CONF CON TRANS ID = " + Session.g_strTransactionID);
Server.logInfo("INFO: CONF CON MSG NAME = " + Session.s_strCONF_LEAVE);
Server.logInfo("INFO: CONF EVENT ID =  " + Session.g_strConfEventId);
Server.logInfo("INFO: CONF SCHED ID =  " + Session.g_strConfScheduleId);
Server.logInfo("INFO: PASSCODE = " + Session.g_strPassCode);]]></script></scripts></action><action id="2" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=1407 y=318 ?><!--PARTY LEAVE CONF--><SOAP destination-ip="g_strConfControllerIP" transaction="g_strTransactionID" message-name="s_strCONF_LEAVE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;conferenceID&quot;" value="g_strConfScheduleId"/><parameter tag="&quot;callerPassCode&quot;" value="g_strPassCode"/></SOAP><results><result name="Default" link="4" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND PARTY LEAVE TO CONFERENCE CONTROLLER");
}
else
{
	Server.logError("ERROR: FAIL TO SEND PARTY LEAVE TO CONFERENCE CONTROLLER, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="3" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=1391 y=154 ?><!--PARTY LEAVE CONF--><SOAP destination-ip="g_strConfControllerIP" transaction="g_strTransactionID" message-name="s_strCONF_LEAVE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;conferenceID&quot;" value="g_strConfScheduleId"/><parameter tag="&quot;callerPassCode&quot;" value="s_strEMPTY_STRING"/></SOAP><results><result name="Default" link="4" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND PARTY LEAVE TO CONFERENCE CONTROLLER");
}
else
{
	Server.logError("ERROR: FAIL TO SEND FAILURE TO SEND PARTY LEAVE TO CONFERENCE CONTROLLER, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="4" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1641 y=269 ?><return value=""/></action><action id="9" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=851 y=246 ?><!--play depart tone--><play connection-id="" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="5" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">s_intPROMPT_DEPART_TONE</audio></play><results><result name="Default" link="1" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: PLAY DEPART TONE.");
Server.logInfo("INFO: MS CALL ID: " + Session.g_strMSCallId);]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY DEPART TONE.");
}
else if (Result.id == 3 && Session.g_intReturnCode == 800527)
{
	Server.logInfo("INFO: GOT 527 RETURN CODE.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY DEPART TONE, EXIT ON: " + Result.name);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: ConnectionID: * ");
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
	Server.logError("ERROR: g_intReturnCode = " + Session.g_intReturnCode);
}]]></script></scripts></action><action id="10" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=476 y=72 ?><return value=""/></action><action id="11" plug-in="Pactolus.MGCPNotifyRequest.1"><?xtml-editor x=38 y=317 ?><!--issue A/null@connectionID--><rqnt connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" timeout="s_intTIMEOUT" returns="g_intReturnCode"><parameters><quarantine step="0" loop="0" process="0" discard="0"/><events><![CDATA[]]></events><signals><![CDATA[strSignal]]></signals><digit-map><![CDATA[]]></digit-map></parameters></rqnt><results><result name="Default"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.strSignal = "A/null@" + Session.g_strMSConnectionId;]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND A NULL RQNT.");
}
else
{
	Server.logError("ERROR: FAIL TO SEND A NULL RQNT, EXIT ON: " + Result.name);
	Server.logError("ERROR: g_strMSCallId = " + Session.g_strMSCallId);
	Server.logError("ERROR: g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: g_strMSEndPoint = " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="12" plug-in="Pactolus.Branch.1"><?xtml-editor x=318 y=202 ?><!--mute or hold?--><results><result name="Default" link="9" stubbed="0"/><result name="mute or hold?" link="13" stubbed="0">g_boolMutedState == true
OR g_boolHoldState == true</result></results></action><action id="13" plug-in="Pactolus.CNFModifyMember.1"><?xtml-editor x=572 y=297 ?><!--unmute from conference--><modify-member ci="g_strConfResource" endpoint="g_strMSMemberEndPoint" connection-id="g_strMSConnectionId" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"><attributes mp="16" mt="3" ig="0" og="0" iat="-10" ias="-40" oat="-10" oas="-40" atn="3" att="2" ia="1" oa="1" te="1" le="1" tp="0" dc="1" tc="1" ate="0" se="0"/></modify-member><results><result name="Default" link="9" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS MODIFIED MEMBER TO PLAY DEPART TONE.");
}
else
{
	Server.logError("ERROR: FAIL TO MODIFIED MEMBER TO PLAY DEPART TONE, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logError("ERROR: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logError("ERROR: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);

}]]></script></scripts></action></actions></function><function name="IVRConfAddParty" start="3" returns="void"><local-vars><var name="strDestNumber" type="string"></var><var name="strTransactionID" type="string"></var><var name="strNullString" type="string"></var><var name="strCalledSessionID" type="string"></var><var name="strDTMF" type="string"></var><var name="strRequestNotify" type="string"></var><var name="intReturnCode" type="i4">-1</var><var name="intCurrentState" type="i4">1</var><var name="strReturnMsg" type="string"></var><var name="strStatus" type="string"></var><var name="intStatus" type="i4">0</var><var name="strAddPartyConfResource" type="string"></var></local-vars><actions><action id="3" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=60 y=326 ?><!--Collect destination--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="70" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="&quot;(1xxxxxxxxxx|[2-9]xxxxxxxxx|011x.T|011x.#|3)&quot;" language="g_strLanguage" digits="strDestNumber" retry-count="3" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit="g_strTerminationDigit"><audio type="index">882</audio><audio type="index">909</audio><audio type="index">311</audio><audio type="index">910</audio><audio type="index">312</audio><audio type="index">911</audio><audio type="index">320</audio><audio type="index">884</audio><timeout-prompt type="index">s_intPROMPT_NO_RESPONSE</timeout-prompt></play><results><result name="Default" link="123" stubbed="1"/><result name="Success" link="54" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.intCurrentState = 1;]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY COLLECT PARTICIPANT PHONE NUMBER.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY COLLECT PARTICIPANT PHONE NUMBER, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="6" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=1080 y=423 ?><!--send IVRConfAddParty--><SOAP destination-ip="" transaction="" message-name="s_strIVR_CONF_ADD_PARTY" destination-port="" destination-type="1" destination-session="" waiting-session-selected="strCalledSessionID"><parameter tag="&quot;calling_number&quot;" value="g_strOrigNbr"/><parameter tag="&quot;called_number&quot;" value="strDestNumber"/><parameter tag="&quot;ms_endpoint&quot;" value="g_strNewConfResource"/><parameter tag="&quot;session_id&quot;" value="g_strSessionID"/><parameter tag="&quot;service_provider_id&quot;" value="g_longServiceProviderID"/><parameter tag="&quot;conf_pass_code&quot;" value="g_strConfPassCode"/><parameter tag="&quot;dialing_plan_id&quot;" value="g_intDialPlanID"/></SOAP><results><result name="Default" link="57" stubbed="0"/><result name="Success" link="31" stubbed="0"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: SEND calling number is: " + Session.g_strOrigNbr);
Server.logInfo("INFO: SEND called number is: " + Session.strDestNumber);
Server.logInfo("INFO: SEND MS end point is: " + Session.g_strNewConfResource);
Server.logInfo("INFO: SEND FROM session ID is: " + Session.g_strSessionID);
Server.logInfo("INFO: SEND service provider ID is: " + Session.g_longServiceProviderID);
Server.logInfo("INFO: SEND conference passcode is: " + Session.g_strConfPassCode);]]></script><script language="javascript" timing="last"><![CDATA[Server.logInfo("INFO: SENT IVRCONFADDPARTY TO session ID is: " + Session.strCalledSessionID);]]></script></scripts></action><action id="8" plug-in="Pactolus.MGCPNotifyRequest.1"><?xtml-editor x=75 y=849 ?><!--set DTMF--><rqnt connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" timeout="s_intTIMEOUT" returns="g_intReturnCode"><parameters><quarantine step="1" loop="0" process="0" discard="1"/><events><![CDATA[strRequestNotify]]></events><signals><![CDATA[]]></signals><digit-map><![CDATA["(1|2)"]]></digit-map></parameters></rqnt><results><result name="Default" link="60" stubbed="0"/><result name="Success" link="9" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("RQNT MS call id = " + Session.g_strMSCallId);
Server.logInfo("RQNT MS connection id = " + Session.g_strMSConnectionId);
Server.logInfo("RQNT MS end point = " + Session.g_strMSMemberEndPoint);
Server.logInfo("**** MODERATOR, TURN ON DTMF DETECTION ****");
Session.strRequestNotify = "D/[0-9#*T]@" + Session.g_strMSConnectionId + "(D)";]]></script></scripts></action><action id="9" plug-in="Standard.WaitEvent.1"><?xtml-editor x=327 y=954 ?><!--wait for DTMF--><wait timeout="60" recv-name="g_strEventReceived"><msg name="Pactolus.MGCPDtmf.1"><parameter>g_strMSMemberEndPoint</parameter><parameter>strDTMF</parameter></msg><msg name="IVRConfPartyDecline"/></wait><results><result name="Default" link="60" stubbed="0"/><result name="Success" link="99" stubbed="0"/><result name="Error"/><result name="Timeout" link="34" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.strDTMF = "";]]></script></scripts></action><action id="31" plug-in="Standard.WaitEvent.1"><?xtml-editor x=1330 y=501 ?><!--wait for response--><wait timeout="s_intTIMEOUT" recv-name="g_strEventReceived"><msg name="IVRConfAddPartyResponse"><parameter>intReturnCode</parameter><parameter>strReturnMsg</parameter></msg></wait><results><result name="Default" link="32" stubbed="0"/><result name="Success" link="33" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS WAIT FOR RESPONSE.");
}
else
{
	Server.logError("ERROR: FAIL TO WAIT FOR RESPONSE, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="32" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1779 y=545 ?><!--sorry not able to reach party--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">561</audio></play><results><result name="Default" link="123" stubbed="1"/><result name="Success" link="3" stubbed="1"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY UNABLE TO REACH THE PARTY.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY UNABLE TO REACH THE PARTY, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="33" plug-in="Pactolus.Branch.1"><?xtml-editor x=1550 y=619 ?><!--add success?--><results><result name="Default" link="32" stubbed="0"/><result name="success" link="8" stubbed="0">intReturnCode == 0</result></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: GOT RESPONSE WITH RETURN CODE: ") + Session.intReturnCode;
Server.logInfo("INFO: GOT RESPONSE WITH RETURN MSG: ") + Session.strReturnMsg;]]></script></scripts></action><action id="34" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1193 y=1026 ?><!--add or drop?--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="&quot;(x)&quot;" language="g_strLanguage" digits="strDTMF" retry-count="3" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">311</audio><audio type="index">910</audio><audio type="index">312</audio><audio type="index">911</audio><timeout-prompt type="index">s_intPROMPT_NO_RESPONSE</timeout-prompt></play><results><result name="Default" link="61" stubbed="1"/><result name="Success" link="35" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY COLLECT USER CHOICE.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY COLLECT USER CHOICE, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="35" plug-in="Pactolus.Branch.1"><?xtml-editor x=1421 y=1029 ?><!--add or drop?--><results><result name="Default" link="34" stubbed="0"/><result name="1 bridge conf" link="37" stubbed="0">strDTMF match "1"
AND intCurrentState == 1</result><result name="2 disconnect party" link="48" stubbed="0">strDTMF match "2"
AND intCurrentState == 1</result></results></action><action id="36" plug-in="Pactolus.Branch.1"><?xtml-editor x=859 y=918 ?><!--add or drop?--><results><result name="Default" link="34" stubbed="0"/><result name="1 bridge conf" link="37" stubbed="0">strDTMF match "1"
AND intCurrentState == 1</result><result name="2 disconnect party" link="48" stubbed="0">strDTMF match "2"
AND intCurrentState == 1</result></results></action><action id="37" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=1694 y=1088 ?><!--send IVRConfBridgeAddParty--><SOAP destination-ip="" transaction="" message-name="s_strIVR_CONF_BRIDGE_PARTY" destination-port="" destination-type="3" destination-session="strCalledSessionID" waiting-session-selected=""><parameter tag="&quot;ms_endpoint&quot;" value="g_strConfResource"/></SOAP><results><result name="Default" link="98" stubbed="0"/><result name="Success" link="97" stubbed="0"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("SEND MS end point is: " + Session.g_strConfResource);]]></script><script language="javascript" timing="last"><![CDATA[Server.logInfo("SEND TO session ID is: " + Session.strCalledSessionID);
Session.intCurrentState = 2;]]></script></scripts></action><action id="45" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=137 y=1381 ?><!--add new or return--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="&quot;(x)&quot;" language="g_strLanguage" digits="strDTMF" retry-count="3" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">311</audio><audio type="index">886</audio><audio type="index">320</audio><audio type="index">884</audio><timeout-prompt type="index">s_intPROMPT_NO_RESPONSE</timeout-prompt></play><results><result name="Default" link="123" stubbed="0"/><result name="Success" link="47" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY COLLECT USER CHOICE.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY COLLECT USER CHOICE, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="47" plug-in="Pactolus.Branch.1"><?xtml-editor x=365 y=1517 ?><!--add new or return?--><results><result name="Default" link="45" stubbed="0"/><result name="* return to conf" link="123" stubbed="0">intCurrentState != 1
AND strDTMF match "\*"</result><result name="1 add another party" link="3" stubbed="1">intCurrentState != 1
AND strDTMF match "1"</result></results></action><action id="48" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=1191 y=1173 ?><!--send IVRConfRemoveAddParty--><SOAP destination-ip="" transaction="" message-name="s_strIVR_CONF_REMOVE_PARTY" destination-port="" destination-type="3" destination-session="strCalledSessionID" waiting-session-selected=""/><results><result name="Default" link="86" stubbed="0"/><result name="Success" link="45" stubbed="0"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("SEND TO session ID is: " + Session.strCalledSessionID);
Session.intCurrentState = 3;]]></script></scripts></action><action id="54" plug-in="Pactolus.Branch.1"><?xtml-editor x=298 y=326 ?><!--return to conf--><results><result name="Default" link="82" stubbed="0"/><result name="*-return to conf" link="123" stubbed="1">g_boolReturnToConf == true
AND strDestNumber match "\*"</result></results><scripts><script language="javascript" timing="first"><![CDATA[if (Session.strDestNumber.length == 1)
{
	Session.g_boolReturnToConf = true;
}
else
{
	Session.g_boolReturnToConf = false;
}]]></script><script language="javascript" timing="last"><![CDATA[Session.g_strTerminationDigit = "";]]></script></scripts></action><action id="57" plug-in="Pactolus.Branch.1"><?xtml-editor x=1330 y=410 ?><!--fail to reach party--><results><result name="Default" link="32" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: FAIL TO SEND SOAP MESSAGE TO ADD PARTY.");]]></script></scripts></action><action id="60" plug-in="Pactolus.Branch.1"><?xtml-editor x=549 y=770 ?><!--put back in conference--><results><result name="Default" link="61" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: FAIL TO WAIT FOR DTMF.");]]></script></scripts></action><action id="61" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=785 y=768 ?><!--send IVRConfRemoveAddParty--><SOAP destination-ip="" transaction="" message-name="s_strIVR_CONF_REMOVE_PARTY" destination-port="" destination-type="3" destination-session="strCalledSessionID" waiting-session-selected=""/><results><result name="Default" link="123" stubbed="1"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("SEND TO session ID is: " + Session.strCalledSessionID);]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND IVRCONFREMOVEPARTY.");
}
else
{
	Server.logError("ERROR: FAIL TO SEND IVRCONFREMOVEPARTY, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="82" plug-in="Standard.FunctionCall.1"><?xtml-editor x=555 y=250 ?><!--psAPISceConfAuthDest--><function name="&quot;psAPISceConfAuthDest&quot;" return="intReturnCode"/><results><result name="Default" link="83" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strDestNbr = Session.strDestNumber;]]></script></scripts></action><action id="83" plug-in="Pactolus.Branch.1"><?xtml-editor x=760 y=248 ?><!--check reply code--><results><result name="Default" link="84" stubbed="0"/><result name="-99 DB ERROR" link="84" stubbed="0">intReturnCode == -99</result><result name="-3 MAX ATTENDEES" link="84" stubbed="0">intReturnCode == -3</result><result name="-2 INSUFFICIENT DIGITS" link="96" stubbed="0">intReturnCode == -2</result><result name="-1 RESTRICTED DEST" link="94" stubbed="0">intReturnCode == -1</result><result name="0 SUCCESS" link="6" stubbed="0">intReturnCode == 0</result></results></action><action id="84" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=997 y=87 ?><!--sorry not able to complete transaction--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">363</audio></play><results><result name="Default" link="123" stubbed="1"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY TRANSCATION COULD NOT BE COMPLETED.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY TRANSCATION COULD NOT BE COMPLETED, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="86" plug-in="Pactolus.Branch.1"><?xtml-editor x=1395 y=1172 ?><!--put back in conference--><results><result name="Default" link="123" stubbed="1"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: conference.IVRConfAddParty.86: FAIL TO CONF REMOVE PARTY.");]]></script></scripts></action><action id="87" plug-in="Pactolus.Branch.1"><?xtml-editor x=2178 y=1066 ?><!--put back in conference--><results><result name="Default" link="123" stubbed="1"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: conference.IVRConfAddParty.87: FAIL TO SEND CONF BRIDGE PARTY");]]></script></scripts></action><action id="94" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1331 y=259 ?><!--sorry restricted dest.--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">301</audio><audio type="index">513</audio></play><results><result name="Default" link="123" stubbed="1"/><result name="Success" link="3" stubbed="1"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY RESTRICTED DESTINATION.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY RESTRICTED DESTINATION, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="96" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1275 y=97 ?><!--sorry invalid dest.--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">301</audio><audio type="index">514</audio></play><results><result name="Default" link="123" stubbed="1"/><result name="Success" link="3" stubbed="1"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY INVALID DESTINATION.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY INVALID DESTINATION, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);}]]></script></scripts></action><action id="97" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1931 y=1212 ?><!--added participant--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">912</audio></play><results><result name="Default" link="45" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY ADDED PARTICIPANT.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY ADDED PARTICIPANT, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="98" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1926 y=1060 ?><!--could not added participant--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">913</audio></play><results><result name="Default" link="87" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY COULD NOT ADD PARTICIPANT.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY COULD NOT ADD PARTICIPANT, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="99" plug-in="Pactolus.Branch.1"><?xtml-editor x=602 y=929 ?><!--DTMF--><results><result name="Default" link="45" stubbed="1"/><result name="DTMF" link="36" stubbed="0">g_strEventReceived match "Dtmf"</result></results></action><action id="100" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1485 y=1511 ?><!--End Call--><function name="&quot;EndCall&quot;" return=""/><results><result name="Default" link="102" stubbed="0"/></results></action><action id="101" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1266 y=1514 ?><!--party leave--><function name="&quot;PartyLeave&quot;" return=""/><results><result name="Default" link="100" stubbed="0"/></results></action><action id="102" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1698 y=1510 ?><return value=""/></action><action id="103" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1037 y=1517 ?><!--HangUp Caller--><function name="&quot;HangUpCaller&quot;" return="g_intReturnCode"/><results><result name="Default" link="101" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intTerminationReason = 17;]]></script></scripts></action><action id="123" plug-in="Standard.FunctionCall.1"><?xtml-editor x=592 y=1522 ?><!--put back to old conf--><function name="&quot;PutBackToOldConf&quot;" return="intReturnCode"/><results><result name="Default" link="124" stubbed="0"/></results></action><action id="124" plug-in="Pactolus.Branch.1"><?xtml-editor x=815 y=1521 ?><!--success?--><results><result name="Default" link="103" stubbed="0"/><result name="success?" link="125" stubbed="0">intReturnCode == s_intSUCCESS</result></results></action><action id="125" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1053 y=1645 ?><return value=""/></action></actions><text-objects><text-object x-coord="38" y-coord="21" width="148" height="84" text="enter the phone number
press 1 to add
press 2 to hang up
press * to return to conf" font-name="Times New Roman" size="-16" red="0" green="0" blue="0" weight="0" underline="0" strikeout="0" point-size="12" italic="0"/><text-object x-coord="327" y-coord="27" width="173" height="150" text="intCurrentState
1	collect and outdial party
2	bridge party to conference
3	drop the outdial party
4	return to the conference
at 1 can go to 2 or 3

at 2 can go to 1 or 4
at 3 can go to 1 or 4
at 4 finish

Press 1
" font-name="Times New Roman" size="14" red="0" green="0" blue="0" weight="0" underline="0" strikeout="0" point-size="10" italic="0"/></text-objects></function><function name="OnIVRConfAddParty" start="20" returns="void"><parameters><parameter name="strCallingNumber" type="string"/><parameter name="strCalledNumber" type="string"/><parameter name="strEndPoint" type="string"/><parameter name="strSessionID" type="string"/><parameter name="longServiceProviderID" type="i8"/><parameter name="strConfPassCode" type="string"/><parameter name="intDialPlanID" type="i4"/></parameters><local-vars><var name="strCallid" type="string"></var><var name="strRequestURI" type="string"></var><var name="strCSeq" type="string"></var><var name="strTo" type="string"></var><var name="strFrom" type="string"></var><var name="intReturnCode" type="i4">0</var></local-vars><actions><action id="20" plug-in="Standard.FunctionCall.1"><?xtml-editor x=67 y=44 ?><!--Initialize Conference Outdial--><function name="&quot;psAPISceInitConfOutdialSession&quot;" return="intReturnCode"/><results><result name="Default" link="21" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_longStartTime = Server.getUTCTime();
Session.g_strSessionID = Session._sessionId;
Session.g_strAppServerAddress = Server.ipAddress;
Session.g_intSipPort = parseInt(Server.sipPort);
Session.g_strSoapAddress = Server.soapAddress;
Session.g_intSoapPort = parseInt(Server.soapPort);
Session.g_strPassCode = Session.strConfPassCode;
Session.g_strOrigNbr = Session.strCallingNumber;
Session.g_strDestNbr = Session.strCalledNumber;
Session.g_longServiceProviderID = Session.longServiceProviderID;
Session.g_strOutdialFlag = "T";
Session.g_boolIVRDialOut = true;
Session.g_strIVRAddPartySessionID = Session.strSessionID;
Session.g_intDialPlanID = Session.intDialPlanID;
Server.logInfo("INFO: RECEIVE IVR CONF ADD PARTY FROM SOAP AGENT.");
Server.logInfo("INFO: Calling Number is: " + Session.strCallingNumber);
Server.logInfo("INFO: Called Number is: " + Session.strCalledNumber);
Server.logInfo("INFO: The End Point is: " + Session.strEndPoint);
Server.logInfo("INFO: The Session ID is: " + Session.strSessionID);
Server.logInfo("INFO: The Service provider ID is: " + Session.longServiceProviderID);
Server.logInfo("INFO: The Conference Passcode is: " + Session.strConfPassCode);]]></script></scripts></action><action id="4" plug-in="Pactolus.Branch.1"><?xtml-editor x=334 y=329 ?><!--setup for conf party--><results><result name="Default" link="32" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strConfResource = Session.strEndPoint;
Session.g_strContact = "sip:" + Server.ipAddress;
if( Server.sipPort != 5060 )
{
  Session.g_strContact += ":" + Server.sipPort;
}
Session.g_strCallId = Server.getUTCTime() + Session._sessionId;
Session.g_strRequestURI = "sip:4444@10.10.221.19:5062 SIP/2.0";
// Session.g_strRequestURI = "sip:1851@10.10.250.185 SIP/2.0";
// Session.g_strRequestURI = "sip:" + Session.strCalledNumber + "@cisco1 SIP/2.0";
Session.g_strCSeq = "1001 INVITE";
Session.g_strTo = "sip:" + Session.g_strDestNbr + "@" + Session.s_strPrimaryPSX;
Session.g_strFrom = "sip:" + Session.strCallingNumber + "@" + Server.ipAddress + ":" + Server.sipPort;
//Session.g_strRequestURI = "sip:" + Session.g_strDestNbr + "@" + Session.s_strPrimaryPSX;]]></script></scripts></action><action id="14" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1009 y=501 ?><return value=""/></action><action id="15" plug-in="Standard.FunctionCall.1"><?xtml-editor x=542 y=169 ?><!--validate the passcode--><function name="&quot;psAPISceAuthConfPassCode&quot;" return="intReturnCode"/><results><result name="Default" link="16" stubbed="0"/></results></action><action id="16" plug-in="Pactolus.Branch.1"><?xtml-editor x=762 y=163 ?><!--return code == ?--><results><result name="Default" link="22" stubbed="0"/><result name="return code == 0" link="31" stubbed="0">intReturnCode == 0</result><result name="return code == 1" link="31" stubbed="0">intReturnCode == 1</result></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intReturnCode = Session.intReturnCode;]]></script></scripts></action><action id="19" plug-in="Standard.EndSession.1"><?xtml-editor x=1217 y=299 ?><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intTerminationReason = 17;]]></script></scripts></action><action id="21" plug-in="Pactolus.Branch.1"><?xtml-editor x=295 y=39 ?><!--check return code--><results><result name="Default" link="22" stubbed="0"/><result name="intReturnCode==0" link="15" stubbed="0">intReturnCode == 0</result></results></action><action id="22" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=997 y=126 ?><!--RESPONSE FAILURE--><SOAP destination-ip="" transaction="" message-name="s_strIVR_CONF_ADD_RESPONSE" destination-port="" destination-type="3" destination-session="strSessionID" waiting-session-selected=""><parameter tag="&quot;returnCode&quot;" value="s_intFAILURE"/><parameter tag="&quot;returnMsg&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="19" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND FAILURE RESPONSE TO CONFERENCE CONTROLLER");
	Server.logInfo("INFO: SEND FAILURE RESPONSE TO session ID is: " + Session.strSessionID);
}
else
{
	Server.logError("ERROR: FAIL TO SEND FAILURE RESPONSE TO CONFERENCE CONTROLLER, EXIT ON: " + Result.name);
	Server.logError("ERROR: SEND FAILURE RESPONSE TO session ID is: " + Session.strSessionID);
}]]></script></scripts></action><action id="24" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=782 y=409 ?><!--RESPONSE SUCCESS--><SOAP destination-ip="" transaction="" message-name="s_strIVR_CONF_ADD_RESPONSE" destination-port="" destination-type="3" destination-session="strSessionID" waiting-session-selected=""><parameter tag="&quot;returnCode&quot;" value="s_intSUCCESS"/><parameter tag="&quot;returnMsg&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="30" stubbed="0"/><result name="Success" link="14" stubbed="0"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_longMSConnectTime = Server.getUTCTime();]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND SUCCESS RESPONSE TO CONFERENCE CONTROLLER");
	Server.logInfo("INFO: SEND SUCCESS RESPONSE TO session ID is: " + Session.strSessionID);
}
else
{
	Server.logError("ERROR: FAIL TO SEND SUCCESS RESPONSE TO CONFERENCE CONTROLLER, EXIT ON: " + Result.name);
	Server.logError("ERROR: SEND SUCCESS RESPONSE TO session ID is: " + Session.strSessionID);
}]]></script></scripts></action><action id="30" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1005 y=408 ?><!--HangUp Caller--><function name="&quot;HangUpCaller&quot;" return=""/><results><result name="Default" link="19" stubbed="0"/></results></action><action id="31" plug-in="Standard.FunctionCall.1"><?xtml-editor x=104 y=330 ?><!--PrependToOutdialDest--><function name="&quot;PrependToOutdialDest&quot;" return=""/><results><result name="Default" link="4" stubbed="0"/></results></action><action id="32" plug-in="Pactolus.CNFAddMember.1"><?xtml-editor x=554 y=328 ?><!--unMute--><add-member endpoint="g_strMSMemberEndPoint" ms-type="s_strMediaServerType" ci="g_strConfResource" call-id="g_strCallId" caller-sdp="g_strContent" inbound="0" returns="g_intReturnCode" timeout="s_intRING_NO_ANSWER" connection-id="g_strMSConnectionId" ms-sdp="g_strMSSDP" to="g_strFrom" from="g_strTo" cseq="g_strCSeq" via="" mgcp-call-id="g_strMSCallId" ingress-gateway="g_strRequestURI" packetization-period="s_intPacketizationPeriod" codec="0"><attributes mp="16" mt="3" ig="0" og="0" iat="-10" ias="-40" oat="-10" oas="-40" atn="3" att="2" ia="1" oa="1" te="1" le="1" tp="0" dc="1" tc="1" ate="0" se="0"/></add-member><results><result name="Default" link="22" stubbed="0"/><result name="Success" link="24" stubbed="0"/><result name="Error"/><result name="Timeout"/><result name="Resource Unavailable"/><result name="Caller Hung up"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS ADD A MEMBER TO A CONFERENCE.");
	Server.logInfo("INFO: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logInfo("INFO: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logInfo("INFO: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);
	Server.logInfo("INFO: MS MEMBER CALL ID = " + Session.g_strMSCallId);
	Session.g_boolInConference = true;
}
else
{
	Server.logError("ERROR: FAIL TO ADD A MEMBER TO A CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logError("ERROR: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logError("ERROR: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: MS MEMBER CALL ID = " + Session.g_strMSCallId);

}]]></script></scripts></action></actions></function><function name="OnIVRConfBridgeParty" start="11" returns="void"><parameters><parameter name="strMSEndPoint" type="string"/></parameters><actions><action id="11" plug-in="Standard.FunctionCall.1"><?xtml-editor x=92 y=100 ?><!--put caller on hold--><function name="&quot;PutCallerOnHold&quot;" return="g_intReturnCode"/><results><result name="Default" link="12" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intReturnCode = -1;
Server.logInfo("INFO: RECEIVE IVR CONF BRIDGE PARTY FROM SOAP AGENT.");
Server.logInfo("INFO: The End Point is: " + Session.strMSEndPoint);]]></script></scripts></action><action id="2" plug-in="Pactolus.Branch.1"><?xtml-editor x=100 y=416 ?><!--SET MS VARS TO CONF--><results><result name="Default" link="21" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strConfResource = Session.strMSEndPoint;
Session.g_strMSCallId = "";
Session.g_strMSConnectionId = "";
Session.g_strMSSDP = "";]]></script></scripts></action><action id="4" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1040 y=502 ?><return value=""/></action><action id="12" plug-in="Pactolus.Branch.1"><?xtml-editor x=324 y=99 ?><!--caller on hold?--><results><result name="Default" link="18" stubbed="0"/><result name="success" link="20" stubbed="0">g_intReturnCode == 0</result></results></action><action id="13" plug-in="Standard.EndSession.1"><?xtml-editor x=1048 y=339 ?></action><action id="14" plug-in="Standard.FunctionCall.1"><?xtml-editor x=793 y=502 ?><!--party join to conf controller--><function name="&quot;PartyJoin&quot;" return=""/><results><result name="Default" link="4" stubbed="0"/></results></action><action id="15" plug-in="Standard.FunctionCall.1"><?xtml-editor x=568 y=500 ?><!--play join tone to conf--><function name="&quot;PlayPromptToConference&quot;" return="g_intReturnCode"><parameter>s_intPROMPT_JOIN_TONE</parameter></function><results><result name="Default" link="14" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_longMSConnectTime = Server.getUTCTime();]]></script></scripts></action><action id="16" plug-in="Pactolus.Branch.1"><?xtml-editor x=559 y=413 ?><!--log ERROR--><results><result name="Default" link="18" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR:conference.OnIVRConfBridgeParty.16: FAIL TO BRIGE PARTY TO CONFERENCE");]]></script></scripts></action><action id="18" plug-in="Standard.FunctionCall.1"><?xtml-editor x=819 y=338 ?><!--HangUp Caller--><function name="&quot;HangUpCaller&quot;" return="g_intReturnCode"/><results><result name="Default" link="13" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intTerminationReason = 17;]]></script></scripts></action><action id="19" plug-in="Standard.EndSession.1"><?xtml-editor x=572 y=607 ?></action><action id="20" plug-in="Pactolus.CNFRemoveMember.1"><?xtml-editor x=528 y=190 ?><remove-member ci="g_strConfResource" endpoint="g_strMSMemberEndPoint" connection-id="g_strMSConnectionId" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"/><results><result name="Default" link="18" stubbed="0"/><result name="Success" link="2" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS REMOVE PARTY FROM OLD CONFERENCE");
}
else
{
	Server.logError("ERROR: FAIL TO REMOVE PARTY FROM OLD CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: g_strConfRerouse = " + Session.g_strMSMemberEndPoint);
	Server.logError("ERROR: g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: g_strMSMemberEndPoint = " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="21" plug-in="Pactolus.CNFAddMember.1"><?xtml-editor x=330 y=413 ?><!--unMute--><add-member endpoint="g_strMSMemberEndPoint" ms-type="s_strMediaServerType" ci="g_strConfResource" call-id="g_strCallId" caller-sdp="g_strContent" inbound="0" returns="g_intReturnCode" timeout="s_intRING_NO_ANSWER" connection-id="g_strMSConnectionId" ms-sdp="g_strMSSDP" to="g_strFrom" from="g_strTo" cseq="g_strCSeq" via="" mgcp-call-id="g_strMSCallId" ingress-gateway="g_strRequestURI" packetization-period="s_intPacketizationPeriod" codec="0"><attributes mp="16" mt="3" ig="0" og="0" iat="-10" ias="-40" oat="-10" oas="-40" atn="3" att="2" ia="1" oa="1" te="1" le="1" tp="0" dc="1" tc="1" ate="0" se="0"/></add-member><results><result name="Default" link="16" stubbed="0"/><result name="Success" link="15" stubbed="0"/><result name="Error"/><result name="Timeout"/><result name="Resource Unavailable"/><result name="Caller Hung up" link="19" stubbed="0"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS ADD A MEMBER TO A CONFERENCE.");
	Server.logInfo("INFO: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logInfo("INFO: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logInfo("INFO: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);
	Server.logInfo("INFO: MS MEMBER CALL ID = " + Session.g_strMSCallId);
	Session.g_boolInConference = true;
}
else
{
	Server.logError("ERROR: FAIL TO ADD A MEMBER TO A CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logError("ERROR: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logError("ERROR: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: MS MEMBER CALL ID = " + Session.g_strMSCallId);

}]]></script></scripts></action></actions></function><function name="OnIVRConfRemoveParty" start="3" returns="void"><actions><action id="3" plug-in="Standard.FunctionCall.1"><?xtml-editor x=79 y=161 ?><!--hangup caller--><function name="&quot;HangUpCaller&quot;" return="g_intReturnCode"/><results><result name="Default" link="8" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intTerminationReason = 13;
Server.logInfo("INFO: RECEIVE IVR CONF REMOVE PARTY FROM SOAP AGENT.");]]></script></scripts></action><action id="4" plug-in="Standard.FunctionCall.1"><?xtml-editor x=554 y=157 ?><!--End the call--><function name="&quot;EndCall&quot;" return=""/><results><result name="Default" link="5" stubbed="0"/></results></action><action id="5" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=777 y=155 ?><return value=""/></action><action id="8" plug-in="Pactolus.CNFRemoveMember.1"><?xtml-editor x=325 y=156 ?><remove-member ci="g_strConfResource" endpoint="g_strMSMemberEndPoint" connection-id="g_strMSConnectionId" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"/><results><result name="Default" link="4" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.enableEvents(false);]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS REMOVE PARTY FROM CONFERENCE");
	Session.g_boolInConference = false;
}
else
{
	Server.logError("ERROR: FAIL TO REMOVE PARTY FROM CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: g_strConfRerouse = " + Session.g_strConfResource);
	Server.logError("ERROR: g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: g_strMSMemberEndPoint = " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action></actions></function><function name="ConfHoldPartyRequest" start="10" returns="void"><parameters><parameter name="strConfControllerIpAddress" type="string"/><parameter name="nConfControllerPort" type="i4"/><parameter name="strTransactionId" type="string"/></parameters><actions><action id="10" plug-in="Pactolus.CNFModifyMember.1"><?xtml-editor x=348 y=204 ?><!--deaf and mute from conference--><modify-member ci="g_strConfResource" endpoint="g_strMSMemberEndPoint" connection-id="g_strMSConnectionId" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"><attributes mp="16" mt="3" ig="0" og="0" iat="-10" ias="-40" oat="-10" oas="-40" atn="3" att="2" ia="1" oa="1" te="0" le="0" tp="0" dc="1" tc="1" ate="0" se="0"/></modify-member><results><result name="Default" link="5" stubbed="0"/><result name="Success" link="2" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: RECEIVE CONF HOLD PARTY REQUEST FROM CONF CONTROLLER.");
Server.logInfo("INFO: TransactionID: " + Session.strTransactionId);
Server.logInfo("INFO: Conf Controller IP: " + Session.strConfControllerIpAddress);
Server.logInfo("INFO: Conf Controller Port: " + Session.nConfControllerPort);
Server.logInfo("INFO: MODIFY MEMBER TO HOLD.");
Server.logInfo("INFO: ConnectionID: " + Session.g_strMSConnectionId);
Server.logInfo("INFO: CallID: " + Session.g_strMSCallId);
Server.logInfo("INFO: End Point: " + Session.g_strMSMemberEndPoint);]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS MODIFIED MEMBER HOLD.");
	Server.logInfo("INFO: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logInfo("INFO: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logInfo("INFO: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);
}
else
{
	Server.logError("ERROR: FAIL TO MODIFIED MEMBER HOLD, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logError("ERROR: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logError("ERROR: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);

}]]></script></scripts></action><action id="1" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=940 y=235 ?><return value=""/></action><action id="2" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=628 y=298 ?><!--SUCCESS hold a party--><SOAP destination-ip="g_strConfControllerIP" transaction="strTransactionId" message-name="s_strCONF_HOLD_RESPONSE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;resultCode&quot;" value="s_intSUCCESS"/><parameter tag="&quot;resultMessage&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="1" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strReturnMsg = "SUCCESSFUL HOLD A PARTY";
Session.g_boolHoldState = true;]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS RESPONSE SUCCESS TO SOAP.");
}
else
{
	Server.logError("ERROR: FAIL TO RESPONSE SUCCESS TO SOAP, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="5" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=611 y=128 ?><!--FAILURE hold a party--><SOAP destination-ip="g_strConfControllerIP" transaction="strTransactionId" message-name="s_strCONF_HOLD_RESPONSE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;resultCode&quot;" value="s_intFAILURE"/><parameter tag="&quot;resultMessage&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="1" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strReturnMsg = "FAILURE HOLD A PARTY";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS RESPONSE FAILURE TO SOAP.");
}
else
{
	Server.logError("ERROR: FAIL TO RESPONSE FAILURE TO SOAP, EXIT ON : " + Result.name);
}]]></script></scripts></action></actions></function><function name="ConfOffholdPartyRequest" start="11" returns="void"><parameters><parameter name="strConfControllerIpAddress" type="string"/><parameter name="nConfControllerPort" type="i4"/><parameter name="strTransactionId" type="string"/></parameters><actions><action id="11" plug-in="Pactolus.Branch.1"><?xtml-editor x=107 y=189 ?><!--mute state?--><results><result name="Default" link="10" stubbed="0"/><result name="mute state == true" link="12" stubbed="0">g_boolMutedState == true</result></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: RECEIVE CONF OFF HOLD PARTY REQUEST FROM CONF CONTROLLER.");
Server.logInfo("INFO: TransactionID: " + Session.strTransactionId);
Server.logInfo("INFO: Conf Controller IP: " + Session.strConfControllerIpAddress);
Server.logInfo("INFO: Conf Controller Port: " + Session.nConfControllerPort);]]></script></scripts></action><action id="1" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=948 y=211 ?><return value=""/></action><action id="4" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=611 y=123 ?><!--FAILURE unhold a party--><SOAP destination-ip="g_strConfControllerIP" transaction="strTransactionId" message-name="s_strCONF_OFFHOLD_RESPONSE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;resultCode&quot;" value="s_intFAILURE"/><parameter tag="&quot;resultMessage&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="1" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strReturnMsg = "FAILURE UNHOLD A PARTY";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS RESPONSE FAILURE TO SOAP");
}
else
{
	Server.logError("ERROR: FAILR TO RESPONSE FAILURE TO SOAP, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="5" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=645 y=295 ?><!--SUCCESS unhold a party--><SOAP destination-ip="g_strConfControllerIP" transaction="strTransactionId" message-name="s_strCONF_OFFHOLD_RESPONSE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;resultCode&quot;" value="s_intSUCCESS"/><parameter tag="&quot;resultMessage&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="1" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strReturnMsg = "SUCCESSFUL UNHOLD A PARTY";
Session.g_boolHoldState = false;]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS RESPONSE SUCCESS TO SOAP.");
}
else
{
	Server.logError("ERROR: FAIL TO RESPONSE SUCCESS TO SOAP, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="10" plug-in="Pactolus.CNFModifyMember.1"><?xtml-editor x=355 y=125 ?><!--undeaf and unmute from conference--><modify-member ci="g_strConfResource" endpoint="g_strMSMemberEndPoint" connection-id="g_strMSConnectionId" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"><attributes mp="16" mt="3" ig="0" og="0" iat="-10" ias="-40" oat="-10" oas="-40" atn="3" att="2" ia="1" oa="1" te="1" le="1" tp="0" dc="1" tc="1" ate="0" se="0"/></modify-member><results><result name="Default" link="4" stubbed="0"/><result name="Success" link="5" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS MODIFIED MEMBER OFF HOLD.");
	Server.logInfo("INFO: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logInfo("INFO: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logInfo("INFO: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);
}
else
{
	Server.logError("ERROR: FAIL TO MODIFIED MEMBER OFF HOLD, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logError("ERROR: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logError("ERROR: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);

}]]></script></scripts></action><action id="12" plug-in="Pactolus.CNFModifyMember.1"><?xtml-editor x=372 y=306 ?><!--undeaf ONLY from conference--><modify-member ci="g_strConfResource" endpoint="g_strMSMemberEndPoint" connection-id="g_strMSConnectionId" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"><attributes mp="16" mt="3" ig="0" og="0" iat="-10" ias="-40" oat="-10" oas="-40" atn="3" att="2" ia="1" oa="1" te="0" le="1" tp="0" dc="1" tc="1" ate="0" se="0"/></modify-member><results><result name="Default" link="4" stubbed="0"/><result name="Success" link="5" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS MODIFIED MEMBER OFF HOLD.");
	Server.logInfo("INFO: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logInfo("INFO: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logInfo("INFO: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);
}
else
{
	Server.logError("ERROR: FAIL TO MODIFIED MEMBER OFF HOLD, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logError("ERROR: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logError("ERROR: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);

}]]></script></scripts></action></actions></function><function name="psAPISceInitConfOutdialSession" start="1" returns="i4"><local-vars><var name="intReturnCode" type="i4">-50</var></local-vars><actions><action id="1" plug-in="Pactolus.JavaStaticMethod.1"><?xtml-editor x=296 y=255 ?><!--"initConfSession()"--><java class="&quot;com.pactolus.conferencing.psAPISceInitConfSession&quot;" method="&quot;initConfOutdialSession&quot;" timeout="s_intTIMEOUT" return="" method-return-var="intReturnCode" method-return-type="0"><parameter type="inout">g_strDBNAME</parameter></java><results><result name="Default" link="2" stubbed="0"/><result name="Success" link="3" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO : *********JAVA CALLING INITIALIZE OUTDIAL CONF *********");]]></script><script language="javascript" timing="last"><![CDATA[Server.logInfo("INFO: ********** iJavaReturnCode " + Session.intReturnCode);
if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS CALL INIT OUTDIAL CONF SESSION");
}	
else
{
	Server.logError("ERROR: FAIL TO CALL INIT OUTDIAL CONF SESSION, EXIT ON: " + Result.name);
	Session.g_intTerminationReason = 6;
}]]></script></scripts></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=534 y=243 ?><!--FAILURE--><return value="s_intFAILURE"/></action><action id="3" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=543 y=334 ?><!--return code from java--><return value="intReturnCode"/></action></actions></function><function name="OnConfPlayPromptRequest" start="5" returns="void"><parameters><parameter name="strHost" type="string"/><parameter name="intPort" type="i4"/><parameter name="strTransactionID" type="string"/><parameter name="nIndex" type="i4"/><parameter name="strAllCallers" type="string"/></parameters><actions><action id="5" plug-in="Pactolus.Branch.1"><?xtml-editor x=101 y=205 ?><!--To all callers?--><results><result name="Default" link="3" stubbed="0"/><result name="strAllCallers==T" link="6" stubbed="0">strAllCallers match "T"</result></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: RECEIVE CONF PLAY PROMPT REQUEST FROM CONF CONTROLLER.");
Server.logInfo("INFO: Index to play: " + Session.nIndex);
Server.logInfo("INFO: To the whole conference: " + Session.strAllCallers);
Server.logInfo("INFO: TransactionID: " + Session.strTransactionID);
Server.logInfo("INFO: Conf Controller IP: " + Session.strHost);
Server.logInfo("INFO: Conf Controller Port: " + Session.intPort);]]></script></scripts></action><action id="1" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=893 y=281 ?><!--FAILURE--><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: FAIL TO PLAY PROMPT");]]></script></scripts></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=644 y=293 ?><!--SUCCESS--><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: SUCCESS PLAY PROMPT");]]></script></scripts></action><action id="3" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=386 y=166 ?><!--play a prompt to conf--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="0" parse-on-ms="1" terminating-digit=""><audio type="index">nIndex</audio></play><results><result name="Default" link="1" stubbed="0"/><result name="Success" link="2" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY PROMPT TO A CALLER.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY PROMPT TO A CALLER, EXIT ON: " + Result.name);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="6" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=396 y=320 ?><!--play a prompt to all callers--><play connection-id="&quot;*&quot;" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="0" parse-on-ms="1" terminating-digit=""><audio type="index">nIndex</audio></play><results><result name="Default" link="1" stubbed="0"/><result name="Success" link="2" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS TO PLAY PROMPT TO WHOLE CONF.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY PROMPT TO WHOLE CONF, EXIT ON: " + Result.name);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: ConnectionID: * ");
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}]]></script></scripts></action></actions></function><function name="OnResponse" start="9" returns="void"><parameters><parameter name="strAccept" type="string"/><parameter name="strAcceptEncoding" type="string"/><parameter name="strAcceptLanguage" type="string"/><parameter name="strCallId" type="string"/><parameter name="strContact" type="string"/><parameter name="strContent" type="string"/><parameter name="strContentDisposition" type="string"/><parameter name="strContentType" type="string"/><parameter name="strCSeq" type="string"/><parameter name="strDate" type="string"/><parameter name="strEncryption" type="string"/><parameter name="strFrom" type="string"/><parameter name="strInReplyTo" type="string"/><parameter name="strProxyAuthenticate" type="string"/><parameter name="strRecordRoute" type="string"/><parameter name="strRequire" type="string"/><parameter name="strRetryAfter" type="string"/><parameter name="strRSeq" type="string"/><parameter name="strSessionExpires" type="string"/><parameter name="strStatus" type="string"/><parameter name="strSupported" type="string"/><parameter name="strTimestamp" type="string"/><parameter name="strTo" type="string"/><parameter name="strUnsupported" type="string"/><parameter name="strVia" type="string"/><parameter name="strWarning" type="string"/><parameter name="strWWWAuthenticate" type="string"/></parameters><actions><action id="9" plug-in="Pactolus.Branch.1"><?xtml-editor x=127 y=184 ?><!--response for INVITE?--><results><result name="Default" link="10" stubbed="0"/><result name="INVITE?" link="3" stubbed="0">strCSeq match "INVITE"
AND g_boolWebDialOut == true</result></results></action><action id="1" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=743 y=236 ?><!--FAILURE to add a call party--><SOAP destination-ip="g_strConfControllerIP" transaction="g_strTransactionID" message-name="s_strCONF_ADD_RESPONSE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;resultCode&quot;" value="-1"/><parameter tag="&quot;resultMessage&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="8" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strReturnMsg = "OUTDIAL: TRYING";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND TRYING TO CONFERENCE CONTROLLER");
}
else
{
	Server.logError("ERROR: FAIL TO SEND TRYING TO CONFERENCE CONTROLLER, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="3" plug-in="Pactolus.Branch.1"><?xtml-editor x=373 y=306 ?><!--what is the status?--><results><result name="Default" link="1" stubbed="0"/><result name="18? == in progress" link="4" stubbed="0">strStatus match "18"</result><result name="200 == OK" link="5" stubbed="0">strStatus match "200"</result><result name="408 == timeout" link="6" stubbed="0">strStatus match "408"</result><result name="486 == busy here" link="7" stubbed="0">strStatus match "486"</result></results></action><action id="4" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=759 y=385 ?><!--Ringing--><SOAP destination-ip="g_strConfControllerIP" transaction="g_strTransactionID" message-name="s_strCONF_ADD_RESPONSE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;resultCode&quot;" value="180"/><parameter tag="&quot;resultMessage&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="8" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strReturnMsg = "OUTDIAL: RINGING";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND RINGING TO CONFERENCE CONTROLLER");
}
else
{
	Server.logError("ERROR: FAIL TO SEND RINGING TO CONFERENCE CONTROLLER, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="5" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=764 y=538 ?><!--Connected--><SOAP destination-ip="g_strConfControllerIP" transaction="g_strTransactionID" message-name="s_strCONF_ADD_RESPONSE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;resultCode&quot;" value="200"/><parameter tag="&quot;resultMessage&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="8" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strReturnMsg = "OUTDIAL: CONNECTED";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO:  SUCCESS SEND CONNECTED TO CONFERENCE CONTROLLER");
}
else
{
	Server.logError("ERROR: FAIL TO SEND CONNECTED TO CONFERENCE CONTROLLER, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="6" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=765 y=683 ?><!--No answer--><SOAP destination-ip="g_strConfControllerIP" transaction="g_strTransactionID" message-name="s_strCONF_ADD_RESPONSE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;resultCode&quot;" value="408"/><parameter tag="&quot;resultMessage&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="8" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strReturnMsg = "OUTDIAL: NO ANSWER";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO:  SUCCESS SEND NO ANSWER TO CONFERENCE CONTROLLER");
}
else
{
	Server.logError("ERROR: FAIL TO SEND NO ANSWER TO CONFERENCE CONTROLLER, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="7" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=757 y=823 ?><!--Busy--><SOAP destination-ip="g_strConfControllerIP" transaction="g_strTransactionID" message-name="s_strCONF_ADD_RESPONSE" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;resultCode&quot;" value="486"/><parameter tag="&quot;resultMessage&quot;" value="g_strReturnMsg"/></SOAP><results><result name="Default" link="8" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strReturnMsg = "OUTDIAL: BUSY";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND BUSY TO CONFERENCE CONTROLLER");
}
else if (Result.id == 3)
{
	Server.logError("ERROR: FAIL TO SEND BUSY TO CONFERENCE CONTROLLER, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="8" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1040 y=537 ?><return value=""/></action><action id="10" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=359 y=173 ?><return value=""/></action></actions></function><function name="psAPISceConfCount" start="1" returns="i4"><local-vars><var name="intReturnCode" type="i4">-50</var></local-vars><actions><action id="1" plug-in="Pactolus.JavaStaticMethod.1"><?xtml-editor x=241 y=210 ?><!--getPartyCount()--><java class="&quot;com.pactolus.conferencing.psAPISceConfCount&quot;" method="&quot;getPartyCount&quot;" timeout="s_intTIMEOUT" return="" method-return-var="intReturnCode" method-return-type="0"><parameter type="in">g_strDBNAME</parameter><parameter type="in">g_strSessionID</parameter><parameter type="in">g_strConfEventId</parameter><parameter type="inout">g_intCurrentNbrCallegs</parameter></java><results><result name="Default" link="2" stubbed="0"/><result name="Success" link="3" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: ********JAVA CALLING getPartyCount *********");
Server.logInfo("INFO: BEFORE DB name = " + Session.g_strDBNAME);
Server.logInfo("INFO: BEFORE session ID = " + Session.g_strSessionID);
Server.logInfo("INFO: BEFORE conf event ID = " + Session.g_strConfEventId);
]]></script><script language="javascript" timing="last"><![CDATA[Server.logInfo("INFO: ********** iJavaReturnCode " + Session.intReturnCode);
if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS GET CURRENT NUMBER OF CALL LEGS.");
	Server.logInfo("INFO: Current number of callegs in the conference = " + Session.g_intCurrentNbrCallegs);
}
else
{
	Server.logError("ERROR: FAIL TO GET CURRENT NUMBER OF CALL LEGS, EXIT ON: " + Result.name);
	Session.g_intTerminationReason = 6;
}]]></script></scripts></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=551 y=193 ?><!--FAILURE--><return value="s_intFAILURE"/></action><action id="3" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=560 y=284 ?><!--return code from java--><return value="intReturnCode"/></action></actions></function><function name="WaitForModerator" start="11" returns="i4"><actions><action id="11" plug-in="Pactolus.Branch.1"><?xtml-editor x=145 y=99 ?><!--g_intMaxCallerHoldTime > 0?--><results><result name="Default" link="12" stubbed="0"/><result name="g_intMaxCallerHoldTime &gt; 0" link="1" stubbed="0">g_intMaxCallerHoldTime &gt; 0</result></results></action><action id="1" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=403 y=211 ?><!--WaitForModerator--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="0" return-immediate="0" digit-map="" language="" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">897</audio><audio type="index">898</audio></play><results><result name="Default" link="10" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY WAITING FOR MOD.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY WAITING FOR MOD, EXIT ON: " + Result.name);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="3" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1055 y=50 ?><!--s_intSTATE_END_CALL--><return value="s_intSTATE_END_CALL"/></action><action id="4" plug-in="Standard.Timer.1"><?xtml-editor x=853 y=209 ?><!--set max wait time
WFM--><timer start="1" id="g_longWFMTimerID" duration="g_intMaxCallerHoldTime"/><results><result name="Default" link="5" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_boolTimerSet = true;]]></script></scripts></action><action id="5" plug-in="Standard.Timer.1"><?xtml-editor x=1071 y=206 ?><!--play please hold every 10 secs--><timer start="1" id="g_longHoldTimerID" duration="s_intSLEEPTIME"/><results><result name="Default" link="6" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_boolHoldTimerFlag = true;]]></script></scripts></action><action id="6" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1311 y=200 ?><!--s_intSTATE_WAIT--><return value="s_intSTATE_WAIT"/></action><action id="7" plug-in="Standard.FunctionCall.1"><?xtml-editor x=620 y=56 ?><!--Hang up caller--><function name="&quot;HangUpCaller&quot;" return=""/><results><result name="Default" link="8" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intTerminationReason = 17;]]></script></scripts></action><action id="8" plug-in="Standard.FunctionCall.1"><?xtml-editor x=834 y=53 ?><!--Send party leave--><function name="&quot;PartyLeave&quot;" return=""/><results><result name="Default" link="3" stubbed="0"/></results></action><action id="10" plug-in="Standard.FunctionCall.1"><?xtml-editor x=619 y=209 ?><!--party join to conf controller--><function name="&quot;PartyJoin&quot;" return=""/><results><result name="Default" link="4" stubbed="0"/></results></action><action id="12" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=400 y=55 ?><!--WaitForModerator--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="0" return-immediate="0" digit-map="" language="" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">897</audio></play><results><result name="Default" link="7" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY WAITING FOR MOD.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY WAITING FOR MOD, EXIT ON: " + Result.name);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: End Point: " + Session.g_strMSEndPoint);
}]]></script></scripts></action></actions></function><function name="ModeratorJoinRequest" start="1" returns="void"><parameters><parameter name="strHost" type="string"/><parameter name="strPort" type="string"/><parameter name="strTransactionID" type="string"/><parameter name="strConferenceResource" type="string"/></parameters><local-vars><var name="intReturnCode" type="i4">0</var></local-vars><actions><action id="1" plug-in="Standard.FunctionCall.1"><?xtml-editor x=87 y=89 ?><!--stop timers--><function name="&quot;StopTimer&quot;" return=""/><results><result name="Default" link="20" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: RECEIVE MODERATOR JOIN REQUEST FROM CONF CONTROLLER.");
Server.logInfo("INFO: Conf Controller IP: " + Session.strHost);
Server.logInfo("INFO: Conf Controller Port: " + Session.strPort);
Server.logInfo("INFO: TransactionID: " + Session.strTransactionID);
Server.logInfo("INFO: Conference Resource: " + Session.strConferenceResource);]]></script></scripts></action><action id="2" plug-in="Standard.FunctionCall.1"><?xtml-editor x=546 y=87 ?><!--Delete MS Connection--><function name="&quot;DeleteMSConnection&quot;" return=""/><results><result name="Default" link="3" stubbed="0"/></results></action><action id="3" plug-in="Pactolus.Branch.1"><?xtml-editor x=767 y=87 ?><!--clear out MS variables--><results><result name="Default" link="4" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strMSCallId = "";
Session.g_strMSConnectionId = "";
Session.g_strMSSDP = "";
Session.g_strMSEndPoint = Session.strConferenceResource;
Session.g_strConfResource = Session.strConferenceResource;
Server.logInfo("INFO: Moderator joined the conference.");
Server.logInfo("INFO: Conference resource is: " + Session.strConferenceResource);]]></script></scripts></action><action id="4" plug-in="Pactolus.Hold.1"><?xtml-editor x=85 y=274 ?><cc-hold to="g_strTo" from="g_strFrom" ingress-gateway="g_strRequestURI" cseq="g_strCSeq" call-id="g_strCallId" sdp="g_strContent" status=""/><results><result name="Default" link="10" stubbed="0"/><result name="Success" link="5" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PUT CALLER ON HOLD.");
}
else
{
	Server.logError("ERROR: FAIL TO PUT CALLER ON HOLD, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="5" plug-in="Standard.FunctionCall.1"><?xtml-editor x=309 y=370 ?><!--outdial from MS to Caller--><function name="&quot;OutdialFromMSToCaller&quot;" return="intReturnCode"/><results><result name="Default" link="12" stubbed="0"/></results></action><action id="8" plug-in="Standard.FunctionCall.1"><?xtml-editor x=971 y=220 ?><!--End Call--><function name="&quot;EndCall&quot;" return=""/><results><result name="Default" link="11" stubbed="0"/></results></action><action id="9" plug-in="Standard.FunctionCall.1"><?xtml-editor x=750 y=221 ?><!--party leave--><function name="&quot;PartyLeave&quot;" return=""/><results><result name="Default" link="8" stubbed="0"/></results></action><action id="10" plug-in="Standard.FunctionCall.1"><?xtml-editor x=510 y=226 ?><!--HangUp Caller--><function name="&quot;HangUpCaller&quot;" return="g_intReturnCode"/><results><result name="Default" link="9" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intTerminationReason = 17;]]></script></scripts></action><action id="11" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1201 y=223 ?><return value=""/></action><action id="12" plug-in="Pactolus.Branch.1"><?xtml-editor x=522 y=371 ?><!--CALLER IN CONFERENCE?--><results><result name="Default" link="16" stubbed="0"/><result name="return code == SUCCESS" link="17" stubbed="0">intReturnCode == s_intSUCCESS</result></results></action><action id="16" plug-in="Pactolus.Branch.1"><?xtml-editor x=761 y=370 ?><!--END THE CALL--><results><result name="Default" link="10" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: FAIL TO ADD WFM INTO CONFERENCE.");]]></script></scripts></action><action id="17" plug-in="Standard.FunctionCall.1"><?xtml-editor x=777 y=476 ?><!--play join tone--><function name="&quot;PlayPromptToConference&quot;" return="intReturnCode"><parameter>s_intPROMPT_JOIN_TONE</parameter></function><results><result name="Default" link="19" stubbed="0"/></results></action><action id="19" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=994 y=477 ?><return value=""/></action><action id="20" plug-in="Standard.FunctionCall.1"><?xtml-editor x=322 y=87 ?><!--play join as ???--><function name="&quot;PlayJoinPrompt&quot;" return=""/><results><result name="Default" link="2" stubbed="0"/></results></action></actions></function><function name="PlayJoinPrompt" start="5" returns="i4"><local-vars><var name="intReturnCode" type="i4">0</var><var name="strSignal" type="string"></var></local-vars><actions><action id="5" plug-in="Pactolus.Branch.1"><?xtml-editor x=303 y=332 ?><!--Moderator?--><results><result name="Default" link="1" stubbed="0"/><result name="Moderator==T" link="4" stubbed="0">g_strModeratorFlag match "T"</result></results></action><action id="1" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=668 y=258 ?><!--join as participant--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">864</audio><audio type="index">865</audio></play><results><result name="Default" link="2" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Session.intReturnCode = Session.s_intSUCCESS;
	Server.logInfo("INFO: SUCCESS PLAY JOIN AS PARTICIPANT.");
	Server.logInfo("INFO: g_strMSSDP = " + Session.g_strMSSDP);
	Server.logInfo("INFO: g_strMSCallId = " + Session.g_strMSCallId);
	Server.logInfo("INFO: g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logInfo("INFO: g_strMSEndPoint = " + Session.g_strMSEndPoint);
}
else
{
	Session.intReturnCode = Session.s_intFAILURE;
	Server.logError("ERROR: FAIL TO PLAY JOIN AS PARTICIPANT, EXIT ON: " + Result.name);
	Server.logError("ERROR: g_strMSCallId = " + Session.g_strMSCallId);
	Server.logError("ERROR: g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: g_strMSEndPoint = " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=937 y=397 ?><!--intReturnCode--><return value="intReturnCode"/></action><action id="4" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=678 y=445 ?><!--join as moderator--><play connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">864</audio><audio type="index">866</audio></play><results><result name="Default" link="2" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Session.intReturnCode = Session.s_intSUCCESS;
	Server.logInfo("INFO: SUCCESS PLAY JOIN AS MODERATOR.");
	Server.logInfo("INFO: g_strMSSDP = " + Session.g_strMSSDP);
	Server.logInfo("INFO: g_strMSCallId = " + Session.g_strMSCallId);
	Server.logInfo("INFO: g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logInfo("INFO: g_strMSEndPoint = " + Session.g_strMSEndPoint);
}
else
{
	Session.intReturnCode = Session.s_intFAILURE;
	Server.logError("ERROR: FAIL TO PLAY JOIN AS MODERATOR, EXIT ON: " + Result.name);
	Server.logError("ERROR: g_strMSCallId = " + Session.g_strMSCallId);
	Server.logError("ERROR: g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: g_strMSEndPoint = " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="6" plug-in="Pactolus.MGCPNotifyRequest.1"><?xtml-editor x=365 y=163 ?><!--issue A/null@connectionID--><rqnt connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" timeout="s_intTIMEOUT" returns="g_intReturnCode"><parameters><quarantine step="0" loop="0" process="0" discard="0"/><events><![CDATA[]]></events><signals><![CDATA[strSignal]]></signals><digit-map><![CDATA[]]></digit-map></parameters></rqnt><results><result name="Default" link="1" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.strSignal = "A/null@" + Session.g_strMSConnectionId;]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND A NULL RQNT.");
}
else
{
	Server.logError("ERROR: FAIL TO SEND A NULL RQNT, EXIT ON: " + Result.name);
	Server.logError("ERROR: g_strMSCallId = " + Session.g_strMSCallId);
	Server.logError("ERROR: g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: g_strMSEndPoint = " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="8" plug-in="Pactolus.MGCPNotifyRequest.1"><?xtml-editor x=390 y=573 ?><!--issue A/null@connectionID--><rqnt connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" timeout="s_intTIMEOUT" returns="g_intReturnCode"><parameters><quarantine step="0" loop="0" process="0" discard="0"/><events><![CDATA[]]></events><signals><![CDATA[strSignal]]></signals><digit-map><![CDATA[]]></digit-map></parameters></rqnt><results><result name="Default" link="4" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.strSignal = "A/null@" + Session.g_strMSConnectionId;]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND A NULL RQNT.");
}
else
{
	Server.logError("ERROR: FAIL TO SEND A NULL RQNT, EXIT ON: " + Result.name);
	Server.logError("ERROR: g_strMSCallId = " + Session.g_strMSCallId);
	Server.logError("ERROR: g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: g_strMSEndPoint = " + Session.g_strMSEndPoint);
}]]></script></scripts></action></actions></function><function name="psAPISceConfAuthDest" start="3" returns="i4"><local-vars><var name="intReturnCode" type="i4">-50</var></local-vars><actions><action id="3" plug-in="Pactolus.JavaStaticMethod.1"><?xtml-editor x=163 y=123 ?><!--authorizeDestination--><java class="&quot;com.pactolus.conferencing.psAPISceConfAuthDest&quot;" method="&quot;authorizeDestination&quot;" timeout="s_intTIMEOUT" return="" method-return-var="intReturnCode" method-return-type="0"><parameter type="in">g_strDBNAME</parameter><parameter type="in">g_strSessionID</parameter><parameter type="in">s_strApplicationName</parameter><parameter type="in">g_strDestNbr</parameter><parameter type="in">g_longServiceProviderID</parameter><parameter type="in">g_intServiceID</parameter><parameter type="in">g_intDialPlanID</parameter><parameter type="in">g_strConfEventId</parameter><parameter type="inout">g_strOutdialDestNbr</parameter><parameter type="inout">g_intDestCountryID</parameter><parameter type="inout">g_strDestDomIntlFlag</parameter><parameter type="inout">g_strDestAreaCode</parameter><parameter type="inout">g_strDestCallingCode</parameter></java><results><result name="Default" link="1" stubbed="0"/><result name="Success" link="2" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strSIPStatus = Session.g_strSIPStatus.toString();
Server.logInfo("INFO: *********JAVA CALLING AuthConfPasscode *********");
Server.logInfo("INFO: BEFORE pass code = " + Session.g_strPassCode);
Server.logInfo("INFO: BEFORE access number = " + Session.g_strAccessNumber);
Server.logInfo("INFO: BEFORE sched duration = " + Session.g_intScheduleDuration);
Server.logInfo("INFO: BEFORE sched start time = " + Session.g_strScheduleStartTime);
Server.logInfo("INFO: BEFORE time available = " + Session.g_longTimeAvailable);
Server.logInfo("INFO: BEFORE sched ID = " + Session.g_strConfScheduleId);
Server.logInfo("INFO: BEFORE call leg ID = " + Session.g_strCallLegId);
Server.logInfo("INFO: BEFORE DB name = " + Session.g_strDBNAME);
Server.logInfo("INFO: BEFORE access number ID = " + Session.g_intAccessNumberId);
Server.logInfo("INFO: BEFORE conf resource = " + Session.g_strConfResource);
Server.logInfo("INFO: BEFORE conf event ID = " + Session.g_strConfEventId);
]]></script><script language="javascript" timing="last"><![CDATA[Server.logInfo("INFO: ********* iJavaReturnCode " + Session.intReturnCode);
if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS VALIDATE DESTINATION.");
	Server.logInfo("INFO: AFTER pass code = " + Session.g_strPassCode);
	Server.logInfo("INFO: AFTER access number = " + Session.g_strAccessNumber);
	Server.logInfo("INFO: AFTER sched duration = " + Session.g_intScheduleDuration);
	Server.logInfo("INFO: AFTER sched start time = " + Session.g_strScheduleStartTime);
	Server.logInfo("INFO: AFTER time available = " + Session.g_longTimeAvailable);
	Server.logInfo("INFO: AFTER sched ID = " + Session.g_strConfScheduleId);
	Server.logInfo("INFO: AFTER call leg ID = " + Session.g_strCallLegId);
	Server.logInfo("INFO: AFTER DB name = " + Session.g_strDBNAME);
	Server.logInfo("INFO: AFTER access number ID = " + Session.g_intAccessNumberId);
	Server.logInfo("INFO: AFTER conf resource = " + Session.g_strConfResource);
	Server.logInfo("INFO: AFTER conf event ID = " + Session.g_strConfEventId);
}
else
{
	Server.logError("ERROR: FAIL TO VALIDATE DESTINATION, EXIT ON: " + Result.name);
	Session.g_intTerminationReason = 6;
}]]></script></scripts></action><action id="1" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=473 y=106 ?><!--FAILURE--><return value="s_intFAILURE"/></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=482 y=197 ?><!--return code from java
hard code time avail--><return value="intReturnCode"/></action></actions></function><function name="OnConfPlayWarningPromptRequest" start="3" returns="void"><parameters><parameter name="strConfControllerIP" type="string"/><parameter name="intConfControllerPort" type="i4"/><parameter name="strTransactionID" type="string"/><parameter name="intTimeRemainingMinutes" type="i4"/><parameter name="intTimeRemainingSeconds" type="i4"/></parameters><actions><action id="3" plug-in="Pactolus.Branch.1"><?xtml-editor x=56 y=78 ?><!--minutes == ?--><results><result name="Default" link="2" stubbed="0"/><result name="1 minute" link="4" stubbed="0">intTimeRemainingMinutes == 1</result><result name="2 or more minute" link="1" stubbed="0">intTimeRemainingMinutes &gt; 1</result></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: RECEIVE CONF PLAY WARNING PROMPT REQUEST.");
Server.logInfo("INFO: Minute: " + Session.intTimeRemainingMinutes);
Server.logInfo("INFO: Second: " + Session.intTimeRemainingSeconds);
Server.logInfo("INFO: TransactionID: " + Session.strTransactionID);
Server.logInfo("INFO: Conf Controller IP: " + Session.strConfControllerIP);
Server.logInfo("INFO: Conf Controller Port: " + Session.intConfControllerPort);]]></script></scripts></action><action id="1" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=277 y=316 ?><!--play a prompt to all callers--><play connection-id="&quot;*&quot;" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="0" parse-on-ms="1" terminating-digit=""><audio type="number">intTimeRemainingMinutes</audio><audio type="index">309</audio></play><results><result name="Default" link="2" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY WARNING PROMPT");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY WARNING PROMPT, EXIT ON: " + Result.name);
	Server.logError("ERROR: g_strMSCallId = " + Session.g_strMSCallId);
	Server.logError("ERROR: g_strMSConnectionId = *");
	Server.logError("ERROR: g_strMSEndPoint = " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=634 y=234 ?><return value=""/></action><action id="4" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=283 y=162 ?><!--play a prompt to all callers--><play connection-id="&quot;*&quot;" endpoint="g_strMSEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="0" parse-on-ms="1" terminating-digit=""><audio type="number">intTimeRemainingMinutes</audio><audio type="index">308</audio></play><results><result name="Default" link="2" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY WARNING PROMPT");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY WARNING PROMPT, EXIT ON: " + Result.name);
	Server.logError("ERROR: g_strMSCallId = " + Session.g_strMSCallId);
	Server.logError("ERROR: g_strMSConnectionId = * ");
	Server.logError("ERROR: g_strMSEndPoint = " + Session.g_strMSEndPoint);
}]]></script></scripts></action></actions></function><function name="SelfMute" start="3" returns="void"><actions><action id="3" plug-in="Pactolus.CNFModifyMember.1"><?xtml-editor x=133 y=231 ?><!--mute from conference--><modify-member ci="g_strConfResource" endpoint="g_strMSMemberEndPoint" connection-id="g_strMSConnectionId" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"><attributes mp="16" mt="3" ig="" og="" iat="" ias="" oat="" oas="" atn="3" att="2" ia="" oa="" te="0" le="" tp="" dc="" tc="" ate="0" se=""/></modify-member><results><result name="Default" link="2" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strSelfMute = "T";
Session.g_boolMutedState = true;]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS MODIFIED MEMBER SELF MUTE.");
	Server.logInfo("INFO: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logInfo("INFO: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logInfo("INFO: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);
}
else
{
	Server.logError("ERROR: FAIL TO MODIFIED MEMBER SELF MUTE, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logError("ERROR: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logError("ERROR: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);

}]]></script></scripts></action><action id="1" plug-in="Pactolus.MGCPModify.1"><?xtml-editor x=135 y=102 ?><mdcx connection-id="g_strMSConnectionId" endpoint="g_strMSEndPoint" callid="g_strMSCallId" returns="g_intReturnCode" remote-sdp="g_strMSSDP" mode="send" packetization-period="10" codec="0" timeout="s_intTIMEOUT" local-connection-options="" second-endpoint-id=""><parameters><quarantine step="0" loop="0" process="0" discard="0"/><events><![CDATA[]]></events><signals><![CDATA[]]></signals><digit-map><![CDATA[]]></digit-map></parameters></mdcx><results><result name="Default" link="2" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strSelfMute = "T";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS MDCX MS CONNECTION TO MUTE");
}
else
{
	Server.logError("ERROR: FAIL TO MDCX MS CONNECTION TO MUTE, EXIT ON: " + Result.name);
	Server.logError("ERROR: g_strMSCallId = " + Session.g_strMSCallId);
	Server.logError("ERROR: g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: g_strMSEndPoint = " + Session.g_strMSEndPoint);
}]]></script></scripts></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=361 y=188 ?><return value=""/></action></actions></function><function name="SelfUnMute" start="1" returns="void"><actions><action id="1" plug-in="Pactolus.Branch.1"><?xtml-editor x=142 y=70 ?><!--mute by mod?--><results><result name="Default" link="5" stubbed="0"/><result name="Moderator == &quot;T&quot;" link="4" stubbed="0">g_strModeratorFlag match "T"</result><result name="self mute" link="4" stubbed="0">g_strModeratorFlag match "F"
AND g_strSelfMute match "T"</result></results></action><action id="3" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=718 y=147 ?><return value=""/></action><action id="4" plug-in="Pactolus.CNFModifyMember.1"><?xtml-editor x=421 y=198 ?><!--unmute from conference--><modify-member ci="g_strConfResource" endpoint="g_strMSMemberEndPoint" connection-id="g_strMSConnectionId" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"><attributes mp="16" mt="3" ig="" og="" iat="" ias="" oat="" oas="" atn="3" att="2" ia="" oa="" te="1" le="" tp="" dc="" tc="" ate="0" se=""/></modify-member><results><result name="Default" link="3" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strSelfMute = "F";
Session.g_boolMutedState = false;]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS MODIFIED MEMBER SELF UNMUTE.");
	Server.logInfo("INFO: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logInfo("INFO: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logInfo("INFO: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);
}
else
{
	Server.logError("ERROR: FAIL TO MODIFIED MEMBER SELF UNMUTE, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logError("ERROR: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logError("ERROR: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);

}]]></script></scripts></action><action id="5" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=412 y=41 ?><!--sorry not able to complete transaction--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">363</audio></play><results><result name="Default" link="3" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY TRANSCATION COULD NOT BE COMPLETED.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY TRANSCATION COULD NOT BE COMPLETED, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action></actions></function><function name="ConfFunctionsStateChange" start="1" returns="void"><parameters><parameter name="strConfControllerIP" type="string"/><parameter name="intConfControllerPort" type="i4"/><parameter name="strTransactionID" type="string"/><parameter name="strConferenceID" type="string"/><parameter name="strFunctionName" type="string"/><parameter name="strNewState" type="string"/></parameters><actions><action id="1" plug-in="Pactolus.Branch.1"><?xtml-editor x=89 y=123 ?><!--state currently?--><results><result name="Default" link="2" stubbed="0"/><result name="locked" link="3" stubbed="0">strFunctionName match "locked"
AND strNewState match "true"</result><result name="unlock" link="4" stubbed="0">strFunctionName match "locked"
AND strNewState match "false"</result><result name="mute" link="5" stubbed="0">strFunctionName match "muted"
AND strNewState match "true"</result><result name="unmute" link="6" stubbed="0">strFunctionName match "muted"
AND strNewState match "false"</result><result name="allow to continue" link="7" stubbed="0">strFunctionName match "continues"
AND strNewState match "true"</result><result name="disallow to continue" link="8" stubbed="0">strFunctionName match "continues"
AND strNewState match "false"</result></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: RECEIVE STATE CHANGE FROM CONFERENCE CONTROLLER.");
Server.logInfo("INFO: Conference ID: " + Session.strConferenceID);
Server.logInfo("INFO: Function Name: " + Session.strFunctionName);
Server.logInfo("INFO: New State: " + Session.strNewState);
Server.logInfo("INFO: TransactionID: " + Session.strTransactionID);
Server.logInfo("INFO: Conf Controller IP: " + Session.strConfControllerIP);
Server.logInfo("INFO: Conf Controller Port: " + Session.intConfControllerPort);
Server.enableEvents(false);]]></script></scripts></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=377 y=122 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Server.enableEvents(true);]]></script></scripts></action><action id="3" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=381 y=182 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intPromptLockUnLock = 858;
Server.enableEvents(true);]]></script></scripts></action><action id="4" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=382 y=237 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intPromptLockUnLock = 857;
Server.enableEvents(true);]]></script></scripts></action><action id="5" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=381 y=287 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intPromptMuteUnMute = 860;
Server.enableEvents(true);]]></script></scripts></action><action id="6" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=385 y=338 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intPromptMuteUnMute = 859;
Server.enableEvents(true);]]></script></scripts></action><action id="7" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=387 y=391 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intPromptAllowDisallow = 902;
Server.enableEvents(true);]]></script></scripts></action><action id="8" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=380 y=448 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intPromptAllowDisallow = 901;
Server.enableEvents(true);]]></script></scripts></action></actions></function><function name="NonModMainMenu" start="73" returns="void"><local-vars><var name="strRequestNotify" type="string"></var><var name="strDigit" type="string"></var><var name="strStatus" type="string"></var><var name="intStatus" type="i4">0</var></local-vars><actions><action id="73" plug-in="Pactolus.CNFModifyMember.1"><?xtml-editor x=47 y=139 ?><!--deaf and mute from conference--><modify-member ci="g_strConfResource" endpoint="g_strMSMemberEndPoint" connection-id="g_strMSConnectionId" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"><attributes mp="16" mt="3" ig="0" og="0" iat="-10" ias="-40" oat="-10" oas="-40" atn="3" att="2" ia="1" oa="1" te="0" le="0" tp="0" dc="1" tc="1" ate="0" se="0"/></modify-member><results><result name="Default" link="74" stubbed="0"/><result name="Success" link="16" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS MODIFIED MEMBER REMOVE FROM CONFERENCE.");
	Server.logInfo("INFO: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logInfo("INFO: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logInfo("INFO: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);
}
else
{
	Server.logError("ERROR: FAIL TO MODIFIED MEMBER REMOVE FROM CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logError("ERROR: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logError("ERROR: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);

}]]></script></scripts></action><action id="2" plug-in="Pactolus.Branch.1"><?xtml-editor x=37 y=413 ?><results><result name="Default" link="16" stubbed="0"/><result name="1-count party" link="21" stubbed="0">strDigit match "1"</result><result name="2-mute/unmute" link="79" stubbed="0">strDigit match "2"</result><result name="3-main menu" link="16" stubbed="1">strDigit match "3"</result><result name="*-return to conf" link="76" stubbed="0">strDigit match "\*"</result></results></action><action id="16" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1008 y=384 ?><!--what to do?--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="60" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="&quot;(x|*|#)&quot;" language="g_strLanguage" digits="strDigit" retry-count="3" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">518</audio><audio type="index">320</audio><audio type="index">905</audio><audio type="index">311</audio><audio type="index">862</audio><audio type="index">312</audio><audio type="index">g_intPromptSelfMuteUnMute</audio><audio type="index">313</audio><audio type="index">906</audio><timeout-prompt type="index">s_intPROMPT_NO_RESPONSE</timeout-prompt></play><results><result name="Default"/><result name="Success" link="2" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY NON MOD MAIN MENU.");
}
else
{
	Server.logError("ERROR: FAIL TO NON MOD MAIN MENU, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="21" plug-in="Standard.FunctionCall.1"><?xtml-editor x=310 y=452 ?><!--count call legs--><function name="&quot;psAPISceConfCount&quot;" return=""/><results><result name="Default" link="72" stubbed="0"/></results></action><action id="22" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=768 y=504 ?><!--number of call legs--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">925</audio><audio type="number">g_intCurrentNbrCallegs</audio><audio type="index">927</audio><audio type="index">929</audio></play><results><result name="Default"/><result name="Success" link="16" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY CURRENT NUMBER OF CALL LEGS.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY CURRENT NUMBER OF CALL LEGS, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="51" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1298 y=1167 ?><!--End Call--><function name="&quot;EndCall&quot;" return=""/><results><result name="Default" link="53" stubbed="0"/></results></action><action id="52" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1079 y=1170 ?><!--party leave--><function name="&quot;PartyLeave&quot;" return=""/><results><result name="Default" link="51" stubbed="0"/></results></action><action id="53" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1511 y=1166 ?><return value=""/></action><action id="54" plug-in="Standard.FunctionCall.1"><?xtml-editor x=850 y=1173 ?><!--HangUp Caller--><function name="&quot;HangUpCaller&quot;" return="g_intReturnCode"/><results><result name="Default" link="52" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[var cseq = new SipCSeq(Session.g_strCSeq);
cseq.increment();
Session.g_strCSeq = cseq.encode();
Session.g_intTerminationReason = 17;]]></script></scripts></action><action id="71" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=779 y=657 ?><!--number of call legs--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">926</audio><audio type="number">g_intCurrentNbrCallegs</audio><audio type="index">928</audio><audio type="index">929</audio></play><results><result name="Default"/><result name="Success" link="16" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY CURRENT NUMBER OF CALL LEGS.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY CURRENT NUMBER OF CALL LEGS, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="72" plug-in="Pactolus.Branch.1"><?xtml-editor x=519 y=460 ?><!--participants > 1--><results><result name="Default" link="22" stubbed="0"/><result name="currentNbrCallLeg &gt; 1" link="71" stubbed="0">g_intCurrentNbrCallegs &gt; 1</result></results></action><action id="74" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=268 y=138 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Session.g_boolCurrentlyInMMenu = false;]]></script></scripts></action><action id="75" plug-in="Pactolus.CNFModifyMember.1"><?xtml-editor x=621 y=1169 ?><!--undeaf and unmute from conference--><modify-member ci="g_strConfResource" endpoint="g_strMSMemberEndPoint" connection-id="g_strMSConnectionId" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"><attributes mp="16" mt="3" ig="0" og="0" iat="-10" ias="-40" oat="-10" oas="-40" atn="3" att="2" ia="1" oa="1" te="1" le="1" tp="0" dc="1" tc="1" ate="0" se="0"/></modify-member><results><result name="Default" link="54" stubbed="0"/><result name="Success" link="78" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS MODIFIED MEMBER PUT BACK IN CONFERENCE.");
	Server.logInfo("INFO: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logInfo("INFO: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logInfo("INFO: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);
}
else
{
	Server.logError("ERROR: FAIL TO MODIFIED MEMBER PUT BACK IN CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logError("ERROR: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logError("ERROR: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);

}]]></script></scripts></action><action id="76" plug-in="Pactolus.Branch.1"><?xtml-editor x=337 y=1208 ?><!--mute state?--><results><result name="Default" link="75" stubbed="0"/><result name="mute state == true" link="77" stubbed="0">g_boolMutedState == true</result></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("CURRENT MUTE STATE IS: " + Session.g_boolMutedState);]]></script></scripts></action><action id="77" plug-in="Pactolus.CNFModifyMember.1"><?xtml-editor x=633 y=1383 ?><!--undeaf ONLY from conference--><modify-member ci="g_strConfResource" endpoint="g_strMSMemberEndPoint" connection-id="g_strMSConnectionId" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"><attributes mp="16" mt="3" ig="0" og="0" iat="-10" ias="-40" oat="-10" oas="-40" atn="3" att="2" ia="1" oa="1" te="0" le="1" tp="0" dc="1" tc="1" ate="0" se="0"/></modify-member><results><result name="Default" link="54" stubbed="1"/><result name="Success" link="78" stubbed="1"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS MODIFIED MEMBER PUT BACK IN CONFERENCE.");
	Server.logInfo("INFO: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logInfo("INFO: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logInfo("INFO: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);
}
else
{
	Server.logError("ERROR: FAIL TO MODIFIED MEMBER PUT BACK IN CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logError("ERROR: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logError("ERROR: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);

}]]></script></scripts></action><action id="78" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=846 y=1281 ?><return value=""/></action><action id="79" plug-in="Pactolus.Branch.1"><?xtml-editor x=340 y=863 ?><!--selfmute/unmute--><results><result name="Default" link="82" stubbed="0"/><result name="self muted == 908" link="83" stubbed="0">g_intPromptSelfMuteUnMute == 908</result></results></action><action id="80" plug-in="Standard.FunctionCall.1"><?xtml-editor x=855 y=822 ?><!--SelfUmMute--><function name="&quot;SelfUnMute&quot;" return=""/><results><result name="Default"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intPromptSelfMuteUnMute = 908;]]></script></scripts></action><action id="81" plug-in="Standard.FunctionCall.1"><?xtml-editor x=854 y=978 ?><!--SelfMute--><function name="&quot;SelfMute&quot;" return=""/><results><result name="Default"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intPromptSelfMuteUnMute = 907;]]></script></scripts></action><action id="82" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=582 y=816 ?><!--your line muted--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">917</audio></play><results><result name="Default" link="86" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY SELF MUTED.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY SELF MUTED, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="83" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=598 y=984 ?><!--your line unmuted--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">920</audio></play><results><result name="Default" link="87" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY SELF UNMUTED.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY SELF UNMUTED, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="86" plug-in="Pactolus.Branch.1"><?xtml-editor x=858 y=908 ?><results><result name="Default" link="16" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intPromptSelfMuteUnMute = 908;
Session.g_boolMutedState = true;
Server.logInfo("CURRENT MUTE STATE IS: " + Session.g_boolMutedState);]]></script></scripts></action><action id="87" plug-in="Pactolus.Branch.1"><?xtml-editor x=851 y=1074 ?><results><result name="Default" link="16" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intPromptSelfMuteUnMute = 907;
Session.g_boolMutedState = false;
Server.logInfo("CURRENT MUTE STATE IS: " + Session.g_boolMutedState);]]></script></scripts></action></actions></function><function name="psAPISceConfGetLastParty" start="1" returns="i4"><local-vars><var name="intReturnCode" type="i4">-55</var></local-vars><actions><action id="1" plug-in="Pactolus.JavaStaticMethod.1"><?xtml-editor x=160 y=205 ?><!--getLastParty()--><java class="&quot;com.pactolus.conferencing.psAPISceConfGetLastParty&quot;" method="&quot;getLastParty&quot;" timeout="s_intTIMEOUT" return="" method-return-var="intReturnCode" method-return-type="0"><parameter type="in">g_strDBNAME</parameter><parameter type="in">g_strSessionID</parameter><parameter type="in">g_strConfEventId</parameter><parameter type="inout">g_strLastPartySessionID</parameter></java><results><result name="Default" link="2" stubbed="0"/><result name="Success" link="3" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: ********JAVA CALLING getLastParty *********");
Server.logInfo("INFO: BEFORE DB name = " + Session.g_strDBNAME);
Server.logInfo("INFO: BEFORE session ID = " + Session.g_strSessionID);
Server.logInfo("INFO: BEFORE conf event ID = " + Session.g_strConfEventId);
]]></script><script language="javascript" timing="last"><![CDATA[Server.logInfo("INFO: ********** iJavaReturnCode " + Session.intReturnCode);
if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS GET CURRENT NUMBER OF CALL LEGS.");
	Server.logInfo("INFO: Last Party session ID = " + Session.g_strLastPartySessionID);
}
else
{
	Server.logError("ERROR: FAIL TO GET LAST PARTY SESSION ID, EXIT ON: " + Result.name);
	Session.g_intTerminationReason = 6;
}]]></script></scripts></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=470 y=188 ?><!--FAILURE--><return value="s_intFAILURE"/></action><action id="3" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=479 y=279 ?><!--return code from java--><return value="intReturnCode"/></action></actions></function><function name="OnServiceLoad" start="1" returns="void"><parameters><parameter name="strAppName" type="string"/><parameter name="nSessionCount" type="i2"/><parameter name="nMaxIterations" type="i2"/><parameter name="nServerId" type="i2"/></parameters><actions><action id="1" plug-in="Pactolus.UserFunction.1"><?xtml-editor x=154 y=211 ?><!--GET PSX IP from config--><user-function process="&quot;PACTOLUS_ps_c_adaptor&quot;" function="&quot;get_property&quot;" timeout="s_intTIMEOUT" return="g_intReturnCode" async="0"><parameter>"primary-softswitch"</parameter><parameter>s_strPrimaryPSX</parameter><parameter>"backup-softswitch"</parameter><parameter>s_strBackupPSX</parameter><parameter>"use-softswitch-flag"</parameter><parameter>s_strUseSoftswitchFlag</parameter><parameter>"appserver-logical-ip"</parameter><parameter>s_strLocalHost</parameter><parameter>"conference-default-ani"</parameter><parameter>s_strDEFAULT_ANI</parameter><parameter>"send-alarm-flag"</parameter><parameter>s_strSendAlarmFlag</parameter></user-function><results><result name="Default" link="2" stubbed="0"/><result name="Success" link="3" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.s_strApplicationName = Session._appName;]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS CALL C++ FUNCTION TO GET INFO FROM PS_MASTER.");
}
else
{
	Server.logError("ERROR: FAIL TO CALL C++ FUNCTION TO GET INFO FROM PS_MASTER, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=409 y=205 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: FAIL TO GET PSX IP FROM ps_master_config.xml");]]></script></scripts></action><action id="3" plug-in="Pactolus.Branch.1"><?xtml-editor x=423 y=322 ?><results><result name="Default" link="4" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[//Server.logInfo("SUCCESSFUL GET PSX IP from ps_master_config.xml");
if (Session.s_strLocalHost.length <= 1)
{
	Session.s_strLocalHost = Server.ipAddress;
}]]></script></scripts></action><action id="4" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=644 y=325 ?><return value=""/></action></actions></function><function name="PrependToOutdialDest" start="1" returns="void"><actions><action id="1" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=70 y=200 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: DIALING PLAN ID is: " + Session.g_intDialPlanID);
// if (Session.g_intDialPlanID == 1)
{
	Server.logInfo("OLD outdial dest number is: " + Session.g_strDestNbr);
	Session.g_intTempInt = parseInt(Session.g_strDestNbr.charAt(0));
	if (Session.g_intTempInt == 1)
	{
		Session.g_strDestNbr = "9" + Session.g_strDestNbr;
	}
	else if (Session.g_intTempInt != 1 && Session.g_intTempInt != 0)
	{
		Session.g_strDestNbr = "91" + Session.g_strDestNbr;
	}
	Server.logInfo("NEW outdial dest number is: " + Session.g_strDestNbr);
}]]></script></scripts></action></actions></function><function name="CreateAConference" start="1" returns="i4"><local-vars><var name="intReturnCode" type="i4">-55</var></local-vars><actions><action id="1" plug-in="Pactolus.CNFCreateConf.1"><?xtml-editor x=166 y=162 ?><create-conference ci="g_strMSConferenceID" endpoint="g_strConfResource" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"><attributes mp="16" mt="16" ig="0" og="0" iat="-10" ias="-40" oat="-10" oas="-40" atn="3" att="2" ia="1" oa="1" te="1" le="1" tp="0" dc="1" tc="1" ate="0" se="0"/></create-conference><results><result name="Default" link="7" stubbed="0"/><result name="Success" link="4" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strConfResource = "*";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS CREATE A CONFERENCE.");
	Server.logInfo("INFO: MS CONFERENCE END POINT " + Session.g_strConfResource);
	Server.logInfo("INFO: MS CONFERENCE ID = " + Session.g_strMSConferenceID);
}
else
{
	Server.logError("ERROR: FAIL TO CREATE A CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE END POINT " + Session.g_strConfResource);
	Server.logError("ERROR: MS CONFERENCE ID = " + Session.g_strMSConferenceID);
}]]></script></scripts></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=867 y=75 ?><!--s_intFAILURE--><return value="s_intFAILURE"/></action><action id="3" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=887 y=422 ?><!--s_intSUCCESS--><return value="s_intSUCCESS"/></action><action id="4" plug-in="Standard.FunctionCall.1"><?xtml-editor x=427 y=314 ?><!--add party to the conference--><function name="&quot;AddToConference&quot;" return="intReturnCode"/><results><result name="Default" link="5" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strConfResource = Session.g_strMSConferenceID;]]></script></scripts></action><action id="5" plug-in="Pactolus.Branch.1"><?xtml-editor x=650 y=319 ?><!--success--><results><result name="Default" link="9" stubbed="0"/><result name="SUCCESS" link="3" stubbed="0">intReturnCode == s_intSUCCESS</result></results></action><action id="6" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1096 y=293 ?><!--s_intFAILURE--><return value="s_intFAILURE"/></action><action id="7" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=412 y=82 ?><!--send ALARM--><SOAP destination-ip="" transaction="" message-name="s_strSEND_ALARM_REQUEST" destination-port="" destination-type="1" destination-session="" waiting-session-selected=""><parameter tag="&quot;calling_number&quot;" value="g_strAlarmType"/><parameter tag="&quot;called_number&quot;" value="g_strAlarmPriority"/></SOAP><results><result name="Default" link="8" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strAlarmType = "MEDIASERVER: create a conference";
Session.g_strAlarmPriority = "MAJOR";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND ALERT");
}
else
{
	Server.logError("ERROR: FAIL TO SEND ALERT, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="8" plug-in="Standard.FunctionCall.1"><?xtml-editor x=638 y=77 ?><!--Hangup caller--><function name="&quot;HangUpCaller&quot;" return=""/><results><result name="Default" link="2" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intTerminationReason = 17;]]></script></scripts></action><action id="9" plug-in="Pactolus.CNFDeleteConf.1"><?xtml-editor x=870 y=295 ?><delete-conference ci="g_strMSConferenceID" endpoint="g_strConfResource" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"/><results><result name="Default" link="6" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS DELETE A CONFERENCE.");
	Server.logInfo("INFO: MS CONFERENCE END POINT " + Session.g_strConfResource);
	Server.logInfo("INFO: MS CONFERENCE ID = " + Session.g_strMSConferenceID);
}
else
{
	Server.logError("ERROR: FAIL TO DELETE A CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE END POINT " + Session.g_strConfResource);
	Server.logError("ERROR: MS CONFERENCE ID = " + Session.g_strMSConferenceID);
}]]></script></scripts></action></actions></function><function name="AddToConference" start="2" returns="i4"><actions><action id="2" plug-in="Pactolus.Branch.1"><?xtml-editor x=193 y=220 ?><!--g_strMuteFlag==T--><results><result name="Default" link="4" stubbed="0"/><result name="g_strMuteFlag==T" link="6" stubbed="0">g_strMuteFlag match "T"
OR g_boolMutedState == true</result></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strMSMemberEndPoint = "";
Session.g_strMSConnectionId = "";
Session.g_strMSCallId = "";
Session.g_strMSSDP = "";]]></script></scripts></action><action id="4" plug-in="Pactolus.CNFAddMember.1"><?xtml-editor x=427 y=61 ?><!--unMute--><add-member endpoint="g_strMSMemberEndPoint" ms-type="s_strMediaServerType" ci="g_strConfResource" call-id="g_strCallId" caller-sdp="g_strContent" inbound="0" returns="g_intReturnCode" timeout="s_intTIMEOUT" connection-id="g_strMSConnectionId" ms-sdp="g_strMSSDP" to="g_strFrom" from="g_strTo" cseq="g_strCSeq" via="" mgcp-call-id="g_strMSCallId" ingress-gateway="g_strRequestURI" packetization-period="s_intPacketizationPeriod" codec="0"><attributes mp="16" mt="3" ig="0" og="0" iat="-10" ias="-40" oat="-10" oas="-40" atn="3" att="2" ia="1" oa="1" te="1" le="1" tp="0" dc="1" tc="1" ate="0" se="0"/></add-member><results><result name="Default" link="11" stubbed="0"/><result name="Success" link="15" stubbed="0"/><result name="Error"/><result name="Timeout"/><result name="Resource Unavailable"/><result name="Caller Hung up" link="14" stubbed="0"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS ADD A MEMBER TO A CONFERENCE.");
	Server.logInfo("INFO: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logInfo("INFO: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logInfo("INFO: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);
	Server.logInfo("INFO: MS MEMBER CALL ID = " + Session.g_strMSCallId);
}
else
{
	Server.logError("ERROR: FAIL TO ADD A MEMBER TO A CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logError("ERROR: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logError("ERROR: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: MS MEMBER CALL ID = " + Session.g_strMSCallId);

}]]></script></scripts></action><action id="6" plug-in="Pactolus.CNFAddMember.1"><?xtml-editor x=438 y=385 ?><!--Mute--><add-member endpoint="g_strMSMemberEndPoint" ms-type="s_strMediaServerType" ci="g_strConfResource" call-id="g_strCallId" caller-sdp="g_strContent" inbound="0" returns="g_intReturnCode" timeout="s_intTIMEOUT" connection-id="g_strMSConnectionId" ms-sdp="g_strMSSDP" to="g_strFrom" from="g_strTo" cseq="g_strCSeq" via="" mgcp-call-id="g_strMSCallId" ingress-gateway="g_strRequestURI" packetization-period="s_intPacketizationPeriod" codec="0"><attributes mp="16" mt="3" ig="0" og="0" iat="-10" ias="-40" oat="-10" oas="-40" atn="3" att="2" ia="1" oa="1" te="0" le="1" tp="0" dc="1" tc="1" ate="0" se="0"/></add-member><results><result name="Default" link="7" stubbed="0"/><result name="Success" link="16" stubbed="0"/><result name="Error"/><result name="Timeout"/><result name="Resource Unavailable"/><result name="Caller Hung up" link="10" stubbed="0"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS ADD A MEMBER TO A CONFERENCE.");
	Server.logInfo("INFO: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logInfo("INFO: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logInfo("INFO: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);
	Server.logInfo("INFO: MS MEMBER CALL ID = " + Session.g_strMSCallId);
}
else
{
	Server.logError("ERROR: FAIL TO ADD A MEMBER TO A CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logError("ERROR: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logError("ERROR: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: MS MEMBER CALL ID = " + Session.g_strMSCallId);

}]]></script></scripts></action><action id="7" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=666 y=380 ?><!--send ALARM--><SOAP destination-ip="" transaction="" message-name="s_strSEND_ALARM_REQUEST" destination-port="" destination-type="1" destination-session="" waiting-session-selected=""><parameter tag="&quot;calling_number&quot;" value="g_strAlarmType"/><parameter tag="&quot;called_number&quot;" value="g_strAlarmPriority"/></SOAP><results><result name="Default" link="8" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strAlarmType = "MEDIASERVER: connect party to conference";
Session.g_strAlarmPriority = "MAJOR";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND ALERT");
}
else
{
	Server.logError("ERROR: FAIL TO SEND ALERT, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="8" plug-in="Standard.FunctionCall.1"><?xtml-editor x=905 y=383 ?><!--Hangup caller--><function name="&quot;HangUpCaller&quot;" return=""/><results><result name="Default" link="9" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intTerminationReason = 17;]]></script></scripts></action><action id="9" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1118 y=387 ?><!--FAILURE--><return value="s_intFAILURE"/></action><action id="10" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=669 y=609 ?><!--ENDCALL--><return value="s_intENDCALL"/><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intTerminationReason = 1;]]></script></scripts></action><action id="11" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=676 y=61 ?><!--send ALARM--><SOAP destination-ip="" transaction="" message-name="s_strSEND_ALARM_REQUEST" destination-port="" destination-type="1" destination-session="" waiting-session-selected=""><parameter tag="&quot;calling_number&quot;" value="g_strAlarmType"/><parameter tag="&quot;called_number&quot;" value="g_strAlarmPriority"/></SOAP><results><result name="Default" link="12" stubbed="0"/><result name="Success"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strAlarmType = "MEDIASERVER: connect party to conference";
Session.g_strAlarmPriority = "MAJOR";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS SEND ALERT");
}
else
{
	Server.logError("ERROR: FAIL TO SEND ALERT, EXIT ON: " + Result.name);
}]]></script></scripts></action><action id="12" plug-in="Standard.FunctionCall.1"><?xtml-editor x=915 y=64 ?><!--Hangup caller--><function name="&quot;HangUpCaller&quot;" return=""/><results><result name="Default" link="13" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intTerminationReason = 17;]]></script></scripts></action><action id="13" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1128 y=68 ?><!--FAILURE--><return value="s_intFAILURE"/></action><action id="14" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=685 y=277 ?><!--ENDCALL--><return value="s_intENDCALL"/><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intTerminationReason = 1;]]></script></scripts></action><action id="15" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=679 y=190 ?><!--SUCCESS--><return value="s_intSUCCESS"/><scripts><script language="javascript" timing="first"><![CDATA[Session.g_boolInConference = true;
Session.g_longMSConnectTime = Server.getUTCTime();]]></script></scripts></action><action id="16" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=664 y=518 ?><!--SUCCESS--><return value="s_intSUCCESS"/><scripts><script language="javascript" timing="first"><![CDATA[Session.g_boolInConference = true;
Session.g_longMSConnectTime = Server.getUTCTime();
Session.g_intPromptSelfMuteUnMute = 908;]]></script></scripts></action></actions></function><function name="ModMainMenu" start="88" returns="void"><local-vars><var name="intStatus" type="i4">0</var><var name="strDigit" type="string"></var><var name="strRequestNotify" type="string"></var><var name="strStatus" type="string"></var></local-vars><actions><action id="88" plug-in="Pactolus.CNFModifyMember.1"><?xtml-editor x=226 y=199 ?><!--deaf and mute from conference--><modify-member ci="g_strConfResource" endpoint="g_strMSMemberEndPoint" connection-id="g_strMSConnectionId" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"><attributes mp="16" mt="3" ig="0" og="0" iat="-10" ias="-40" oat="-10" oas="-40" atn="3" att="2" ia="1" oa="1" te="0" le="0" tp="0" dc="1" tc="1" ate="0" se="0"/></modify-member><results><result name="Default" link="90" stubbed="0"/><result name="Success" link="16" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS MODIFIED MEMBER REMOVE FROM CONFERENCE.");
	Server.logInfo("INFO: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logInfo("INFO: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logInfo("INFO: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);
}
else
{
	Server.logError("ERROR: FAIL TO MODIFIED MEMBER REMOVE FROM CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logError("ERROR: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logError("ERROR: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);

}]]></script></scripts></action><action id="2" plug-in="Pactolus.Branch.1"><?xtml-editor x=218 y=415 ?><results><result name="Default" link="16" stubbed="0"/><result name="1-add party" link="99" stubbed="0">strDigit match "1"</result><result name="2-drop last party" link="85" stubbed="0">strDigit match "2"</result><result name="3-extent by 30 mins" link="72" stubbed="0">strDigit match "3"</result><result name="4-lock/unlock conf" link="61" stubbed="0">strDigit match "4"</result><result name="5-mute/unmute all" link="62" stubbed="0">strDigit match "5"</result><result name="6-count party" link="21" stubbed="0">strDigit match "6"</result><result name="7-allow/disallow conf continue" link="63" stubbed="0">strDigit match "7"</result><result name="8-self mute/unmute" link="67" stubbed="0">strDigit match "8"</result><result name="9-repeat main menu" link="16" stubbed="1">strDigit match "9"</result><result name="0-">strDigit match "0"</result><result name="#-end conf" link="70" stubbed="0">strDigit match "\#"</result><result name="*-return to conf" link="95" stubbed="0">strDigit match "\*"</result></results></action><action id="3" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=1184 y=1024 ?><!--UNLOCK CONFERENCE--><SOAP destination-ip="g_strConfControllerIP" transaction="g_strTransactionID" message-name="s_strCONF_UNLOCK_REQUEST" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;conferenceID&quot;" value="g_strConfScheduleId"/></SOAP><results><result name="Default" link="28" stubbed="0"/><result name="Success" link="101" stubbed="0"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: **** UNLOCK CONFERENCE ****");
Session.g_longTransactionID = Server.getUTCTime();
Session.g_strTransactionID = Session.g_longTransactionID.toString();
Session.g_intPromptLockUnLock = 857;]]></script></scripts></action><action id="4" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=833 y=2494 ?><!--END CONFERENCE--><SOAP destination-ip="g_strConfControllerIP" transaction="g_strTransactionID" message-name="s_strCONF_END_REQUEST" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;conferenceID&quot;" value="g_strConfScheduleId"/></SOAP><results><result name="Default" link="33" stubbed="0"/><result name="Success" link="58" stubbed="0"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: **** END CONFERENCE ****");
Session.g_longTransactionID = Server.getUTCTime();
Session.g_strTransactionID = Session.g_longTransactionID.toString();]]></script></scripts></action><action id="5" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=1181 y=899 ?><!--LOCK CONFERENCE--><SOAP destination-ip="g_strConfControllerIP" transaction="g_strTransactionID" message-name="s_strCONF_LOCK_REQUEST" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;conferenceID&quot;" value="g_strConfScheduleId"/></SOAP><results><result name="Default" link="27" stubbed="0"/><result name="Success" link="101" stubbed="0"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: **** LOCK CONFERENCE ****");
Session.g_longTransactionID = Server.getUTCTime();
Session.g_strTransactionID = Session.g_longTransactionID.toString();
Session.g_intPromptLockUnLock = 858;]]></script></scripts></action><action id="6" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1146 y=180 ?><!--add party--><function name="&quot;IVRConfAddParty&quot;" return=""/><results><result name="Default" link="26" stubbed="0"/></results></action><action id="8" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=1383 y=512 ?><!--REMOVE LAST CALLER--><SOAP destination-ip="g_strConfControllerIP" transaction="g_strTransactionID" message-name="s_strCONF_REMOVE_LAST_REQUEST" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;conferenceID&quot;" value="g_strConfScheduleId"/></SOAP><results><result name="Default" link="24" stubbed="0"/><result name="Success" link="101" stubbed="0"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: **** DROP LAST CALLER ****");
Session.g_longTransactionID = Server.getUTCTime();
Session.g_strTransactionID = Session.g_longTransactionID.toString();]]></script></scripts></action><action id="16" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1889 y=402 ?><!--what to do?--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="60" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="&quot;(x|*|#)&quot;" language="g_strLanguage" digits="strDigit" retry-count="3" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">518</audio><audio type="index">320</audio><audio type="index">905</audio><audio type="index">311</audio><audio type="index">855</audio><audio type="index">312</audio><audio type="index">856</audio><audio type="index">313</audio><audio type="index">861</audio><audio type="index">22</audio><audio type="index">309</audio><audio type="index">314</audio><audio type="index">g_intPromptLockUnLock</audio><audio type="index">315</audio><audio type="index">g_intPromptMuteUnMute</audio><audio type="index">316</audio><audio type="index">862</audio><audio type="index">317</audio><audio type="index">g_intPromptAllowDisallow</audio><audio type="index">903</audio><audio type="index">318</audio><audio type="index">g_intPromptSelfMuteUnMute</audio><audio type="index">319</audio><audio type="index">906</audio><audio type="index">321</audio><audio type="index">889</audio><timeout-prompt type="index">s_intPROMPT_NO_RESPONSE</timeout-prompt></play><results><result name="Default" link="23" stubbed="0"/><result name="Success" link="2" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY MOD MAIN MENU.");
}
else
{
	Server.logError("ERROR: FAIL TO MOD MAIN MENU, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="18" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=1077 y=1210 ?><!--MUTE ALL--><SOAP destination-ip="g_strConfControllerIP" transaction="g_strTransactionID" message-name="s_strMUTE_ALL_REQUEST" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;conferenceID&quot;" value="g_strConfScheduleId"/></SOAP><results><result name="Default" link="29" stubbed="0"/><result name="Success" link="101" stubbed="0"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: **** MUTE ALL ****");
Session.g_longTransactionID = Server.getUTCTime();
Session.g_strTransactionID = Session.g_longTransactionID.toString();
Session.g_intPromptMuteUnMute = 860;]]></script></scripts></action><action id="19" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=1087 y=1338 ?><!--UNMUTE ALL--><SOAP destination-ip="g_strConfControllerIP" transaction="g_strTransactionID" message-name="s_strUNMUTE_ALL_REQUEST" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;conferenceID&quot;" value="g_strConfScheduleId"/></SOAP><results><result name="Default" link="30" stubbed="0"/><result name="Success" link="101" stubbed="0"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: **** UNMUTE ALL ****");
Session.g_longTransactionID = Server.getUTCTime();
Session.g_strTransactionID = Session.g_longTransactionID.toString();
Session.g_intPromptMuteUnMute = 859;]]></script></scripts></action><action id="20" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=967 y=764 ?><!--EXTENT CONFERENCE--><SOAP destination-ip="g_strConfControllerIP" transaction="g_strTransactionID" message-name="s_strCONF_EXTENT_REQUEST" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;hours&quot;" value="0"/><parameter tag="&quot;minutes&quot;" value="30"/><parameter tag="&quot;conferenceID&quot;" value="g_strConfScheduleId"/></SOAP><results><result name="Default" link="25" stubbed="0"/><result name="Success" link="101" stubbed="0"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: **** EXTEND CONF ****");
Session.g_longTransactionID = Server.getUTCTime();
Session.g_strTransactionID = Session.g_longTransactionID.toString();]]></script></scripts></action><action id="21" plug-in="Standard.FunctionCall.1"><?xtml-editor x=640 y=1618 ?><!--count call legs--><function name="&quot;psAPISceConfCount&quot;" return=""/><results><result name="Default" link="84" stubbed="0"/></results></action><action id="22" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1109 y=1494 ?><!--number of call legs--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">925</audio><audio type="number">g_intCurrentNbrCallegs</audio><audio type="index">927</audio><audio type="index">929</audio></play><results><result name="Default" link="31" stubbed="0"/><result name="Success" link="101" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY CURRENT NUMBER OF CALL LEGS.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY CURRENT NUMBER OF CALL LEGS, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="23" plug-in="Pactolus.Branch.1"><?xtml-editor x=2126 y=461 ?><!--log ERROR--><results><result name="Default" link="95" stubbed="1"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR:conference.MainMenu.38: FAIL TO PLAY MAIN MENU PROMPTS.");]]></script></scripts></action><action id="24" plug-in="Pactolus.Branch.1"><?xtml-editor x=1643 y=505 ?><!--put back in conference--><results><result name="Default" link="95" stubbed="1"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: FAIL TO SEND SOAP MESSAGE REMOVE LAST CALLER.");]]></script></scripts></action><action id="25" plug-in="Pactolus.Branch.1"><?xtml-editor x=1180 y=761 ?><!--put back in conference--><results><result name="Default" link="95" stubbed="1"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: FAIL TO SEND SOAP MESSAGE EXTEND CONFERENCE.");]]></script></scripts></action><action id="26" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1362 y=180 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Session.g_boolCurrentlyInMMenu = false;]]></script></scripts></action><action id="27" plug-in="Pactolus.Branch.1"><?xtml-editor x=1410 y=897 ?><!--put back in conference--><results><result name="Default" link="95" stubbed="1"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: FAIL TO SEND SOAP MESSAGE LOCK CONFERENCE.");]]></script></scripts></action><action id="28" plug-in="Pactolus.Branch.1"><?xtml-editor x=1395 y=1024 ?><!--put back in conference--><results><result name="Default" link="95" stubbed="1"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: FAIL TO SEND SOAP MESSAGE UNLOCK CONFERENCE.");]]></script></scripts></action><action id="29" plug-in="Pactolus.Branch.1"><?xtml-editor x=1323 y=1192 ?><!--put back in conference--><results><result name="Default" link="95" stubbed="1"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: FAIL TO SEND SOAP MESSAGE MUTE ALL.");]]></script></scripts></action><action id="30" plug-in="Pactolus.Branch.1"><?xtml-editor x=1325 y=1322 ?><!--put back in conference--><results><result name="Default" link="95" stubbed="1"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: FAIL TO SEND SOAP MESSAGE UNMUTE ALL.");]]></script></scripts></action><action id="31" plug-in="Pactolus.Branch.1"><?xtml-editor x=1374 y=1490 ?><!--put back in conference--><results><result name="Default" link="95" stubbed="1"/></results></action><action id="33" plug-in="Pactolus.Branch.1"><?xtml-editor x=1051 y=2489 ?><!--put back in conference--><results><result name="Default" link="65" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: FAIL TO SEND SOAP MESSAGE END CONFERENCE.");]]></script></scripts></action><action id="45" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=1098 y=1856 ?><!--CONF_CONTINUE_REQUEST--><SOAP destination-ip="g_strConfControllerIP" transaction="g_strTransactionID" message-name="s_strCONF_CONTINUE_REQUEST" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;conferenceID&quot;" value="g_strConfScheduleId"/></SOAP><results><result name="Default" link="47" stubbed="0"/><result name="Success" link="101" stubbed="0"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: **** CONF CONTINUE REQUEST ****");
Session.g_longTransactionID = Server.getUTCTime();
Session.g_strTransactionID = Session.g_longTransactionID.toString();
Session.g_intPromptAllowDisallow = 902;]]></script></scripts></action><action id="46" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=1101 y=2001 ?><!--CONF_DISCONTINUE_REQUEST--><SOAP destination-ip="g_strConfControllerIP" transaction="g_strTransactionID" message-name="s_strCONF_DISCONTINUE_REQUEST" destination-port="g_intConfControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;conferenceID&quot;" value="g_strConfScheduleId"/></SOAP><results><result name="Default" link="48" stubbed="0"/><result name="Success" link="101" stubbed="0"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("INFO: **** CONF DISCONTINUE REQUEST ****");
Session.g_longTransactionID = Server.getUTCTime();
Session.g_strTransactionID = Session.g_longTransactionID.toString();
Session.g_intPromptAllowDisallow = 901;]]></script></scripts></action><action id="47" plug-in="Pactolus.Branch.1"><?xtml-editor x=1310 y=1856 ?><!--put back in conference--><results><result name="Default" link="95" stubbed="1"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: FAIL TO SEND SOAP MESSAGE CONF_CONTINUE_REQUEST.");]]></script></scripts></action><action id="48" plug-in="Pactolus.Branch.1"><?xtml-editor x=1337 y=1998 ?><!--put back in conference--><results><result name="Default" link="95" stubbed="1"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logError("ERROR: FAIL TO SEND SOAP MESSAGE CONF_DISCONTINUE_REQUEST.");]]></script></scripts></action><action id="51" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1548 y=2796 ?><!--End Call--><function name="&quot;EndCall&quot;" return=""/><results><result name="Default" link="53" stubbed="0"/></results></action><action id="52" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1329 y=2799 ?><!--party leave--><function name="&quot;PartyLeave&quot;" return=""/><results><result name="Default" link="51" stubbed="0"/></results></action><action id="53" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1761 y=2795 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Session.g_boolCurrentlyInMMenu = false;]]></script></scripts></action><action id="54" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1100 y=2802 ?><!--HangUp Caller--><function name="&quot;HangUpCaller&quot;" return="g_intReturnCode"/><results><result name="Default" link="52" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intTerminationReason = 17;]]></script></scripts></action><action id="55" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1531 y=2649 ?><!--End Call--><function name="&quot;EndCall&quot;" return=""/><results><result name="Default" link="57" stubbed="0"/></results></action><action id="56" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1303 y=2652 ?><!--party leave--><function name="&quot;PartyLeave&quot;" return=""/><results><result name="Default" link="55" stubbed="0"/></results></action><action id="57" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1751 y=2649 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Session.g_boolCurrentlyInMMenu = false;]]></script></scripts></action><action id="58" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1074 y=2659 ?><!--HangUp Caller--><function name="&quot;HangUpCaller&quot;" return="g_intReturnCode"/><results><result name="Default" link="56" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intTerminationReason = 13;]]></script></scripts></action><action id="61" plug-in="Pactolus.Branch.1"><?xtml-editor x=646 y=961 ?><!--lock/unlock?--><results><result name="Default" link="74" stubbed="0"/><result name="unlock = 858" link="3" stubbed="0">g_intPromptLockUnLock == 858</result></results></action><action id="62" plug-in="Pactolus.Branch.1"><?xtml-editor x=567 y=1257 ?><!--mute/unmute--><results><result name="Default" link="76" stubbed="0"/><result name="unmute = 860" link="75" stubbed="0">g_intPromptMuteUnMute == 860</result></results></action><action id="63" plug-in="Pactolus.Branch.1"><?xtml-editor x=625 y=1891 ?><!--allow/disallow--><results><result name="Default" link="78" stubbed="0"/><result name="disallow= 902" link="77" stubbed="0">g_intPromptAllowDisallow == 902</result></results></action><action id="65" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1282 y=2481 ?><!--sorry not able to complete transaction--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">363</audio></play><results><result name="Default" link="95" stubbed="1"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY TRANSCATION COULD NOT BE COMPLETED.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY TRANSCATION COULD NOT BE COMPLETED, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="67" plug-in="Pactolus.Branch.1"><?xtml-editor x=611 y=2213 ?><!--selfmute/unmute--><results><result name="Default" link="79" stubbed="0"/><result name="self muted == 908" link="80" stubbed="0">g_intPromptSelfMuteUnMute == 908</result></results></action><action id="68" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1094 y=2166 ?><!--SelfUmMute--><function name="&quot;SelfUnMute&quot;" return=""/><results><result name="Default" link="101" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intPromptSelfMuteUnMute = 908;]]></script></scripts></action><action id="69" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1093 y=2322 ?><!--SelfMute--><function name="&quot;SelfMute&quot;" return=""/><results><result name="Default" link="101" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intPromptSelfMuteUnMute = 907;]]></script></scripts></action><action id="70" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=606 y=2497 ?><!--conference will be ended--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">916</audio></play><results><result name="Default" link="4" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY CONFERENCE WILL END.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY CONFERENCE WILL END, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="71" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1174 y=496 ?><!--party dropped--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">915</audio></play><results><result name="Default" link="8" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY PARTY DROPPED.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY PARTY DROPPED, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="72" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=675 y=765 ?><!--conf extended--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">879</audio></play><results><result name="Default" link="20" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY CONFERENCE EXTENDED.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY CONFERENCE EXTENDED, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="73" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=901 y=1050 ?><!--conf unlocked--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">915</audio></play><results><result name="Default" link="3" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY CONFERENCE UNLOCKED.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY CONFERENCE UNLOCKED, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="74" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=902 y=897 ?><!--conf locked--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">914</audio></play><results><result name="Default" link="5" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY CONFERENCE LOCKED.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY CONFERENCE LOCKED, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="75" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=845 y=1369 ?><!--conf unmuted--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">921</audio></play><results><result name="Default" link="19" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY CONFERENCE UNMUTED.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY CONFERENCE UNMUTED, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="76" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=846 y=1216 ?><!--conf muted--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">919</audio></play><results><result name="Default" link="18" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY CONFERENCE MUTED.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY CONFERENCE MUTED, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="77" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=844 y=2006 ?><!--conf discontinue--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">922</audio></play><results><result name="Default" link="46" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY CONFERENCE DISCONTINUE WITHOUT MOD.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY CONFERENCE DISCONTINUE WITHOUT MOD, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="78" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=845 y=1853 ?><!--conf continue--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">923</audio></play><results><result name="Default" link="45" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY CONFERENCE CONTINUE WITHOUT MOD.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY CONFERENCE CONTINUE WITHOUT MOD, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="79" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=821 y=2160 ?><!--your line muted--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">917</audio></play><results><result name="Default" link="68" stubbed="0"/><result name="Success" link="97" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY SELF MUTED.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY SELF MUTED, EXIT ON: " + Result.name);
Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="80" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=837 y=2328 ?><!--your line unmuted--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">920</audio></play><results><result name="Default" link="69" stubbed="0"/><result name="Success" link="98" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY SELF UNMUTED.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY SELF UNMUTED, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="82" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1114 y=1668 ?><!--number of call legs--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">926</audio><audio type="number">g_intCurrentNbrCallegs</audio><audio type="index">928</audio><audio type="index">929</audio></play><results><result name="Default" link="83" stubbed="0"/><result name="Success" link="101" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY CURRENT NUMBER OF CALL LEGS.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY CURRENT NUMBER OF CALL LEGS, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="83" plug-in="Pactolus.Branch.1"><?xtml-editor x=1381 y=1624 ?><!--put back in conference--><results><result name="Default" link="95" stubbed="1"/></results></action><action id="84" plug-in="Pactolus.Branch.1"><?xtml-editor x=867 y=1609 ?><!--participants > 1--><results><result name="Default" link="22" stubbed="0"/><result name="currentNbrCallLeg &gt; 1" link="82" stubbed="0">g_intCurrentNbrCallegs &gt; 1</result></results></action><action id="85" plug-in="Standard.FunctionCall.1"><?xtml-editor x=682 y=579 ?><!--getLastParty--><function name="&quot;psAPISceConfGetLastParty&quot;" return="g_intReturnCode"/><results><result name="Default" link="86" stubbed="0"/></results></action><action id="86" plug-in="Pactolus.Branch.1"><?xtml-editor x=916 y=623 ?><!--same one OR not success--><results><result name="Default" link="71" stubbed="0"/><result name="same one or not success" link="87" stubbed="0">g_strLastPartySessionID match g_strSessionID
OR g_intReturnCode != s_intSUCCESS</result></results></action><action id="87" plug-in="Pactolus.MGCPPlay.1"><?xtml-editor x=1176 y=632 ?><!--not allow--><play connection-id="g_strMSConnectionId" endpoint="g_strMSMemberEndPoint" callid="g_strMSCallId" repeat="1" timeout="s_intTIMEOUT" ms-type="s_strMediaServerType" returns="g_intReturnCode" start-play="1" interrupt="1" return-immediate="0" digit-map="" language="g_strLanguage" digits="" retry-count="" advanced-audio="1" clear-digits="1" parse-on-ms="1" terminating-digit=""><audio type="index">524</audio></play><results><result name="Default" link="101" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS PLAY NOT ALLOW.");
}
else
{
	Server.logError("ERROR: FAIL TO PLAY NOT ALLOW, EXIT ON: " + Result.name);
	Server.logError("ERROR: ConnectionID: " + Session.g_strMSConnectionId);
	Server.logError("ERROR: CallID: " + Session.g_strMSCallId);
	Server.logError("ERROR: End Point: " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="90" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=447 y=198 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Session.g_boolCurrentlyInMMenu = false;]]></script></scripts></action><action id="91" plug-in="Pactolus.CNFModifyMember.1"><?xtml-editor x=861 y=2810 ?><!--undeaf and unmute from conference--><modify-member ci="g_strConfResource" endpoint="g_strMSMemberEndPoint" connection-id="g_strMSConnectionId" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"><attributes mp="16" mt="3" ig="0" og="0" iat="-10" ias="-40" oat="-10" oas="-40" atn="3" att="2" ia="1" oa="1" te="1" le="1" tp="0" dc="1" tc="1" ate="0" se="0"/></modify-member><results><result name="Default" link="54" stubbed="0"/><result name="Success" link="92" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS MODIFIED MEMBER PUT BACK IN CONFERENCE.");
	Server.logInfo("INFO: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logInfo("INFO: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logInfo("INFO: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);
}
else
{
	Server.logError("ERROR: FAIL TO MODIFIED MEMBER PUT BACK IN CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logError("ERROR: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logError("ERROR: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);

}]]></script></scripts></action><action id="92" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1140 y=2939 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Session.g_boolCurrentlyInMMenu = false;]]></script></scripts></action><action id="95" plug-in="Pactolus.Branch.1"><?xtml-editor x=575 y=2836 ?><!--mute state?--><results><result name="Default" link="91" stubbed="0"/><result name="mute state == true" link="96" stubbed="0">g_boolMutedState == true</result></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("CURRENT MUTE STATE IS: " + Session.g_boolMutedState);]]></script></scripts></action><action id="96" plug-in="Pactolus.CNFModifyMember.1"><?xtml-editor x=863 y=3002 ?><!--undeaf ONLY from conference--><modify-member ci="g_strConfResource" endpoint="g_strMSMemberEndPoint" connection-id="g_strMSConnectionId" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"><attributes mp="16" mt="3" ig="0" og="0" iat="-10" ias="-40" oat="-10" oas="-40" atn="3" att="2" ia="1" oa="1" te="0" le="1" tp="0" dc="1" tc="1" ate="0" se="0"/></modify-member><results><result name="Default" link="54" stubbed="0"/><result name="Success" link="92" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS MODIFIED MEMBER PUT BACK IN CONFERENCE.");
	Server.logInfo("INFO: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logInfo("INFO: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logInfo("INFO: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);
}
else
{
	Server.logError("ERROR: FAIL TO MODIFIED MEMBER PUT BACK IN CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE RESOURCE END POINT " + Session.g_strConfResource);
	Server.logError("ERROR: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logError("ERROR: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);

}]]></script></scripts></action><action id="97" plug-in="Pactolus.Branch.1"><?xtml-editor x=1093 y=2248 ?><results><result name="Default" link="101" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intPromptSelfMuteUnMute = 908;
Session.g_boolMutedState = true;
Server.logInfo("CURRENT MUTE STATE IS: " + Session.g_boolMutedState);]]></script></scripts></action><action id="98" plug-in="Pactolus.Branch.1"><?xtml-editor x=1094 y=2414 ?><results><result name="Default" link="101" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_intPromptSelfMuteUnMute = 907;
Session.g_boolMutedState = false;
Server.logInfo("CURRENT MUTE STATE IS: " + Session.g_boolMutedState);]]></script></scripts></action><action id="99" plug-in="Standard.FunctionCall.1"><?xtml-editor x=692 y=121 ?><!--remove from conference
add to new conference--><function name="&quot;RemoveOldAddNew&quot;" return="g_intReturnCode"/><results><result name="Default" link="100" stubbed="0"/></results></action><action id="100" plug-in="Pactolus.Branch.1"><?xtml-editor x=921 y=121 ?><!--success?--><results><result name="Default" link="95" stubbed="1"/><result name="g_intReturnCode==s_intSUCCESS" link="6" stubbed="0">g_intReturnCode == s_intSUCCESS</result></results></action><action id="101" plug-in="Pactolus.Sleep.1"><?xtml-editor x=1847 y=1763 ?><sleep duration="1"/><results><result name="Default" link="16" stubbed="1"/></results></action></actions></function><function name="RemoveOldAddNew" start="1" returns="i4"><actions><action id="1" plug-in="Pactolus.CNFRemoveMember.1"><?xtml-editor x=60 y=188 ?><remove-member ci="g_strConfResource" endpoint="g_strMSMemberEndPoint" connection-id="g_strMSConnectionId" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"/><results><result name="Default" link="3" stubbed="0"/><result name="Success" link="2" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS REMOVE PARTY FROM OLD CONFERENCE");
}
else
{
	Server.logError("ERROR: FAIL TO REMOVE PARTY FROM OLD CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: g_strConfRerouse = " + Session.g_strConfResource);
	Server.logError("ERROR: g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: g_strMSMemberEndPoint = " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="2" plug-in="Standard.FunctionCall.1"><?xtml-editor x=303 y=227 ?><!--put caller on hold--><function name="&quot;PutCallerOnHold&quot;" return=""/><results><result name="Default" link="11" stubbed="0"/></results></action><action id="3" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=306 y=157 ?><!--s_intFAILURE--><return value="s_intFAILURE"/></action><action id="4" plug-in="Pactolus.CNFAddMember.1"><?xtml-editor x=762 y=357 ?><!--add to new conf--><add-member endpoint="g_strMSMemberEndPoint" ms-type="s_strMediaServerType" ci="g_strNewConfResource" call-id="g_strCallId" caller-sdp="g_strContent" inbound="0" returns="g_intReturnCode" timeout="s_intTIMEOUT" connection-id="g_strMSConnectionId" ms-sdp="g_strMSSDP" to="g_strFrom" from="g_strTo" cseq="g_strCSeq" via="" mgcp-call-id="g_strMSCallId" ingress-gateway="g_strRequestURI" packetization-period="s_intPacketizationPeriod" codec="0"><attributes mp="16" mt="3" ig="0" og="0" iat="-10" ias="-40" oat="-10" oas="-40" atn="3" att="2" ia="1" oa="1" te="1" le="1" tp="0" dc="1" tc="1" ate="0" se="0"/></add-member><results><result name="Default" link="9" stubbed="0"/><result name="Success" link="14" stubbed="0"/><result name="Error"/><result name="Timeout"/><result name="Resource Unavailable"/><result name="Caller Hung up"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strMSMemberEndPoint = "";
Session.g_strMSConnectionId = "";
Session.g_strMSCallId = "";
Session.g_strMSSDP = "";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS ADD A MEMBER TO A NEW CONFERENCE.");
	Server.logInfo("INFO: MS CONFERENCE RESOURCE END POINT " + Session.g_strNewConfResource);
	Server.logInfo("INFO: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logInfo("INFO: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);
	Server.logInfo("INFO: MS MEMBER CALL ID = " + Session.g_strMSCallId);
	Session.g_boolInNewConf = true;
}
else
{
	Server.logError("ERROR: FAIL TO ADD A MEMBER TO A NEW CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE RESOURCE END POINT " + Session.g_strNewConfResource);
	Server.logError("ERROR: MS MEMBER END POINT = " + Session.g_strMSMemberEndPoint);
	Server.logError("ERROR: MS MEMBER CONNECTION ID = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: MS MEMBER CALL ID = " + Session.g_strMSCallId);

}]]></script></scripts></action><action id="7" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1433 y=351 ?><!--s_intSUCCESS--><return value="s_intSUCCESS"/></action><action id="8" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1207 y=351 ?><!--put back to the old conference--><function name="&quot;AddToConference&quot;" return="g_intReturnCode"/><results><result name="Default" link="7" stubbed="0"/></results></action><action id="9" plug-in="Pactolus.CNFDeleteConf.1"><?xtml-editor x=1000 y=352 ?><delete-conference ci="g_strNewConfResource" endpoint="g_strNewConfResource" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"/><results><result name="Default" link="8" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS DELETE AN IVR CONF ADD PARTY CONFERENCE.");
	Server.logInfo("INFO: MS CONFERENCE END POINT " + Session.strAddPartyConfResource);
	Server.logInfo("INFO: MS CONFERENCE ID = " + Session.strAddPartyConfResource);
	Session.g_boolNewConfCreated = false;
}
else
{
	Server.logError("ERROR: FAIL TO DELETE AN IVR CONF ADD PARTY CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE END POINT " + Session.strAddPartyConfResource);
	Server.logError("ERROR: MS CONFERENCE ID = " + Session.strAddPartyConfResource);
}]]></script></scripts></action><action id="11" plug-in="Pactolus.CNFCreateConf.1"><?xtml-editor x=520 y=228 ?><create-conference ci="g_strNewConfResource" endpoint="g_strNewConfResource" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"><attributes mp="16" mt="16" ig="0" og="0" iat="-10" ias="-40" oat="-10" oas="-40" atn="3" att="2" ia="1" oa="1" te="1" le="1" tp="0" dc="1" tc="1" ate="0" se="0"/></create-conference><results><result name="Default" link="12" stubbed="0"/><result name="Success" link="4" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Session.g_strNewConfResource = "*";]]></script><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS CREATE A CONFERENCE IN IVR CONF ADD PARTY.");
	Server.logInfo("INFO: MS CONFERENCE END POINT " + Session.g_strNewConfResource);
	Server.logInfo("INFO: MS CONFERENCE ID = " + Session.g_strNewConfResource);
	Session.g_boolNewConfCreated = true;
}
else
{
	Server.logError("ERROR: FAIL TO CREATE A CONFERENCE IN IVR CONF ADD PARTY, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE END POINT " + Session.g_strNewConfResource);
	Server.logError("ERROR: MS CONFERENCE ID = " + Session.g_strNewConfResource);
}]]></script></scripts></action><action id="12" plug-in="Standard.FunctionCall.1"><?xtml-editor x=748 y=218 ?><!--put back to the old conference--><function name="&quot;AddToConference&quot;" return="g_intReturnCode"/><results><result name="Default" link="13" stubbed="0"/></results></action><action id="13" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=972 y=218 ?><!--s_intSUCCESS--><return value="s_intSUCCESS"/></action><action id="14" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=998 y=491 ?><!--s_intSUCCESS--><return value="s_intSUCCESS"/></action></actions></function><function name="PutBackToOldConf" start="1" returns="i4"><local-vars><var name="intReturnCode" type="i4">-99</var></local-vars><actions><action id="1" plug-in="Standard.FunctionCall.1"><?xtml-editor x=108 y=152 ?><!--put caller on hold--><function name="&quot;PutCallerOnHold&quot;" return=""/><results><result name="Default" link="2" stubbed="0"/></results></action><action id="2" plug-in="Pactolus.CNFRemoveMember.1"><?xtml-editor x=349 y=150 ?><remove-member ci="g_strNewConfResource" endpoint="g_strMSMemberEndPoint" connection-id="g_strMSConnectionId" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"/><results><result name="Default" link="3" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS REMOVE PARTY FROM CONFERENCE");
}
else
{
	Server.logError("ERROR: FAIL TO REMOVE PARTY FROM CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: g_strConfRerouse = " + Session.g_strNewConfResource);
	Server.logError("ERROR: g_strMSConnectionId = " + Session.g_strMSConnectionId);
	Server.logError("ERROR: g_strMSMemberEndPoint = " + Session.g_strMSMemberEndPoint);
}]]></script></scripts></action><action id="3" plug-in="Pactolus.CNFDeleteConf.1"><?xtml-editor x=587 y=152 ?><delete-conference ci="g_strNewConfResource" endpoint="g_strNewConfResource" ms-type="s_strMediaServerType" timeout="s_intTIMEOUT" returns="g_intReturnCode"/><results><result name="Default" link="7" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[if (Result.id == 2)
{
	Server.logInfo("INFO: SUCCESS DELETE AN IVR CONF ADD PARTY CONFERENCE.");
	Server.logInfo("INFO: MS CONFERENCE END POINT " + Session.g_strNewConfResource);
	Server.logInfo("INFO: MS CONFERENCE ID = " + Session.g_strNewConfResource);
}
else
{
	Server.logError("ERROR: FAIL TO DELETE AN IVR CONF ADD PARTY CONFERENCE, EXIT ON: " + Result.name);
	Server.logError("ERROR: MS CONFERENCE END POINT " + Session.g_strNewConfResource);
	Server.logError("ERROR: MS CONFERENCE ID = " + Session.g_strNewConfResource);
}]]></script></scripts></action><action id="6" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1048 y=151 ?><!--intReturnCode--><return value="intReturnCode"/></action><action id="7" plug-in="Standard.FunctionCall.1"><?xtml-editor x=812 y=151 ?><!--add to old conference--><function name="&quot;AddToConference&quot;" return="intReturnCode"/><results><result name="Default" link="6" stubbed="0"/></results></action></actions></function></functions><script language="javascript"><![CDATA[function formatPhone(inPhone)
{
	var number = /\d/;
	var i = 0;
	var result;
	var outPhone="";
	
	while(i < inPhone.length)
	{
		result = inPhone.charAt(i).match(number);
		if ( result != null)
		{
			outPhone += inPhone.charAt(i);
		}
		i++;
	}

	// Server.logInfo("RETURN VALUE: " + outPhone);
	return outPhone;

}]]></script><properties><property key="disable-logging" value=""/></properties><application-version>
		<revision>$Id: nms_conference.xml,v 1.5 2002/02/14 21:03:26 hlam Exp $</revision>
		<label>$Name: PCS-A-4-1-1-1-4-c6 $</label>
	</application-version>
</xtml>
