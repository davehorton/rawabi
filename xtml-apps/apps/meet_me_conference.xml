<?xml version="1.0"?>
<xtml version="1.0"><global-handlers><handler event="Pactolus.EveSipInvite.1" function="OnInvite" public="1" always-on="0"/><handler event="Pactolus.EveSipBye.1" function="OnBye" public="0" always-on="0"/></global-handlers><global-vars><var name="g_strMSSDP" type="string"></var><var name="g_strEndpoint" type="string"></var><var name="g_strConnectionId" type="string"></var><var name="g_strMgcpCallId" type="string"></var><var name="nReturnCode" type="i4">0</var><var name="str_gCallId" type="string"></var><var name="str_gTo" type="string"></var><var name="str_gFrom" type="string"></var><var name="str_gSDP" type="string"></var><var name="bool_gNormal_Invite" type="boolean">0</var><var name="bool_gRe_Invite" type="boolean">0</var><var name="bool_gSpecial_Invite" type="boolean">0</var><var name="str_gPhoneNumber" type="string"></var><var name="str_gEvent" type="string"></var><var name="bool_gHasSDP" type="boolean">0</var></global-vars><shared-vars><var name="int_sTIMEOUT" type="i2">10</var></shared-vars><functions><function name="OnInvite" start="37" returns="void"><parameters><parameter name="strAccept" type="string"/><parameter name="strAcceptEncoding" type="string"/><parameter name="strAcceptLanguage" type="string"/><parameter name="strAuthorization" type="string"/><parameter name="strCallId" type="string"/><parameter name="strContact" type="string"/><parameter name="strContent" type="string"/><parameter name="strContentDisposition" type="string"/><parameter name="strContentType" type="string"/><parameter name="strCSeq" type="string"/><parameter name="strDate" type="string"/><parameter name="strEncryption" type="string"/><parameter name="strExpires" type="string"/><parameter name="strFrom" type="string"/><parameter name="nMaxForwards" type="i2"/><parameter name="strProxyAuthorization" type="string"/><parameter name="strProxyRequire" type="string"/><parameter name="strRecordRoute" type="string"/><parameter name="strRequestURI" type="string"/><parameter name="strRequire" type="string"/><parameter name="strResponseKey" type="string"/><parameter name="strRoute" type="string"/><parameter name="strSessionExpires" type="string"/><parameter name="strSubject" type="string"/><parameter name="strSupported" type="string"/><parameter name="strTimestamp" type="string"/><parameter name="strTo" type="string"/><parameter name="strVia" type="string"/></parameters><local-vars><var name="strSignal" type="string"></var><var name="nCallers" type="i4">0</var><var name="nReturn" type="i4">0</var></local-vars><actions><action id="37" plug-in="Pactolus.SipResponse.1"><?xtml-editor x=51 y=76 ?><sip-response remove-via="0" reliable="0"><call-id>strCallId</call-id><cseq>strCSeq</cseq><from>strFrom</from><status>"SIP/2.0 100 Trying"</status><to>strTo</to><via>strVia</via></sip-response><results><result name="Default" link="6"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results></action><action id="1" plug-in="Pactolus.MSConnect.1"><?xtml-editor x=900 y=147 ?><!--Connect caller to a conferencing endpoint on the media server--><cc-connect call-id="strCallId" caller-sdp="strContent" capability="2" inbound="1" returns="" timeout="" endpoint="g_strEndpoint" connection-id="g_strConnectionId" ms-sdp="g_strMSSDP" to="strTo" from="strFrom" cseq="strCSeq" via="strVia" mgcp-call-id="g_strMgcpCallId" ingress-gateway="" packetization-period="10" codec="0"/><results><result name="Default" link="4"/><result name="Success" link="5"/><result name="Error"/><result name="Timeout"/><result name="Resource Unavailable"/><result name="Caller Hung up"/></results><scripts><script language="javascript" timing="first"><![CDATA[// save call id, in case of re-invite
Session.str_gCallId = Session.strCallId;
Server.logInfo("**** FIRST CALLER INITIAL INVITE WITH NORMAL SDP. ****");]]></script></scripts></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1746 y=123 ?><!--Caller is now in conference.--><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("Successfully created connection to conferencing endpoint") ;]]></script></scripts></action><action id="3" plug-in="Standard.EndSession.1"><?xtml-editor x=1693 y=353 ?></action><action id="4" plug-in="Pactolus.SipResponse.1"><?xtml-editor x=1237 y=362 ?><!--Error path: Resource not available, so send "Busy Here" back to caller--><sip-response remove-via="0" reliable="0"><call-id>strCallId</call-id><cseq>strCSeq</cseq><from>strFrom</from><status>"SIP/2.0 486 Busy Here"</status><to>strTo</to><via>strVia</via></sip-response><results><result name="Default" link="38"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results></action><action id="5" plug-in="Pactolus.MGCPNotifyRequest.1"><?xtml-editor x=1227 y=131 ?><!--PLAY welcome prompt--><rqnt connection-id="g_strConnectionId" endpoint="g_strEndpoint" callid="g_strMgcpCallId" timeout="int_sTIMEOUT" returns="nReturnCode"><parameters><quarantine step="0" loop="0" process="0" discard="0"/><events><![CDATA[]]></events><signals><![CDATA[strSignal]]></signals><digit-map><![CDATA[]]></digit-map></parameters></rqnt><results><result name="Default"/><result name="Success" link="9"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[
//play prompt number 13 to this caller only
Session.strSignal="A/pa@"+Session.g_strConnectionId+"(an=13)";
//note: if we wanted to play it to the whole conference we would have done it like this:
//Session.strSignal="A/pa@*(an=13)";
]]></script></scripts></action><action id="6" plug-in="Pactolus.Branch.1"><?xtml-editor x=278 y=76 ?><!--Normal
Re-Invite
Special--><results><result name="Default" link="7"/><result name="Normal Invite" link="15">bool_gNormal_Invite == true</result><result name="Special Invite" link="20">bool_gSpecial_Invite == true</result><result name="Re-Invite" link="31">bool_gRe_Invite == true</result></results><scripts><script language="javascript" timing="first"><![CDATA[if (Session.str_gCallId == Session.strCallId)
{
	Session.bool_gRe_Invite = true;
}
else if (Session.strContent == null)
{
	Session.bool_gSpecial_Invite = true;
}
else
{
	var mysdp = new Sdp(Session.strContent);
	var hold = /0.0.0.0/
	var result = mysdp.connection.address.match(hold);
	if (result != null)
	{
	   Session.bool_gSpecial_Invite = true;
	}
	else
	{
	   Session.bool_gNormal_Invite = true;
    }
}
var to = new SipTo(Session.strTo);
Session.str_gPhoneNumber = to.url.user;

Server.logInfo("**** CHECK WHAT KIND OF INVITE IT IS. ****");]]></script></scripts></action><action id="7" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=535 y=72 ?><!--Do Nothing--><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("**** DON'T KNOW ABOUT THIS INVITE DO NOTHING. ****");]]></script></scripts></action><action id="8" plug-in="Pactolus.MGCPCreate.1"><?xtml-editor x=814 y=617 ?><crcx callid="g_strMgcpCallId" remote-sdp="" mode="inactive" capability="2" returns="nReturnCode" endpoint="g_strEndpoint" connection-id="g_strConnectionId" local-sdp="g_strMSSDP" packetization-period="10" codec="0" timeout=""><parameters><quarantine step="0" loop="0" process="0" discard="0"/><events><![CDATA[]]></events><signals><![CDATA[]]></signals><digit-map><![CDATA[]]></digit-map></parameters></crcx><results><result name="Default"/><result name="Success" link="10"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("**** INITIAL INVITE WITH SPECIAL SDP. ****");
Server.logInfo("**** CREATE MEDIASERVER CONNECTION. ****");]]></script></scripts></action><action id="9" plug-in="Pactolus.UserFunction.1"><?xtml-editor x=1475 y=130 ?><!--Set endpoint--><user-function process="&quot;PACTOLUS_ps_c_adaptor&quot;" function="&quot;set_endpoint&quot;" timeout="int_sTIMEOUT" return="nReturn" async="0"><parameter>str_gPhoneNumber</parameter><parameter>g_strEndpoint</parameter></user-function><results><result name="Default" link="2"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results></action><action id="10" plug-in="Pactolus.SipResponse.1"><?xtml-editor x=1025 y=611 ?><sip-response remove-via="0" reliable="0"><call-id>strCallId</call-id><content>g_strMSSDP</content><content-type>"application/sdp"</content-type><cseq>strCSeq</cseq><from>strFrom</from><status>"SIP/2.0 200 OK"</status><to>strTo</to><via>strVia</via></sip-response><results><result name="Default" link="11"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results></action><action id="11" plug-in="Standard.WaitEvent.1"><?xtml-editor x=1249 y=605 ?><!--wait for the ACK from CRCX--><wait timeout="int_sTIMEOUT" recv-name="str_gEvent"><msg name="Pactolus.EveSipAck.1"><parameter></parameter><parameter></parameter><parameter></parameter><parameter>str_gSDP</parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter></msg></wait><results><result name="Default" link="39"/><result name="Success" link="12"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("**** WAIT FOR ACK FROM INITIAL INVITE WITH SPECIAL SDP. ****");]]></script></scripts></action><action id="12" plug-in="Pactolus.Branch.1"><?xtml-editor x=1471 y=713 ?><!--has SDP?--><results><result name="Default" link="13"/><result name="HAS SDP" link="21">bool_gHasSDP == true</result></results><scripts><script language="javascript" timing="first"><![CDATA[if (Session.str_gSDP != null)
{
	Session.bool_gHasSDP = true;
}]]></script></scripts></action><action id="13" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1712 y=607 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("**** GOT ACK WITHOUT SDP, JUST RETURN.****");]]></script></scripts></action><action id="14" plug-in="Standard.EndSession.1"><?xtml-editor x=1675 y=532 ?></action><action id="15" plug-in="Pactolus.UserFunction.1"><?xtml-editor x=564 y=204 ?><!--Get endpoint--><user-function process="&quot;PACTOLUS_ps_c_adaptor&quot;" function="&quot;get_endpoint&quot;" timeout="int_sTIMEOUT" return="nReturn" async="0"><parameter>str_gPhoneNumber</parameter><parameter>g_strEndpoint</parameter><parameter>nCallers</parameter></user-function><results><result name="Default"><?xtml-editor visible=no?></result><result name="Success"><?xtml-editor visible=no?></result><result name="Error"><?xtml-editor visible=no?></result><result name="Timeout"><?xtml-editor visible=no?></result><result name="first caller" link="1">nReturn == 1</result><result name="first caller is in progress" link="15">nReturn == 2</result><result name="got endpoint" link="16">nReturn == 0</result></results></action><action id="16" plug-in="Pactolus.MSConnect.1"><?xtml-editor x=813 y=363 ?><!--Connect caller to a conferencing endpoint on the media server--><cc-connect call-id="strCallId" caller-sdp="strContent" capability="2" inbound="1" returns="" timeout="" endpoint="g_strEndpoint" connection-id="g_strConnectionId" ms-sdp="g_strMSSDP" to="strTo" from="strFrom" cseq="strCSeq" via="strVia" mgcp-call-id="g_strMgcpCallId" ingress-gateway="" packetization-period="10" codec="0"/><results><result name="Default" link="4"/><result name="Success" link="19"/><result name="Error"/><result name="Timeout"/><result name="Resource Unavailable"/><result name="Caller Hung up"/></results><scripts><script language="javascript" timing="first"><![CDATA[// save call id, in case of re-invite
Session.str_gCallId = Session.strCallId;
Server.logInfo("**** INITIAL INVITE WITH NORMAL SDP. ****");]]></script></scripts></action><action id="19" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1025 y=468 ?><!--Caller is now in conference.--><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("Successfully created connection to conferencing endpoint") ;]]></script></scripts></action><action id="20" plug-in="Pactolus.UserFunction.1"><?xtml-editor x=528 y=652 ?><!--Get endpoint--><user-function process="&quot;PACTOLUS_ps_c_adaptor&quot;" function="&quot;get_endpoint&quot;" timeout="int_sTIMEOUT" return="nReturn" async="0"><parameter>str_gPhoneNumber</parameter><parameter>g_strEndpoint</parameter><parameter>nCallers</parameter></user-function><results><result name="Default"><?xtml-editor visible=no?></result><result name="Success"><?xtml-editor visible=no?></result><result name="Error"><?xtml-editor visible=no?></result><result name="Timeout"><?xtml-editor visible=no?></result><result name="first caller" link="8">nReturn == 1</result><result name="first caller is in progress" link="20">nReturn == 2</result><result name="got endpoint" link="24">nReturn == 0</result></results></action><action id="21" plug-in="Pactolus.MGCPModify.1"><?xtml-editor x=1741 y=694 ?><mdcx connection-id="g_strConnectionId" endpoint="g_strEndpoint" callid="g_strMgcpCallId" returns="nReturnCode" remote-sdp="str_gSDP" mode="conference" packetization-period="10" codec="0" timeout=""><parameters><quarantine step="0" loop="0" process="0" discard="0"/><events><![CDATA[]]></events><signals><![CDATA[]]></signals><digit-map><![CDATA[]]></digit-map></parameters></mdcx><results><result name="Default"/><result name="Success" link="23"/><result name="Error"/><result name="Timeout"/></results></action><action id="22" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=2191 y=699 ?><!--Caller is now in conference.--><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("Successfully created connection to conferencing endpoint") ;]]></script></scripts></action><action id="23" plug-in="Pactolus.UserFunction.1"><?xtml-editor x=1960 y=700 ?><!--Set endpoint--><user-function process="&quot;PACTOLUS_ps_c_adaptor&quot;" function="&quot;set_endpoint&quot;" timeout="int_sTIMEOUT" return="nReturn" async="0"><parameter>str_gPhoneNumber</parameter><parameter>g_strEndpoint</parameter></user-function><results><result name="Default" link="22"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results></action><action id="24" plug-in="Pactolus.MGCPCreate.1"><?xtml-editor x=824 y=834 ?><crcx callid="g_strMgcpCallId" remote-sdp="" mode="inactive" capability="2" returns="nReturnCode" endpoint="g_strEndpoint" connection-id="g_strConnectionId" local-sdp="g_strMSSDP" packetization-period="10" codec="0" timeout=""><parameters><quarantine step="0" loop="0" process="0" discard="0"/><events><![CDATA[]]></events><signals><![CDATA[]]></signals><digit-map><![CDATA[]]></digit-map></parameters></crcx><results><result name="Default"/><result name="Success" link="25"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("**** INITIAL INVITE WITH SPECIAL SDP. ****");
Server.logInfo("**** CREATE MEDIASERVER CONNECTION. ****");]]></script></scripts></action><action id="25" plug-in="Pactolus.SipResponse.1"><?xtml-editor x=1035 y=828 ?><sip-response remove-via="0" reliable="0"><call-id>strCallId</call-id><content>g_strMSSDP</content><content-type>"application/sdp"</content-type><cseq>strCSeq</cseq><from>strFrom</from><status>"SIP/2.0 200 OK"</status><to>strTo</to><via>strVia</via></sip-response><results><result name="Default" link="26"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results></action><action id="26" plug-in="Standard.WaitEvent.1"><?xtml-editor x=1259 y=822 ?><!--wait for the ACK from CRCX--><wait timeout="int_sTIMEOUT" recv-name="str_gEvent"><msg name="Pactolus.EveSipAck.1"><parameter></parameter><parameter></parameter><parameter></parameter><parameter>str_gSDP</parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter><parameter></parameter></msg></wait><results><result name="Default" link="40"/><result name="Success" link="27"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("**** WAIT FOR ACK FROM INITIAL INVITE WITH SPECIAL SDP. ****");]]></script></scripts></action><action id="27" plug-in="Pactolus.Branch.1"><?xtml-editor x=1478 y=993 ?><!--has SDP?--><results><result name="Default" link="28"/><result name="HAS SDP" link="30">bool_gHasSDP == true</result></results><scripts><script language="javascript" timing="first"><![CDATA[if (Session.str_gSDP != null)
{
	Session.bool_gHasSDP = true;
}]]></script></scripts></action><action id="28" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1732 y=984 ?><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("**** GOT ACK WITHOUT SDP, JUST RETURN.****");]]></script></scripts></action><action id="29" plug-in="Standard.EndSession.1"><?xtml-editor x=1709 y=826 ?></action><action id="30" plug-in="Pactolus.MGCPModify.1"><?xtml-editor x=1763 y=1073 ?><mdcx connection-id="g_strConnectionId" endpoint="g_strEndpoint" callid="g_strMgcpCallId" returns="nReturnCode" remote-sdp="str_gSDP" mode="conference" packetization-period="10" codec="0" timeout=""><parameters><quarantine step="0" loop="0" process="0" discard="0"/><events><![CDATA[]]></events><signals><![CDATA[]]></signals><digit-map><![CDATA[]]></digit-map></parameters></mdcx><results><result name="Default"/><result name="Success" link="28"/><result name="Error"/><result name="Timeout"/></results></action><action id="31" plug-in="Pactolus.UserFunction.1"><?xtml-editor x=504 y=1059 ?><!--Get endpoint--><user-function process="&quot;PACTOLUS_ps_c_adaptor&quot;" function="&quot;get_endpoint&quot;" timeout="int_sTIMEOUT" return="nReturn" async="0"><parameter>str_gPhoneNumber</parameter><parameter>g_strEndpoint</parameter><parameter>nCallers</parameter></user-function><results><result name="Default"><?xtml-editor visible=no?></result><result name="Success"><?xtml-editor visible=no?></result><result name="Error"><?xtml-editor visible=no?></result><result name="Timeout"><?xtml-editor visible=no?></result><result name="first caller" link="33">nReturn == 1</result><result name="first caller is in progress" link="31">nReturn == 2</result><result name="got endpoint" link="36">nReturn == 0</result></results></action><action id="33" plug-in="Pactolus.MGCPModify.1"><?xtml-editor x=780 y=1035 ?><mdcx connection-id="g_strConnectionId" endpoint="g_strEndpoint" callid="g_strMgcpCallId" returns="nReturnCode" remote-sdp="str_gSDP" mode="conference" packetization-period="10" codec="0" timeout=""><parameters><quarantine step="0" loop="0" process="0" discard="0"/><events><![CDATA[]]></events><signals><![CDATA[]]></signals><digit-map><![CDATA[]]></digit-map></parameters></mdcx><results><result name="Default"/><result name="Success" link="35"/><result name="Error"/><result name="Timeout"/></results></action><action id="34" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=1243 y=1145 ?><!--Caller is now in conference.--><return value=""/><scripts><script language="javascript" timing="first"><![CDATA[Server.logInfo("Successfully created connection to conferencing endpoint") ;]]></script></scripts></action><action id="35" plug-in="Pactolus.UserFunction.1"><?xtml-editor x=1007 y=1036 ?><!--Set endpoint--><user-function process="&quot;PACTOLUS_ps_c_adaptor&quot;" function="&quot;set_endpoint&quot;" timeout="int_sTIMEOUT" return="nReturn" async="0"><parameter>str_gPhoneNumber</parameter><parameter>g_strEndpoint</parameter></user-function><results><result name="Default" link="34"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results></action><action id="36" plug-in="Pactolus.MGCPModify.1"><?xtml-editor x=788 y=1178 ?><mdcx connection-id="g_strConnectionId" endpoint="g_strEndpoint" callid="g_strMgcpCallId" returns="nReturnCode" remote-sdp="str_gSDP" mode="conference" packetization-period="10" codec="0" timeout=""><parameters><quarantine step="0" loop="0" process="0" discard="0"/><events><![CDATA[]]></events><signals><![CDATA[]]></signals><digit-map><![CDATA[]]></digit-map></parameters></mdcx><results><result name="Default"/><result name="Success" link="34"/><result name="Error"/><result name="Timeout"/></results></action><action id="38" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1473 y=355 ?><!--Clean Up--><function name="&quot;CleanUp&quot;" return=""/><results><result name="Default" link="3"/></results></action><action id="39" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1471 y=530 ?><!--Clean Up--><function name="&quot;CleanUp&quot;" return=""/><results><result name="Default" link="14"/></results></action><action id="40" plug-in="Standard.FunctionCall.1"><?xtml-editor x=1492 y=822 ?><!--Clean Up--><function name="&quot;CleanUp&quot;" return=""/><results><result name="Default" link="29"/></results></action></actions></function><function name="OnBye" start="1" returns="void"><parameters><parameter name="strAccept" type="string"/><parameter name="strAcceptEncoding" type="string"/><parameter name="strAcceptLanguage" type="string"/><parameter name="strAuthorization" type="string"/><parameter name="strCallId" type="string"/><parameter name="strCSeq" type="string"/><parameter name="strDate" type="string"/><parameter name="strEncryption" type="string"/><parameter name="strFrom" type="string"/><parameter name="nMaxForwards" type="i2"/><parameter name="strProxyAuthorization" type="string"/><parameter name="strProxyRequire" type="string"/><parameter name="strRecordRoute" type="string"/><parameter name="strRequestURI" type="string"/><parameter name="strRequire" type="string"/><parameter name="strResponseKey" type="string"/><parameter name="strRoute" type="string"/><parameter name="strSupported" type="string"/><parameter name="strTimestamp" type="string"/><parameter name="strTo" type="string"/><parameter name="strVia" type="string"/></parameters><local-vars><var name="nReturn" type="i4">0</var></local-vars><actions><action id="1" plug-in="Pactolus.MGCPDelete.1"><?xtml-editor x=64 y=45 ?><!--Tear down caller's connection to the conference--><dlcx connection-id="g_strConnectionId" endpoint="g_strEndpoint" callid="g_strMgcpCallId" timeout="2" returns=""><parameters><quarantine step="0" loop="0" process="0" discard="0"/><events><![CDATA[]]></events><signals><![CDATA[]]></signals><digit-map><![CDATA[]]></digit-map></parameters></dlcx><results><result name="Default" link="4"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results></action><action id="2" plug-in="Pactolus.SipResponse.1"><?xtml-editor x=567 y=38 ?><!--Send 200 OK back to caller--><sip-response remove-via="0" reliable="0"><call-id>strCallId</call-id><cseq>strCSeq</cseq><from>strFrom</from><status>"SIP/2.0 200 OK"</status><to>strTo</to><via>strVia</via></sip-response><results><result name="Default" link="3"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results></action><action id="3" plug-in="Standard.EndSession.1"><?xtml-editor x=798 y=82 ?></action><action id="4" plug-in="Pactolus.UserFunction.1"><?xtml-editor x=311 y=41 ?><!--Release endpoint--><user-function process="&quot;PACTOLUS_ps_c_adaptor&quot;" function="&quot;release_endpoint&quot;" timeout="int_sTIMEOUT" return="nReturn" async="0"><parameter>str_gPhoneNumber</parameter></user-function><results><result name="Default" link="2"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results></action></actions></function><function name="CleanUp" start="1" returns="void"><actions><action id="1" plug-in="Pactolus.MGCPDelete.1"><?xtml-editor x=128 y=104 ?><!--Tear down caller's connection to the conference--><dlcx connection-id="g_strConnectionId" endpoint="g_strEndpoint" callid="g_strMgcpCallId" timeout="2" returns=""><parameters><quarantine step="0" loop="0" process="0" discard="0"/><events><![CDATA[]]></events><signals><![CDATA[]]></signals><digit-map><![CDATA[]]></digit-map></parameters></dlcx><results><result name="Default" link="2"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results></action><action id="2" plug-in="Pactolus.UserFunction.1"><?xtml-editor x=375 y=100 ?><!--Release endpoint--><user-function process="&quot;PACTOLUS_ps_c_adaptor&quot;" function="&quot;release_endpoint&quot;" timeout="int_sTIMEOUT" return="nReturnCode" async="0"><parameter>str_gPhoneNumber</parameter></user-function><results><result name="Default" link="4"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results></action><action id="4" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=617 y=170 ?><return value=""/></action></actions></function></functions><script language="javascript"><![CDATA[function stripIpAddress( strOldIp )
{
	var matchStr = new RegExp( "([0-9]{1,}).([0-9]{1,}).([0-9]{1,}).([0-9]{1,2})");
	
	var result = matchStr.exec( strOldIp ) ;
	
	return result[0] ;
}]]></script></xtml>
