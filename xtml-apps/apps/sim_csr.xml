<?xml version="1.0"?>
<xtml version="1.0"><events><event name="LoginCSRIVRResponse" display="LoginCSRIVRResponse"><parameter name="strACDControllerIP" type="string"/><parameter name="intACDControllerPort" type="i4"/><parameter name="strTransactionId" type="string"/><parameter name="intReturnCode" type="i4"/><parameter name="strReturnMsg" type="string"/></event></events><global-handlers><handler event="Pactolus.EveSipInvite.1" function="OnInvite" public="0" always-on="0"/><handler event="Standard.OnServiceLoad.1" function="OnServiceLoad" public="0" always-on="0"/><handler event="Standard.OnSessionStart.1" function="OnSessionStart" public="0" always-on="0"/><handler event="Standard.OnTimer.1" function="OnTimer" public="0" always-on="0"/></global-handlers><global-vars><var name="g_strACDControllerIP" type="string">127.0.0.1</var><var name="g_strTransactionID" type="string"></var><var name="g_intACDControllerPort" type="i4">7905</var><var name="g_longACDUserId" type="i8">1</var><var name="g_strEventReceived" type="string"></var></global-vars><shared-vars><var name="s_strMSG_LOGIN_REQUEST" type="string">LoginCSRIVR</var><var name="s_intSoapPort" type="i4">0</var><var name="s_intFAILURE" type="i4">-1</var><var name="s_intTIMEOUT" type="i4">45</var><var name="s_strLocalHost" type="string"></var><var name="s_strMSType" type="string"></var><var name="s_intPacketizationPeriod" type="i4">0</var><var name="s_strMSRetryFlag" type="string"></var><var name="s_strMSG_LOGOUT_REQUEST" type="string">LogoutCSRIVR</var><var name="s_intSUCCESS" type="i4">0</var></shared-vars><functions><function name="OnSessionStart" start="4" returns="void"><parameters><parameter name="strSessionId" type="string" pass="byref"/><parameter name="nIteration" type="i4" pass="byref"/></parameters><local-vars><var name="f_intTimeout" type="i4">5</var><var name="f_intReturnCode" type="i4">-1</var><var name="f_intSleepDur" type="i4">10</var><var name="f_strTransactionID" type="string"></var><var name="f_strReturnMsg" type="string"></var><var name="f_strACDControllerIP" type="string"></var><var name="f_intACDControllerPort" type="i4">0</var><var name="f_intCSR_ALREADY_LOGIN" type="i4">-2</var><var name="f_bTryAgain" type="boolean">1</var></local-vars><actions><action id="4" plug-in="Pactolus.Sleep.1"><?xtml-editor x=19 y=29 ?><sleep duration="f_intSleepDur"/><results><result name="Default" link="6" stubbed="0"/></results></action><action id="5" plug-in="Standard.WaitEvent.1"><?xtml-editor x=423 y=114 ?><!--LoginCSRIVRResponse--><wait timeout="f_intTimeout" recv-name="g_strEventReceived"><msg name="LoginCSRIVRResponse"><parameter>f_strACDControllerIP</parameter><parameter>f_intACDControllerPort</parameter><parameter>f_strTransactionID</parameter><parameter>f_intReturnCode</parameter><parameter>f_strReturnMsg</parameter></msg></wait><results><result name="Default" link="7" stubbed="0"/><result name="Success" link="8" stubbed="0"/><result name="Error"/><result name="Timeout"/></results><scripts><script language="javascript" timing="last"><![CDATA[Server.enableEvents(true);]]></script></scripts></action><action id="6" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=203 y=32 ?><!--s_strMSG_LOGIN_REQUEST--><SOAP destination-ip="g_strACDControllerIP" transaction="g_strTransactionID" message-name="s_strMSG_LOGIN_REQUEST" destination-port="g_intACDControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;ACDUserId&quot;" value="g_longACDUserId"/><parameter tag="&quot;SoapPort&quot;" value="s_intSoapPort"/></SOAP><results><result name="Default" link="7" stubbed="0"/><result name="Success" link="5" stubbed="0"/><result name="Error"/></results><scripts><script language="javascript" timing="first"><![CDATA[var strTransId = new String(Server.getUTCTime());
Session.g_strTransactionID = strTransId;
Server.enableEvents(false);]]></script></scripts></action><action id="7" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=766 y=126 ?><!--s_intFAILURE--><return value="s_intFAILURE"/><scripts><script language="javascript" timing="first"><![CDATA[Server.enableEvents(true);]]></script></scripts></action><action id="8" plug-in="Pactolus.Branch.1"><?xtml-editor x=21 y=291 ?><!--CSR already login--><results><result name="Default" link="12" stubbed="0"/><result name="f_intReturnCode == -2" link="16" stubbed="0">f_intReturnCode == f_intCSR_ALREADY_LOGIN
AND f_bTryAgain == true</result></results></action><action id="11" plug-in="Pactolus.Branch.1"><?xtml-editor x=681 y=283 ?><!--success?--><results><result name="Default" link="7" stubbed="0"/><result name="f_intReturnCode == 0" link="6" stubbed="0">f_intReturnCode == s_intSUCCESS</result></results></action><action id="12" plug-in="Pactolus.Sleep.1"><?xtml-editor x=159 y=461 ?><sleep duration="f_intSleepDur"/><results><result name="Default" link="15" stubbed="0"/></results></action><action id="13" plug-in="Standard.EndSession.1"><?xtml-editor x=645 y=478 ?></action><action id="15" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=390 y=432 ?><!--s_strMSG_LOGOUT_REQUEST--><SOAP destination-ip="g_strACDControllerIP" transaction="g_strTransactionID" message-name="s_strMSG_LOGOUT_REQUEST" destination-port="g_intACDControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;ACDUserId&quot;" value="g_longACDUserId"/></SOAP><results><result name="Default" link="13" stubbed="0"/><result name="Success"/><result name="Error"/></results></action><action id="16" plug-in="Pactolus.SOAPMessage.1"><?xtml-editor x=376 y=293 ?><!--s_strMSG_LOGOUT_REQUEST--><SOAP destination-ip="g_strACDControllerIP" transaction="g_strTransactionID" message-name="s_strMSG_LOGOUT_REQUEST" destination-port="g_intACDControllerPort" destination-type="4" destination-session="" waiting-session-selected=""><parameter tag="&quot;ACDUserId&quot;" value="g_longACDUserId"/></SOAP><results><result name="Default" link="11" stubbed="0"/><result name="Success"/><result name="Error"/></results></action></actions></function><function name="OnInvite" start="1" returns="void"><parameters><parameter name="strAccept" type="string" pass="byref"/><parameter name="strAcceptEncoding" type="string" pass="byref"/><parameter name="strAcceptLanguage" type="string" pass="byref"/><parameter name="strAuthorization" type="string" pass="byref"/><parameter name="strCallId" type="string" pass="byref"/><parameter name="strContact" type="string" pass="byref"/><parameter name="strContent" type="string" pass="byref"/><parameter name="strContentDisposition" type="string" pass="byref"/><parameter name="strContentType" type="string" pass="byref"/><parameter name="strCSeq" type="string" pass="byref"/><parameter name="strDate" type="string" pass="byref"/><parameter name="strEncryption" type="string" pass="byref"/><parameter name="strExpires" type="string" pass="byref"/><parameter name="strFrom" type="string" pass="byref"/><parameter name="nMaxForwards" type="i2" pass="byref"/><parameter name="strProxyAuthorization" type="string" pass="byref"/><parameter name="strProxyRequire" type="string" pass="byref"/><parameter name="strRecordRoute" type="string" pass="byref"/><parameter name="strRequestURI" type="string" pass="byref"/><parameter name="strRequire" type="string" pass="byref"/><parameter name="strResponseKey" type="string" pass="byref"/><parameter name="strRoute" type="string" pass="byref"/><parameter name="strSessionExpires" type="string" pass="byref"/><parameter name="strSubject" type="string" pass="byref"/><parameter name="strSupported" type="string" pass="byref"/><parameter name="strTimestamp" type="string" pass="byref"/><parameter name="strTo" type="string" pass="byref"/><parameter name="strVia" type="string" pass="byref"/></parameters><actions><action id="1" plug-in="Pactolus.Sleep.1"><?xtml-editor x=131 y=151 ?><sleep duration="1"/><results><result name="Default" link="2" stubbed="0"/></results></action><action id="2" plug-in="Standard.EndSession.1"><?xtml-editor x=365 y=173 ?></action></actions></function><function name="OnTimer" start="1" returns="void"><parameters><parameter name="nTimerId" type="i4" pass="byref"/></parameters><actions><action id="1" plug-in="Pactolus.Branch.1"><?xtml-editor x=63 y=206 ?><results><result name="Default" link="2" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[
Server.logInfo("17");]]></script></scripts></action><action id="2" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=478 y=235 ?><return value=""/></action></actions></function><function name="OnServiceLoad" start="1" returns="void"><parameters><parameter name="strAppName" type="string" pass="byref"/><parameter name="nSessionCount" type="i2" pass="byref"/><parameter name="nMaxIterations" type="i2" pass="byref"/><parameter name="nServerId" type="i2" pass="byref"/></parameters><actions><action id="1" plug-in="Pactolus.Branch.1"><?xtml-editor x=260 y=396 ?><results><result name="Default" link="3" stubbed="0"/></results><scripts><script language="javascript" timing="first"><![CDATA[if (Session.s_strLocalHost.length <= 0)
{
	Session.s_strLocalHost = Server.ipAddress;
	Server.logInfo("WARNING:  NO SETTING FOR LOCAL HOST IP ADDRESS.  USE DEFAULT: " + Session.s_strLocalHost);
}
Session.s_intSoapPort = Server.soapPort;
Session.s_strSoapIP = Server.soapAddress;
Session.s_strApplicationName = Session._appName;]]></script></scripts></action><action id="2" plug-in="Pactolus.UserFunction.1"><?xtml-editor x=36 y=295 ?><!--GET PSX IP from config--><user-function process="&quot;PACTOLUS_ps_c_adaptor&quot;" function="&quot;get_property&quot;" timeout="s_intTIMEOUT" return="" async="0"><parameter>"appserver-logical-ip"</parameter><parameter>s_strLocalHost</parameter><parameter>"media-server-type"</parameter><parameter>s_strMSType</parameter><parameter>"packetization-period"</parameter><parameter>s_intPacketizationPeriod</parameter><parameter>"ms-connect-retry"</parameter><parameter>s_strMSRetryFlag</parameter></user-function><results><result name="Default" link="1" stubbed="0"/><result name="Success"/><result name="Error"/><result name="Timeout"/></results></action><action id="3" plug-in="Standard.FunctionReturn.1"><?xtml-editor x=461 y=398 ?><return value=""/></action></actions></function></functions><properties><property key="disable-logging" value=""/></properties></xtml>
